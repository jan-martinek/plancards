{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","global","factory","define","amd","mod","autosize","this","assign","ta","changeOverflow","value","width","style","offsetWidth","overflowY","getParentOverflows","el","arr","parentNode","Element","scrollTop","push","node","resize","originalHeight","height","overflows","docTop","document","documentElement","endHeight","scrollHeight","heightOffset","clientWidth","forEach","update","styleHeight","Math","round","parseFloat","computed","window","getComputedStyle","actualHeight","boxSizing","offsetHeight","cachedHeight","evt","createEvent","dispatchEvent","err","nodeName","map","has","pageResize","destroy","removeEventListener","Object","keys","key","bind","overflowX","wordWrap","addEventListener","set","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","init","methods","get","Map","values","indexOf","delete","index","splice","name","Event","bubbles","initEvent","options","Array","prototype","x","2","decodeComponents","components","split","decodeURIComponent","join","left","slice","right","concat","decode","input","tokens","match","singleMatcher","customDecodeURIComponent","replaceMap","%FE%FF","%FF%FE","multiMatcher","exec","result","entries","replace","RegExp","encodedURI","TypeError","3","exprEval","Instruction","type","undefined","unaryInstruction","IOP1","binaryInstruction","IOP2","ternaryInstruction","IOP3","simplify","unaryOps","binaryOps","ternaryOps","n1","n2","n3","nstack","newexpression","item","INUMBER","IVAR","hasOwnProperty","pop","IEXPR","shift","IMEMBER","substitute","variable","expr","j","replitem","expritem","evaluate","functions","v","IFUNCALL","argCount","args","unshift","apply","expressionToString","toJS","escapeValue","JSON","stringify","contains","array","obj","getSymbols","symbols","withMembers","prevVar","Expression","parser","Token","TokenStream","expression","pos","current","consts","savedPosition","savedCurrent","getOptionName","op","optionNameMap","ParserState","tokenStream","nextToken","next","savedNextToken","allowMemberAccess","add","b","Number","sub","mul","div","equal","notEqual","greaterThan","lessThan","greaterThanEqual","lessThanEqual","andOperator","Boolean","orOperator","inOperator","sinh","exp","cosh","tanh","Infinity","asinh","log","sqrt","acosh","atanh","log10","LOG10E","neg","not","trunc","ceil","floor","random","factorial","gamma","isInteger","isFinite","NaN","res","PI","sin","twoN","threeN","fourN","fiveN","pow","E","GAMMA_P","GAMMA_G","stringLength","String","hypot","sum","larg","arguments","arg","abs","condition","cond","yep","nope","Parser","cos","tan","asin","acos","atan","ln","lg","-","+","!","*","/","%","^","||","==","!=",">","<",">=","<=","and","or","in","?","fac","min","max","pyt","atan2","if","true","false","toString","parse","vars","variables","filter","toJSFunction","param","Function","TOP","newToken","save","restore","isWhitespace","isComment","isRadixInteger","isNumber","isOperator","isString","isParen","isComma","isNamedOp","isConst","isName","parseError","charAt","startPos","quote","rawString","substring","unescape","c","toUpperCase","toLowerCase","str","isOperatorEnabled","hasLetter","codePointPattern","buffer","codePoint","test","fromCharCode","parseInt","backslash","radix","validDigit","valid","resetPos","foundDot","foundDigits","acceptSign","validExponent",":","optionName","operators","getCoordinates","column","line","newline","msg","coords","tokenMatches","token","isArray","accept","expect","parseAtom","instr","parseExpression","parseConditionalExpression","parseOrExpression","trueBranch","falseBranch","parseAndExpression","parseComparison","COMPARISON_OPERATORS","parseAddSub","ADD_SUB_OPERATORS","parseTerm","TERM_OPERATORS","parseFactor","parseExponential","parsePostfixExpression","parseFunctionCall","parseMemberExpression","parseArgumentList","parserState","sharedParser","4","saveAs","view","navigator","userAgent","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","event","MouseEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","revoke","file","revokeObjectURL","remove","dispatch","filesaver","event_types","listener","auto_bom","blob","Blob","FileSaver","no_auto_bom","object_url","force","dispatch_all","readyState","INIT","createObjectURL","href","download","DONE","FileReader","reader","onloadend","url","open","location","readAsDataURL","fs_error","FS_proto","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","content","5","moment","hooks","hookCallback","isObject","isObjectEmpty","k","isUndefined","isDate","Date","fn","hasOwnProp","extend","valueOf","createUTC","format","locale","strict","createLocalOrUTC","utc","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","meridiem","rfc2822","weekdayMismatch","getParsingFlags","m","_pf","isValid","_isValid","flags","parsedParts","some$1","isNowValid","_d","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","copyConfig","to","from","prop","val","_isAMomentObject","_i","_f","_l","_tzm","_isUTC","_offset","_locale","momentProperties","Moment","config","updateInProgress","updateOffset","isMoment","absFloor","number","toInt","argumentForCoercion","coercedNumber","compareArrays","array1","array2","dontConvert","len","lengthDiff","diffs","warn","suppressDeprecationWarnings","console","deprecate","firstTime","deprecationHandler","stack","deprecateSimple","deprecations","isFunction","mergeConfigs","parentConfig","childConfig","Locale","addUnitAlias","unit","shorthand","lowerCase","aliases","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","addUnitPriority","priority","priorities","getPrioritizedUnits","unitsObj","sort","makeGetSet","keepTime","set$1","mom","zeroFill","targetLength","forceSign","absNumber","zerosToFill","substr","addFormatToken","padded","ordinal","callback","func","formatTokenFunctions","localeData","removeFormattingTokens","makeFormatFunction","formattingTokens","output","formatMoment","expandFormat","formatFunctions","invalidDate","localFormattingTokens","lastIndex","longDateFormat","addRegexToken","regex","strictRegex","regexes","isStrict","getParseRegexForToken","unescapeFormat","regexEscape","matched","p1","p2","p3","p4","addParseToken","addWeekParseToken","_w","addTimeToArrayFromToken","_a","daysInMonth","year","month","UTC","getUTCDate","handleStrictParse","monthName","ii","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","monthsShort","months","indexOf$1","setMonth","dayOfMonth","monthsParse","date","getSetMonth","computeMonthsParse","cmpLenRev","shortPieces","longPieces","mixedPieces","_monthsRegex","_monthsShortRegex","_monthsStrictRegex","_monthsShortStrictRegex","daysInYear","isLeapYear","createDate","y","d","h","M","ms","getFullYear","setFullYear","createUTCDate","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","dayOfYear","weekOfYear","resWeek","weekOffset","weeksInYear","weekOffsetNext","parseWeekday","weekdaysParse","parseIsoWeekday","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","day","weekdaysMin","weekdaysShort","weekdays","computeWeekdaysParse","minp","shortp","longp","minPieces","_weekdaysRegex","_weekdaysShortRegex","_weekdaysMinRegex","_weekdaysStrictRegex","_weekdaysShortStrictRegex","_weekdaysMinStrictRegex","hFormat","hours","lowercase","minutes","matchMeridiem","_meridiemParse","normalizeLocale","chooseLocale","names","loadLocale","oldLocale","locales","globalLocale","_abbr","getSetGlobalLocale","data","getLocale","defineLocale","baseConfig","abbr","_config","parentLocale","localeFamilies","checkOverflow","MONTH","DATE","YEAR","HOUR","MINUTE","SECOND","MILLISECOND","_overflowDayOfYear","_overflowWeeks","WEEK","_overflowWeekday","WEEKDAY","configFromISO","allowTime","dateFormat","timeFormat","tzFormat","string","extendedIsoRegex","basicIsoRegex","isoDates","isoTimes","tzRegex","configFromStringAndFormat","configFromRFC2822","dayFormat","timezone","timezoneIndex","timezones"," GMT"," EDT"," EST"," CDT"," CST"," MDT"," MST"," PDT"," PST","basicRfcRegex","momentDay","getDay","configFromString","aspNetJsonRegex","createFromInputFallback","defaults","currentDateArray","nowValue","now","_useUTC","getUTCMonth","getMonth","getDate","configFromArray","currentDate","yearToUse","dayOfYearFromWeekInfo","_dayOfYear","_nextDay","setUTCMinutes","getUTCMinutes","w","weekYear","temp","weekdayOverflow","GG","W","createLocal","_week","curWeek","gg","ISO_8601","RFC_2822","parsedInput","skipped","totalParsedInputLength","_meridiem","meridiemFixWrap","hour","isPm","meridiemHour","isPM","configFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","score","configFromObject","minute","second","millisecond","createFromConfig","prepareConfig","preparse","configFromInput","isUTC","pickBy","moments","isDurationValid","ordering","unitHasDecimal","Duration","duration","years","quarters","quarter","weeks","days","seconds","milliseconds","_milliseconds","_days","_months","_data","_bubble","isDuration","absRound","offset","separator","utcOffset","sign","offsetFromString","matcher","matches","parts","chunkOffset","cloneWithOffset","model","diff","clone","setTime","local","getDateOffset","getTimezoneOffset","isUtc","createDuration","ret","diffRes","aspNetRegex","isoRegex","parseIso","momentsDifference","inp","positiveMomentsDifference","base","other","isAfter","isBefore","createAdder","direction","period","dur","tmp","addSubtract","isAdding","monthDiff","adjust","wholeMonthDiff","anchor","newLocaleData","addWeekYearFormatToken","getter","getSetWeekYearHelper","weeksTarget","setWeekAll","dayOfYearData","preParsePostFormat","get$1","field","setter","listMonthsImpl","out","listWeekdaysImpl","localeSorted","addSubtract$1","absCeil","daysToMonths","monthsToDays","makeAs","alias","as","makeGetter","substituteTimeAgo","withoutSuffix","isFuture","relativeTime","relativeTime$1","posNegDuration","thresholds","ss","toISOString$1","abs$1","Y","D","total","asSeconds","some","fun","keys$1","defaultCalendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","defaultLongDateFormat","LTS","LT","L","LL","LLL","LLLL","defaultDayOfMonthOrdinalParse","defaultRelativeTime","future","past","mm","hh","dd","MM","yy","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchTimestamp","matchWord","monthsShortRegex","monthsRegex","MONTHS_IN_FORMAT","defaultLocaleMonths","defaultLocaleMonthsShort","defaultMonthsShortRegex","defaultMonthsRegex","parseTwoDigitYear","getSetYear","defaultLocaleWeek","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","kInput","_isPm","pos1","pos2","defaultLocaleMeridiemParse","getSetHour","calendar","dayOfMonthOrdinalParse","meridiemParse","prototypeMin","prototypeMax","invalid","subtract","defaultFormat","defaultFormatUtc","lang","isoWeekYear","_dayOfMonthOrdinalParse","_ordinalParse","_dayOfMonthOrdinalParseLenient","getSetDayOfMonth","getSetMinute","getSetSecond","getSetMillisecond","proto","time","formats","sod","startOf","calendarFormat","asFloat","that","zoneDelta","delta","endOf","inputString","postformat","humanize","fromNow","toNow","invalidAt","localInput","isBetween","inclusivity","isSame","inputMs","isSameOrAfter","isSameOrBefore","parsingFlags","prioritized","isoWeekday","toArray","toObject","toDate","toISOString","inspect","zone","isLocal","prefix","suffix","toJSON","unix","creationData","isoWeek","isoWeeks","weekInfo","isoWeeksInYear","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","parseZone","tZone","hasAlignedHourOffset","isDST","isUtcOffset","zoneAbbr","zoneName","dates","isDSTShifted","_isDSTShifted","proto$1","_calendar","_longDateFormat","formatUpper","_invalidDate","_ordinal","_relativeTime","pastFuture","source","isFormat","_monthsShort","_monthsParseExact","firstDayOfYear","firstDayOfWeek","_weekdays","_weekdaysMin","_weekdaysShort","_weekdaysParseExact","_fullWeekdaysParse","isLower","langData","mathAbs","asMilliseconds","asMinutes","asHours","asDays","asWeeks","asMonths","asYears","proto$2","monthsFromDays","withSuffix","toIsoString","version","setHookCallback","updateLocale","relativeTimeRounding","roundingFunction","relativeTimeThreshold","threshold","limit","myMoment","6","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","target","7","root","req","Pikaday","hasMoment","hasEventListeners","sto","addEvent","capture","attachEvent","removeEvent","detachEvent","trim","hasClass","cn","className","addClass","removeClass","isWeekend","getDaysInMonth","setToStartOfDay","setHours","compareDates","overwrite","hasProp","fireEvent","eventName","ev","createEventObject","adjustCalendar","bound","position","reposition","defaultDate","setDefaultDate","firstDay","formatStrict","minDate","maxDate","yearRange","showWeekNumber","pickWholeWeek","minYear","maxYear","minMonth","maxMonth","startRange","endRange","isRTL","yearSuffix","showMonthAfterYear","showDaysInNextAndPreviousMonths","enableSelectionDaysInNextAndPreviousMonths","numberOfMonths","mainCalendar","container","blurFieldOnSelect","i18n","previousMonth","nextMonth","theme","events","onSelect","onOpen","onClose","onDraw","renderDayName","opts","renderDay","ariaSelected","isEmpty","isDisabled","isToday","isSelected","hasEvent","isInRange","isStartRange","isEndRange","renderWeek","onejan","renderRow","isRowSelected","reverse","renderBody","rows","renderHead","renderTitle","instance","refYear","randId","monthHtml","yearHtml","_o","isMinYear","isMaxYear","html","prev","renderTable","_onMouseDown","_v","srcElement","prevMonth","setDate","getAttribute","hide","blur","_c","preventDefault","returnValue","_onChange","gotoMonth","gotoYear","_onKeyChange","isVisible","keyCode","adjustDate","_onInputChange","firedBy","show","_onInputFocus","_onInputClick","_onInputBlur","pEl","activeElement","_b","_onClick","onchange","setAttribute","trigger","createElement","appendChild","body","insertBefore","nextSibling","defDate","gotoDate","disableWeekends","disableDayFn","nom","setMinDate","setMaxDate","fallback","toDateString","getMoment","setMoment","preventOnSelect","draw","newCalendar","calendars","firstVisibleDate","lastVisibleDate","visibleDate","adjustCalendars","newDay","difference","gotoToday","setStartRange","setEndRange","_y","_m","render","innerHTML","focus","adjustPosition","viewportWidth","viewportHeight","top","clientRect","innerWidth","innerHeight","clientHeight","pageYOffset","getBoundingClientRect","pageXOffset","bottom","offsetLeft","offsetTop","offsetParent","before","row","yearOfPreviousMonth","yearOfNextMonth","daysInPreviousMonth","cells","after","isWeekSelected","dayNumber","monthNumber","yearNumber","dayConfig","removeChild","8","encoderForArrayFormat","arrayFormat","encode","parserForArrayFormat","accumulator","strictUriEncode","encodeURIComponent","keysSorter","objectAssign","decodeComponent","extract","formatter","create","reduce","val2","decode-uri-component","object-assign","strict-uri-encode","9","charCodeAt","10","getCode","_require","wrap","assemble","block","./util","11","12","13","read","querySelector","classList","./../fields/fields","14","15","querySelectorAll","acc","price","write","hideEmpty","items","lastEmpty","display","_require2","header","totals","repeat","16","17","18","19","pollFieldType","wrapper","fieldName","allArray","fields","pollNames","pollFormulas","fill","fillFieldType","inputs","descriptions","fillNames","fillFormulas","formulas","all","dateinput","dateoutput","indicator","pricelist","subhead","poll","dataset","./../util.js","./_dateinput","./_dateoutput","./_header","./_indicator","./_number","./_pricelist","./_separator","./_subhead","./_sum","20","updateCardGently","tools","insertAdjacentElement","21","activate","22","decorate","_typeof","Symbol","iterator","constructor","pikaday","23","24","parseNumber","numeric","isFloat","25","26","bool","desc","text","activeField","./_bool","./_date","./_desc","./_text","27","cel","classNames","nameInput","appendFormula","formula","label","_label","28","run","ui","./ui","29","wrapExport","title","unwrapExport","fileSaver","importCardFromFile","readAsText","onload","importCardFromUrl","request","XMLHttpRequest","send","onreadystatechange","status","responseText","exportCard","contents","today","file-saver","30","closeCard","getElementById","showDashboard","setDisplay","showCard","id","initMode","toggleMode","mode","detectedMode","modeInitializations","createAddBlockTool","addBlockTool","blocks","blockLink","initBlockTools","button","blockActions","initExportCard","nameEl","store","pollData","cardExport","info","initImportCard","files","loadCard","query","queryString","search","cardurl","fragment","createDocumentFragment","updateCard","initCloseCard","preventSubmit","findAncestor","edit","removeAttribute","swapBlocks","previous","previousSibling","removeBlock","addBlock","addBlockType","newBlock","./blocks/blocks","./store","query-string","31","makeArray","nodelist","parent","parentElement","card","updateFormulaResults","collectVariables","customFunctions","timer","daysAfter","daysBefore","clearTimeout","./fields/fields","expr-eval"],"mappings":"CAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,IAAIS,YAAYb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAkD,IAAI,IAA1CL,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAAvb,EAA4ba,GAAG,SAAST,EAAQU,EAAOJ,IAMvd,SAAWK,EAAQC,GAClB,GAAsB,mBAAXC,QAAyBA,OAAOC,IAC1CD,QAAQ,UAAW,UAAWD,QACxB,QAAuB,IAAZN,QAA6C,IAAXI,EACnDE,EAAQN,EAASI,OACX,CACN,IAAIK,GACHT,YAEDM,EAAQG,EAAIT,QAASS,GACrBJ,EAAOK,SAAWD,EAAIT,SAVxB,CAYGW,KAAM,SAAUX,EAASI,GAC3B,aA2CA,SAASQ,EAAOC,GA6Bf,SAASC,EAAeC,GAKtB,IAAIC,EAAQH,EAAGI,MAAMD,MACrBH,EAAGI,MAAMD,MAAQ,MAGjBH,EAAGK,YAEHL,EAAGI,MAAMD,MAAQA,EAGlBH,EAAGI,MAAME,UAAYJ,EAGtB,SAASK,EAAmBC,GAG3B,IAFA,IAAIC,KAEGD,GAAMA,EAAGE,YAAcF,EAAGE,sBAAsBC,SAClDH,EAAGE,WAAWE,WACjBH,EAAII,MACHC,KAAMN,EAAGE,WACTE,UAAWJ,EAAGE,WAAWE,YAG3BJ,EAAKA,EAAGE,WAGT,OAAOD,EAGR,SAASM,IACR,IAAIC,EAAiBhB,EAAGI,MAAMa,OAC1BC,EAAYX,EAAmBP,GAC/BmB,EAASC,SAASC,iBAAmBD,SAASC,gBAAgBT,UAElEZ,EAAGI,MAAMa,OAAS,GAElB,IAAIK,EAAYtB,EAAGuB,aAAeC,EAEV,IAApBxB,EAAGuB,cAMPvB,EAAGI,MAAMa,OAASK,EAAY,KAG9BG,EAAczB,EAAGyB,YAGjBP,EAAUQ,QAAQ,SAAUlB,GAC3BA,EAAGM,KAAKF,UAAYJ,EAAGI,YAGpBO,IACHC,SAASC,gBAAgBT,UAAYO,IAfrCnB,EAAGI,MAAMa,OAASD,EAmBpB,SAASW,IACRZ,IAEA,IAAIa,EAAcC,KAAKC,MAAMC,WAAW/B,EAAGI,MAAMa,SAC7Ce,EAAWC,OAAOC,iBAAiBlC,EAAI,MAGvCmC,EAAsC,gBAAvBH,EAASI,UAA8BP,KAAKC,MAAMC,WAAWC,EAASf,SAAWjB,EAAGqC,aAmBvG,GAfIF,IAAiBP,EACO,WAAvBI,EAAS1B,YACZL,EAAe,UACfc,IACAoB,EAAsC,gBAAvBH,EAASI,UAA8BP,KAAKC,MAAMC,WAAWE,OAAOC,iBAAiBlC,EAAI,MAAMiB,SAAWjB,EAAGqC,cAIlG,WAAvBL,EAAS1B,YACZL,EAAe,UACfc,IACAoB,EAAsC,gBAAvBH,EAASI,UAA8BP,KAAKC,MAAMC,WAAWE,OAAOC,iBAAiBlC,EAAI,MAAMiB,SAAWjB,EAAGqC,cAI1HC,IAAiBH,EAAc,CAClCG,EAAeH,EACf,IAAII,EAAMC,EAAY,oBACtB,IACCxC,EAAGyC,cAAcF,GAChB,MAAOG,MA1HX,GAAK1C,GAAOA,EAAG2C,UAA4B,aAAhB3C,EAAG2C,WAA2BC,EAAIC,IAAI7C,GAAjE,CAEA,IAAIwB,EAAe,KACfC,EAAczB,EAAGyB,YACjBa,EAAe,KA6HfQ,EAAa,WACZ9C,EAAGyB,cAAgBA,GACtBE,KAIEoB,EAAU,SAAW3C,GACxB6B,OAAOe,oBAAoB,SAAUF,GAAY,GACjD9C,EAAGgD,oBAAoB,QAASrB,GAAQ,GACxC3B,EAAGgD,oBAAoB,QAASrB,GAAQ,GACxC3B,EAAGgD,oBAAoB,mBAAoBD,GAAS,GACpD/C,EAAGgD,oBAAoB,kBAAmBrB,GAAQ,GAElDsB,OAAOC,KAAK9C,GAAOsB,QAAQ,SAAUyB,GACpCnD,EAAGI,MAAM+C,GAAO/C,EAAM+C,KAGvBP,EAAY,OAAE5C,IACZoD,KAAKpD,GACPiB,OAAQjB,EAAGI,MAAMa,OACjBF,OAAQf,EAAGI,MAAMW,OACjBT,UAAWN,EAAGI,MAAME,UACpB+C,UAAWrD,EAAGI,MAAMiD,UACpBC,SAAUtD,EAAGI,MAAMkD,WAGpBtD,EAAGuD,iBAAiB,mBAAoBR,GAAS,GAK7C,qBAAsB/C,GAAM,YAAaA,GAC5CA,EAAGuD,iBAAiB,QAAS5B,GAAQ,GAGtCM,OAAOsB,iBAAiB,SAAUT,GAAY,GAC9C9C,EAAGuD,iBAAiB,QAAS5B,GAAQ,GACrC3B,EAAGuD,iBAAiB,kBAAmB5B,GAAQ,GAC/C3B,EAAGI,MAAMiD,UAAY,SACrBrD,EAAGI,MAAMkD,SAAW,aAEpBV,EAAIY,IAAIxD,GACP+C,QAASA,EACTpB,OAAQA,IAtKT,WACC,IAAIvB,EAAQ6B,OAAOC,iBAAiBlC,EAAI,MAEnB,aAAjBI,EAAMW,OACTf,EAAGI,MAAMW,OAAS,OACS,SAAjBX,EAAMW,SAChBf,EAAGI,MAAMW,OAAS,cAIlBS,EADuB,gBAApBpB,EAAMgC,YACQL,WAAW3B,EAAMqD,YAAc1B,WAAW3B,EAAMsD,gBAElD3B,WAAW3B,EAAMuD,gBAAkB5B,WAAW3B,EAAMwD,mBAGhEC,MAAMrC,KACTA,EAAe,GAGhBG,IAsJDmC,IAGD,SAASf,EAAQ/C,GAChB,IAAI+D,EAAUnB,EAAIoB,IAAIhE,GAClB+D,GACHA,EAAQhB,UAIV,SAASpB,EAAO3B,GACf,IAAI+D,EAAUnB,EAAIoB,IAAIhE,GAClB+D,GACHA,EAAQpC,SAtOV,IAAIiB,EAAqB,mBAARqB,IAAqB,IAAIA,IAAQ,WACjD,IAAIf,KACAgB,KAEJ,OACCrB,IAAK,SAAaM,GACjB,OAAOD,EAAKiB,QAAQhB,IAAQ,GAE7Ba,IAAK,SAAab,GACjB,OAAOe,EAAOhB,EAAKiB,QAAQhB,KAE5BK,IAAK,SAAaL,EAAKjD,IACK,IAAvBgD,EAAKiB,QAAQhB,KAChBD,EAAKrC,KAAKsC,GACVe,EAAOrD,KAAKX,KAGdkE,OAAU,SAAiBjB,GAC1B,IAAIkB,EAAQnB,EAAKiB,QAAQhB,GACrBkB,GAAS,IACZnB,EAAKoB,OAAOD,EAAO,GACnBH,EAAOI,OAAOD,EAAO,MArByB,GA2B9C7B,EAAc,SAAqB+B,GACtC,OAAO,IAAIC,MAAMD,GAAQE,SAAS,KAEnC,IACC,IAAID,MAAM,QACT,MAAOnG,GAERmE,EAAc,SAAU+B,GACvB,IAAIhC,EAAMnB,SAASoB,YAAY,SAE/B,OADAD,EAAImC,UAAUH,GAAM,GAAM,GACnBhC,GAqMT,IAAI1C,EAAW,KAGO,oBAAXoC,QAA6D,mBAA5BA,OAAOC,mBAClDrC,EAAW,SAAUW,GACpB,OAAOA,IAECuC,QAAU,SAAUvC,GAC5B,OAAOA,GAERX,EAAS8B,OAAS,SAAUnB,GAC3B,OAAOA,MAGRX,EAAW,SAAUW,EAAImE,GAMxB,OALInE,GACHoE,MAAMC,UAAUnD,QAAQtC,KAAKoB,EAAGnB,OAASmB,GAAMA,GAAK,SAAUsE,GAC7D,OAAO/E,EAAO+E,KAGTtE,IAECuC,QAAU,SAAUvC,GAI5B,OAHIA,GACHoE,MAAMC,UAAUnD,QAAQtC,KAAKoB,EAAGnB,OAASmB,GAAMA,GAAKuC,GAE9CvC,GAERX,EAAS8B,OAAS,SAAUnB,GAI3B,OAHIA,GACHoE,MAAMC,UAAUnD,QAAQtC,KAAKoB,EAAGnB,OAASmB,GAAMA,GAAKmB,GAE9CnB,IAITjB,EAAOJ,QAAUU,SAEZkF,GAAG,SAASlG,EAAQU,EAAOJ,GACjC,aAKA,SAAS6F,EAAiBC,EAAYC,GACrC,IAEC,OAAOC,mBAAmBF,EAAWG,KAAK,KACzC,MAAO1C,IAIT,GAA0B,IAAtBuC,EAAW5F,OACd,OAAO4F,EAGRC,EAAQA,GAAS,EAGjB,IAAIG,EAAOJ,EAAWK,MAAM,EAAGJ,GAC3BK,EAAQN,EAAWK,MAAMJ,GAE7B,OAAON,MAAMC,UAAUW,OAAOpG,QAAS4F,EAAiBK,GAAOL,EAAiBO,IAGjF,SAASE,EAAOC,GACf,IACC,OAAOP,mBAAmBO,GACzB,MAAOhD,GAGR,IAAK,IAFDiD,EAASD,EAAME,MAAMC,GAEhB/G,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAClC4G,EAAQV,EAAiBW,EAAQ7G,GAAGsG,KAAK,IAEzCO,EAASD,EAAME,MAAMC,GAGtB,OAAOH,GAIT,SAASI,EAAyBJ,GAQjC,IANA,IAAIK,GACHC,SAAU,KACVC,SAAU,MAGPL,EAAQM,EAAaC,KAAKT,GACvBE,GAAO,CACb,IAECG,EAAWH,EAAM,IAAMT,mBAAmBS,EAAM,IAC/C,MAAOlD,GACR,IAAI0D,EAASX,EAAOG,EAAM,IAEtBQ,IAAWR,EAAM,KACpBG,EAAWH,EAAM,IAAMQ,GAIzBR,EAAQM,EAAaC,KAAKT,GAI3BK,EAAW,OAAS,IAIpB,IAAK,IAFDM,EAAUpD,OAAOC,KAAK6C,GAEjBjH,EAAI,EAAGA,EAAIuH,EAAQhH,OAAQP,IAAK,CAExC,IAAIqE,EAAMkD,EAAQvH,GAClB4G,EAAQA,EAAMY,QAAQ,IAAIC,OAAOpD,EAAK,KAAM4C,EAAW5C,IAGxD,OAAOuC,EA3ER,IACIG,EAAgB,IAAIU,OADZ,eAC0B,MAClCL,EAAe,IAAIK,OAAO,kBAAoB,MA4ElDhH,EAAOJ,QAAU,SAAUqH,GAC1B,GAA0B,iBAAfA,EACV,MAAM,IAAIC,UAAU,6DAA+DD,EAAa,KAGjG,IAIC,OAHAA,EAAaA,EAAWF,QAAQ,MAAO,KAGhCnB,mBAAmBqB,GACzB,MAAO9D,GAER,OAAOoD,EAAyBU,UAI5BE,GAAG,SAAS7H,EAAQU,EAAOJ,IAChC,SAAUK,EAAQC,GACC,iBAAZN,QAA0C,IAAXI,EAAyBA,EAAOJ,QAAUM,IAC9D,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAOD,GACnDD,EAAOmH,SAAWlH,IAHpB,CAIEK,KAAM,WAAe,aAWvB,SAAS8G,EAAYC,EAAM3G,GACzBJ,KAAK+G,KAAOA,EACZ/G,KAAKI,WAAmB4G,IAAV5G,GAAiC,OAAVA,EAAkBA,EAAQ,EAoBjE,SAAS6G,EAAiB7G,GACxB,OAAO,IAAI0G,EAAYI,EAAM9G,GAG/B,SAAS+G,EAAkB/G,GACzB,OAAO,IAAI0G,EAAYM,EAAMhH,GAG/B,SAASiH,EAAmBjH,GAC1B,OAAO,IAAI0G,EAAYQ,EAAMlH,GAG/B,SAASmH,EAAS1B,EAAQ2B,EAAUC,EAAWC,EAAYtD,GAKzD,IAAK,IAFDuD,EAAIC,EAAIC,EACR5I,EAHA6I,KACAC,KAGK/I,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAAK,CACtC,IAAIgJ,EAAOnC,EAAO7G,GACd+H,EAAOiB,EAAKjB,KAChB,GAAIA,IAASkB,EACXH,EAAO/G,KAAKiH,QACP,GAAIjB,IAASmB,GAAQ9D,EAAO+D,eAAeH,EAAK5H,OACrD4H,EAAO,IAAIlB,EAAYmB,EAAS7D,EAAO4D,EAAK5H,QAC5C0H,EAAO/G,KAAKiH,QACP,GAAIjB,IAASK,GAAQU,EAAOvI,OAAS,EAC1CqI,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MACZnJ,EAAIwI,EAAUO,EAAK5H,OACnB4H,EAAO,IAAIlB,EAAYmB,EAAShJ,EAAE0I,EAAGvH,MAAOwH,EAAGxH,QAC/C0H,EAAO/G,KAAKiH,QACP,GAAIjB,IAASO,GAAQQ,EAAOvI,OAAS,EAC1CsI,EAAKC,EAAOM,MACZR,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MACO,MAAfJ,EAAK5H,MACP0H,EAAO/G,KAAK4G,EAAGvH,MAAQwH,EAAGxH,MAAQyH,EAAGzH,QAErCnB,EAAIyI,EAAWM,EAAK5H,OACpB4H,EAAO,IAAIlB,EAAYmB,EAAShJ,EAAE0I,EAAGvH,MAAOwH,EAAGxH,MAAOyH,EAAGzH,QACzD0H,EAAO/G,KAAKiH,SAET,GAAIjB,IAASG,GAAQY,EAAOvI,OAAS,EAC1CoI,EAAKG,EAAOM,MACZnJ,EAAIuI,EAASQ,EAAK5H,OAClB4H,EAAO,IAAIlB,EAAYmB,EAAShJ,EAAE0I,EAAGvH,QACrC0H,EAAO/G,KAAKiH,QACP,GAAIjB,IAASsB,GAAO,CACzB,KAAOP,EAAOvI,OAAS,GACrBwI,EAAchH,KAAK+G,EAAOQ,SAE5BP,EAAchH,KAAK,IAAI+F,EAAYuB,GAAOd,EAASS,EAAK5H,MAAOoH,EAAUC,EAAWC,EAAYtD,UAC3F,GAAI2C,IAASwB,IAAWT,EAAOvI,OAAS,EAC7CoI,EAAKG,EAAOM,MACZN,EAAO/G,KAAK,IAAI+F,EAAYmB,EAASN,EAAGvH,MAAM4H,EAAK5H,aAC9C,CACL,KAAO0H,EAAOvI,OAAS,GACrBwI,EAAchH,KAAK+G,EAAOQ,SAE5BP,EAAchH,KAAKiH,IAGvB,KAAOF,EAAOvI,OAAS,GACrBwI,EAAchH,KAAK+G,EAAOQ,SAE5B,OAAOP,EAGT,SAASS,EAAW3C,EAAQ4C,EAAUC,GAEpC,IAAK,IADDX,KACK/I,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAAK,CACtC,IAAIgJ,EAAOnC,EAAO7G,GACd+H,EAAOiB,EAAKjB,KAChB,GAAIA,IAASmB,GAAQF,EAAK5H,QAAUqI,EAClC,IAAK,IAAIE,EAAI,EAAGA,EAAID,EAAK7C,OAAOtG,OAAQoJ,IAAK,CAC3C,IACIC,EADAC,EAAWH,EAAK7C,OAAO8C,GAGzBC,EADEC,EAAS9B,OAASG,EACTD,EAAiB4B,EAASzI,OAC5ByI,EAAS9B,OAASK,EAChBD,EAAkB0B,EAASzI,OAC7ByI,EAAS9B,OAASO,EAChBD,EAAmBwB,EAASzI,OAE5B,IAAI0G,EAAY+B,EAAS9B,KAAM8B,EAASzI,OAErD2H,EAAchH,KAAK6H,QAEZ7B,IAASsB,GAClBN,EAAchH,KAAK,IAAI+F,EAAYuB,GAAOG,EAAWR,EAAK5H,MAAOqI,EAAUC,KAE3EX,EAAchH,KAAKiH,GAGvB,OAAOD,EAGT,SAASe,EAASjD,EAAQ6C,EAAMtE,GAI9B,IAAK,IAFDuD,EAAIC,EAAIC,EACR5I,EAFA6I,KAGK9I,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAAK,CACtC,IAAIgJ,EAAOnC,EAAO7G,GACd+H,EAAOiB,EAAKjB,KAChB,GAAIA,IAASkB,EACXH,EAAO/G,KAAKiH,EAAK5H,YACZ,GAAI2G,IAASK,EAClBQ,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MACZnJ,EAAIyJ,EAAKjB,UAAUO,EAAK5H,OACxB0H,EAAO/G,KAAK9B,EAAE0I,EAAIC,SACb,GAAIb,IAASO,EAClBO,EAAKC,EAAOM,MACZR,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MACO,MAAfJ,EAAK5H,MACP0H,EAAO/G,KAAK+H,EAASnB,EAAKC,EAAKC,EAAIa,EAAMtE,KAEzCnF,EAAIyJ,EAAKhB,WAAWM,EAAK5H,OACzB0H,EAAO/G,KAAK9B,EAAE0I,EAAIC,EAAIC,UAEnB,GAAId,IAASmB,EAClB,GAAIF,EAAK5H,SAASsI,EAAKK,UACrBjB,EAAO/G,KAAK2H,EAAKK,UAAUf,EAAK5H,YAC3B,CACL,IAAI4I,EAAI5E,EAAO4D,EAAK5H,OACpB,QAAU4G,IAANgC,EAGF,MAAM,IAAI9J,MAAM,uBAAyB8I,EAAK5H,OAF9C0H,EAAO/G,KAAKiI,QAKX,GAAIjC,IAASG,EAClBS,EAAKG,EAAOM,MACZnJ,EAAIyJ,EAAKlB,SAASQ,EAAK5H,OACvB0H,EAAO/G,KAAK9B,EAAE0I,SACT,GAAIZ,IAASkC,GAAU,CAG5B,IAFA,IAAIC,EAAWlB,EAAK5H,MAChB+I,KACGD,KAAa,GAClBC,EAAKC,QAAQtB,EAAOM,OAGtB,KADAnJ,EAAI6I,EAAOM,OACLiB,QAASpK,EAAEK,KAGf,MAAM,IAAIJ,MAAMD,EAAI,sBAFpB6I,EAAO/G,KAAK9B,EAAEoK,WAAMrC,EAAWmC,SAI5B,GAAIpC,IAASsB,GAClBP,EAAO/G,KAAKiH,EAAK5H,WACZ,CAAA,GAAI2G,IAASwB,GAIlB,MAAM,IAAIrJ,MAAM,sBAHhByI,EAAKG,EAAOM,MACZN,EAAO/G,KAAK4G,EAAGK,EAAK5H,SAKxB,GAAI0H,EAAOvI,OAAS,EAClB,MAAM,IAAIL,MAAM,+BAElB,OAAO4I,EAAO,GAGhB,SAASwB,EAAmBzD,EAAQ0D,GAIlC,IAAK,IAFD5B,EAAIC,EAAIC,EACR5I,EAFA6I,KAGK9I,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAAK,CACtC,IAAIgJ,EAAOnC,EAAO7G,GACd+H,EAAOiB,EAAKjB,KAChB,GAAIA,IAASkB,EACe,iBAAfD,EAAK5H,OAAsB4H,EAAK5H,MAAQ,EACjD0H,EAAO/G,KAAK,IAAMiH,EAAK5H,MAAQ,KAE/B0H,EAAO/G,KAAKyI,EAAYxB,EAAK5H,aAE1B,GAAI2G,IAASK,EAClBQ,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MACZnJ,EAAI+I,EAAK5H,MACLmJ,EACQ,MAANtK,EACF6I,EAAO/G,KAAK,YAAc4G,EAAK,KAAOC,EAAK,KAC5B,QAAN3I,EACT6I,EAAO/G,KAAK,MAAQ4G,EAAK,SAAWC,EAAK,KAC1B,OAAN3I,EACT6I,EAAO/G,KAAK,MAAQ4G,EAAK,SAAWC,EAAK,KAC1B,OAAN3I,EACT6I,EAAO/G,KAAK,WAAa4G,EAAK,cAAgBC,EAAK,MACpC,OAAN3I,EACT6I,EAAO/G,KAAK,IAAM4G,EAAK,QAAUC,EAAK,KACvB,OAAN3I,EACT6I,EAAO/G,KAAK,IAAM4G,EAAK,QAAUC,EAAK,KAEtCE,EAAO/G,KAAK,IAAM4G,EAAK,IAAM1I,EAAI,IAAM2I,EAAK,KAG9CE,EAAO/G,KAAK,IAAM4G,EAAK,IAAM1I,EAAI,IAAM2I,EAAK,UAEzC,GAAIb,IAASO,EAAM,CAKxB,GAJAO,EAAKC,EAAOM,MACZR,EAAKE,EAAOM,MACZT,EAAKG,EAAOM,MAEF,OADVnJ,EAAI+I,EAAK5H,OAIP,MAAM,IAAIlB,MAAM,sBAFhB4I,EAAO/G,KAAK,IAAM4G,EAAK,MAAQC,EAAK,MAAQC,EAAK,UAI9C,GAAId,IAASmB,EAClBJ,EAAO/G,KAAKiH,EAAK5H,YACZ,GAAI2G,IAASG,EAClBS,EAAKG,EAAOM,MAEF,OADVnJ,EAAI+I,EAAK5H,QACc,MAANnB,EACf6I,EAAO/G,KAAK,IAAM9B,EAAI0I,EAAK,KAClB4B,EACC,QAANtK,EACF6I,EAAO/G,KAAK,KAAY4G,EAAK,KACd,MAAN1I,EACT6I,EAAO/G,KAAK,OAAS4G,EAAK,KAE1BG,EAAO/G,KAAK9B,EAAI,IAAM0I,EAAK,KAEd,MAAN1I,EACT6I,EAAO/G,KAAK,IAAM4G,EAAK,MAEvBG,EAAO/G,KAAK,IAAM9B,EAAI,IAAM0I,EAAK,UAE9B,GAAIZ,IAASkC,GAAU,CAG5B,IAFA,IAAIC,EAAWlB,EAAK5H,MAChB+I,KACGD,KAAa,GAClBC,EAAKC,QAAQtB,EAAOM,OAEtBnJ,EAAI6I,EAAOM,MACXN,EAAO/G,KAAK9B,EAAI,IAAMkK,EAAK7D,KAAK,MAAQ,UACnC,GAAIyB,IAASwB,GAClBZ,EAAKG,EAAOM,MACZN,EAAO/G,KAAK4G,EAAK,IAAMK,EAAK5H,WACvB,CAAA,GAAI2G,IAASsB,GAGlB,MAAM,IAAInJ,MAAM,sBAFhB4I,EAAO/G,KAAK,IAAMuI,EAAmBtB,EAAK5H,MAAOmJ,GAAQ,MAK7D,GAAIzB,EAAOvI,OAAS,EAClB,MAAM,IAAIL,MAAM,+BAElB,OAAO4I,EAAO,GAGhB,SAAS0B,EAAYR,GACnB,MAAiB,iBAANA,EACFS,KAAKC,UAAUV,GAAGxC,QAAQ,UAAW,WAAWA,QAAQ,UAAW,WAErEwC,EAGT,SAASW,EAASC,EAAOC,GACvB,IAAK,IAAI7K,EAAI,EAAGA,EAAI4K,EAAMrK,OAAQP,IAChC,GAAI4K,EAAM5K,KAAO6K,EACf,OAAO,EAGX,OAAO,EAGT,SAASC,EAAWjE,EAAQkE,EAASlF,GAKnC,IAAK,IAHDmF,KADJnF,EAAUA,OACkBmF,YACxBC,EAAU,KAELjL,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAAK,CACtC,IAAIgJ,EAAOnC,EAAO7G,GACdgJ,EAAKjB,OAASmB,GAASyB,EAASI,EAAS/B,EAAK5H,OAMvC4H,EAAKjB,OAASwB,IAAWyB,GAA2B,OAAZC,EACjDA,GAAW,IAAMjC,EAAK5H,MACb4H,EAAKjB,OAASsB,GACvByB,EAAW9B,EAAK5H,MAAO2J,EAASlF,GACX,OAAZoF,IACJN,EAASI,EAASE,IACrBF,EAAQhJ,KAAKkJ,GAEfA,EAAU,MAbM,OAAZA,GAAqBD,EAGvBC,EAAUjC,EAAK5H,MAFf2J,EAAQhJ,KAAKiH,EAAK5H,OAgBR,OAAZ6J,GAAqBN,EAASI,EAASE,IACzCF,EAAQhJ,KAAKkJ,GAIjB,SAASC,EAAWrE,EAAQsE,GAC1BnK,KAAK6F,OAASA,EACd7F,KAAKmK,OAASA,EACdnK,KAAKwH,SAAW2C,EAAO3C,SACvBxH,KAAKyH,UAAY0C,EAAO1C,UACxBzH,KAAK0H,WAAayC,EAAOzC,WACzB1H,KAAK+I,UAAYoB,EAAOpB,UA0D1B,SAASqB,EAAMrD,EAAM3G,EAAOmE,GAC1BvE,KAAK+G,KAAOA,EACZ/G,KAAKI,MAAQA,EACbJ,KAAKuE,MAAQA,EAOf,SAAS8F,EAAYF,EAAQG,GAC3BtK,KAAKuK,IAAM,EACXvK,KAAKwK,QAAU,KACfxK,KAAKwH,SAAW2C,EAAO3C,SACvBxH,KAAKyH,UAAY0C,EAAO1C,UACxBzH,KAAK0H,WAAayC,EAAOzC,WACzB1H,KAAKyK,OAASN,EAAOM,OACrBzK,KAAKsK,WAAaA,EAClBtK,KAAK0K,cAAgB,EACrB1K,KAAK2K,aAAe,KACpB3K,KAAK6E,QAAUsF,EAAOtF,QA8ZxB,SAAS+F,EAAcC,GACrB,OAAOC,GAAc3C,eAAe0C,GAAMC,GAAcD,GAAMA,EAoChE,SAASE,EAAYZ,EAAQa,EAAanG,GACxC7E,KAAKmK,OAASA,EACdnK,KAAK6F,OAASmF,EACdhL,KAAKwK,QAAU,KACfxK,KAAKiL,UAAY,KACjBjL,KAAKkL,OACLlL,KAAK2K,aAAe,KACpB3K,KAAKmL,eAAiB,KACtBnL,KAAKoL,mBAAkD,IAA9BvG,EAAQuG,kBAuNnC,SAASC,EAAIvM,EAAGwM,GACd,OAAOC,OAAOzM,GAAKyM,OAAOD,GAG5B,SAASE,EAAI1M,EAAGwM,GACd,OAAOxM,EAAIwM,EAGb,SAASG,EAAI3M,EAAGwM,GACd,OAAOxM,EAAIwM,EAGb,SAASI,EAAI5M,EAAGwM,GACd,OAAOxM,EAAIwM,EAGb,SAASxL,EAAIhB,EAAGwM,GACd,OAAOxM,EAAIwM,EAGb,SAAS5F,EAAO5G,EAAGwM,GACjB,MAAO,GAAKxM,EAAIwM,EAGlB,SAASK,EAAM7M,EAAGwM,GAChB,OAAOxM,IAAMwM,EAGf,SAASM,EAAS9M,EAAGwM,GACnB,OAAOxM,IAAMwM,EAGf,SAASO,EAAY/M,EAAGwM,GACtB,OAAOxM,EAAIwM,EAGb,SAASQ,EAAShN,EAAGwM,GACnB,OAAOxM,EAAIwM,EAGb,SAASS,EAAiBjN,EAAGwM,GAC3B,OAAOxM,GAAKwM,EAGd,SAASU,EAAclN,EAAGwM,GACxB,OAAOxM,GAAKwM,EAGd,SAASW,EAAYnN,EAAGwM,GACtB,OAAOY,QAAQpN,GAAKwM,GAGtB,SAASa,EAAWrN,EAAGwM,GACrB,OAAOY,QAAQpN,GAAKwM,GAGtB,SAASc,EAAWtN,EAAGwM,GACrB,OAAO3B,EAAS2B,EAAGxM,GAGrB,SAASuN,EAAKvN,GACZ,OAASiD,KAAKuK,IAAIxN,GAAKiD,KAAKuK,KAAKxN,IAAM,EAGzC,SAASyN,EAAKzN,GACZ,OAASiD,KAAKuK,IAAIxN,GAAKiD,KAAKuK,KAAKxN,IAAM,EAGzC,SAAS0N,EAAK1N,GACZ,OAAIA,IAAM2N,EAAAA,EAAiB,EACvB3N,KAAO2N,EAAAA,GAAkB,GACrB1K,KAAKuK,IAAIxN,GAAKiD,KAAKuK,KAAKxN,KAAOiD,KAAKuK,IAAIxN,GAAKiD,KAAKuK,KAAKxN,IAGjE,SAAS4N,EAAM5N,GACb,OAAIA,KAAO2N,EAAAA,EAAiB3N,EACrBiD,KAAK4K,IAAI7N,EAAIiD,KAAK6K,KAAM9N,EAAIA,EAAK,IAG1C,SAAS+N,EAAM/N,GACb,OAAOiD,KAAK4K,IAAI7N,EAAIiD,KAAK6K,KAAM9N,EAAIA,EAAK,IAG1C,SAASgO,EAAMhO,GACb,OAAQiD,KAAK4K,KAAK,EAAI7N,IAAM,EAAIA,IAAM,EAGxC,SAASiO,EAAMjO,GACb,OAAOiD,KAAK4K,IAAI7N,GAAKiD,KAAKiL,OAG5B,SAASC,EAAInO,GACX,OAAQA,EAGV,SAASoO,EAAIpO,GACX,OAAQA,EAGV,SAASqO,EAAMrO,GACb,OAAOA,EAAI,EAAIiD,KAAKqL,KAAKtO,GAAKiD,KAAKsL,MAAMvO,GAG3C,SAASwO,EAAOxO,GACd,OAAOiD,KAAKuL,UAAYxO,GAAK,GAG/B,SAASyO,EAAUzO,GACjB,OAAO0O,EAAM1O,EAAI,GAGnB,SAAS2O,EAAUrN,GACjB,OAAOsN,SAAStN,IAAWA,IAAU2B,KAAKC,MAAM5B,GAiBlD,SAASoN,EAAM/O,GACb,IAAID,EAAGwG,EAEP,GAAIyI,EAAUhP,GAAI,CAChB,GAAIA,GAAK,EACP,OAAOiP,SAASjP,GAAKgO,EAAAA,EAAWkB,IAGlC,GAAIlP,EAAI,IACN,OAAOgO,EAAAA,EAKT,IAFA,IAAIrM,EAAQ3B,EAAI,EACZmP,EAAMnP,EAAI,EACP2B,EAAQ,GACbwN,GAAOxN,EACPA,IAOF,OAJY,IAARwN,IACFA,EAAM,GAGDA,EAGT,GAAInP,EAAI,GACN,OAAOsD,KAAK8L,IAAM9L,KAAK+L,IAAI/L,KAAK8L,GAAKpP,GAAK+O,EAAM,EAAI/O,IAGtD,GAAIA,GAAK,OACP,OAAOgO,EAAAA,EAGT,GAAIhO,EAAI,GAAM,CACZ,IAAIsP,EAAOtP,EAAIA,EACXuP,EAASD,EAAOtP,EAChBwP,EAAQD,EAASvP,EACjByP,EAAQD,EAAQxP,EACpB,OAAOsD,KAAK6K,KAAK,EAAI7K,KAAK8L,GAAKpP,GAAKsD,KAAKoM,IAAK1P,EAAIsD,KAAKqM,EAAI3P,IACxD,EAAK,GAAK,GAAKA,GAAO,GAAK,IAAMsP,GAAU,KAAO,MAAQC,GAC1D,KAAO,QAAUC,GAAW,QAAU,UAAYC,GAClD,SAAW,YAAcA,EAAQzP,MAGpCA,EACFuG,EAAIqJ,GAAQ,GACZ,IAAK,IAAIrP,EAAI,EAAGA,EAAIqP,GAAQ9O,SAAUP,EACpCgG,GAAKqJ,GAAQrP,IAAMP,EAAIO,GAIzB,OADAR,EAAIC,EAAI6P,GAAU,GACXvM,KAAK6K,KAAK,EAAI7K,KAAK8L,IAAM9L,KAAKoM,IAAI3P,EAAGC,EAAI,IAAOsD,KAAKuK,KAAK9N,GAAKwG,EAGxE,SAASuJ,EAAa5P,GACpB,OAAO6P,OAAO7P,GAAGY,OAGnB,SAASkP,IAGP,IAAK,IAFDC,EAAM,EACNC,EAAO,EACF3P,EAAI,EAAGA,EAAI4P,UAAUrP,OAAQP,IAAK,CACzC,IACI0M,EADAmD,EAAM9M,KAAK+M,IAAIF,UAAU5P,IAEzB2P,EAAOE,GAETH,EAAOA,GADPhD,EAAMiD,EAAOE,GACMnD,EAAO,EAC1BiD,EAAOE,GAGPH,GAFSG,EAAM,GACfnD,EAAMmD,EAAMF,GACCjD,EAENmD,EAGX,OAAOF,IAASlC,EAAAA,EAAWA,EAAAA,EAAWkC,EAAO5M,KAAK6K,KAAK8B,GAGzD,SAASK,EAAUC,EAAMC,EAAKC,GAC5B,OAAOF,EAAOC,EAAMC,EAGtB,SAASC,EAAOtK,GACd7E,KAAK6E,QAAUA,MACf7E,KAAKwH,UACHsG,IAAK/L,KAAK+L,IACVsB,IAAKrN,KAAKqN,IACVC,IAAKtN,KAAKsN,IACVC,KAAMvN,KAAKuN,KACXC,KAAMxN,KAAKwN,KACXC,KAAMzN,KAAKyN,KACXnD,KAAMtK,KAAKsK,MAAQA,EACnBE,KAAMxK,KAAKwK,MAAQA,EACnBC,KAAMzK,KAAKyK,MAAQA,EACnBE,MAAO3K,KAAK2K,OAASA,EACrBG,MAAO9K,KAAK8K,OAASA,EACrBC,MAAO/K,KAAK+K,OAASA,EACrBF,KAAM7K,KAAK6K,KACXD,IAAK5K,KAAK4K,IACV8C,GAAI1N,KAAK4K,IACT+C,GAAI3N,KAAKgL,OAASA,EAClBA,MAAOhL,KAAKgL,OAASA,EACrB+B,IAAK/M,KAAK+M,IACV1B,KAAMrL,KAAKqL,KACXC,MAAOtL,KAAKsL,MACZrL,MAAOD,KAAKC,MACZmL,MAAOpL,KAAKoL,OAASA,EACrBwC,IAAK1C,EACL2C,IAAKrE,OACLe,IAAKvK,KAAKuK,IACVY,IAAKA,EACL3N,OAAQgP,EACRsB,IAAKtC,GAGPvN,KAAKyH,WACHmI,IAAKvE,EACLsE,IAAKnE,EACLsE,IAAKrE,EACLsE,IAAKrE,EACLsE,IAAKlQ,EACLmQ,IAAKlO,KAAKoM,IACV+B,KAAMxK,EACNyK,KAAMxE,EACNyE,KAAMxE,EACNyE,IAAKxE,EACLyE,IAAKxE,EACLyE,KAAMxE,EACNyE,KAAMxE,EACNyE,IAAKxE,EACLyE,GAAIvE,EACJwE,GAAMvE,GAGRpM,KAAK0H,YACHkJ,IAAK7B,GAGP/O,KAAK+I,WACHuE,OAAQA,EACRuD,IAAKtD,EACLuD,IAAK/O,KAAK+O,IACVC,IAAKhP,KAAKgP,IACVtC,MAAO1M,KAAK0M,OAASA,EACrBuC,IAAKjP,KAAK0M,OAASA,EACnBN,IAAKpM,KAAKoM,IACV8C,MAAOlP,KAAKkP,MACZC,GAAMnC,EACNvB,MAAOA,GAGTxN,KAAKyK,QACH2D,EAAGrM,KAAKqM,EACRP,GAAI9L,KAAK8L,GACTsD,MAAQ,EACRC,OAAS,GA51Cb,IAAInJ,EAAU,UACVf,EAAO,OACPE,EAAO,OACPE,EAAO,OACPY,EAAO,OACPe,GAAW,WACXZ,GAAQ,QACRE,GAAU,UAOdzB,EAAY/B,UAAUsM,SAAW,WAC/B,OAAQrR,KAAK+G,MACX,KAAKkB,EACL,KAAKf,EACL,KAAKE,EACL,KAAKE,EACL,KAAKY,EACH,OAAOlI,KAAKI,MACd,KAAK6I,GACH,MAAO,QAAUjJ,KAAKI,MACxB,KAAKmI,GACH,MAAO,IAAMvI,KAAKI,MACpB,QACE,MAAO,wBAuTb8J,EAAWnF,UAAUwC,SAAW,SAAUnD,GAExC,OADAA,EAASA,MACF,IAAI8F,EAAW3C,EAASvH,KAAK6F,OAAQ7F,KAAKwH,SAAUxH,KAAKyH,UAAWzH,KAAK0H,WAAYtD,GAASpE,KAAKmK,SAG5GD,EAAWnF,UAAUyD,WAAa,SAAUC,EAAUC,GAKpD,OAJMA,aAAgBwB,IACpBxB,EAAO1I,KAAKmK,OAAOmH,MAAM9C,OAAO9F,KAG3B,IAAIwB,EAAW1B,EAAWxI,KAAK6F,OAAQ4C,EAAUC,GAAO1I,KAAKmK,SAGtED,EAAWnF,UAAU+D,SAAW,SAAU1E,GAExC,OADAA,EAASA,MACF0E,EAAS9I,KAAK6F,OAAQ7F,KAAMoE,IAGrC8F,EAAWnF,UAAUsM,SAAW,WAC9B,OAAO/H,EAAmBtJ,KAAK6F,QAAQ,IAGzCqE,EAAWnF,UAAUgF,QAAU,SAAUlF,GACvCA,EAAUA,MACV,IAAI0M,KAEJ,OADAzH,EAAW9J,KAAK6F,OAAQ0L,EAAM1M,GACvB0M,GAGTrH,EAAWnF,UAAUyM,UAAY,SAAU3M,GACzCA,EAAUA,MACV,IAAI0M,KACJzH,EAAW9J,KAAK6F,OAAQ0L,EAAM1M,GAC9B,IAAIkE,EAAY/I,KAAK+I,UACrB,OAAOwI,EAAKE,OAAO,SAAUhN,GAC3B,QAASA,KAAQsE,MAIrBmB,EAAWnF,UAAU2M,aAAe,SAAUC,EAAOH,GACnD,IAAI9I,EAAO1I,KACPf,EAAI,IAAI2S,SAASD,EAAO,mGAAqGrI,EAAmBtJ,KAAKuH,SAASiK,GAAW3L,QAAQ,GAAQ,OAC7L,OAAO,WACL,OAAO5G,EAAEoK,MAAMX,EAAMkG,aAIzB,IACIiD,GAAM,MAaVzH,EAAMrF,UAAUsM,SAAW,WACzB,OAAOrR,KAAK+G,KAAO,KAAO/G,KAAKI,OAgBjCiK,EAAYtF,UAAU+M,SAAW,SAAU/K,EAAM3G,EAAOmK,GACtD,OAAO,IAAIH,EAAMrD,EAAM3G,EAAc,MAAPmK,EAAcA,EAAMvK,KAAKuK,MAGzDF,EAAYtF,UAAUgN,KAAO,WAC3B/R,KAAK0K,cAAgB1K,KAAKuK,IAC1BvK,KAAK2K,aAAe3K,KAAKwK,SAG3BH,EAAYtF,UAAUiN,QAAU,WAC9BhS,KAAKuK,IAAMvK,KAAK0K,cAChB1K,KAAKwK,QAAUxK,KAAK2K,cAGtBN,EAAYtF,UAAUmG,KAAO,WAC3B,OAAIlL,KAAKuK,KAAOvK,KAAKsK,WAAW/K,OACvBS,KAAK8R,SA/CL,OA+CoB,OAGzB9R,KAAKiS,gBAAkBjS,KAAKkS,YACvBlS,KAAKkL,OACHlL,KAAKmS,kBACZnS,KAAKoS,YACLpS,KAAKqS,cACLrS,KAAKsS,YACLtS,KAAKuS,WACLvS,KAAKwS,WACLxS,KAAKyS,aACLzS,KAAK0S,WACL1S,KAAK2S,SACA3S,KAAKwK,aAEZxK,KAAK4S,WAAW,sBAAwB5S,KAAKsK,WAAWuI,OAAO7S,KAAKuK,KAAO,MAI/EF,EAAYtF,UAAUuN,SAAW,WAC/B,IAAI5T,GAAI,EACJoU,EAAW9S,KAAKuK,IAChBwI,EAAQ/S,KAAKsK,WAAWuI,OAAOC,GAEnC,GAAc,MAAVC,GAA4B,MAAVA,EAEpB,IADA,IAAIxO,EAAQvE,KAAKsK,WAAWjG,QAAQ0O,EAAOD,EAAW,GAC/CvO,GAAS,GAAKvE,KAAKuK,IAAMvK,KAAKsK,WAAW/K,QAAQ,CAEtD,GADAS,KAAKuK,IAAMhG,EAAQ,EACuB,OAAtCvE,KAAKsK,WAAWuI,OAAOtO,EAAQ,GAAa,CAC9C,IAAIyO,EAAYhT,KAAKsK,WAAW2I,UAAUH,EAAW,EAAGvO,GACxDvE,KAAKwK,QAAUxK,KAAK8R,SA3Ed,UA2EgC9R,KAAKkT,SAASF,GAAYF,GAChEpU,GAAI,EACJ,MAEF6F,EAAQvE,KAAKsK,WAAWjG,QAAQ0O,EAAOxO,EAAQ,GAGnD,OAAO7F,GAGT2L,EAAYtF,UAAUwN,QAAU,WAC9B,IAAIY,EAAInT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,KACpC,OAAU,MAAN4I,GAAmB,MAANA,KACfnT,KAAKwK,QAAUxK,KAAK8R,SAvFX,SAuF4BqB,GACrCnT,KAAKuK,OACE,IAKXF,EAAYtF,UAAUyN,QAAU,WAE9B,MAAU,MADFxS,KAAKsK,WAAWuI,OAAO7S,KAAKuK,OAElCvK,KAAKwK,QAAUxK,KAAK8R,SAhGX,SAgG4B,KACrC9R,KAAKuK,OACE,IAKXF,EAAYtF,UAAU2N,QAAU,WAG9B,IAFA,IAAII,EAAW9S,KAAKuK,IAChBvL,EAAI8T,EACD9T,EAAIgB,KAAKsK,WAAW/K,OAAQP,IAAK,CACtC,IAAImU,EAAInT,KAAKsK,WAAWuI,OAAO7T,GAC/B,GAAImU,EAAEC,gBAAkBD,EAAEE,gBACpBrU,IAAMgB,KAAKuK,KAAc,MAAN4I,GAAmB,MAANA,IAAcA,EAAI,KAAOA,EAAI,MAC/D,MAIN,GAAInU,EAAI8T,EAAU,CAChB,IAAIQ,EAAMtT,KAAKsK,WAAW2I,UAAUH,EAAU9T,GAC9C,GAAIsU,KAAOtT,KAAKyK,OAGd,OAFAzK,KAAKwK,QAAUxK,KAAK8R,SAxHZ,UAwH8B9R,KAAKyK,OAAO6I,IAClDtT,KAAKuK,KAAO+I,EAAI/T,QACT,EAGX,OAAO,GAGT8K,EAAYtF,UAAU0N,UAAY,WAGhC,IAFA,IAAIK,EAAW9S,KAAKuK,IAChBvL,EAAI8T,EACD9T,EAAIgB,KAAKsK,WAAW/K,OAAQP,IAAK,CACtC,IAAImU,EAAInT,KAAKsK,WAAWuI,OAAO7T,GAC/B,GAAImU,EAAEC,gBAAkBD,EAAEE,gBACpBrU,IAAMgB,KAAKuK,KAAc,MAAN4I,IAAcA,EAAI,KAAOA,EAAI,MAClD,MAIN,GAAInU,EAAI8T,EAAU,CAChB,IAAIQ,EAAMtT,KAAKsK,WAAW2I,UAAUH,EAAU9T,GAC9C,GAAIgB,KAAKuT,kBAAkBD,KAASA,KAAOtT,KAAKyH,WAAa6L,KAAOtT,KAAKwH,UAAY8L,KAAOtT,KAAK0H,YAG/F,OAFA1H,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAKyB,GAClCtT,KAAKuK,KAAO+I,EAAI/T,QACT,EAGX,OAAO,GAGT8K,EAAYtF,UAAU4N,OAAS,WAI7B,IAHA,IAAIG,EAAW9S,KAAKuK,IAChBvL,EAAI8T,EACJU,GAAY,EACTxU,EAAIgB,KAAKsK,WAAW/K,OAAQP,IAAK,CACtC,IAAImU,EAAInT,KAAKsK,WAAWuI,OAAO7T,GAC/B,GAAImU,EAAEC,gBAAkBD,EAAEE,cAAe,CACvC,GAAIrU,IAAMgB,KAAKuK,KAAa,MAAN4I,EACpB,SACK,GAAInU,IAAMgB,KAAKuK,MAAQiJ,GAAoB,MAANL,IAAcA,EAAI,KAAOA,EAAI,KACvE,WAGFK,GAAY,EAGhB,GAAIA,EAAW,CACb,IAAIF,EAAMtT,KAAKsK,WAAW2I,UAAUH,EAAU9T,GAG9C,OAFAgB,KAAKwK,QAAUxK,KAAK8R,SApKZ,QAoK4BwB,GACpCtT,KAAKuK,KAAO+I,EAAI/T,QACT,EAET,OAAO,GAGT8K,EAAYtF,UAAUkN,aAAe,WAGnC,IAFA,IAAIvT,GAAI,EACJyU,EAAInT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,OACvB,MAAN4I,GAAmB,OAANA,GAAoB,OAANA,GAAoB,OAANA,IAC9CzU,GAAI,IACJsB,KAAKuK,KACWvK,KAAKsK,WAAW/K,UAGhC4T,EAAInT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,KAElC,OAAO7L,GAGT,IAAI+U,GAAmB,iBAEvBpJ,EAAYtF,UAAUmO,SAAW,SAAUlK,GACzC,IAAIzE,EAAQyE,EAAE3E,QAAQ,MACtB,GAAIE,EAAQ,EACV,OAAOyE,EAIT,IADA,IAAI0K,EAAS1K,EAAEiK,UAAU,EAAG1O,GACrBA,GAAS,GAAG,CACjB,IAAI4O,EAAInK,EAAE6J,SAAStO,GACnB,OAAQ4O,GACN,IAAK,IACHO,GAAU,IACV,MACF,IAAK,IACHA,GAAU,IACV,MACF,IAAK,KACHA,GAAU,KACV,MACF,IAAK,IACHA,GAAU,IACV,MACF,IAAK,IACHA,GAAU,KACV,MACF,IAAK,IACHA,GAAU,KACV,MACF,IAAK,IACHA,GAAU,KACV,MACF,IAAK,IACHA,GAAU,KACV,MACF,IAAK,IACHA,GAAU,KACV,MACF,IAAK,IAEH,IAAIC,EAAY3K,EAAEiK,UAAU1O,EAAQ,EAAGA,EAAQ,GAC1CkP,GAAiBG,KAAKD,IACzB3T,KAAK4S,WAAW,+BAAiCe,GAEnDD,GAAUlF,OAAOqF,aAAaC,SAASH,EAAW,KAClDpP,GAAS,EACT,MACF,QACE,MAAMvE,KAAK4S,WAAW,+BAAiCO,EAAI,OAE7D5O,EACF,IAAIwP,EAAY/K,EAAE3E,QAAQ,KAAME,GAChCmP,GAAU1K,EAAEiK,UAAU1O,EAAOwP,EAAY,EAAI/K,EAAEzJ,OAASwU,GACxDxP,EAAQwP,EAGV,OAAOL,GAGTrJ,EAAYtF,UAAUmN,UAAY,WAEhC,MAAU,MADFlS,KAAKsK,WAAWuI,OAAO7S,KAAKuK,MACsB,MAAzCvK,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,KACjDvK,KAAKuK,IAAMvK,KAAKsK,WAAWjG,QAAQ,KAAMrE,KAAKuK,KAAO,EACpC,IAAbvK,KAAKuK,MACPvK,KAAKuK,IAAMvK,KAAKsK,WAAW/K,SAEtB,IAKX8K,EAAYtF,UAAUoN,eAAiB,WACrC,IAAI5H,EAAMvK,KAAKuK,IAEf,GAAIA,GAAOvK,KAAKsK,WAAW/K,OAAS,GAAqC,MAAhCS,KAAKsK,WAAWuI,OAAOtI,GAC9D,OAAO,IAEPA,EAEF,IAAIyJ,EACAC,EACJ,GAAoC,MAAhCjU,KAAKsK,WAAWuI,OAAOtI,GACzByJ,EAAQ,GACRC,EAAa,gBACX1J,MACG,CAAA,GAAoC,MAAhCvK,KAAKsK,WAAWuI,OAAOtI,GAKhC,OAAO,EAJPyJ,EAAQ,EACRC,EAAa,YACX1J,EAQJ,IAHA,IAAI2J,GAAQ,EACRpB,EAAWvI,EAERA,EAAMvK,KAAKsK,WAAW/K,QAAQ,CACnC,IAAI4T,EAAInT,KAAKsK,WAAWuI,OAAOtI,GAC/B,IAAI0J,EAAWL,KAAKT,GAIlB,MAHA5I,IACA2J,GAAQ,EAUZ,OAJIA,IACFlU,KAAKwK,QAAUxK,KAAK8R,SAzSV,UAyS4BgC,SAAS9T,KAAKsK,WAAW2I,UAAUH,EAAUvI,GAAMyJ,IACzFhU,KAAKuK,IAAMA,GAEN2J,GAGT7J,EAAYtF,UAAUqN,SAAW,WAS/B,IARA,IAMIe,EANAe,GAAQ,EACR3J,EAAMvK,KAAKuK,IACXuI,EAAWvI,EACX4J,EAAW5J,EACX6J,GAAW,EACXC,GAAc,EAGX9J,EAAMvK,KAAKsK,WAAW/K,UAC3B4T,EAAInT,KAAKsK,WAAWuI,OAAOtI,KACjB,KAAO4I,GAAK,MAAUiB,GAAkB,MAANjB,IAChC,MAANA,EACFiB,GAAW,EAEXC,GAAc,EAEhB9J,IACA2J,EAAQG,EAUZ,GAJIH,IACFC,EAAW5J,GAGH,MAAN4I,GAAmB,MAANA,EAAW,CAC1B5I,IAGA,IAFA,IAAI+J,GAAa,EACbC,GAAgB,EACbhK,EAAMvK,KAAKsK,WAAW/K,QAAQ,CAEnC,GADA4T,EAAInT,KAAKsK,WAAWuI,OAAOtI,IACvB+J,GAAqB,MAANnB,GAAmB,MAANA,EAEzB,CAAA,KAAIA,GAAK,KAAOA,GAAK,KAI1B,MAHAoB,GAAgB,EAChBD,GAAa,OAHbA,GAAa,EAOf/J,IAGGgK,IACHhK,EAAM4J,GAUV,OANID,GACFlU,KAAKwK,QAAUxK,KAAK8R,SAlWV,UAkW4B7P,WAAWjC,KAAKsK,WAAW2I,UAAUH,EAAUvI,KACrFvK,KAAKuK,IAAMA,GAEXvK,KAAKuK,IAAM4J,EAEND,GAGT7J,EAAYtF,UAAUsN,WAAa,WACjC,IAAIS,EAAW9S,KAAKuK,IAChB4I,EAAInT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,KAEpC,GAAU,MAAN4I,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,GAAmB,MAANA,EAC1GnT,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAKsB,QAC7B,GAAU,MAANA,GAAmB,MAANA,EACtBnT,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,UAC7B,GAAU,MAANsB,EACoC,MAAzCnT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,IACpCvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,MAClC7R,KAAKuK,OAELvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,UAE/B,GAAU,MAANsB,EACoC,MAAzCnT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,IACpCvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,MAClC7R,KAAKuK,OAELvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,UAE/B,GAAU,MAANsB,EAAW,CACpB,GAA6C,MAAzCnT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,GAIpC,OAAO,EAHPvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,MAClC7R,KAAKuK,WAIF,GAAU,MAAN4I,EAAW,CACpB,GAA6C,MAAzCnT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,GAIpC,OAAO,EAHPvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,MAClC7R,KAAKuK,UAIF,CAAA,GAAU,MAAN4I,EAQT,OAAO,EAPsC,MAAzCnT,KAAKsK,WAAWuI,OAAO7S,KAAKuK,IAAM,IACpCvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAK,MAClC7R,KAAKuK,OAELvK,KAAKwK,QAAUxK,KAAK8R,SAASD,GAAKsB,GAOtC,OAFAnT,KAAKuK,QAEDvK,KAAKuT,kBAAkBvT,KAAKwK,QAAQpK,SAGtCJ,KAAKuK,IAAMuI,GACJ,IAIX,IAAIhI,IACF8E,IAAK,MACLD,IAAK,WACLG,IAAK,WACLC,IAAK,SACLC,IAAK,YACLC,IAAK,QACLJ,IAAK,YACLS,IAAK,aACLD,IAAK,aACLG,KAAM,aACND,KAAM,aACNJ,KAAM,aACNC,KAAM,aACNF,KAAM,cACNO,IAAO,UACPC,GAAM,UACNxD,IAAO,UACP0D,IAAK,cACL4D,IAAK,eAOPnK,EAAYtF,UAAUwO,kBAAoB,SAAU1I,GAClD,IAAI4J,EAAa7J,EAAcC,GAC3B6J,EAAY1U,KAAK6E,QAAQ6P,cAG7B,MAAmB,OAAfD,IACOC,EAAc,KAGhBD,KAAcC,IAAgBA,EAAUD,KAGnDpK,EAAYtF,UAAU4P,eAAiB,WACrC,IACIC,EADAC,EAAO,EAEPC,GAAW,EACf,GACED,IACAD,EAAS5U,KAAKuK,IAAMuK,EACpBA,EAAU9U,KAAKsK,WAAWjG,QAAQ,KAAMyQ,EAAU,SAC3CA,GAAW,GAAKA,EAAU9U,KAAKuK,KAExC,OACEsK,KAAMA,EACND,OAAQA,IAIZvK,EAAYtF,UAAU6N,WAAa,SAAUmC,GAC3C,IAAIC,EAAShV,KAAK2U,iBAClB,MAAM,IAAIzV,MAAM,gBAAkB8V,EAAOH,KAAO,IAAMG,EAAOJ,OAAS,MAAQG,IAchFhK,EAAYhG,UAAUmG,KAAO,WAE3B,OADAlL,KAAKwK,QAAUxK,KAAKiL,UACZjL,KAAKiL,UAAYjL,KAAK6F,OAAOqF,QAGvCH,EAAYhG,UAAUkQ,aAAe,SAAUC,EAAO9U,GACpD,YAAqB,IAAVA,IAEA0E,MAAMqQ,QAAQ/U,GAChBuJ,EAASvJ,EAAO8U,EAAM9U,OACH,mBAAVA,EACTA,EAAM8U,GAENA,EAAM9U,QAAUA,IAI3B2K,EAAYhG,UAAUgN,KAAO,WAC3B/R,KAAK2K,aAAe3K,KAAKwK,QACzBxK,KAAKmL,eAAiBnL,KAAKiL,UAC3BjL,KAAK6F,OAAOkM,QAGdhH,EAAYhG,UAAUiN,QAAU,WAC9BhS,KAAK6F,OAAOmM,UACZhS,KAAKwK,QAAUxK,KAAK2K,aACpB3K,KAAKiL,UAAYjL,KAAKmL,gBAGxBJ,EAAYhG,UAAUqQ,OAAS,SAAUrO,EAAM3G,GAC7C,QAAIJ,KAAKiL,UAAUlE,OAASA,IAAQ/G,KAAKiV,aAAajV,KAAKiL,UAAW7K,MACpEJ,KAAKkL,QACE,IAKXH,EAAYhG,UAAUsQ,OAAS,SAAUtO,EAAM3G,GAC7C,IAAKJ,KAAKoV,OAAOrO,EAAM3G,GAAQ,CAC7B,IAAI4U,EAAShV,KAAK6F,OAAO8O,iBACzB,MAAM,IAAIzV,MAAM,gBAAkB8V,EAAOH,KAAO,IAAMG,EAAOJ,OAAS,gBAAkBxU,GAAS2G,MAIrGgE,EAAYhG,UAAUuQ,UAAY,SAAUC,GAC1C,GAAIvV,KAAKoV,OAjhBC,SAkhBRG,EAAMxU,KAAK,IAAI+F,EAAYoB,EAAMlI,KAAKwK,QAAQpK,aACzC,GAAIJ,KAAKoV,OAvhBJ,WAwhBVG,EAAMxU,KAAK,IAAI+F,EAAYmB,EAASjI,KAAKwK,QAAQpK,aAC5C,GAAIJ,KAAKoV,OAxhBJ,WAyhBVG,EAAMxU,KAAK,IAAI+F,EAAYmB,EAASjI,KAAKwK,QAAQpK,YAC5C,CAAA,IAAIJ,KAAKoV,OAzhBL,SAyhBoB,KAI7B,MAAM,IAAIlW,MAAM,cAAgBc,KAAKiL,WAHrCjL,KAAKwV,gBAAgBD,GACrBvV,KAAKqV,OA3hBI,SA2hBW,OAMxBtK,EAAYhG,UAAUyQ,gBAAkB,SAAUD,GAChDvV,KAAKyV,2BAA2BF,IAGlCxK,EAAYhG,UAAU0Q,2BAA6B,SAAUF,GAE3D,IADAvV,KAAK0V,kBAAkBH,GAChBvV,KAAKoV,OAAOvD,GAAK,MAAM,CAC5B,IAAI8D,KACAC,KACJ5V,KAAKyV,2BAA2BE,GAChC3V,KAAKqV,OAAOxD,GAAK,KACjB7R,KAAKyV,2BAA2BG,GAChCL,EAAMxU,KAAK,IAAI+F,EAAYuB,GAAOsN,IAClCJ,EAAMxU,KAAK,IAAI+F,EAAYuB,GAAOuN,IAClCL,EAAMxU,KAAKsG,EAAmB,QAIlC0D,EAAYhG,UAAU2Q,kBAAoB,SAAUH,GAElD,IADAvV,KAAK6V,mBAAmBN,GACjBvV,KAAKoV,OAAOvD,GAAK,OACtB7R,KAAK6V,mBAAmBN,GACxBA,EAAMxU,KAAKoG,EAAkB,QAIjC4D,EAAYhG,UAAU8Q,mBAAqB,SAAUN,GAEnD,IADAvV,KAAK8V,gBAAgBP,GACdvV,KAAKoV,OAAOvD,GAAK,QACtB7R,KAAK8V,gBAAgBP,GACrBA,EAAMxU,KAAKoG,EAAkB,SAIjC,IAAI4O,IAAwB,KAAM,KAAM,IAAK,KAAM,KAAM,IAAK,MAE9DhL,EAAYhG,UAAU+Q,gBAAkB,SAAUP,GAEhD,IADAvV,KAAKgW,YAAYT,GACVvV,KAAKoV,OAAOvD,GAAKkE,KAAuB,CAC7C,IAAIlL,EAAK7K,KAAKwK,QACdxK,KAAKgW,YAAYT,GACjBA,EAAMxU,KAAKoG,EAAkB0D,EAAGzK,UAIpC,IAAI6V,IAAqB,IAAK,IAAK,MAEnClL,EAAYhG,UAAUiR,YAAc,SAAUT,GAE5C,IADAvV,KAAKkW,UAAUX,GACRvV,KAAKoV,OAAOvD,GAAKoE,KAAoB,CAC1C,IAAIpL,EAAK7K,KAAKwK,QACdxK,KAAKkW,UAAUX,GACfA,EAAMxU,KAAKoG,EAAkB0D,EAAGzK,UAIpC,IAAI+V,IAAkB,IAAK,IAAK,KAEhCpL,EAAYhG,UAAUmR,UAAY,SAAUX,GAE1C,IADAvV,KAAKoW,YAAYb,GACVvV,KAAKoV,OAAOvD,GAAKsE,KAAiB,CACvC,IAAItL,EAAK7K,KAAKwK,QACdxK,KAAKoW,YAAYb,GACjBA,EAAMxU,KAAKoG,EAAkB0D,EAAGzK,UAIpC2K,EAAYhG,UAAUqR,YAAc,SAAUb,GAC5C,IAAI/N,EAAWxH,KAAK6F,OAAO2B,SAM3B,GADAxH,KAAK+R,OACD/R,KAAKoV,OAAOvD,GALhB,SAA0BqD,GACxB,OAAOA,EAAM9U,SAASoH,IAKtB,GAA4B,MAAvBxH,KAAKwK,QAAQpK,OAAwC,MAAvBJ,KAAKwK,QAAQpK,OA5mBvC,WA4mBwDJ,KAAKiL,UAAUlE,MAA4C,MAAzB/G,KAAKiL,UAAU7K,MAChHJ,KAAKgS,UACLhS,KAAKqW,iBAAiBd,OACjB,CACL,IAAI1K,EAAK7K,KAAKwK,QACdxK,KAAKoW,YAAYb,GACjBA,EAAMxU,KAAKkG,EAAiB4D,EAAGzK,aAGjCJ,KAAKqW,iBAAiBd,IAI1BxK,EAAYhG,UAAUsR,iBAAmB,SAAUd,GAEjD,IADAvV,KAAKsW,uBAAuBf,GACrBvV,KAAKoV,OAAOvD,GAAK,MACtB7R,KAAKoW,YAAYb,GACjBA,EAAMxU,KAAKoG,EAAkB,OAIjC4D,EAAYhG,UAAUuR,uBAAyB,SAAUf,GAEvD,IADAvV,KAAKuW,kBAAkBhB,GAChBvV,KAAKoV,OAAOvD,GAAK,MACtB0D,EAAMxU,KAAKkG,EAAiB,OAIhC8D,EAAYhG,UAAUwR,kBAAoB,SAAUhB,GAClD,IAAI/N,EAAWxH,KAAK6F,OAAO2B,SAK3B,GAAIxH,KAAKoV,OAAOvD,GAJhB,SAA0BqD,GACxB,OAAOA,EAAM9U,SAASoH,IAGgB,CACtC,IAAIqD,EAAK7K,KAAKwK,QACdxK,KAAKsV,UAAUC,GACfA,EAAMxU,KAAKkG,EAAiB4D,EAAGzK,aAG/B,IADAJ,KAAKwW,sBAAsBjB,GACpBvV,KAAKoV,OAppBH,SAopBkB,MACzB,GAAIpV,KAAKoV,OArpBF,SAqpBiB,KACtBG,EAAMxU,KAAK,IAAI+F,EAAYmC,GAAU,QAChC,CACL,IAAIC,EAAWlJ,KAAKyW,kBAAkBlB,GACtCA,EAAMxU,KAAK,IAAI+F,EAAYmC,GAAUC,MAM7C6B,EAAYhG,UAAU0R,kBAAoB,SAAUlB,GAGlD,IAFA,IAAIrM,EAAW,GAEPlJ,KAAKoV,OAlqBF,SAkqBiB,MAG1B,IAFApV,KAAKwV,gBAAgBD,KACnBrM,EACKlJ,KAAKoV,OApqBH,WAqqBPpV,KAAKwV,gBAAgBD,KACnBrM,EAIN,OAAOA,GAGT6B,EAAYhG,UAAUyR,sBAAwB,SAAUjB,GAEtD,IADAvV,KAAKsV,UAAUC,GACRvV,KAAKoV,OAAOvD,GAAK,MAAM,CAC5B,IAAK7R,KAAKoL,kBACR,MAAM,IAAIlM,MAAM,kDAGlBc,KAAKqV,OAnrBG,SAorBRE,EAAMxU,KAAK,IAAI+F,EAAYyB,GAASvI,KAAKwK,QAAQpK,UAuHrD,IAAIkO,GAAU,UACVD,IACF,kBACA,mBAAwB,kBACxB,oBAAwB,kBACxB,qBACA,sBAA4B,qBAC5B,sBAA4B,sBAC5B,uBAA4B,qBAC5B,sBAA4B,sBAC5B,uBAoKFc,EAAOpK,UAAUuM,MAAQ,SAAU5I,GACjC,IAAI6M,KACAmB,EAAc,IAAI3L,EACpB/K,KACA,IAAIqK,EAAYrK,KAAM0I,IACpB0C,kBAAmBpL,KAAK6E,QAAQuG,oBAMpC,OAHAsL,EAAYlB,gBAAgBD,GAC5BmB,EAAYrB,OAx+BH,OAw+BgB,OAElB,IAAInL,EAAWqL,EAAOvV,OAG/BmP,EAAOpK,UAAU+D,SAAW,SAAUJ,EAAM8I,GAC1C,OAAOxR,KAAKsR,MAAM5I,GAAMI,SAAS0I,IAGnC,IAAImF,GAAe,IAAIxH,EA0BvB,OAxBAA,EAAOmC,MAAQ,SAAU5I,GACvB,OAAOiO,GAAarF,MAAM5I,IAG5ByG,EAAOrG,SAAW,SAAUJ,EAAM8I,GAChC,OAAOmF,GAAarF,MAAM5I,GAAMI,SAAS0I,KAezCrC,OAAQA,EACRjF,WAAYA,UAOR0M,GAAG,SAAS7X,EAAQU,EAAOJ,GAgBjC,IAAIwX,EAASA,GAAW,SAASC,GAChC,aAEA,UAAoB,IAATA,GAA6C,oBAAdC,WAA6B,eAAenD,KAAKmD,UAAUC,YAArG,CAGA,IAGGC,EAAU,WACX,OAAOH,EAAKI,KAAOJ,EAAKK,WAAaL,GAEpCM,EALMN,EAAKxV,SAKK+V,gBAAgB,+BAAgC,KAChEC,EAAoB,aAAcF,EAClCG,EAAQ,SAASvW,GAClB,IAAIwW,EAAQ,IAAIC,WAAW,SAC3BzW,EAAK2B,cAAc6U,IAElBE,EAAY,eAAe9D,KAAKkD,EAAKa,cAAgBb,EAAKc,OAC1DC,EAAe,eAAejE,KAAKmD,UAAUC,WAC7Cc,EAAgB,SAASC,IACzBjB,EAAKkB,cAAgBlB,EAAKmB,YAAY,WACtC,MAAMF,GACJ,IAKFG,EAAS,SAASC,GAQnBF,WAPc,WACO,iBAATE,EACVlB,IAAUmB,gBAAgBD,GAE1BA,EAAKE,UANqB,MAW3BC,EAAW,SAASC,EAAWC,EAAahB,GAG7C,IADA,IAAIxY,GADJwZ,KAAiB9S,OAAO8S,IACJjZ,OACbP,KAAK,CACX,IAAIyZ,EAAWF,EAAU,KAAOC,EAAYxZ,IAC5C,GAAwB,mBAAbyZ,EACV,IACCA,EAASnZ,KAAKiZ,EAAWf,GAASe,GACjC,MAAOR,GACRD,EAAcC,MAKhBW,EAAW,SAASC,GAGrB,MAAI,6EAA6E/E,KAAK+E,EAAK5R,MACnF,IAAI6R,MAAMpK,OAAOqF,aAAa,OAAS8E,IAAQ5R,KAAM4R,EAAK5R,OAE3D4R,GAENE,EAAY,SAASF,EAAMlU,EAAMqU,GAC7BA,IACJH,EAAOD,EAASC,IAGjB,IAIGI,EAHAR,EAAYvY,KAEZgZ,EA3CoB,6BA0CbL,EAAK5R,KAGZkS,EAAe,WAChBX,EAASC,EAAW,qCAAqCnT,MAAM,OAuCjE,GAFAmT,EAAUW,WAAaX,EAAUY,KAE7B7B,EAUH,OATAyB,EAAa9B,IAAUmC,gBAAgBT,QACvCV,WAAW,WACVb,EAAUiC,KAAON,EACjB3B,EAAUkC,SAAW7U,EACrB8S,EAAMH,GACN6B,IACAf,EAAOa,GACPR,EAAUW,WAAaX,EAAUgB,QA5CrB,WACZ,IAAK1B,GAAkBmB,GAAStB,IAAeZ,EAAK0C,WAAY,CAE/D,IAAIC,EAAS,IAAID,WAWjB,OAVAC,EAAOC,UAAY,WAClB,IAAIC,EAAM9B,EAAgB4B,EAAOnT,OAASmT,EAAOnT,OAAOE,QAAQ,eAAgB,yBACpEsQ,EAAK8C,KAAKD,EAAK,YAChB7C,EAAK+C,SAASR,KAAOM,GAChCA,OAAI3S,EACJuR,EAAUW,WAAaX,EAAUgB,KACjCN,KAEDQ,EAAOK,cAAcnB,QACrBJ,EAAUW,WAAaX,EAAUY,MAI7BJ,IACJA,EAAa9B,IAAUmC,gBAAgBT,IAEpCK,EACHlC,EAAK+C,SAASR,KAAON,EAERjC,EAAK8C,KAAKb,EAAY,YAGlCjC,EAAK+C,SAASR,KAAON,GAGvBR,EAAUW,WAAaX,EAAUgB,KACjCN,IACAf,EAAOa,GAkBTgB,IAECC,EAAWnB,EAAU9T,UAMxB,MAAyB,oBAAdgS,WAA6BA,UAAUkD,iBAC1C,SAAStB,EAAMlU,EAAMqU,GAM3B,OALArU,EAAOA,GAAQkU,EAAKlU,MAAQ,WAEvBqU,IACJH,EAAOD,EAASC,IAEV5B,UAAUkD,iBAAiBtB,EAAMlU,KAI1CuV,EAASE,MAAQ,aACjBF,EAASd,WAAac,EAASb,KAAO,EACtCa,EAASG,QAAU,EACnBH,EAAST,KAAO,EAEhBS,EAASI,MACTJ,EAASK,aACTL,EAASM,WACTN,EAASO,QACTP,EAASQ,QACTR,EAASS,QACTT,EAASU,WACR,KA5BW,SAAS/B,EAAMlU,EAAMqU,GAC/B,OAAO,IAAID,EAAUF,EAAMlU,GAAQkU,EAAKlU,MAAQ,WAAYqU,MA/HxC,CA8JH,oBAAT6B,MAAwBA,MACb,oBAAXxY,QAA0BA,QACjCnC,KAAK4a,cAMa,IAAXnb,GAA0BA,EAAOJ,QAC1CI,EAAOJ,QAAQwX,OAASA,EACI,oBAAXjX,QAAqC,OAAXA,QAAoC,OAAfA,OAAOC,KACvED,OAAO,eAAgB,WACrB,OAAOiX,SAILgE,GAAG,SAAS9b,EAAQU,EAAOJ,IAO/B,SAAUK,EAAQC,GACG,iBAAZN,QAA0C,IAAXI,EAAyBA,EAAOJ,QAAUM,IAC9D,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAOD,GACpDD,EAAOob,OAASnb,IAHnB,CAICK,KAAM,WAAe,aAIvB,SAAS+a,IACL,OAAOC,GAAa3R,MAAM,KAAMuF,WASpC,SAASuG,EAAQvP,GACb,OAAOA,aAAiBd,OAAmD,mBAA1C3B,OAAO4B,UAAUsM,SAAS/R,KAAKsG,GAGpE,SAASqV,EAASrV,GAGd,OAAgB,MAATA,GAA2D,oBAA1CzC,OAAO4B,UAAUsM,SAAS/R,KAAKsG,GAG3D,SAASsV,EAAcrR,GACnB,IAAIsR,EACJ,IAAKA,KAAKtR,EAEN,OAAO,EAEX,OAAO,EAGX,SAASuR,EAAYxV,GACjB,YAAiB,IAAVA,EAGX,SAASwM,EAASxM,GACd,MAAwB,iBAAVA,GAAgE,oBAA1CzC,OAAO4B,UAAUsM,SAAS/R,KAAKsG,GAGvE,SAASyV,EAAOzV,GACZ,OAAOA,aAAiB0V,MAAkD,kBAA1CnY,OAAO4B,UAAUsM,SAAS/R,KAAKsG,GAGnE,SAAS9C,EAAInC,EAAK4a,GACd,IAAcvc,EAAV4O,KACJ,IAAK5O,EAAI,EAAGA,EAAI2B,EAAIpB,SAAUP,EAC1B4O,EAAI7M,KAAKwa,EAAG5a,EAAI3B,GAAIA,IAExB,OAAO4O,EAGX,SAAS4N,EAAW1c,EAAGwM,GACnB,OAAOnI,OAAO4B,UAAUoD,eAAe7I,KAAKR,EAAGwM,GAGnD,SAASmQ,EAAO3c,EAAGwM,GACf,IAAK,IAAItM,KAAKsM,EACNkQ,EAAWlQ,EAAGtM,KACdF,EAAEE,GAAKsM,EAAEtM,IAYjB,OARIwc,EAAWlQ,EAAG,cACdxM,EAAEuS,SAAW/F,EAAE+F,UAGfmK,EAAWlQ,EAAG,aACdxM,EAAE4c,QAAUpQ,EAAEoQ,SAGX5c,EAGX,SAAS6c,EAAW/V,EAAOgW,EAAQC,EAAQC,GACvC,OAAOC,GAAiBnW,EAAOgW,EAAQC,EAAQC,GAAQ,GAAME,MAGjE,SAASC,IAEL,OACIC,OAAkB,EAClBC,gBACAC,eACAC,UAAmB,EACnBC,cAAkB,EAClBC,WAAkB,EAClBC,aAAkB,KAClBC,eAAkB,EAClBC,iBAAkB,EAClBC,KAAkB,EAClBC,mBACAC,SAAkB,KAClBC,SAAkB,EAClBC,iBAAkB,GAI1B,SAASC,EAAgBC,GAIrB,OAHa,MAATA,EAAEC,MACFD,EAAEC,IAAMjB,KAELgB,EAAEC,IAuBb,SAASC,EAAQF,GACb,GAAkB,MAAdA,EAAEG,SAAkB,CACpB,IAAIC,EAAQL,EAAgBC,GACxBK,EAAcC,GAAOje,KAAK+d,EAAMT,gBAAiB,SAAU5d,GAC3D,OAAY,MAALA,IAEPwe,GAAczZ,MAAMkZ,EAAEQ,GAAGC,YACzBL,EAAMhB,SAAW,IAChBgB,EAAMnB,QACNmB,EAAMb,eACNa,EAAMM,iBACNN,EAAMd,YACNc,EAAMZ,gBACNY,EAAMX,mBACLW,EAAMR,UAAaQ,EAAMR,UAAYS,GAS3C,GAPIL,EAAEW,UACFJ,EAAaA,GACe,IAAxBH,EAAMf,eACwB,IAA9Be,EAAMlB,aAAa5c,aACDyH,IAAlBqW,EAAMQ,SAGS,MAAnB1a,OAAO2a,UAAqB3a,OAAO2a,SAASb,GAI5C,OAAOO,EAHPP,EAAEG,SAAWI,EAMrB,OAAOP,EAAEG,SAGb,SAASW,EAAeV,GACpB,IAAIJ,EAAItB,EAAUhO,KAQlB,OAPa,MAAT0P,EACA5B,EAAOuB,EAAgBC,GAAII,GAG3BL,EAAgBC,GAAGP,iBAAkB,EAGlCO,EAOX,SAASe,EAAWC,EAAIC,GACpB,IAAIlf,EAAGmf,EAAMC,EAiCb,GA/BKhD,EAAY8C,EAAKG,oBAClBJ,EAAGI,iBAAmBH,EAAKG,kBAE1BjD,EAAY8C,EAAKI,MAClBL,EAAGK,GAAKJ,EAAKI,IAEZlD,EAAY8C,EAAKK,MAClBN,EAAGM,GAAKL,EAAKK,IAEZnD,EAAY8C,EAAKM,MAClBP,EAAGO,GAAKN,EAAKM,IAEZpD,EAAY8C,EAAKN,WAClBK,EAAGL,QAAUM,EAAKN,SAEjBxC,EAAY8C,EAAKO,QAClBR,EAAGQ,KAAOP,EAAKO,MAEdrD,EAAY8C,EAAKQ,UAClBT,EAAGS,OAASR,EAAKQ,QAEhBtD,EAAY8C,EAAKS,WAClBV,EAAGU,QAAUT,EAAKS,SAEjBvD,EAAY8C,EAAKhB,OAClBe,EAAGf,IAAMF,EAAgBkB,IAExB9C,EAAY8C,EAAKU,WAClBX,EAAGW,QAAUV,EAAKU,SAGlBC,GAAiBtf,OAAS,EAC1B,IAAKP,EAAI,EAAGA,EAAI6f,GAAiBtf,OAAQP,IAGhCoc,EADLgD,EAAMF,EADNC,EAAOU,GAAiB7f,OAGpBif,EAAGE,GAAQC,GAKvB,OAAOH,EAMX,SAASa,EAAOC,GACZf,EAAWhe,KAAM+e,GACjB/e,KAAKyd,GAAK,IAAInC,KAAkB,MAAbyD,EAAOtB,GAAasB,EAAOtB,GAAGC,UAAY/P,KACxD3N,KAAKmd,YACNnd,KAAKyd,GAAK,IAAInC,KAAK3N,OAIE,IAArBqR,KACAA,IAAmB,EACnBjE,EAAMkE,aAAajf,MACnBgf,IAAmB,GAI3B,SAASE,EAAUrV,GACf,OAAOA,aAAeiV,GAAkB,MAAPjV,GAAuC,MAAxBA,EAAIwU,iBAGxD,SAASc,EAAUC,GACf,OAAIA,EAAS,EAEFrd,KAAKqL,KAAKgS,IAAW,EAErBrd,KAAKsL,MAAM+R,GAI1B,SAASC,EAAMC,GACX,IAAIC,GAAiBD,EACjBlf,EAAQ,EAMZ,OAJsB,IAAlBmf,GAAuB7R,SAAS6R,KAChCnf,EAAQ+e,EAASI,IAGdnf,EAIX,SAASof,EAAcC,EAAQC,EAAQC,GACnC,IAGI3gB,EAHA4gB,EAAM7d,KAAK+O,IAAI2O,EAAOlgB,OAAQmgB,EAAOngB,QACrCsgB,EAAa9d,KAAK+M,IAAI2Q,EAAOlgB,OAASmgB,EAAOngB,QAC7CugB,EAAQ,EAEZ,IAAK9gB,EAAI,EAAGA,EAAI4gB,EAAK5gB,KACZ2gB,GAAeF,EAAOzgB,KAAO0gB,EAAO1gB,KACnC2gB,GAAeN,EAAMI,EAAOzgB,MAAQqgB,EAAMK,EAAO1gB,MACnD8gB,IAGR,OAAOA,EAAQD,EAGnB,SAASE,EAAKhL,IACgC,IAAtCgG,EAAMiF,6BACmB,oBAAbC,SAA6BA,QAAQF,MACjDE,QAAQF,KAAK,wBAA0BhL,GAI/C,SAASmL,EAAUnL,EAAKwG,GACpB,IAAI4E,GAAY,EAEhB,OAAO1E,EAAO,WAIV,GAHgC,MAA5BV,EAAMqF,oBACNrF,EAAMqF,mBAAmB,KAAMrL,GAE/BoL,EAAW,CAGX,IAAK,IADDtR,EADA1F,KAEKnK,EAAI,EAAGA,EAAI4P,UAAUrP,OAAQP,IAAK,CAEvC,GADA6P,EAAM,GACsB,iBAAjBD,UAAU5P,GAAiB,CAClC6P,GAAO,MAAQ7P,EAAI,KACnB,IAAK,IAAIqE,KAAOuL,UAAU,GACtBC,GAAOxL,EAAM,KAAOuL,UAAU,GAAGvL,GAAO,KAE5CwL,EAAMA,EAAIrJ,MAAM,GAAI,QAEpBqJ,EAAMD,UAAU5P,GAEpBmK,EAAKpI,KAAK8N,GAEdkR,EAAKhL,EAAM,gBAAkBjQ,MAAMC,UAAUS,MAAMlG,KAAK6J,GAAM7D,KAAK,IAAM,MAAO,IAAKpG,OAASmhB,OAC9FF,GAAY,EAEhB,OAAO5E,EAAGlS,MAAMrJ,KAAM4O,YACvB2M,GAKP,SAAS+E,EAAgB7b,EAAMsQ,GACK,MAA5BgG,EAAMqF,oBACNrF,EAAMqF,mBAAmB3b,EAAMsQ,GAE9BwL,GAAa9b,KACdsb,EAAKhL,GACLwL,GAAa9b,IAAQ,GAO7B,SAAS+b,EAAW5a,GAChB,OAAOA,aAAiBgM,UAAsD,sBAA1CzO,OAAO4B,UAAUsM,SAAS/R,KAAKsG,GAsBvE,SAAS6a,EAAaC,EAAcC,GAChC,IAAoCxC,EAAhCvQ,EAAM6N,KAAWiF,GACrB,IAAKvC,KAAQwC,EACLnF,EAAWmF,EAAaxC,KACpBlD,EAASyF,EAAavC,KAAUlD,EAAS0F,EAAYxC,KACrDvQ,EAAIuQ,MACJ1C,EAAO7N,EAAIuQ,GAAOuC,EAAavC,IAC/B1C,EAAO7N,EAAIuQ,GAAOwC,EAAYxC,KACF,MAArBwC,EAAYxC,GACnBvQ,EAAIuQ,GAAQwC,EAAYxC,UAEjBvQ,EAAIuQ,IAIvB,IAAKA,KAAQuC,EACLlF,EAAWkF,EAAcvC,KACpB3C,EAAWmF,EAAaxC,IACzBlD,EAASyF,EAAavC,MAE1BvQ,EAAIuQ,GAAQ1C,KAAW7N,EAAIuQ,KAGnC,OAAOvQ,EAGX,SAASgT,EAAO7B,GACE,MAAVA,GACA/e,KAAK0D,IAAIqb,GAwGjB,SAAS8B,EAAcC,EAAMC,GACzB,IAAIC,EAAYF,EAAKzN,cACrB4N,GAAQD,GAAaC,GAAQD,EAAY,KAAOC,GAAQF,GAAaD,EAGzE,SAASI,EAAeC,GACpB,MAAwB,iBAAVA,EAAqBF,GAAQE,IAAUF,GAAQE,EAAM9N,oBAAiBrM,EAGxF,SAASoa,EAAqBC,GAC1B,IACIC,EACAnD,EAFAoD,KAIJ,IAAKpD,KAAQkD,EACL7F,EAAW6F,EAAalD,KACxBmD,EAAiBJ,EAAe/C,MAE5BoD,EAAgBD,GAAkBD,EAAYlD,IAK1D,OAAOoD,EAKX,SAASC,EAAgBV,EAAMW,GAC3BC,GAAWZ,GAAQW,EAGvB,SAASE,EAAoBC,GACzB,IAAIT,KACJ,IAAK,IAAItiB,KAAK+iB,EACVT,EAAMpgB,MAAM+f,KAAMjiB,EAAG4iB,SAAUC,GAAW7iB,KAK9C,OAHAsiB,EAAMU,KAAK,SAAU/iB,EAAGwM,GACpB,OAAOxM,EAAE2iB,SAAWnW,EAAEmW,WAEnBN,EAGX,SAASW,EAAYhB,EAAMiB,GACvB,OAAO,SAAU3hB,GACb,OAAa,MAATA,GACA4hB,EAAMhiB,KAAM8gB,EAAM1gB,GAClB2a,EAAMkE,aAAajf,KAAM+hB,GAClB/hB,MAEAkE,EAAIlE,KAAM8gB,IAK7B,SAAS5c,EAAK+d,EAAKnB,GACf,OAAOmB,EAAI9E,UACP8E,EAAIxE,GAAG,OAASwE,EAAIvD,OAAS,MAAQ,IAAMoC,KAAUnT,IAG7D,SAASqU,EAAOC,EAAKnB,EAAM1gB,GACnB6hB,EAAI9E,WACJ8E,EAAIxE,GAAG,OAASwE,EAAIvD,OAAS,MAAQ,IAAMoC,GAAM1gB,GA+BzD,SAAS8hB,EAAS9C,EAAQ+C,EAAcC,GACpC,IAAIC,EAAY,GAAKtgB,KAAK+M,IAAIsQ,GAC1BkD,EAAcH,EAAeE,EAAU9iB,OAE3C,OADW6f,GAAU,EACLgD,EAAY,IAAM,GAAM,KACpCrgB,KAAKoM,IAAI,GAAIpM,KAAKgP,IAAI,EAAGuR,IAAcjR,WAAWkR,OAAO,GAAKF,EAetE,SAASG,EAAgBtN,EAAOuN,EAAQC,EAASC,GAC7C,IAAIC,EAAOD,EACa,iBAAbA,IACPC,EAAO,WACH,OAAO5iB,KAAK2iB,OAGhBzN,IACA2N,GAAqB3N,GAAS0N,GAE9BH,IACAI,GAAqBJ,EAAO,IAAM,WAC9B,OAAOP,EAASU,EAAKvZ,MAAMrJ,KAAM4O,WAAY6T,EAAO,GAAIA,EAAO,MAGnEC,IACAG,GAAqBH,GAAW,WAC5B,OAAO1iB,KAAK8iB,aAAaJ,QAAQE,EAAKvZ,MAAMrJ,KAAM4O,WAAYsG,KAK1E,SAAS6N,EAAuBnd,GAC5B,OAAIA,EAAME,MAAM,YACLF,EAAMY,QAAQ,WAAY,IAE9BZ,EAAMY,QAAQ,MAAO,IAGhC,SAASwc,EAAmBpH,GACxB,IAA4C5c,EAAGO,EAA3CqK,EAAQgS,EAAO9V,MAAMmd,IAEzB,IAAKjkB,EAAI,EAAGO,EAASqK,EAAMrK,OAAQP,EAAIO,EAAQP,IACvC6jB,GAAqBjZ,EAAM5K,IAC3B4K,EAAM5K,GAAK6jB,GAAqBjZ,EAAM5K,IAEtC4K,EAAM5K,GAAK+jB,EAAuBnZ,EAAM5K,IAIhD,OAAO,SAAUijB,GACb,IAAiBjjB,EAAbkkB,EAAS,GACb,IAAKlkB,EAAI,EAAGA,EAAIO,EAAQP,IACpBkkB,GAAU1C,EAAW5W,EAAM5K,IAAM4K,EAAM5K,GAAGM,KAAK2iB,EAAKrG,GAAUhS,EAAM5K,GAExE,OAAOkkB,GAKf,SAASC,EAAalG,EAAGrB,GACrB,OAAKqB,EAAEE,WAIPvB,EAASwH,EAAaxH,EAAQqB,EAAE6F,cAChCO,GAAgBzH,GAAUyH,GAAgBzH,IAAWoH,EAAmBpH,GAEjEyH,GAAgBzH,GAAQqB,IANpBA,EAAE6F,aAAaQ,cAS9B,SAASF,EAAaxH,EAAQC,GAC1B,IAAI7c,EAAI,EAOR,IADAukB,GAAsBC,UAAY,EAC3BxkB,GAAK,GAAKukB,GAAsB3P,KAAKgI,IACxCA,EAASA,EAAOpV,QAAQ+c,GAN5B,SAAqC3d,GACjC,OAAOiW,EAAO4H,eAAe7d,IAAUA,IAMvC2d,GAAsBC,UAAY,EAClCxkB,GAAK,EAGT,OAAO4c,EA8BX,SAAS8H,EAAexO,EAAOyO,EAAOC,GAClCC,GAAQ3O,GAASsL,EAAWmD,GAASA,EAAQ,SAAUG,EAAUhB,GAC7D,OAAQgB,GAAYF,EAAeA,EAAcD,GAIzD,SAASI,EAAuB7O,EAAO6J,GACnC,OAAKvD,EAAWqI,GAAS3O,GAIlB2O,GAAQ3O,GAAO6J,EAAOnB,QAASmB,EAAOH,SAHlC,IAAInY,OAAOud,EAAe9O,IAOzC,SAAS8O,EAAerlB,GACpB,OAAOslB,EAAYtlB,EAAE6H,QAAQ,KAAM,IAAIA,QAAQ,sCAAuC,SAAU0d,EAASC,EAAIC,EAAIC,EAAIC,GACjH,OAAOH,GAAMC,GAAMC,GAAMC,KAIjC,SAASL,EAAYtlB,GACjB,OAAOA,EAAE6H,QAAQ,yBAA0B,QAK/C,SAAS+d,EAAerP,EAAOyN,GAC3B,IAAI3jB,EAAG4jB,EAAOD,EASd,IARqB,iBAAVzN,IACPA,GAASA,IAET9C,EAASuQ,KACTC,EAAO,SAAUhd,EAAOgE,GACpBA,EAAM+Y,GAAYtD,EAAMzZ,KAG3B5G,EAAI,EAAGA,EAAIkW,EAAM3V,OAAQP,IAC1B6G,GAAOqP,EAAMlW,IAAM4jB,EAI3B,SAAS4B,EAAmBtP,EAAOyN,GAC/B4B,EAAcrP,EAAO,SAAUtP,EAAOgE,EAAOmV,EAAQ7J,GACjD6J,EAAO0F,GAAK1F,EAAO0F,OACnB9B,EAAS/c,EAAOmZ,EAAO0F,GAAI1F,EAAQ7J,KAI3C,SAASwP,EAAwBxP,EAAOtP,EAAOmZ,GAC9B,MAATnZ,GAAiB4V,EAAW3V,GAAQqP,IACpCrP,GAAOqP,GAAOtP,EAAOmZ,EAAO4F,GAAI5F,EAAQ7J,GAiChD,SAAS0P,EAAYC,EAAMC,GACvB,OAAO,IAAIxJ,KAAKA,KAAKyJ,IAAIF,EAAMC,EAAQ,EAAG,IAAIE,aAyElD,SAASC,EAAkBC,EAAWtJ,EAAQE,GAC1C,IAAI9c,EAAGmmB,EAAIlD,EAAKmD,EAAMF,EAAUG,oBAChC,IAAKrlB,KAAKslB,aAKN,IAHAtlB,KAAKslB,gBACLtlB,KAAKulB,oBACLvlB,KAAKwlB,qBACAxmB,EAAI,EAAGA,EAAI,KAAMA,EAClBijB,EAAMtG,GAAW,IAAM3c,IACvBgB,KAAKwlB,kBAAkBxmB,GAAKgB,KAAKylB,YAAYxD,EAAK,IAAIoD,oBACtDrlB,KAAKulB,iBAAiBvmB,GAAKgB,KAAK0lB,OAAOzD,EAAK,IAAIoD,oBAIxD,OAAIvJ,EACe,QAAXF,GAEe,KADfuJ,EAAKQ,GAAUrmB,KAAKU,KAAKwlB,kBAAmBJ,IACzBD,EAAK,MAGT,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAKulB,iBAAkBH,IACxBD,EAAK,KAGb,QAAXvJ,GAEY,KADZuJ,EAAKQ,GAAUrmB,KAAKU,KAAKwlB,kBAAmBJ,IAEjCD,GAGI,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAKulB,iBAAkBH,IACxBD,EAAK,MAGZ,KADZA,EAAKQ,GAAUrmB,KAAKU,KAAKulB,iBAAkBH,IAEhCD,GAGI,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAKwlB,kBAAmBJ,IACzBD,EAAK,KA6CpC,SAASS,EAAU3D,EAAK7hB,GACpB,IAAIylB,EAEJ,IAAK5D,EAAI9E,UAEL,OAAO8E,EAGX,GAAqB,iBAAV7hB,EACP,GAAI,QAAQwT,KAAKxT,GACbA,EAAQif,EAAMjf,QAId,GAFAA,EAAQ6hB,EAAIa,aAAagD,YAAY1lB,IAEhCgS,EAAShS,GACV,OAAO6hB,EAOnB,OAFA4D,EAAa9jB,KAAK+O,IAAImR,EAAI8D,OAAQnB,EAAY3C,EAAI4C,OAAQzkB,IAC1D6hB,EAAIxE,GAAG,OAASwE,EAAIvD,OAAS,MAAQ,IAAM,SAASte,EAAOylB,GACpD5D,EAGX,SAAS+D,EAAa5lB,GAClB,OAAa,MAATA,GACAwlB,EAAS5lB,KAAMI,GACf2a,EAAMkE,aAAajf,MAAM,GAClBA,MAEAkE,EAAIlE,KAAM,SAgDzB,SAASimB,KACL,SAASC,EAAUpnB,EAAGwM,GAClB,OAAOA,EAAE/L,OAAST,EAAES,OAGxB,IACIP,EAAGijB,EADHkE,KAAkBC,KAAiBC,KAEvC,IAAKrnB,EAAI,EAAGA,EAAI,GAAIA,IAEhBijB,EAAMtG,GAAW,IAAM3c,IACvBmnB,EAAYplB,KAAKf,KAAKylB,YAAYxD,EAAK,KACvCmE,EAAWrlB,KAAKf,KAAK0lB,OAAOzD,EAAK,KACjCoE,EAAYtlB,KAAKf,KAAK0lB,OAAOzD,EAAK,KAClCoE,EAAYtlB,KAAKf,KAAKylB,YAAYxD,EAAK,KAO3C,IAHAkE,EAAYtE,KAAKqE,GACjBE,EAAWvE,KAAKqE,GAChBG,EAAYxE,KAAKqE,GACZlnB,EAAI,EAAGA,EAAI,GAAIA,IAChBmnB,EAAYnnB,GAAKilB,EAAYkC,EAAYnnB,IACzConB,EAAWpnB,GAAKilB,EAAYmC,EAAWpnB,IAE3C,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAChBqnB,EAAYrnB,GAAKilB,EAAYoC,EAAYrnB,IAG7CgB,KAAKsmB,aAAe,IAAI7f,OAAO,KAAO4f,EAAY/gB,KAAK,KAAO,IAAK,KACnEtF,KAAKumB,kBAAoBvmB,KAAKsmB,aAC9BtmB,KAAKwmB,mBAAqB,IAAI/f,OAAO,KAAO2f,EAAW9gB,KAAK,KAAO,IAAK,KACxEtF,KAAKymB,wBAA0B,IAAIhgB,OAAO,KAAO0f,EAAY7gB,KAAK,KAAO,IAAK,KA+ClF,SAASohB,GAAW7B,GAChB,OAAO8B,GAAW9B,GAAQ,IAAM,IAGpC,SAAS8B,GAAW9B,GAChB,OAAQA,EAAO,GAAM,GAAKA,EAAO,KAAQ,GAAMA,EAAO,KAAQ,EAiBlE,SAAS+B,GAAYC,EAAG5J,EAAG6J,EAAGC,EAAGC,EAAGroB,EAAGsoB,GAGnC,IAAIlB,EAAO,IAAIzK,KAAKuL,EAAG5J,EAAG6J,EAAGC,EAAGC,EAAGroB,EAAGsoB,GAMtC,OAHIJ,EAAI,KAAOA,GAAK,GAAKnZ,SAASqY,EAAKmB,gBACnCnB,EAAKoB,YAAYN,GAEdd,EAGX,SAASqB,GAAeP,GACpB,IAAId,EAAO,IAAIzK,KAAKA,KAAKyJ,IAAI1b,MAAM,KAAMuF,YAMzC,OAHIiY,EAAI,KAAOA,GAAK,GAAKnZ,SAASqY,EAAKsB,mBACnCtB,EAAKuB,eAAeT,GAEjBd,EAIX,SAASwB,GAAgB1C,EAAM2C,EAAKC,GAChC,IACIC,EAAM,EAAIF,EAAMC,EAIpB,SAFa,EAAIL,GAAcvC,EAAM,EAAG6C,GAAKC,YAAcH,GAAO,GAElDE,EAAM,EAI1B,SAASE,GAAmB/C,EAAMgD,EAAMC,EAASN,EAAKC,GAClD,IAGIM,EAASC,EADTC,EAAY,EAAI,GAAKJ,EAAO,IAFZ,EAAIC,EAAUN,GAAO,EACxBD,GAAgB1C,EAAM2C,EAAKC,GAe5C,OAXIQ,GAAa,EAEbD,EAAetB,GADfqB,EAAUlD,EAAO,GACoBoD,EAC9BA,EAAYvB,GAAW7B,IAC9BkD,EAAUlD,EAAO,EACjBmD,EAAeC,EAAYvB,GAAW7B,KAEtCkD,EAAUlD,EACVmD,EAAeC,IAIfpD,KAAMkD,EACNE,UAAWD,GAInB,SAASE,GAAWjG,EAAKuF,EAAKC,GAC1B,IAEIU,EAASJ,EAFTK,EAAab,GAAgBtF,EAAI4C,OAAQ2C,EAAKC,GAC9CI,EAAO9lB,KAAKsL,OAAO4U,EAAIgG,YAAcG,EAAa,GAAK,GAAK,EAchE,OAXIP,EAAO,EAEPM,EAAUN,EAAOQ,GADjBN,EAAU9F,EAAI4C,OAAS,EACe2C,EAAKC,GACpCI,EAAOQ,GAAYpG,EAAI4C,OAAQ2C,EAAKC,IAC3CU,EAAUN,EAAOQ,GAAYpG,EAAI4C,OAAQ2C,EAAKC,GAC9CM,EAAU9F,EAAI4C,OAAS,IAEvBkD,EAAU9F,EAAI4C,OACdsD,EAAUN,IAIVA,KAAMM,EACNtD,KAAMkD,GAId,SAASM,GAAYxD,EAAM2C,EAAKC,GAC5B,IAAIW,EAAab,GAAgB1C,EAAM2C,EAAKC,GACxCa,EAAiBf,GAAgB1C,EAAO,EAAG2C,EAAKC,GACpD,OAAQf,GAAW7B,GAAQuD,EAAaE,GAAkB,EA2H9D,SAASC,GAAa3iB,EAAOiW,GACzB,MAAqB,iBAAVjW,EACAA,EAGN7B,MAAM6B,GAKU,iBADrBA,EAAQiW,EAAO2M,cAAc5iB,IAElBA,EAGJ,KARIkO,SAASlO,EAAO,IAW/B,SAAS6iB,GAAgB7iB,EAAOiW,GAC5B,MAAqB,iBAAVjW,EACAiW,EAAO2M,cAAc5iB,GAAS,GAAK,EAEvC7B,MAAM6B,GAAS,KAAOA,EAyBjC,SAAS8iB,GAAoBC,EAAa/M,EAAQE,GAC9C,IAAI9c,EAAGmmB,EAAIlD,EAAKmD,EAAMuD,EAAYtD,oBAClC,IAAKrlB,KAAK4oB,eAKN,IAJA5oB,KAAK4oB,kBACL5oB,KAAK6oB,uBACL7oB,KAAK8oB,qBAEA9pB,EAAI,EAAGA,EAAI,IAAKA,EACjBijB,EAAMtG,GAAW,IAAM,IAAIoN,IAAI/pB,GAC/BgB,KAAK8oB,kBAAkB9pB,GAAKgB,KAAKgpB,YAAY/G,EAAK,IAAIoD,oBACtDrlB,KAAK6oB,oBAAoB7pB,GAAKgB,KAAKipB,cAAchH,EAAK,IAAIoD,oBAC1DrlB,KAAK4oB,eAAe5pB,GAAKgB,KAAKkpB,SAASjH,EAAK,IAAIoD,oBAIxD,OAAIvJ,EACe,SAAXF,GAEe,KADfuJ,EAAKQ,GAAUrmB,KAAKU,KAAK4oB,eAAgBxD,IACtBD,EAAK,KACN,QAAXvJ,GAEQ,KADfuJ,EAAKQ,GAAUrmB,KAAKU,KAAK6oB,oBAAqBzD,IAC3BD,EAAK,MAGT,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAK8oB,kBAAmB1D,IACzBD,EAAK,KAGb,SAAXvJ,GAEY,KADZuJ,EAAKQ,GAAUrmB,KAAKU,KAAK4oB,eAAgBxD,IAE9BD,GAGC,KADZA,EAAKQ,GAAUrmB,KAAKU,KAAK6oB,oBAAqBzD,IAEnCD,GAGI,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAK8oB,kBAAmB1D,IACzBD,EAAK,KACN,QAAXvJ,GAEK,KADZuJ,EAAKQ,GAAUrmB,KAAKU,KAAK6oB,oBAAqBzD,IAEnCD,GAGC,KADZA,EAAKQ,GAAUrmB,KAAKU,KAAK4oB,eAAgBxD,IAE9BD,GAGI,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAK8oB,kBAAmB1D,IACzBD,EAAK,MAGZ,KADZA,EAAKQ,GAAUrmB,KAAKU,KAAK8oB,kBAAmB1D,IAEjCD,GAGC,KADZA,EAAKQ,GAAUrmB,KAAKU,KAAK4oB,eAAgBxD,IAE9BD,GAGI,KADfA,EAAKQ,GAAUrmB,KAAKU,KAAK6oB,oBAAqBzD,IAC3BD,EAAK,KAkJpC,SAASgE,KACL,SAASjD,EAAUpnB,EAAGwM,GAClB,OAAOA,EAAE/L,OAAST,EAAES,OAGxB,IACIP,EAAGijB,EAAKmH,EAAMC,EAAQC,EADtBC,KAAgBpD,KAAkBC,KAAiBC,KAEvD,IAAKrnB,EAAI,EAAGA,EAAI,EAAGA,IAEfijB,EAAMtG,GAAW,IAAM,IAAIoN,IAAI/pB,GAC/BoqB,EAAOppB,KAAKgpB,YAAY/G,EAAK,IAC7BoH,EAASrpB,KAAKipB,cAAchH,EAAK,IACjCqH,EAAQtpB,KAAKkpB,SAASjH,EAAK,IAC3BsH,EAAUxoB,KAAKqoB,GACfjD,EAAYplB,KAAKsoB,GACjBjD,EAAWrlB,KAAKuoB,GAChBjD,EAAYtlB,KAAKqoB,GACjB/C,EAAYtlB,KAAKsoB,GACjBhD,EAAYtlB,KAAKuoB,GAQrB,IAJAC,EAAU1H,KAAKqE,GACfC,EAAYtE,KAAKqE,GACjBE,EAAWvE,KAAKqE,GAChBG,EAAYxE,KAAKqE,GACZlnB,EAAI,EAAGA,EAAI,EAAGA,IACfmnB,EAAYnnB,GAAKilB,EAAYkC,EAAYnnB,IACzConB,EAAWpnB,GAAKilB,EAAYmC,EAAWpnB,IACvCqnB,EAAYrnB,GAAKilB,EAAYoC,EAAYrnB,IAG7CgB,KAAKwpB,eAAiB,IAAI/iB,OAAO,KAAO4f,EAAY/gB,KAAK,KAAO,IAAK,KACrEtF,KAAKypB,oBAAsBzpB,KAAKwpB,eAChCxpB,KAAK0pB,kBAAoB1pB,KAAKwpB,eAE9BxpB,KAAK2pB,qBAAuB,IAAIljB,OAAO,KAAO2f,EAAW9gB,KAAK,KAAO,IAAK,KAC1EtF,KAAK4pB,0BAA4B,IAAInjB,OAAO,KAAO0f,EAAY7gB,KAAK,KAAO,IAAK,KAChFtF,KAAK6pB,wBAA0B,IAAIpjB,OAAO,KAAO8iB,EAAUjkB,KAAK,KAAO,IAAK,KAKhF,SAASwkB,KACL,OAAO9pB,KAAK+pB,QAAU,IAAM,GA6BhC,SAASlN,GAAU3H,EAAO8U,GACtBxH,EAAetN,EAAO,EAAG,EAAG,WACxB,OAAOlV,KAAK8iB,aAAajG,SAAS7c,KAAK+pB,QAAS/pB,KAAKiqB,UAAWD,KAgBxE,SAASE,GAAepG,EAAUjI,GAC9B,OAAOA,EAAOsO,eAgHlB,SAASC,GAAgB/mB,GACrB,OAAOA,EAAMA,EAAIgQ,cAAc7M,QAAQ,IAAK,KAAOnD,EAMvD,SAASgnB,GAAaC,GAGlB,IAFA,IAAW3hB,EAAGuC,EAAM2Q,EAAQzW,EAAxBpG,EAAI,EAEDA,EAAIsrB,EAAM/qB,QAAQ,CAKrB,IAHAoJ,GADAvD,EAAQglB,GAAgBE,EAAMtrB,IAAIoG,MAAM,MAC9B7F,OAEV2L,GADAA,EAAOkf,GAAgBE,EAAMtrB,EAAI,KACnBkM,EAAK9F,MAAM,KAAO,KACzBuD,EAAI,GAAG,CAEV,GADAkT,EAAS0O,GAAWnlB,EAAMI,MAAM,EAAGmD,GAAGrD,KAAK,MAEvC,OAAOuW,EAEX,GAAI3Q,GAAQA,EAAK3L,QAAUoJ,GAAK6W,EAAcpa,EAAO8F,GAAM,IAASvC,EAAI,EAEpE,MAEJA,IAEJ3J,IAEJ,OAAO,KAGX,SAASurB,GAAW9lB,GAChB,IAAI+lB,EAAY,KAEhB,IAAKC,GAAQhmB,SAA4B,IAAXhF,GACtBA,GAAUA,EAAOJ,QACrB,IACImrB,EAAYE,GAAaC,MACzB5rB,EAAQ,YAAc0F,GAGtBmmB,GAAmBJ,GACrB,MAAOjsB,IAEb,OAAOksB,GAAQhmB,GAMnB,SAASmmB,GAAoBvnB,EAAKe,GAC9B,IAAIymB,EAeJ,OAdIxnB,IAEIwnB,EADAzP,EAAYhX,GACL0mB,GAAUznB,GAGV0nB,GAAa1nB,EAAKe,MAKzBsmB,GAAeG,GAIhBH,GAAaC,MAGxB,SAASI,GAActmB,EAAMsa,GACzB,GAAe,OAAXA,EAAiB,CACjB,IAAI2B,EAAesK,GAEnB,GADAjM,EAAOkM,KAAOxmB,EACO,MAAjBgmB,GAAQhmB,GACR6b,EAAgB,uBACR,2OAIRI,EAAe+J,GAAQhmB,GAAMymB,aAC1B,GAA2B,MAAvBnM,EAAOoM,aAAsB,CACpC,GAAoC,MAAhCV,GAAQ1L,EAAOoM,cAUf,OAPKC,GAAerM,EAAOoM,gBACvBC,GAAerM,EAAOoM,kBAE1BC,GAAerM,EAAOoM,cAAcpqB,MAChC0D,KAAMA,EACNsa,OAAQA,IAEL,KATP2B,EAAe+J,GAAQ1L,EAAOoM,cAAcD,QA0BpD,OAdAT,GAAQhmB,GAAQ,IAAImc,EAAOH,EAAaC,EAAc3B,IAElDqM,GAAe3mB,IACf2mB,GAAe3mB,GAAM7C,QAAQ,SAAUoD,GACnC+lB,GAAa/lB,EAAEP,KAAMO,EAAE+Z,UAO/B6L,GAAmBnmB,GAGZgmB,GAAQhmB,GAIf,cADOgmB,GAAQhmB,GACR,KAgCf,SAASqmB,GAAWznB,GAChB,IAAIwY,EAMJ,GAJIxY,GAAOA,EAAIub,SAAWvb,EAAIub,QAAQ+L,QAClCtnB,EAAMA,EAAIub,QAAQ+L,QAGjBtnB,EACD,OAAOqnB,GAGX,IAAKvV,EAAQ9R,GAAM,CAGf,GADAwY,EAAS0O,GAAWlnB,GAEhB,OAAOwY,EAEXxY,GAAOA,GAGX,OAAOgnB,GAAahnB,GAOxB,SAASgoB,GAAepO,GACpB,IAAIZ,EACAvd,EAAIme,EAAE0H,GAyBV,OAvBI7lB,IAAsC,IAAjCke,EAAgBC,GAAGZ,WACxBA,EACIvd,EAAEwsB,IAAe,GAAKxsB,EAAEwsB,IAAe,GAAMA,GAC7CxsB,EAAEysB,IAAe,GAAKzsB,EAAEysB,IAAe3G,EAAY9lB,EAAE0sB,IAAO1sB,EAAEwsB,KAAUC,GACxEzsB,EAAE2sB,IAAe,GAAK3sB,EAAE2sB,IAAe,IAAmB,KAAZ3sB,EAAE2sB,MAA+B,IAAd3sB,EAAE4sB,KAA+B,IAAd5sB,EAAE6sB,KAAoC,IAAnB7sB,EAAE8sB,KAAuBH,GAChI3sB,EAAE4sB,IAAe,GAAK5sB,EAAE4sB,IAAe,GAAMA,GAC7C5sB,EAAE6sB,IAAe,GAAK7sB,EAAE6sB,IAAe,GAAMA,GAC7C7sB,EAAE8sB,IAAe,GAAK9sB,EAAE8sB,IAAe,IAAMA,IAC5C,EAED5O,EAAgBC,GAAG4O,qBAAuBxP,EAAWmP,IAAQnP,EAAWkP,MACxElP,EAAWkP,IAEXvO,EAAgBC,GAAG6O,iBAAgC,IAAdzP,IACrCA,EAAW0P,IAEX/O,EAAgBC,GAAG+O,mBAAkC,IAAd3P,IACvCA,EAAW4P,IAGfjP,EAAgBC,GAAGZ,SAAWA,GAG3BY,EAyCX,SAASiP,GAAcnN,GACnB,IAAI/f,EAAGI,EAGH+sB,EAAWC,EAAYC,EAAYC,EAFnCC,EAASxN,EAAOT,GAChBxY,EAAQ0mB,GAAiBnmB,KAAKkmB,IAAWE,GAAcpmB,KAAKkmB,GAGhE,GAAIzmB,EAAO,CAGP,IAFAkX,EAAgB+B,GAAQpC,KAAM,EAEzB3d,EAAI,EAAGI,EAAIstB,GAASntB,OAAQP,EAAII,EAAGJ,IACpC,GAAI0tB,GAAS1tB,GAAG,GAAGqH,KAAKP,EAAM,IAAK,CAC/BsmB,EAAaM,GAAS1tB,GAAG,GACzBmtB,GAA+B,IAAnBO,GAAS1tB,GAAG,GACxB,MAGR,GAAkB,MAAdotB,EAEA,YADArN,EAAO3B,UAAW,GAGtB,GAAItX,EAAM,GAAI,CACV,IAAK9G,EAAI,EAAGI,EAAIutB,GAASptB,OAAQP,EAAII,EAAGJ,IACpC,GAAI2tB,GAAS3tB,GAAG,GAAGqH,KAAKP,EAAM,IAAK,CAE/BumB,GAAcvmB,EAAM,IAAM,KAAO6mB,GAAS3tB,GAAG,GAC7C,MAGR,GAAkB,MAAdqtB,EAEA,YADAtN,EAAO3B,UAAW,GAI1B,IAAK+O,GAA2B,MAAdE,EAEd,YADAtN,EAAO3B,UAAW,GAGtB,GAAItX,EAAM,GAAI,CACV,IAAI8mB,GAAQvmB,KAAKP,EAAM,IAInB,YADAiZ,EAAO3B,UAAW,GAFlBkP,EAAW,IAMnBvN,EAAOR,GAAK6N,GAAcC,GAAc,KAAOC,GAAY,IAC3DO,GAA0B9N,QAE1BA,EAAO3B,UAAW,EAQ1B,SAAS0P,GAAkB/N,GACvB,IAAIwN,EAAQzmB,EAAOinB,EACfX,EAAYC,EAAYC,EAaxBU,EAAUC,EAZVC,GACAC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,SACRC,OAAQ,UAWZ,GANApB,EAASxN,EAAOT,GACX9X,QAAQ,qBAAsB,KAC9BA,QAAQ,WAAY,KACpBA,QAAQ,WAAY,IACzBV,EAAQ8nB,GAAcvnB,KAAKkmB,GAEhB,CAMP,GALAQ,EAAYjnB,EAAM,GAAK,OAA8B,IAApBA,EAAM,GAAGvG,OAAgB,KAAO,KAAO,GACxE6sB,EAAa,UAAatmB,EAAM,GAAGvG,OAAS,GAAM,QAAU,OAC5D8sB,EAAa,SAAWvmB,EAAM,GAAK,MAAQ,IAGvCA,EAAM,GAAI,CACV,IACI+nB,GAAa,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OADpC,IAAIvS,KAAKxV,EAAM,IACuCgoB,UAEvE,GAAIhoB,EAAM,GAAGyc,OAAO,EAAE,KAAOsL,EAGzB,OAFA7Q,EAAgB+B,GAAQhC,iBAAkB,OAC1CgC,EAAO3B,UAAW,GAK1B,OAAQtX,EAAM,GAAGvG,QACb,KAAK,EAEGytB,EADkB,IAAlBC,EACW,WAEXA,EA/BD,4BA+B0B5oB,QAAQyB,EAAM,GAAG,GAAGsN,eAAiB,IACjC,EAAK,KAAO,OACnC,GAAK6Z,GAAezmB,QAAQ,MAAO,KAAMV,MAAM,OAAO,GAAK,KAErE,MACJ,KAAK,EACDknB,EAAWE,EAAUpnB,EAAM,IAC3B,MACJ,QACIknB,EAAWE,EAAU,QAE7BpnB,EAAM,GAAKknB,EACXjO,EAAOT,GAAKxY,EAAMtB,OAAO,GAAGc,KAAK,IACjCgnB,EAAW,MACXvN,EAAOR,GAAKwO,EAAYX,EAAaC,EAAaC,EAClDO,GAA0B9N,GAC1B/B,EAAgB+B,GAAQjC,SAAU,OAElCiC,EAAO3B,UAAW,EAK1B,SAAS2Q,GAAiBhP,GACtB,IAAImF,EAAU8J,GAAgB3nB,KAAK0Y,EAAOT,IAE1B,OAAZ4F,GAKJgI,GAAcnN,IACU,IAApBA,EAAO3B,kBACA2B,EAAO3B,SAKlB0P,GAAkB/N,IACM,IAApBA,EAAO3B,kBACA2B,EAAO3B,SAMlBrC,EAAMkT,wBAAwBlP,MAnB1BA,EAAOtB,GAAK,IAAInC,MAAM4I,EAAQ,IAiCtC,SAASgK,GAASpvB,EAAGwM,EAAG6H,GACpB,OAAS,MAALrU,EACOA,EAEF,MAALwM,EACOA,EAEJ6H,EAGX,SAASgb,GAAiBpP,GAEtB,IAAIqP,EAAW,IAAI9S,KAAKP,EAAMsT,OAC9B,OAAItP,EAAOuP,SACCF,EAAS/G,iBAAkB+G,EAASG,cAAeH,EAASpJ,eAEhEoJ,EAASlH,cAAekH,EAASI,WAAYJ,EAASK,WAOlE,SAASC,GAAiB3P,GACtB,IAAI/f,EAAG+mB,EAAkB4I,EAAaC,EAAzBhpB,KAEb,IAAImZ,EAAOtB,GAAX,CA6BA,IAzBAkR,EAAcR,GAAiBpP,GAG3BA,EAAO0F,IAAyB,MAAnB1F,EAAO4F,GAAG4G,KAAqC,MAApBxM,EAAO4F,GAAG2G,KAClDuD,GAAsB9P,GAID,MAArBA,EAAO+P,aACPF,EAAYV,GAASnP,EAAO4F,GAAG6G,IAAOmD,EAAYnD,MAE9CzM,EAAO+P,WAAapI,GAAWkI,IAAoC,IAAtB7P,EAAO+P,cACpD9R,EAAgB+B,GAAQ8M,oBAAqB,GAGjD9F,EAAOqB,GAAcwH,EAAW,EAAG7P,EAAO+P,YAC1C/P,EAAO4F,GAAG2G,IAASvF,EAAKwI,cACxBxP,EAAO4F,GAAG4G,IAAQxF,EAAKf,cAQtBhmB,EAAI,EAAGA,EAAI,GAAqB,MAAhB+f,EAAO4F,GAAG3lB,KAAcA,EACzC+f,EAAO4F,GAAG3lB,GAAK4G,EAAM5G,GAAK2vB,EAAY3vB,GAI1C,KAAOA,EAAI,EAAGA,IACV+f,EAAO4F,GAAG3lB,GAAK4G,EAAM5G,GAAsB,MAAhB+f,EAAO4F,GAAG3lB,GAAqB,IAANA,EAAU,EAAI,EAAK+f,EAAO4F,GAAG3lB,GAI7D,KAApB+f,EAAO4F,GAAG8G,KACgB,IAAtB1M,EAAO4F,GAAG+G,KACY,IAAtB3M,EAAO4F,GAAGgH,KACiB,IAA3B5M,EAAO4F,GAAGiH,MACd7M,EAAOgQ,UAAW,EAClBhQ,EAAO4F,GAAG8G,IAAQ,GAGtB1M,EAAOtB,IAAMsB,EAAOuP,QAAUlH,GAAgBR,IAAYvd,MAAM,KAAMzD,GAGnD,MAAfmZ,EAAON,MACPM,EAAOtB,GAAGuR,cAAcjQ,EAAOtB,GAAGwR,gBAAkBlQ,EAAON,MAG3DM,EAAOgQ,WACPhQ,EAAO4F,GAAG8G,IAAQ,KAI1B,SAASoD,GAAsB9P,GAC3B,IAAImQ,EAAGC,EAAUtH,EAAMC,EAASN,EAAKC,EAAK2H,EAAMC,EAGhD,GAAY,OADZH,EAAInQ,EAAO0F,IACL6K,IAAqB,MAAPJ,EAAEK,GAAoB,MAAPL,EAAE9gB,EACjCoZ,EAAM,EACNC,EAAM,EAMN0H,EAAWjB,GAASgB,EAAEI,GAAIvQ,EAAO4F,GAAG6G,IAAOtD,GAAWsH,KAAe,EAAG,GAAG3K,MAC3EgD,EAAOqG,GAASgB,EAAEK,EAAG,KACrBzH,EAAUoG,GAASgB,EAAE9gB,EAAG,IACV,GAAK0Z,EAAU,KACzBuH,GAAkB,OAEnB,CACH7H,EAAMzI,EAAOH,QAAQ6Q,MAAMjI,IAC3BC,EAAM1I,EAAOH,QAAQ6Q,MAAMhI,IAE3B,IAAIiI,EAAUxH,GAAWsH,KAAehI,EAAKC,GAE7C0H,EAAWjB,GAASgB,EAAES,GAAI5Q,EAAO4F,GAAG6G,IAAOkE,EAAQ7K,MAGnDgD,EAAOqG,GAASgB,EAAEA,EAAGQ,EAAQ7H,MAElB,MAAPqH,EAAEpI,IAEFgB,EAAUoH,EAAEpI,GACE,GAAKgB,EAAU,KACzBuH,GAAkB,GAER,MAAPH,EAAE3wB,GAETupB,EAAUoH,EAAE3wB,EAAIipB,GACZ0H,EAAE3wB,EAAI,GAAK2wB,EAAE3wB,EAAI,KACjB8wB,GAAkB,IAItBvH,EAAUN,EAGdK,EAAO,GAAKA,EAAOQ,GAAY8G,EAAU3H,EAAKC,GAC9CzK,EAAgB+B,GAAQ+M,gBAAiB,EACf,MAAnBuD,EACPrS,EAAgB+B,GAAQiN,kBAAmB,GAE3CoD,EAAOxH,GAAmBuH,EAAUtH,EAAMC,EAASN,EAAKC,GACxD1I,EAAO4F,GAAG6G,IAAQ4D,EAAKvK,KACvB9F,EAAO+P,WAAaM,EAAKnH,WAWjC,SAAS4E,GAA0B9N,GAE/B,GAAIA,EAAOR,KAAOxD,EAAM6U,SAIxB,GAAI7Q,EAAOR,KAAOxD,EAAM8U,SAAxB,CAIA9Q,EAAO4F,MACP3H,EAAgB+B,GAAQ7C,OAAQ,EAGhC,IACIld,EAAG8wB,EAAajqB,EAAQqP,EAAO6a,EAD/BxD,EAAS,GAAKxN,EAAOT,GAErB/P,EAAege,EAAOhtB,OACtBywB,EAAyB,EAI7B,IAFAnqB,EAASud,EAAarE,EAAOR,GAAIQ,EAAOH,SAAS9Y,MAAMmd,QAElDjkB,EAAI,EAAGA,EAAI6G,EAAOtG,OAAQP,IAC3BkW,EAAQrP,EAAO7G,IACf8wB,GAAevD,EAAOzmB,MAAMie,EAAsB7O,EAAO6J,SAAgB,OAIrEgR,EAAUxD,EAAOhK,OAAO,EAAGgK,EAAOloB,QAAQyrB,KAC9BvwB,OAAS,GACjByd,EAAgB+B,GAAQ3C,YAAYrb,KAAKgvB,GAE7CxD,EAASA,EAAO/mB,MAAM+mB,EAAOloB,QAAQyrB,GAAeA,EAAYvwB,QAChEywB,GAA0BF,EAAYvwB,QAGtCsjB,GAAqB3N,IACjB4a,EACA9S,EAAgB+B,GAAQ7C,OAAQ,EAGhCc,EAAgB+B,GAAQ5C,aAAapb,KAAKmU,GAE9CwP,EAAwBxP,EAAO4a,EAAa/Q,IAEvCA,EAAOnB,UAAYkS,GACxB9S,EAAgB+B,GAAQ5C,aAAapb,KAAKmU,GAKlD8H,EAAgB+B,GAAQzC,cAAgB/N,EAAeyhB,EACnDzD,EAAOhtB,OAAS,GAChByd,EAAgB+B,GAAQ3C,YAAYrb,KAAKwrB,GAIzCxN,EAAO4F,GAAG8G,KAAS,KACiB,IAApCzO,EAAgB+B,GAAQlB,SACxBkB,EAAO4F,GAAG8G,IAAQ,IAClBzO,EAAgB+B,GAAQlB,aAAU7W,GAGtCgW,EAAgB+B,GAAQnC,gBAAkBmC,EAAO4F,GAAGnf,MAAM,GAC1DwX,EAAgB+B,GAAQlC,SAAWkC,EAAOkR,UAE1ClR,EAAO4F,GAAG8G,IAAQyE,GAAgBnR,EAAOH,QAASG,EAAO4F,GAAG8G,IAAO1M,EAAOkR,WAE1EvB,GAAgB3P,GAChBsM,GAActM,QA7DV+N,GAAkB/N,QAJlBmN,GAAcnN,GAqEtB,SAASmR,GAAiBrU,EAAQsU,EAAMtT,GACpC,IAAIuT,EAEJ,OAAgB,MAAZvT,EAEOsT,EAEgB,MAAvBtU,EAAOwU,aACAxU,EAAOwU,aAAaF,EAAMtT,GACX,MAAfhB,EAAOyU,OAEdF,EAAOvU,EAAOyU,KAAKzT,KACPsT,EAAO,KACfA,GAAQ,IAEPC,GAAiB,KAATD,IACTA,EAAO,GAEJA,GAGAA,EAKf,SAASI,GAAyBxR,GAC9B,IAAIyR,EACAC,EAEAC,EACA1xB,EACA2xB,EAEJ,GAAyB,IAArB5R,EAAOR,GAAGhf,OAGV,OAFAyd,EAAgB+B,GAAQtC,eAAgB,OACxCsC,EAAOtB,GAAK,IAAInC,KAAK3N,MAIzB,IAAK3O,EAAI,EAAGA,EAAI+f,EAAOR,GAAGhf,OAAQP,IAC9B2xB,EAAe,EACfH,EAAaxS,KAAee,GACN,MAAlBA,EAAOuP,UACPkC,EAAWlC,QAAUvP,EAAOuP,SAEhCkC,EAAWjS,GAAKQ,EAAOR,GAAGvf,GAC1B6tB,GAA0B2D,GAErBrT,EAAQqT,KAKbG,GAAgB3T,EAAgBwT,GAAYlU,cAG5CqU,GAAkE,GAAlD3T,EAAgBwT,GAAYrU,aAAa5c,OAEzDyd,EAAgBwT,GAAYI,MAAQD,GAEjB,MAAfD,GAAuBC,EAAeD,KACtCA,EAAcC,EACdF,EAAaD,IAIrB/U,EAAOsD,EAAQ0R,GAAcD,GAGjC,SAASK,GAAiB9R,GACtB,IAAIA,EAAOtB,GAAX,CAIA,IAAIze,EAAIoiB,EAAqBrC,EAAOT,IACpCS,EAAO4F,GAAK7hB,GAAK9D,EAAE6lB,KAAM7lB,EAAE8lB,MAAO9lB,EAAE+pB,KAAO/pB,EAAE+mB,KAAM/mB,EAAEmxB,KAAMnxB,EAAE8xB,OAAQ9xB,EAAE+xB,OAAQ/xB,EAAEgyB,aAAc,SAAUnnB,GACrG,OAAOA,GAAOiK,SAASjK,EAAK,MAGhC6kB,GAAgB3P,IAGpB,SAASkS,GAAkBlS,GACvB,IAAInR,EAAM,IAAIkR,EAAOuM,GAAc6F,GAAcnS,KAOjD,OANInR,EAAImhB,WAEJnhB,EAAIvC,IAAI,EAAG,KACXuC,EAAImhB,cAAW/nB,GAGZ4G,EAGX,SAASsjB,GAAenS,GACpB,IAAInZ,EAAQmZ,EAAOT,GACf1C,EAASmD,EAAOR,GAIpB,OAFAQ,EAAOH,QAAUG,EAAOH,SAAWkM,GAAU/L,EAAOP,IAEtC,OAAV5Y,QAA8BoB,IAAX4U,GAAkC,KAAVhW,EACpCmY,GAAexB,WAAW,KAGhB,iBAAV3W,IACPmZ,EAAOT,GAAK1Y,EAAQmZ,EAAOH,QAAQuS,SAASvrB,IAG5CsZ,EAAStZ,GACF,IAAIkZ,EAAOuM,GAAczlB,KACzByV,EAAOzV,GACdmZ,EAAOtB,GAAK7X,EACLuP,EAAQyG,GACf2U,GAAyBxR,GAClBnD,EACPiR,GAA0B9N,GAE1BqS,GAAgBrS,GAGf5B,EAAQ4B,KACTA,EAAOtB,GAAK,MAGTsB,IAGX,SAASqS,GAAgBrS,GACrB,IAAInZ,EAAQmZ,EAAOT,GACflD,EAAYxV,GACZmZ,EAAOtB,GAAK,IAAInC,KAAKP,EAAMsT,OACpBhT,EAAOzV,GACdmZ,EAAOtB,GAAK,IAAInC,KAAK1V,EAAM8V,WACH,iBAAV9V,EACdmoB,GAAiBhP,GACV5J,EAAQvP,IACfmZ,EAAO4F,GAAK7hB,EAAI8C,EAAMJ,MAAM,GAAI,SAAUqE,GACtC,OAAOiK,SAASjK,EAAK,MAEzB6kB,GAAgB3P,IACT9D,EAASrV,GAChBirB,GAAiB9R,GACV3M,EAASxM,GAEhBmZ,EAAOtB,GAAK,IAAInC,KAAK1V,GAErBmV,EAAMkT,wBAAwBlP,GAItC,SAAShD,GAAkBnW,EAAOgW,EAAQC,EAAQC,EAAQuV,GACtD,IAAIle,KAoBJ,OAlBe,IAAX0I,IAA8B,IAAXA,IACnBC,EAASD,EACTA,OAAS7U,IAGRiU,EAASrV,IAAUsV,EAActV,IAC7BuP,EAAQvP,IAA2B,IAAjBA,EAAMrG,UAC7BqG,OAAQoB,GAIZmM,EAAEkL,kBAAmB,EACrBlL,EAAEmb,QAAUnb,EAAEuL,OAAS2S,EACvBle,EAAEqL,GAAK3C,EACP1I,EAAEmL,GAAK1Y,EACPuN,EAAEoL,GAAK3C,EACPzI,EAAEyK,QAAU9B,EAELmV,GAAiB9d,GAG5B,SAASqc,GAAa5pB,EAAOgW,EAAQC,EAAQC,GACzC,OAAOC,GAAiBnW,EAAOgW,EAAQC,EAAQC,GAAQ,GAgC3D,SAASwV,GAAO/V,EAAIgW,GAChB,IAAI3jB,EAAK5O,EAIT,GAHuB,IAAnBuyB,EAAQhyB,QAAgB4V,EAAQoc,EAAQ,MACxCA,EAAUA,EAAQ,KAEjBA,EAAQhyB,OACT,OAAOiwB,KAGX,IADA5hB,EAAM2jB,EAAQ,GACTvyB,EAAI,EAAGA,EAAIuyB,EAAQhyB,SAAUP,EACzBuyB,EAAQvyB,GAAGme,YAAaoU,EAAQvyB,GAAGuc,GAAI3N,KACxCA,EAAM2jB,EAAQvyB,IAGtB,OAAO4O,EAsBX,SAAS4jB,GAAgBvU,GACrB,IAAK,IAAI5Z,KAAO4Z,EACZ,IAAiC,IAA3BwU,GAASptB,QAAQhB,IAA0B,MAAV4Z,EAAE5Z,IAAiBU,MAAMkZ,EAAE5Z,IAC9D,OAAO,EAKf,IAAK,IADDquB,GAAiB,EACZ1yB,EAAI,EAAGA,EAAIyyB,GAASlyB,SAAUP,EACnC,GAAIie,EAAEwU,GAASzyB,IAAK,CAChB,GAAI0yB,EACA,OAAO,EAEPzvB,WAAWgb,EAAEwU,GAASzyB,OAASqgB,EAAMpC,EAAEwU,GAASzyB,OAChD0yB,GAAiB,GAK7B,OAAO,EAWX,SAASC,GAAUC,GACf,IAAIrQ,EAAkBH,EAAqBwQ,GACvCC,EAAQtQ,EAAgBsD,MAAQ,EAChCiN,EAAWvQ,EAAgBwQ,SAAW,EACtCrM,EAASnE,EAAgBuD,OAAS,EAClCkN,EAAQzQ,EAAgBsG,MAAQ,EAChCoK,EAAO1Q,EAAgBwH,KAAO,EAC9BgB,EAAQxI,EAAgB4O,MAAQ,EAChClG,EAAU1I,EAAgBuP,QAAU,EACpCoB,EAAU3Q,EAAgBwP,QAAU,EACpCoB,EAAe5Q,EAAgByP,aAAe,EAElDhxB,KAAKod,SAAWoU,GAAgBjQ,GAGhCvhB,KAAKoyB,eAAiBD,EACR,IAAVD,EACU,IAAVjI,EACQ,IAARF,EAAe,GAAK,GAGxB/pB,KAAKqyB,OAASJ,EACF,EAARD,EAIJhyB,KAAKsyB,SAAW5M,EACD,EAAXoM,EACQ,GAARD,EAEJ7xB,KAAKuyB,SAELvyB,KAAK4e,QAAUkM,KAEf9qB,KAAKwyB,UAGT,SAASC,GAAY5oB,GACjB,OAAOA,aAAe8nB,GAG1B,SAASe,GAAUtT,GACf,OAAIA,EAAS,GACyB,EAA3Brd,KAAKC,OAAO,EAAIod,GAEhBrd,KAAKC,MAAMod,GAM1B,SAASuT,GAAQzd,EAAO0d,GACpBpQ,EAAetN,EAAO,EAAG,EAAG,WACxB,IAAIyd,EAAS3yB,KAAK6yB,YACdC,EAAO,IAKX,OAJIH,EAAS,IACTA,GAAUA,EACVG,EAAO,KAEJA,EAAO5Q,KAAYyQ,EAAS,IAAK,GAAKC,EAAY1Q,IAAW,EAAW,GAAI,KAuB3F,SAAS6Q,GAAiBC,EAASzG,GAC/B,IAAI0G,GAAW1G,GAAU,IAAIzmB,MAAMktB,GAEnC,GAAgB,OAAZC,EACA,OAAO,KAGX,IACIC,IADUD,EAAQA,EAAQ1zB,OAAS,QAChB,IAAIuG,MAAMqtB,MAAiB,IAAK,EAAG,GACtDlJ,EAAuB,GAAXiJ,EAAM,GAAW7T,EAAM6T,EAAM,IAE7C,OAAmB,IAAZjJ,EACL,EACa,MAAbiJ,EAAM,GAAajJ,GAAWA,EAIpC,SAASmJ,GAAgBxtB,EAAOytB,GAC5B,IAAIzlB,EAAK0lB,EACT,OAAID,EAAM3U,QACN9Q,EAAMylB,EAAME,QACZD,GAAQpU,EAAStZ,IAAUyV,EAAOzV,GAASA,EAAM8V,UAAY8T,GAAY5pB,GAAO8V,WAAa9N,EAAI8N,UAEjG9N,EAAI6P,GAAG+V,QAAQ5lB,EAAI6P,GAAG/B,UAAY4X,GAClCvY,EAAMkE,aAAarR,GAAK,GACjBA,GAEA4hB,GAAY5pB,GAAO6tB,QAIlC,SAASC,GAAezW,GAGpB,OAAoD,IAA5Clb,KAAKC,MAAMib,EAAEQ,GAAGkW,oBAAsB,IAqJlD,SAASC,KACL,QAAO5zB,KAAKmd,YAAYnd,KAAK0e,QAA2B,IAAjB1e,KAAK2e,SAWhD,SAASkV,GAAgBjuB,EAAOvC,GAC5B,IAGIyvB,EACAgB,EACAC,EALAnC,EAAWhsB,EAEXE,EAAQ,KAuDZ,OAlDI2sB,GAAW7sB,GACXgsB,GACI3K,GAAKrhB,EAAMwsB,cACXtL,EAAKlhB,EAAMysB,MACXrL,EAAKphB,EAAM0sB,SAERlgB,EAASxM,IAChBgsB,KACIvuB,EACAuuB,EAASvuB,GAAOuC,EAEhBgsB,EAASO,aAAevsB,IAElBE,EAAQkuB,GAAY3tB,KAAKT,KACnCktB,EAAqB,MAAbhtB,EAAM,IAAe,EAAI,EACjC8rB,GACI/K,EAAK,EACLC,EAAKzH,EAAMvZ,EAAMylB,KAAiCuH,EAClD/L,EAAK1H,EAAMvZ,EAAM2lB,KAAiCqH,EAClD7V,EAAKoC,EAAMvZ,EAAM4lB,KAAiCoH,EAClDn0B,EAAK0gB,EAAMvZ,EAAM6lB,KAAiCmH,EAClD7L,GAAK5H,EAAMqT,GAA8B,IAArB5sB,EAAM8lB,MAAwBkH,KAE5ChtB,EAAQmuB,GAAS5tB,KAAKT,KAChCktB,EAAqB,MAAbhtB,EAAM,IAAe,EAAI,EACjC8rB,GACI/K,EAAIqN,GAASpuB,EAAM,GAAIgtB,GACvB9L,EAAIkN,GAASpuB,EAAM,GAAIgtB,GACvB5D,EAAIgF,GAASpuB,EAAM,GAAIgtB,GACvBhM,EAAIoN,GAASpuB,EAAM,GAAIgtB,GACvB/L,EAAImN,GAASpuB,EAAM,GAAIgtB,GACvB7V,EAAIiX,GAASpuB,EAAM,GAAIgtB,GACvBn0B,EAAIu1B,GAASpuB,EAAM,GAAIgtB,KAER,MAAZlB,EACPA,KAC2B,iBAAbA,IAA0B,SAAUA,GAAY,OAAQA,KACtEmC,EAAUI,GAAkB3E,GAAYoC,EAAS1T,MAAOsR,GAAYoC,EAAS3T,MAE7E2T,MACS3K,GAAK8M,EAAQ5B,aACtBP,EAAS5K,EAAI+M,EAAQrO,QAGzBoO,EAAM,IAAInC,GAASC,GAEfa,GAAW7sB,IAAU4V,EAAW5V,EAAO,aACvCkuB,EAAIlV,QAAUhZ,EAAMgZ,SAGjBkV,EAMX,SAASI,GAAUE,EAAKtB,GAIpB,IAAIllB,EAAMwmB,GAAOnyB,WAAWmyB,EAAI5tB,QAAQ,IAAK,MAE7C,OAAQzC,MAAM6J,GAAO,EAAIA,GAAOklB,EAGpC,SAASuB,GAA0BC,EAAMC,GACrC,IAAI3mB,GAAOukB,aAAc,EAAGzM,OAAQ,GAUpC,OARA9X,EAAI8X,OAAS6O,EAAMzP,QAAUwP,EAAKxP,QACC,IAA9ByP,EAAM1P,OAASyP,EAAKzP,QACrByP,EAAKf,QAAQloB,IAAIuC,EAAI8X,OAAQ,KAAK8O,QAAQD,MACxC3mB,EAAI8X,OAGV9X,EAAIukB,cAAgBoC,GAAUD,EAAKf,QAAQloB,IAAIuC,EAAI8X,OAAQ,KAEpD9X,EAGX,SAASumB,GAAkBG,EAAMC,GAC7B,IAAI3mB,EACJ,OAAM0mB,EAAKnX,WAAaoX,EAAMpX,WAI9BoX,EAAQnB,GAAgBmB,EAAOD,GAC3BA,EAAKG,SAASF,GACd3mB,EAAMymB,GAA0BC,EAAMC,KAEtC3mB,EAAMymB,GAA0BE,EAAOD,IACnCnC,cAAgBvkB,EAAIukB,aACxBvkB,EAAI8X,QAAU9X,EAAI8X,QAGf9X,IAZKukB,aAAc,EAAGzM,OAAQ,GAgBzC,SAASgP,GAAYC,EAAWlwB,GAC5B,OAAO,SAAU2Z,EAAKwW,GAClB,IAAIC,EAAKC,EAWT,OATe,OAAXF,GAAoB7wB,OAAO6wB,KAC3BtU,EAAgB7b,EAAM,YAAcA,EAAQ,uDAAyDA,EAAO,kGAE5GqwB,EAAM1W,EAAKA,EAAMwW,EAAQA,EAASE,GAGtC1W,EAAqB,iBAARA,GAAoBA,EAAMA,EACvCyW,EAAMhB,GAAezV,EAAKwW,GAC1BG,GAAY/0B,KAAM60B,EAAKF,GAChB30B,MAIf,SAAS+0B,GAAa9S,EAAK2P,EAAUoD,EAAU/V,GAC3C,IAAIkT,EAAeP,EAASQ,cACxBH,EAAOS,GAASd,EAASS,OACzB3M,EAASgN,GAASd,EAASU,SAE1BrQ,EAAI9E,YAKT8B,EAA+B,MAAhBA,GAA8BA,EAEzCkT,GACAlQ,EAAIxE,GAAG+V,QAAQvR,EAAIxE,GAAG/B,UAAYyW,EAAe6C,GAEjD/C,GACAjQ,EAAMC,EAAK,OAAQ/d,EAAI+d,EAAK,QAAUgQ,EAAO+C,GAE7CtP,GACAE,EAAS3D,EAAK/d,EAAI+d,EAAK,SAAWyD,EAASsP,GAE3C/V,GACAlE,EAAMkE,aAAagD,EAAKgQ,GAAQvM,IA8HxC,SAASuP,GAAWn2B,EAAGwM,GAEnB,IAGa4pB,EAHTC,EAA0C,IAAvB7pB,EAAEuZ,OAAS/lB,EAAE+lB,SAAiBvZ,EAAEwZ,QAAUhmB,EAAEgmB,SAE/DsQ,EAASt2B,EAAEy0B,QAAQloB,IAAI8pB,EAAgB,UAc3C,OARID,EAHA5pB,EAAI8pB,EAAS,GAGH9pB,EAAI8pB,IAAWA,EAFft2B,EAAEy0B,QAAQloB,IAAI8pB,EAAiB,EAAG,YAMlC7pB,EAAI8pB,IAFJt2B,EAAEy0B,QAAQloB,IAAI8pB,EAAiB,EAAG,UAETC,KAI9BD,EAAiBD,IAAW,EAwFzC,SAASrZ,GAAQxY,GACb,IAAIgyB,EAEJ,YAAYruB,IAAR3D,EACOrD,KAAK4e,QAAQ+L,OAGC,OADrB0K,EAAgBvK,GAAUznB,MAEtBrD,KAAK4e,QAAUyW,GAEZr1B,MAef,SAAS8iB,KACL,OAAO9iB,KAAK4e,QAgIhB,SAAS0W,GAAwBpgB,EAAOqgB,GACpC/S,EAAe,GAAItN,EAAOA,EAAM3V,QAAS,EAAGg2B,GA+DhD,SAASC,GAAqB5vB,EAAOiiB,EAAMC,EAASN,EAAKC,GACrD,IAAIgO,EACJ,OAAa,MAAT7vB,EACOsiB,GAAWloB,KAAMwnB,EAAKC,GAAK5C,MAElC4Q,EAAcpN,GAAYziB,EAAO4hB,EAAKC,GAClCI,EAAO4N,IACP5N,EAAO4N,GAEJC,GAAWp2B,KAAKU,KAAM4F,EAAOiiB,EAAMC,EAASN,EAAKC,IAIhE,SAASiO,GAAWvG,EAAUtH,EAAMC,EAASN,EAAKC,GAC9C,IAAIkO,EAAgB/N,GAAmBuH,EAAUtH,EAAMC,EAASN,EAAKC,GACjE1B,EAAOqB,GAAcuO,EAAc9Q,KAAM,EAAG8Q,EAAc1N,WAK9D,OAHAjoB,KAAK6kB,KAAKkB,EAAKsB,kBACfrnB,KAAK8kB,MAAMiB,EAAKwI,eAChBvuB,KAAK+lB,KAAKA,EAAKf,cACRhlB,KA+TX,SAAS41B,GAAoBrJ,GACzB,OAAOA,EAyCX,SAASsJ,GAAOja,EAAQrX,EAAOuxB,EAAOC,GAClC,IAAIla,EAASiP,KACT9O,EAAML,IAAYjY,IAAIqyB,EAAQxxB,GAClC,OAAOsX,EAAOia,GAAO9Z,EAAKJ,GAG9B,SAASoa,GAAgBpa,EAAQrX,EAAOuxB,GAQpC,GAPI1jB,EAASwJ,KACTrX,EAAQqX,EACRA,OAAS5U,GAGb4U,EAASA,GAAU,GAEN,MAATrX,EACA,OAAOsxB,GAAMja,EAAQrX,EAAOuxB,EAAO,SAGvC,IAAI92B,EACAi3B,KACJ,IAAKj3B,EAAI,EAAGA,EAAI,GAAIA,IAChBi3B,EAAIj3B,GAAK62B,GAAMja,EAAQ5c,EAAG82B,EAAO,SAErC,OAAOG,EAWX,SAASC,GAAkBC,EAAcva,EAAQrX,EAAOuxB,GACxB,kBAAjBK,GACH/jB,EAASwJ,KACTrX,EAAQqX,EACRA,OAAS5U,GAGb4U,EAASA,GAAU,KAGnBrX,EADAqX,EAASua,EAETA,GAAe,EAEX/jB,EAASwJ,KACTrX,EAAQqX,EACRA,OAAS5U,GAGb4U,EAASA,GAAU,IAGvB,IAAIC,EAASiP,KACTxiB,EAAQ6tB,EAAeta,EAAO4T,MAAMjI,IAAM,EAE9C,GAAa,MAATjjB,EACA,OAAOsxB,GAAMja,GAASrX,EAAQ+D,GAAS,EAAGwtB,EAAO,OAGrD,IAAI92B,EACAi3B,KACJ,IAAKj3B,EAAI,EAAGA,EAAI,EAAGA,IACfi3B,EAAIj3B,GAAK62B,GAAMja,GAAS5c,EAAIsJ,GAAS,EAAGwtB,EAAO,OAEnD,OAAOG,EA0DX,SAASG,GAAexE,EAAUhsB,EAAOxF,EAAOu0B,GAC5C,IAAIJ,EAAQV,GAAejuB,EAAOxF,GAMlC,OAJAwxB,EAASQ,eAAiBuC,EAAYJ,EAAMnC,cAC5CR,EAASS,OAAiBsC,EAAYJ,EAAMlC,MAC5CT,EAASU,SAAiBqC,EAAYJ,EAAMjC,QAErCV,EAASY,UAapB,SAAS6D,GAASjX,GACd,OAAIA,EAAS,EACFrd,KAAKsL,MAAM+R,GAEXrd,KAAKqL,KAAKgS,GAmDzB,SAASkX,GAAcrE,GAGnB,OAAc,KAAPA,EAAc,OAGzB,SAASsE,GAAc7Q,GAEnB,OAAgB,OAATA,EAAkB,KA8C7B,SAAS8Q,GAAQC,GACb,OAAO,WACH,OAAOz2B,KAAK02B,GAAGD,IAkBvB,SAASE,GAAWlyB,GAChB,OAAO,WACH,OAAOzE,KAAKmd,UAAYnd,KAAKuyB,MAAM9tB,GAAQkJ,KA2BnD,SAASipB,GAAkBrK,EAAQnN,EAAQyX,EAAeC,EAAUjb,GAChE,OAAOA,EAAOkb,aAAa3X,GAAU,IAAKyX,EAAetK,EAAQuK,GAGrE,SAASE,GAAgBC,EAAgBJ,EAAehb,GACpD,IAAI+V,EAAWiC,GAAeoD,GAAgBnoB,MAC1CojB,EAAWlwB,GAAM4vB,EAAS8E,GAAG,MAC7BzM,EAAWjoB,GAAM4vB,EAAS8E,GAAG,MAC7B3M,EAAW/nB,GAAM4vB,EAAS8E,GAAG,MAC7BzE,EAAWjwB,GAAM4vB,EAAS8E,GAAG,MAC7BhR,EAAW1jB,GAAM4vB,EAAS8E,GAAG,MAC7B7E,EAAW7vB,GAAM4vB,EAAS8E,GAAG,MAE7B53B,EAAIozB,GAAWgF,GAAWC,KAAO,IAAKjF,IAClCA,EAAUgF,GAAWv4B,IAAQ,KAAMuzB,IACnCjI,GAAW,IAAkB,MAC7BA,EAAUiN,GAAWja,IAAQ,KAAMgN,IACnCF,GAAW,IAAkB,MAC7BA,EAAUmN,GAAWnQ,IAAQ,KAAMgD,IACnCkI,GAAW,IAAkB,MAC7BA,EAAUiF,GAAWpQ,IAAQ,KAAMmL,IACnCvM,GAAW,IAAkB,MAC7BA,EAAUwR,GAAWlQ,IAAQ,KAAMtB,IACnCmM,GAAW,IAAkB,OAAmB,KAAMA,GAK9D,OAHA/yB,EAAE,GAAK+3B,EACP/3B,EAAE,IAAMm4B,EAAiB,EACzBn4B,EAAE,GAAK+c,EACA+a,GAAkBvtB,MAAM,KAAMvK,GA+CzC,SAASs4B,KAQL,IAAKp3B,KAAKmd,UACN,OAAOnd,KAAK8iB,aAAaQ,cAG7B,IAGI2G,EAASF,EAAO8H,EAHhBK,EAAUmF,GAAMr3B,KAAKoyB,eAAiB,IACtCH,EAAeoF,GAAMr3B,KAAKqyB,OAC1B3M,EAAe2R,GAAMr3B,KAAKsyB,SAK9BvI,EAAoB5K,GADpB8K,EAAoB9K,EAAS+S,EAAU,KACA,IACvCA,GAAW,GACXjI,GAAW,GAQX,IAAIqN,EALJzF,EAAS1S,EAASuG,EAAS,IAMvBsB,EALJtB,GAAU,GAMN6R,EAAItF,EACJlL,EAAIgD,EACJ9M,EAAIgN,EACJtrB,EAAIuzB,EACJsF,EAAQx3B,KAAKy3B,YAEjB,OAAKD,GAMGA,EAAQ,EAAI,IAAM,IACtB,KACCF,EAAIA,EAAI,IAAM,KACdtQ,EAAIA,EAAI,IAAM,KACduQ,EAAIA,EAAI,IAAM,KACbxQ,GAAK9J,GAAKte,EAAK,IAAM,KACtBooB,EAAIA,EAAI,IAAM,KACd9J,EAAIA,EAAI,IAAM,KACdte,EAAIA,EAAI,IAAM,IAXR,MAxvIf,IAAIqc,GAwGA0c,GAkBAna,GAhBAma,GADA5yB,MAAMC,UAAU2yB,KACT5yB,MAAMC,UAAU2yB,KAEhB,SAAUC,GAIb,IAAK,IAHDn5B,EAAI2E,OAAOnD,MACX4f,EAAMphB,EAAEe,SAAW,EAEdP,EAAI,EAAGA,EAAI4gB,EAAK5gB,IACrB,GAAIA,KAAKR,GAAKm5B,EAAIr4B,KAAKU,KAAMxB,EAAEQ,GAAIA,EAAGR,GAClC,OAAO,EAIf,OAAO,GAqDXqgB,GAAmB9D,EAAM8D,oBAiDzBG,IAAmB,EA8FnBuB,MAYJxF,EAAMiF,6BAA8B,EACpCjF,EAAMqF,mBAAqB,KAyD3B,IAAIhd,GA+XAiB,GA/WAuzB,GAbAx0B,GADAD,OAAOC,KACAD,OAAOC,KAEP,SAAUyG,GACb,IAAI7K,EAAG4O,KACP,IAAK5O,KAAK6K,EACF2R,EAAW3R,EAAK7K,IAChB4O,EAAI7M,KAAK/B,GAGjB,OAAO4O,GAMXiqB,IACAC,QAAU,gBACVC,QAAU,mBACVC,SAAW,eACXC,QAAU,oBACVC,SAAW,sBACXC,SAAW,KAQXC,IACAC,IAAO,YACPC,GAAO,SACPC,EAAO,aACPC,GAAO,eACPC,IAAO,sBACPC,KAAO,6BAyBPC,GAAgC,UAMhCC,IACAC,OAAS,QACTC,KAAS,SACTn6B,EAAK,gBACLw4B,GAAK,aACLla,EAAK,WACL8b,GAAK,aACLhS,EAAK,UACLiS,GAAK,WACLlS,EAAK,QACLmS,GAAK,UACLjS,EAAK,UACLkS,GAAK,YACLrS,EAAK,SACLsS,GAAK,YAeLlY,MA4BAS,MA2EAuB,GAAmB,uLAEnBM,GAAwB,6CAExBF,MAEAR,MAoFAuW,GAAiB,KACjBC,GAAiB,OACjBC,GAAiB,QACjBC,GAAiB,QACjBC,GAAiB,aACjBC,GAAiB,QACjBC,GAAiB,YACjBC,GAAiB,gBACjBC,GAAiB,UACjBC,GAAiB,UACjBC,GAAiB,eAEjBC,GAAiB,MACjBC,GAAiB,WAEjBC,GAAiB,qBACjBC,GAAmB,0BAEnBC,GAAiB,uBAIjBC,GAAY,mHAGZvW,MA2BAhe,MA8BA2lB,GAAO,EACPF,GAAQ,EACRC,GAAO,EACPE,GAAO,EACPC,GAAS,EACTC,GAAS,EACTC,GAAc,EACdG,GAAO,EACPE,GAAU,EAmBVtG,GAdAthB,GADAS,MAAMC,UAAUV,QACNS,MAAMC,UAAUV,QAEhB,SAAUzF,GAEhB,IAAII,EACJ,IAAKA,EAAI,EAAGA,EAAIgB,KAAKT,SAAUP,EAC3B,GAAIgB,KAAKhB,KAAOJ,EACZ,OAAOI,EAGf,OAAQ,GAYhBwjB,EAAe,KAAM,KAAM,GAAI,KAAM,WACjC,OAAOxiB,KAAK8kB,QAAU,IAG1BtC,EAAe,MAAO,EAAG,EAAG,SAAU5G,GAClC,OAAO5b,KAAK8iB,aAAa2C,YAAYzlB,KAAM4b,KAG/C4G,EAAe,OAAQ,EAAG,EAAG,SAAU5G,GACnC,OAAO5b,KAAK8iB,aAAa4C,OAAO1lB,KAAM4b,KAK1CiF,EAAa,QAAS,KAItBW,EAAgB,QAAS,GAIzBkC,EAAc,IAAQ+V,IACtB/V,EAAc,KAAQ+V,GAAWJ,IACjC3V,EAAc,MAAQ,SAAUI,EAAUjI,GACtC,OAAOA,EAAOwe,iBAAiBvW,KAEnCJ,EAAc,OAAQ,SAAUI,EAAUjI,GACtC,OAAOA,EAAOye,YAAYxW,KAG9BS,GAAe,IAAK,MAAO,SAAU3e,EAAOgE,GACxCA,EAAM0hB,IAASjM,EAAMzZ,GAAS,IAGlC2e,GAAe,MAAO,QAAS,SAAU3e,EAAOgE,EAAOmV,EAAQ7J,GAC3D,IAAI4P,EAAQ/F,EAAOH,QAAQkH,YAAYlgB,EAAOsP,EAAO6J,EAAOnB,SAE/C,MAATkH,EACAlb,EAAM0hB,IAASxG,EAEf9H,EAAgB+B,GAAQvC,aAAe5W,IAM/C,IAAI20B,GAAmB,gCACnBC,GAAsB,wFAAwFp1B,MAAM,KAUpHq1B,GAA2B,kDAAkDr1B,MAAM,KAkInFs1B,GAA0BN,GAoB1BO,GAAqBP,GAwDzB5X,EAAe,IAAK,EAAG,EAAG,WACtB,IAAIqE,EAAI7mB,KAAK6kB,OACb,OAAOgC,GAAK,KAAO,GAAKA,EAAI,IAAMA,IAGtCrE,EAAe,GAAI,KAAM,GAAI,EAAG,WAC5B,OAAOxiB,KAAK6kB,OAAS,MAGzBrC,EAAe,GAAI,OAAU,GAAU,EAAG,QAC1CA,EAAe,GAAI,QAAU,GAAU,EAAG,QAC1CA,EAAe,GAAI,SAAU,GAAG,GAAO,EAAG,QAI1C3B,EAAa,OAAQ,KAIrBW,EAAgB,OAAQ,GAIxBkC,EAAc,IAAUsW,IACxBtW,EAAc,KAAU+V,GAAWJ,IACnC3V,EAAc,OAAUmW,GAAWN,IACnC7V,EAAc,QAAUoW,GAAWN,IACnC9V,EAAc,SAAUoW,GAAWN,IAEnCjV,GAAe,QAAS,UAAWiH,IACnCjH,EAAc,OAAQ,SAAU3e,EAAOgE,GACnCA,EAAM4hB,IAAyB,IAAjB5lB,EAAMrG,OAAewb,EAAM6f,kBAAkBh1B,GAASyZ,EAAMzZ,KAE9E2e,EAAc,KAAM,SAAU3e,EAAOgE,GACjCA,EAAM4hB,IAAQzQ,EAAM6f,kBAAkBh1B,KAE1C2e,EAAc,IAAK,SAAU3e,EAAOgE,GAChCA,EAAM4hB,IAAQ1X,SAASlO,EAAO,MAelCmV,EAAM6f,kBAAoB,SAAUh1B,GAChC,OAAOyZ,EAAMzZ,IAAUyZ,EAAMzZ,GAAS,GAAK,KAAO,MAKtD,IAAIi1B,GAAa/Y,EAAW,YAAY,GA4FxCU,EAAe,KAAM,KAAM,GAAI,KAAM,QACrCA,EAAe,KAAM,KAAM,GAAI,KAAM,WAIrC3B,EAAa,OAAQ,KACrBA,EAAa,UAAW,KAIxBW,EAAgB,OAAQ,GACxBA,EAAgB,UAAW,GAI3BkC,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAC/B3V,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAE/B7U,GAAmB,IAAK,KAAM,IAAK,MAAO,SAAU5e,EAAOiiB,EAAM9I,EAAQ7J,GACrE2S,EAAK3S,EAAMqN,OAAO,EAAG,IAAMlD,EAAMzZ,KAWrC,IAAIk1B,IACAtT,IAAM,EACNC,IAAM,GAyBVjF,EAAe,IAAK,EAAG,KAAM,OAE7BA,EAAe,KAAM,EAAG,EAAG,SAAU5G,GACjC,OAAO5b,KAAK8iB,aAAakG,YAAYhpB,KAAM4b,KAG/C4G,EAAe,MAAO,EAAG,EAAG,SAAU5G,GAClC,OAAO5b,KAAK8iB,aAAamG,cAAcjpB,KAAM4b,KAGjD4G,EAAe,OAAQ,EAAG,EAAG,SAAU5G,GACnC,OAAO5b,KAAK8iB,aAAaoG,SAASlpB,KAAM4b,KAG5C4G,EAAe,IAAK,EAAG,EAAG,WAC1BA,EAAe,IAAK,EAAG,EAAG,cAI1B3B,EAAa,MAAO,KACpBA,EAAa,UAAW,KACxBA,EAAa,aAAc,KAG3BW,EAAgB,MAAO,IACvBA,EAAgB,UAAW,IAC3BA,EAAgB,aAAc,IAI9BkC,EAAc,IAAQ+V,IACtB/V,EAAc,IAAQ+V,IACtB/V,EAAc,IAAQ+V,IACtB/V,EAAc,KAAQ,SAAUI,EAAUjI,GACtC,OAAOA,EAAOkf,iBAAiBjX,KAEnCJ,EAAc,MAAS,SAAUI,EAAUjI,GACvC,OAAOA,EAAOmf,mBAAmBlX,KAErCJ,EAAc,OAAU,SAAUI,EAAUjI,GACxC,OAAOA,EAAOof,cAAcnX,KAGhCU,GAAmB,KAAM,MAAO,QAAS,SAAU5e,EAAOiiB,EAAM9I,EAAQ7J,GACpE,IAAI4S,EAAU/I,EAAOH,QAAQ4J,cAAc5iB,EAAOsP,EAAO6J,EAAOnB,SAEjD,MAAXkK,EACAD,EAAKf,EAAIgB,EAET9K,EAAgB+B,GAAQpB,eAAiB/X,IAIjD4e,GAAmB,IAAK,IAAK,KAAM,SAAU5e,EAAOiiB,EAAM9I,EAAQ7J,GAC9D2S,EAAK3S,GAASmK,EAAMzZ,KA+BxB,IAAIs1B,GAAwB,2DAA2D91B,MAAM,KAUzF+1B,GAA6B,8BAA8B/1B,MAAM,KAKjEg2B,GAA2B,uBAAuBh2B,MAAM,KAqJxDi2B,GAAuBjB,GAoBvBkB,GAA4BlB,GAoB5BmB,GAA0BnB,GAwE9B5X,EAAe,KAAM,KAAM,GAAI,EAAG,QAClCA,EAAe,KAAM,KAAM,GAAI,EAAGsH,IAClCtH,EAAe,KAAM,KAAM,GAAI,EAN/B,WACI,OAAOxiB,KAAK+pB,SAAW,KAO3BvH,EAAe,MAAO,EAAG,EAAG,WACxB,MAAO,GAAKsH,GAAQzgB,MAAMrJ,MAAQkiB,EAASliB,KAAKiqB,UAAW,KAG/DzH,EAAe,QAAS,EAAG,EAAG,WAC1B,MAAO,GAAKsH,GAAQzgB,MAAMrJ,MAAQkiB,EAASliB,KAAKiqB,UAAW,GACvD/H,EAASliB,KAAKkyB,UAAW,KAGjC1P,EAAe,MAAO,EAAG,EAAG,WACxB,MAAO,GAAKxiB,KAAK+pB,QAAU7H,EAASliB,KAAKiqB,UAAW,KAGxDzH,EAAe,QAAS,EAAG,EAAG,WAC1B,MAAO,GAAKxiB,KAAK+pB,QAAU7H,EAASliB,KAAKiqB,UAAW,GAChD/H,EAASliB,KAAKkyB,UAAW,KASjCrV,GAAS,KAAK,GACdA,GAAS,KAAK,GAIdgE,EAAa,OAAQ,KAGrBW,EAAgB,OAAQ,IAQxBkC,EAAc,IAAMwG,IACpBxG,EAAc,IAAMwG,IACpBxG,EAAc,IAAM+V,IACpB/V,EAAc,IAAM+V,IACpB/V,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAC/B3V,EAAc,KAAM+V,GAAWJ,IAC/B3V,EAAc,KAAM+V,GAAWJ,IAE/B3V,EAAc,MAAOgW,IACrBhW,EAAc,QAASiW,IACvBjW,EAAc,MAAOgW,IACrBhW,EAAc,QAASiW,IAEvBpV,GAAe,IAAK,MAAOkH,IAC3BlH,GAAe,IAAK,MAAO,SAAU3e,EAAOgE,EAAOmV,GAC/C,IAAIyc,EAASnc,EAAMzZ,GACnBgE,EAAM6hB,IAAmB,KAAX+P,EAAgB,EAAIA,IAEtCjX,GAAe,IAAK,KAAM,SAAU3e,EAAOgE,EAAOmV,GAC9CA,EAAO0c,MAAQ1c,EAAOH,QAAQ0R,KAAK1qB,GACnCmZ,EAAOkR,UAAYrqB,IAEvB2e,GAAe,IAAK,MAAO,SAAU3e,EAAOgE,EAAOmV,GAC/CnV,EAAM6hB,IAAQpM,EAAMzZ,GACpBoX,EAAgB+B,GAAQlB,SAAU,IAEtC0G,EAAc,MAAO,SAAU3e,EAAOgE,EAAOmV,GACzC,IAAIxU,EAAM3E,EAAMrG,OAAS,EACzBqK,EAAM6hB,IAAQpM,EAAMzZ,EAAM2c,OAAO,EAAGhY,IACpCX,EAAM8hB,IAAUrM,EAAMzZ,EAAM2c,OAAOhY,IACnCyS,EAAgB+B,GAAQlB,SAAU,IAEtC0G,EAAc,QAAS,SAAU3e,EAAOgE,EAAOmV,GAC3C,IAAI2c,EAAO91B,EAAMrG,OAAS,EACtBo8B,EAAO/1B,EAAMrG,OAAS,EAC1BqK,EAAM6hB,IAAQpM,EAAMzZ,EAAM2c,OAAO,EAAGmZ,IACpC9xB,EAAM8hB,IAAUrM,EAAMzZ,EAAM2c,OAAOmZ,EAAM,IACzC9xB,EAAM+hB,IAAUtM,EAAMzZ,EAAM2c,OAAOoZ,IACnC3e,EAAgB+B,GAAQlB,SAAU,IAEtC0G,EAAc,MAAO,SAAU3e,EAAOgE,EAAOmV,GACzC,IAAIxU,EAAM3E,EAAMrG,OAAS,EACzBqK,EAAM6hB,IAAQpM,EAAMzZ,EAAM2c,OAAO,EAAGhY,IACpCX,EAAM8hB,IAAUrM,EAAMzZ,EAAM2c,OAAOhY,MAEvCga,EAAc,QAAS,SAAU3e,EAAOgE,EAAOmV,GAC3C,IAAI2c,EAAO91B,EAAMrG,OAAS,EACtBo8B,EAAO/1B,EAAMrG,OAAS,EAC1BqK,EAAM6hB,IAAQpM,EAAMzZ,EAAM2c,OAAO,EAAGmZ,IACpC9xB,EAAM8hB,IAAUrM,EAAMzZ,EAAM2c,OAAOmZ,EAAM,IACzC9xB,EAAM+hB,IAAUtM,EAAMzZ,EAAM2c,OAAOoZ,MAWvC,IA6CIjR,GA7CAkR,GAA6B,gBAgB7BC,GAAa/Z,EAAW,SAAS,GAMjCkJ,IACA8Q,SAAUjE,GACVpU,eAAgB2U,GAChB9U,YAryCqB,eAsyCrBZ,QAhyCiB,KAiyCjBqZ,uBAAwBpD,GACxB5B,aAAc6B,GAEdlT,OAAQ8U,GACR/U,YAAagV,GAEb5S,KAAMiT,GAEN5R,SAAUgS,GACVlS,YAAaoS,GACbnS,cAAekS,GAEfa,cAAeJ,IAIfnR,MACAW,MA8MAoB,GAAmB,mJACnBC,GAAgB,8IAEhBG,GAAU,wBAEVF,KACC,eAAgB,wBAChB,aAAc,oBACd,eAAgB,mBAChB,aAAc,eAAe,IAC7B,WAAY,gBACZ,UAAW,cAAc,IACzB,aAAc,eACd,WAAY,UAEZ,aAAc,gBACd,YAAa,eAAe,IAC5B,UAAW,UAIZC,KACC,gBAAiB,wBACjB,gBAAiB,uBACjB,WAAY,mBACZ,QAAS,cACT,cAAe,sBACf,cAAe,qBACf,SAAU,iBACV,OAAQ,aACR,KAAM,SAGPqB,GAAkB,sBAwDlBJ,GAAgB,+LAiGpB7S,EAAMkT,wBAA0B/N,EAC5B,iVAIA,SAAUnB,GACNA,EAAOtB,GAAK,IAAInC,KAAKyD,EAAOT,IAAMS,EAAOuP,QAAU,OAAS,OAoJpEvT,EAAM6U,SAAW,aAGjB7U,EAAM8U,SAAW,aA6PjB,IAAIoM,GAAe/b,EACf,qGACA,WACI,IAAIqU,EAAQ/E,GAAYnmB,MAAM,KAAMuF,WACpC,OAAI5O,KAAKmd,WAAaoX,EAAMpX,UACjBoX,EAAQv0B,KAAOA,KAAOu0B,EAEtBxW,MAKfme,GAAehc,EACf,qGACA,WACI,IAAIqU,EAAQ/E,GAAYnmB,MAAM,KAAMuF,WACpC,OAAI5O,KAAKmd,WAAaoX,EAAMpX,UACjBoX,EAAQv0B,KAAOA,KAAOu0B,EAEtBxW,MA4Cf0T,IAAY,OAAQ,UAAW,QAAS,OAAQ,MAAO,OAAQ,SAAU,SAAU,eA+FvFkB,GAAO,IAAK,KACZA,GAAO,KAAM,IAIbjP,EAAc,IAAMwW,IACpBxW,EAAc,KAAMwW,IACpB3V,GAAe,IAAK,MAAO,SAAU3e,EAAOgE,EAAOmV,GAC/CA,EAAOuP,SAAU,EACjBvP,EAAON,KAAOsU,GAAiBmH,GAAkBt0B,KAQrD,IAAIutB,GAAc,kBA2ClBpY,EAAMkE,aAAe,aAmJrB,IAAI+U,GAAc,wDAKdC,GAAW,8IA+DfJ,GAAetY,GAAKoW,GAAS5sB,UAC7B8uB,GAAesI,QAvVf,WACI,OAAOtI,GAAelmB,MA6a1B,IAAItC,GAAWqpB,GAAY,EAAG,OAC1B0H,GAAW1H,IAAa,EAAG,YA8I/B3Z,EAAMshB,cAAgB,uBACtBthB,EAAMuhB,iBAAmB,yBAkGzB,IAAIC,GAAOrc,EACP,kJACA,SAAU7c,GACN,YAAY2D,IAAR3D,EACOrD,KAAK8iB,aAEL9iB,KAAK6b,OAAOxY,KA8H/Bmf,EAAe,GAAI,KAAM,GAAI,EAAG,WAC5B,OAAOxiB,KAAKmvB,WAAa,MAG7B3M,EAAe,GAAI,KAAM,GAAI,EAAG,WAC5B,OAAOxiB,KAAKw8B,cAAgB,MAOhClH,GAAuB,OAAY,YACnCA,GAAuB,QAAY,YACnCA,GAAuB,OAAS,eAChCA,GAAuB,QAAS,eAIhCzU,EAAa,WAAY,MACzBA,EAAa,cAAe,MAI5BW,EAAgB,WAAY,GAC5BA,EAAgB,cAAe,GAK/BkC,EAAc,IAAUsW,IACxBtW,EAAc,IAAUsW,IACxBtW,EAAc,KAAU+V,GAAWJ,IACnC3V,EAAc,KAAU+V,GAAWJ,IACnC3V,EAAc,OAAUmW,GAAWN,IACnC7V,EAAc,OAAUmW,GAAWN,IACnC7V,EAAc,QAAUoW,GAAWN,IACnC9V,EAAc,QAAUoW,GAAWN,IAEnChV,GAAmB,OAAQ,QAAS,OAAQ,SAAU,SAAU5e,EAAOiiB,EAAM9I,EAAQ7J,GACjF2S,EAAK3S,EAAMqN,OAAO,EAAG,IAAMlD,EAAMzZ,KAGrC4e,GAAmB,KAAM,MAAO,SAAU5e,EAAOiiB,EAAM9I,EAAQ7J,GAC3D2S,EAAK3S,GAAS6F,EAAM6f,kBAAkBh1B,KAqD1C4c,EAAe,IAAK,EAAG,KAAM,WAI7B3B,EAAa,UAAW,KAIxBW,EAAgB,UAAW,GAI3BkC,EAAc,IAAK0V,IACnB7U,EAAc,IAAK,SAAU3e,EAAOgE,GAChCA,EAAM0hB,IAA8B,GAApBjM,EAAMzZ,GAAS,KAWnC4c,EAAe,KAAM,KAAM,GAAI,KAAM,QAIrC3B,EAAa,OAAQ,KAGrBW,EAAgB,OAAQ,GAIxBkC,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAC/B3V,EAAc,KAAM,SAAUI,EAAUjI,GAEpC,OAAOiI,EACJjI,EAAO4gB,yBAA2B5gB,EAAO6gB,cAC1C7gB,EAAO8gB,iCAGbpY,GAAe,IAAK,MAAOgH,IAC3BhH,EAAc,KAAM,SAAU3e,EAAOgE,GACjCA,EAAM2hB,IAAQlM,EAAMzZ,EAAME,MAAM2zB,IAAW,GAAI,MAKnD,IAAImD,GAAmB9a,EAAW,QAAQ,GAI1CU,EAAe,OAAQ,OAAQ,GAAI,OAAQ,aAI3C3B,EAAa,YAAa,OAG1BW,EAAgB,YAAa,GAI7BkC,EAAc,MAAQkW,IACtBlW,EAAc,OAAQ4V,IACtB/U,GAAe,MAAO,QAAS,SAAU3e,EAAOgE,EAAOmV,GACnDA,EAAO+P,WAAazP,EAAMzZ,KAc9B4c,EAAe,KAAM,KAAM,GAAI,EAAG,UAIlC3B,EAAa,SAAU,KAIvBW,EAAgB,SAAU,IAI1BkC,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAC/B9U,GAAe,IAAK,MAAOmH,IAI3B,IAAImR,GAAe/a,EAAW,WAAW,GAIzCU,EAAe,KAAM,KAAM,GAAI,EAAG,UAIlC3B,EAAa,SAAU,KAIvBW,EAAgB,SAAU,IAI1BkC,EAAc,IAAM+V,IACpB/V,EAAc,KAAM+V,GAAWJ,IAC/B9U,GAAe,IAAK,MAAOoH,IAI3B,IAAImR,GAAehb,EAAW,WAAW,GAIzCU,EAAe,IAAK,EAAG,EAAG,WACtB,SAAUxiB,KAAKgxB,cAAgB,OAGnCxO,EAAe,GAAI,KAAM,GAAI,EAAG,WAC5B,SAAUxiB,KAAKgxB,cAAgB,MAGnCxO,EAAe,GAAI,MAAO,GAAI,EAAG,eACjCA,EAAe,GAAI,OAAQ,GAAI,EAAG,WAC9B,OAA4B,GAArBxiB,KAAKgxB,gBAEhBxO,EAAe,GAAI,QAAS,GAAI,EAAG,WAC/B,OAA4B,IAArBxiB,KAAKgxB,gBAEhBxO,EAAe,GAAI,SAAU,GAAI,EAAG,WAChC,OAA4B,IAArBxiB,KAAKgxB,gBAEhBxO,EAAe,GAAI,UAAW,GAAI,EAAG,WACjC,OAA4B,IAArBxiB,KAAKgxB,gBAEhBxO,EAAe,GAAI,WAAY,GAAI,EAAG,WAClC,OAA4B,IAArBxiB,KAAKgxB,gBAEhBxO,EAAe,GAAI,YAAa,GAAI,EAAG,WACnC,OAA4B,IAArBxiB,KAAKgxB,gBAMhBnQ,EAAa,cAAe,MAI5BW,EAAgB,cAAe,IAI/BkC,EAAc,IAAQkW,GAAWR,IACjC1V,EAAc,KAAQkW,GAAWP,IACjC3V,EAAc,MAAQkW,GAAWN,IAEjC,IAAIpkB,GACJ,IAAKA,GAAQ,OAAQA,GAAM3V,QAAU,EAAG2V,IAAS,IAC7CwO,EAAcxO,GAAO6kB,IAOzB,IAAK7kB,GAAQ,IAAKA,GAAM3V,QAAU,EAAG2V,IAAS,IAC1CqP,EAAcrP,GALlB,SAAiBtP,EAAOgE,GACpBA,EAAMgiB,IAAevM,EAAuB,KAAhB,KAAOzZ,MAQvC,IAAIm3B,GAAoBjb,EAAW,gBAAgB,GAInDU,EAAe,IAAM,EAAG,EAAG,YAC3BA,EAAe,KAAM,EAAG,EAAG,YAY3B,IAAIwa,GAAQle,EAAO/Z,UAEnBi4B,GAAM3xB,IAAoBA,GAC1B2xB,GAAMlB,SAvpBN,SAAqBmB,EAAMC,GAGvB,IAAI7O,EAAM4O,GAAQzN,KACd2N,EAAM/J,GAAgB/E,EAAKruB,MAAMo9B,QAAQ,OACzCxhB,EAASb,EAAMsiB,eAAer9B,KAAMm9B,IAAQ,WAE5Cja,EAASga,IAAY1c,EAAW0c,EAAQthB,IAAWshB,EAAQthB,GAAQtc,KAAKU,KAAMquB,GAAO6O,EAAQthB,IAEjG,OAAO5b,KAAK4b,OAAOsH,GAAUljB,KAAK8iB,aAAagZ,SAASlgB,EAAQ5b,KAAMwvB,GAAYnB,MA+oBtF2O,GAAMzJ,MA5oBN,WACI,OAAO,IAAIzU,EAAO9e,OA4oBtBg9B,GAAM1J,KAllBN,SAAe1tB,EAAOub,EAAOmc,GACzB,IAAIC,EACAC,EACAC,EAAOva,EAEX,OAAKljB,KAAKmd,YAIVogB,EAAOnK,GAAgBxtB,EAAO5F,OAEpBmd,WAIVqgB,EAAoD,KAAvCD,EAAK1K,YAAc7yB,KAAK6yB,aAIvB,UAFd1R,EAAQD,EAAeC,KAEW,UAAVA,GAA+B,YAAVA,GACzC+B,EAAS+R,GAAUj1B,KAAMu9B,GACX,YAAVpc,EACA+B,GAAkB,EACD,SAAV/B,IACP+B,GAAkB,MAGtBua,EAAQz9B,KAAOu9B,EACfra,EAAmB,WAAV/B,EAAqBsc,EAAQ,IACxB,WAAVtc,EAAqBsc,EAAQ,IACnB,SAAVtc,EAAmBsc,EAAQ,KACjB,QAAVtc,GAAmBsc,EAAQD,GAAa,MAC9B,SAAVrc,GAAoBsc,EAAQD,GAAa,OACzCC,GAEDH,EAAUpa,EAAS/D,EAAS+D,IA7BxBvV,KA6kBfqvB,GAAMU,MA1XN,SAAgBvc,GAEZ,YAAcna,KADdma,EAAQD,EAAeC,KACc,gBAAVA,EAChBnhB,MAIG,SAAVmhB,IACAA,EAAQ,OAGLnhB,KAAKo9B,QAAQjc,GAAO9V,IAAI,EAAc,YAAV8V,EAAsB,OAASA,GAAQib,SAAS,EAAG,QAgX1FY,GAAMphB,OA3eN,SAAiB+hB,GACRA,IACDA,EAAc39B,KAAK4zB,QAAU7Y,EAAMuhB,iBAAmBvhB,EAAMshB,eAEhE,IAAInZ,EAASC,EAAanjB,KAAM29B,GAChC,OAAO39B,KAAK8iB,aAAa8a,WAAW1a,IAuexC8Z,GAAM9e,KApeN,SAAe+e,EAAMpG,GACjB,OAAI72B,KAAKmd,YACC+B,EAAS+d,IAASA,EAAK9f,WACxBqS,GAAYyN,GAAM9f,WAChB0W,IAAgB5V,GAAIje,KAAMke,KAAM+e,IAAOphB,OAAO7b,KAAK6b,UAAUgiB,UAAUhH,GAEvE72B,KAAK8iB,aAAaQ,eA+djC0Z,GAAMc,QA3dN,SAAkBjH,GACd,OAAO72B,KAAKke,KAAKsR,KAAeqH,IA2dpCmG,GAAM/e,GAxdN,SAAagf,EAAMpG,GACf,OAAI72B,KAAKmd,YACC+B,EAAS+d,IAASA,EAAK9f,WACxBqS,GAAYyN,GAAM9f,WAChB0W,IAAgB3V,KAAMle,KAAMie,GAAIgf,IAAOphB,OAAO7b,KAAK6b,UAAUgiB,UAAUhH,GAEvE72B,KAAK8iB,aAAaQ,eAmdjC0Z,GAAMe,MA/cN,SAAgBlH,GACZ,OAAO72B,KAAKie,GAAGuR,KAAeqH,IA+clCmG,GAAM94B,IAhqGN,SAAoBid,GAEhB,OADAA,EAAQD,EAAeC,GACnBX,EAAWxgB,KAAKmhB,IACTnhB,KAAKmhB,KAETnhB,MA4pGXg9B,GAAMgB,UAxUN,WACI,OAAOhhB,EAAgBhd,MAAMqc,UAwUjC2gB,GAAMxI,QAlpBN,SAAkB5uB,EAAOub,GACrB,IAAI8c,EAAa/e,EAAStZ,GAASA,EAAQ4pB,GAAY5pB,GACvD,SAAM5F,KAAKmd,YAAa8gB,EAAW9gB,aAIrB,iBADdgE,EAAQD,EAAgB9F,EAAY+F,GAAiB,cAARA,IAElCnhB,KAAK0b,UAAYuiB,EAAWviB,UAE5BuiB,EAAWviB,UAAY1b,KAAKuzB,QAAQ6J,QAAQjc,GAAOzF,YA0oBlEshB,GAAMvI,SAtoBN,SAAmB7uB,EAAOub,GACtB,IAAI8c,EAAa/e,EAAStZ,GAASA,EAAQ4pB,GAAY5pB,GACvD,SAAM5F,KAAKmd,YAAa8gB,EAAW9gB,aAIrB,iBADdgE,EAAQD,EAAgB9F,EAAY+F,GAAiB,cAARA,IAElCnhB,KAAK0b,UAAYuiB,EAAWviB,UAE5B1b,KAAKuzB,QAAQmK,MAAMvc,GAAOzF,UAAYuiB,EAAWviB,YA8nBhEshB,GAAMkB,UA1nBN,SAAoBhgB,EAAMD,EAAIkD,EAAOgd,GAEjC,OAA2B,OAD3BA,EAAcA,GAAe,MACT,GAAan+B,KAAKw0B,QAAQtW,EAAMiD,IAAUnhB,KAAKy0B,SAASvW,EAAMiD,MAC1D,MAAnBgd,EAAY,GAAan+B,KAAKy0B,SAASxW,EAAIkD,IAAUnhB,KAAKw0B,QAAQvW,EAAIkD,KAwnB/E6b,GAAMoB,OArnBN,SAAiBx4B,EAAOub,GACpB,IACIkd,EADAJ,EAAa/e,EAAStZ,GAASA,EAAQ4pB,GAAY5pB,GAEvD,SAAM5F,KAAKmd,YAAa8gB,EAAW9gB,aAIrB,iBADdgE,EAAQD,EAAeC,GAAS,gBAErBnhB,KAAK0b,YAAcuiB,EAAWviB,WAErC2iB,EAAUJ,EAAWviB,UACd1b,KAAKuzB,QAAQ6J,QAAQjc,GAAOzF,WAAa2iB,GAAWA,GAAWr+B,KAAKuzB,QAAQmK,MAAMvc,GAAOzF,aA2mBxGshB,GAAMsB,cAvmBN,SAAwB14B,EAAOub,GAC3B,OAAOnhB,KAAKo+B,OAAOx4B,EAAOub,IAAUnhB,KAAKw0B,QAAQ5uB,EAAMub,IAumB3D6b,GAAMuB,eApmBN,SAAyB34B,EAAOub,GAC5B,OAAOnhB,KAAKo+B,OAAOx4B,EAAOub,IAAUnhB,KAAKy0B,SAAS7uB,EAAMub,IAomB5D6b,GAAM7f,QAvVN,WACI,OAAOA,EAAQnd,OAuVnBg9B,GAAMT,KAAoBA,GAC1BS,GAAMnhB,OAAoBA,GAC1BmhB,GAAMla,WAAoBA,GAC1Bka,GAAMjsB,IAAoBmrB,GAC1Bc,GAAMlsB,IAAoBmrB,GAC1Be,GAAMwB,aAzVN,WACI,OAAO/iB,KAAWuB,EAAgBhd,QAyVtCg9B,GAAMt5B,IAtqGN,SAAoByd,EAAO/gB,GACvB,GAAqB,iBAAV+gB,EAGP,IAAK,IADDsd,EAAc9c,EADlBR,EAAQC,EAAqBD,IAEpBniB,EAAI,EAAGA,EAAIy/B,EAAYl/B,OAAQP,IACpCgB,KAAKy+B,EAAYz/B,GAAG8hB,MAAMK,EAAMsd,EAAYz/B,GAAG8hB,YAInD,GADAK,EAAQD,EAAeC,GACnBX,EAAWxgB,KAAKmhB,IAChB,OAAOnhB,KAAKmhB,GAAO/gB,GAG3B,OAAOJ,MA0pGXg9B,GAAMI,QA5bN,SAAkBjc,GAId,OAHAA,EAAQD,EAAeC,IAInB,IAAK,OACDnhB,KAAK8kB,MAAM,GAEf,IAAK,UACL,IAAK,QACD9kB,KAAK+lB,KAAK,GAEd,IAAK,OACL,IAAK,UACL,IAAK,MACL,IAAK,OACD/lB,KAAK+pB,MAAM,GAEf,IAAK,OACD/pB,KAAKiqB,QAAQ,GAEjB,IAAK,SACDjqB,KAAKkyB,QAAQ,GAEjB,IAAK,SACDlyB,KAAKmyB,aAAa,GAgB1B,MAZc,SAAVhR,GACAnhB,KAAK8nB,QAAQ,GAEH,YAAV3G,GACAnhB,KAAK0+B,WAAW,GAIN,YAAVvd,GACAnhB,KAAK8kB,MAAqC,EAA/B/iB,KAAKsL,MAAMrN,KAAK8kB,QAAU,IAGlC9kB,MAoZXg9B,GAAMZ,SAAoBA,GAC1BY,GAAM2B,QAxXN,WACI,IAAI1hB,EAAIjd,KACR,OAAQid,EAAE4H,OAAQ5H,EAAE6H,QAAS7H,EAAE8I,OAAQ9I,EAAEkT,OAAQlT,EAAE6T,SAAU7T,EAAE8T,SAAU9T,EAAE+T,gBAuX/EgM,GAAM4B,SApXN,WACI,IAAI3hB,EAAIjd,KACR,OACI6xB,MAAO5U,EAAE4H,OACTa,OAAQzI,EAAE6H,QACViB,KAAM9I,EAAE8I,OACRgE,MAAO9M,EAAE8M,QACTE,QAAShN,EAAEgN,UACXiI,QAASjV,EAAEiV,UACXC,aAAclV,EAAEkV,iBA4WxB6K,GAAM6B,OA9XN,WACI,OAAO,IAAIvjB,KAAKtb,KAAK0b,YA8XzBshB,GAAM8B,YA5iBN,WACI,IAAK9+B,KAAKmd,UACN,OAAO,KAEX,IAAIF,EAAIjd,KAAKuzB,QAAQvX,MACrB,OAAIiB,EAAE4H,OAAS,GAAK5H,EAAE4H,OAAS,KACpB1B,EAAalG,EAAG,kCAEvBuD,EAAWlF,KAAKvW,UAAU+5B,aAEnB9+B,KAAK6+B,SAASC,cAElB3b,EAAalG,EAAG,iCAiiB3B+f,GAAM+B,QAxhBN,WACI,IAAK/+B,KAAKmd,UACN,MAAO,qBAAuBnd,KAAKse,GAAK,OAE5C,IAAIsE,EAAO,SACPoc,EAAO,GACNh/B,KAAKi/B,YACNrc,EAA4B,IAArB5iB,KAAK6yB,YAAoB,aAAe,mBAC/CmM,EAAO,KAEX,IAAIE,EAAS,IAAMtc,EAAO,MACtBiC,EAAQ,GAAK7kB,KAAK6kB,QAAU7kB,KAAK6kB,QAAU,KAAQ,OAAS,SAE5Dsa,EAASH,EAAO,OAEpB,OAAOh/B,KAAK4b,OAAOsjB,EAASra,EAHb,wBAG+Bsa,IA0gBlDnC,GAAMoC,OA3WN,WAEI,OAAOp/B,KAAKmd,UAAYnd,KAAK8+B,cAAgB,MA0WjD9B,GAAM3rB,SAnjBN,WACI,OAAOrR,KAAKuzB,QAAQ1X,OAAO,MAAMD,OAAO,qCAmjB5CohB,GAAMqC,KAvYN,WACI,OAAOt9B,KAAKsL,MAAMrN,KAAK0b,UAAY,MAuYvCshB,GAAMthB,QA5YN,WACI,OAAO1b,KAAKyd,GAAG/B,UAAmC,KAArB1b,KAAK2e,SAAW,IA4YjDqe,GAAMsC,aA9VN,WACI,OACI15B,MAAO5F,KAAKse,GACZ1C,OAAQ5b,KAAKue,GACb1C,OAAQ7b,KAAK4e,QACbyS,MAAOrxB,KAAK0e,OACZ5C,OAAQ9b,KAAK4d,UA2VrBof,GAAMnY,KAAagW,GACnBmC,GAAMrW,WA3oFN,WACI,OAAOA,GAAW3mB,KAAK6kB,SA6oF3BmY,GAAM7N,SAxSN,SAAyBvpB,GACrB,OAAO4vB,GAAqBl2B,KAAKU,KACzB4F,EACA5F,KAAK6nB,OACL7nB,KAAK8nB,UACL9nB,KAAK8iB,aAAa2M,MAAMjI,IACxBxnB,KAAK8iB,aAAa2M,MAAMhI,MAmSpCuV,GAAMR,YAhSN,SAA4B52B,GACxB,OAAO4vB,GAAqBl2B,KAAKU,KACzB4F,EAAO5F,KAAKu/B,UAAWv/B,KAAK0+B,aAAc,EAAG,IAiSzD1B,GAAMjL,QAAUiL,GAAMlL,SAzOtB,SAAwBlsB,GACpB,OAAgB,MAATA,EAAgB7D,KAAKqL,MAAMpN,KAAK8kB,QAAU,GAAK,GAAK9kB,KAAK8kB,MAAoB,GAAblf,EAAQ,GAAS5F,KAAK8kB,QAAU,IA2O3GkY,GAAMlY,MAAckB,EACpBgX,GAAMpY,YAlyFN,WACI,OAAOA,EAAY5kB,KAAK6kB,OAAQ7kB,KAAK8kB,UAoyFzCkY,GAAMnV,KAAiBmV,GAAMhL,MAhhF7B,SAAqBpsB,GACjB,IAAIiiB,EAAO7nB,KAAK8iB,aAAa+E,KAAK7nB,MAClC,OAAgB,MAAT4F,EAAgBiiB,EAAO7nB,KAAKqL,IAAqB,GAAhBzF,EAAQiiB,GAAW,MA+gF/DmV,GAAMuC,QAAiBvC,GAAMwC,SA5gF7B,SAAwB55B,GACpB,IAAIiiB,EAAOK,GAAWloB,KAAM,EAAG,GAAG6nB,KAClC,OAAgB,MAATjiB,EAAgBiiB,EAAO7nB,KAAKqL,IAAqB,GAAhBzF,EAAQiiB,GAAW,MA2gF/DmV,GAAM3U,YAnSN,WACI,IAAIoX,EAAWz/B,KAAK8iB,aAAa2M,MACjC,OAAOpH,GAAYroB,KAAK6kB,OAAQ4a,EAASjY,IAAKiY,EAAShY,MAkS3DuV,GAAM0C,eAxSN,WACI,OAAOrX,GAAYroB,KAAK6kB,OAAQ,EAAG,IA0SvCmY,GAAMjX,KAAa6W,GACnBI,GAAMjU,IAAaiU,GAAM/K,KAxzEzB,SAA0BrsB,GACtB,IAAK5F,KAAKmd,UACN,OAAgB,MAATvX,EAAgB5F,KAAO2N,IAElC,IAAIob,EAAM/oB,KAAK0e,OAAS1e,KAAKyd,GAAGkK,YAAc3nB,KAAKyd,GAAGqQ,SACtD,OAAa,MAATloB,GACAA,EAAQ2iB,GAAa3iB,EAAO5F,KAAK8iB,cAC1B9iB,KAAKqL,IAAIzF,EAAQmjB,EAAK,MAEtBA,GAgzEfiU,GAAMlV,QA5yEN,SAAgCliB,GAC5B,IAAK5F,KAAKmd,UACN,OAAgB,MAATvX,EAAgB5F,KAAO2N,IAElC,IAAIma,GAAW9nB,KAAK+oB,MAAQ,EAAI/oB,KAAK8iB,aAAa2M,MAAMjI,KAAO,EAC/D,OAAgB,MAAT5hB,EAAgBkiB,EAAU9nB,KAAKqL,IAAIzF,EAAQkiB,EAAS,MAwyE/DkV,GAAM0B,WAryEN,SAA6B94B,GACzB,IAAK5F,KAAKmd,UACN,OAAgB,MAATvX,EAAgB5F,KAAO2N,IAOlC,GAAa,MAAT/H,EAAe,CACf,IAAIkiB,EAAUW,GAAgB7iB,EAAO5F,KAAK8iB,cAC1C,OAAO9iB,KAAK+oB,IAAI/oB,KAAK+oB,MAAQ,EAAIjB,EAAUA,EAAU,GAErD,OAAO9nB,KAAK+oB,OAAS,GAyxE7BiU,GAAM/U,UAhMN,SAA0BriB,GACtB,IAAIqiB,EAAYlmB,KAAKC,OAAOhC,KAAKuzB,QAAQ6J,QAAQ,OAASp9B,KAAKuzB,QAAQ6J,QAAQ,SAAW,OAAS,EACnG,OAAgB,MAATx3B,EAAgBqiB,EAAYjoB,KAAKqL,IAAKzF,EAAQqiB,EAAY,MAiMrE+U,GAAM7M,KAAO6M,GAAMjT,MAAQ8R,GAG3BmB,GAAMlM,OAASkM,GAAM/S,QAAU4S,GAG/BG,GAAMjM,OAASiM,GAAM9K,QAAU4K,GAG/BE,GAAMhM,YAAcgM,GAAM7K,aAAe4K,GAGzCC,GAAMnK,UAphCN,SAAuBjtB,EAAO+5B,EAAeC,GACzC,IACIC,EADAlN,EAAS3yB,KAAK2e,SAAW,EAE7B,IAAK3e,KAAKmd,UACN,OAAgB,MAATvX,EAAgB5F,KAAO2N,IAElC,GAAa,MAAT/H,EAAe,CACf,GAAqB,iBAAVA,GAEP,GAAc,QADdA,EAAQmtB,GAAiBmH,GAAkBt0B,IAEvC,OAAO5F,UAEJ+B,KAAK+M,IAAIlJ,GAAS,KAAOg6B,IAChCh6B,GAAgB,IAmBpB,OAjBK5F,KAAK0e,QAAUihB,IAChBE,EAAcnM,GAAc1zB,OAEhCA,KAAK2e,QAAU/Y,EACf5F,KAAK0e,QAAS,EACK,MAAfmhB,GACA7/B,KAAKqL,IAAIw0B,EAAa,KAEtBlN,IAAW/sB,KACN+5B,GAAiB3/B,KAAK8/B,kBACvB/K,GAAY/0B,KAAM6zB,GAAejuB,EAAQ+sB,EAAQ,KAAM,GAAG,GAClD3yB,KAAK8/B,oBACb9/B,KAAK8/B,mBAAoB,EACzB/kB,EAAMkE,aAAajf,MAAM,GACzBA,KAAK8/B,kBAAoB,OAG1B9/B,KAEP,OAAOA,KAAK0e,OAASiU,EAASe,GAAc1zB,OAm/BpDg9B,GAAMhhB,IAj+BN,SAAyB2jB,GACrB,OAAO3/B,KAAK6yB,UAAU,EAAG8M,IAi+B7B3C,GAAMvJ,MA99BN,SAA2BkM,GASvB,OARI3/B,KAAK0e,SACL1e,KAAK6yB,UAAU,EAAG8M,GAClB3/B,KAAK0e,QAAS,EAEVihB,GACA3/B,KAAKo8B,SAAS1I,GAAc1zB,MAAO,MAGpCA,MAs9BXg9B,GAAM+C,UAn9BN,WACI,GAAiB,MAAb//B,KAAKye,KACLze,KAAK6yB,UAAU7yB,KAAKye,MAAM,GAAO,QAC9B,GAAuB,iBAAZze,KAAKse,GAAiB,CACpC,IAAI0hB,EAAQjN,GAAiBkH,GAAaj6B,KAAKse,IAClC,MAAT0hB,EACAhgC,KAAK6yB,UAAUmN,GAGfhgC,KAAK6yB,UAAU,GAAG,GAG1B,OAAO7yB,MAw8BXg9B,GAAMiD,qBAr8BN,SAA+Br6B,GAC3B,QAAK5F,KAAKmd,YAGVvX,EAAQA,EAAQ4pB,GAAY5pB,GAAOitB,YAAc,GAEzC7yB,KAAK6yB,YAAcjtB,GAAS,IAAO,IAg8B/Co3B,GAAMkD,MA77BN,WACI,OACIlgC,KAAK6yB,YAAc7yB,KAAKuzB,QAAQzO,MAAM,GAAG+N,aACzC7yB,KAAK6yB,YAAc7yB,KAAKuzB,QAAQzO,MAAM,GAAG+N,aA27BjDmK,GAAMiC,QAl6BN,WACI,QAAOj/B,KAAKmd,YAAand,KAAK0e,QAk6BlCse,GAAMmD,YA/5BN,WACI,QAAOngC,KAAKmd,WAAYnd,KAAK0e,QA+5BjCse,GAAMpJ,MAAuBA,GAC7BoJ,GAAM3L,MAAuBuC,GAG7BoJ,GAAMoD,SAtGN,WACI,OAAOpgC,KAAK0e,OAAS,MAAQ,IAsGjCse,GAAMqD,SAnGN,WACI,OAAOrgC,KAAK0e,OAAS,6BAA+B,IAqGxDse,GAAMsD,MAASpgB,EAAU,kDAAmD0c,IAC5EI,GAAMtX,OAASxF,EAAU,mDAAoD8F,GAC7EgX,GAAMnL,MAAS3R,EAAU,iDAAkD2a,IAC3EmC,GAAMgC,KAAS9e,EAAU,2GAjgCzB,SAAqBta,EAAO+5B,GACxB,OAAa,MAAT/5B,GACqB,iBAAVA,IACPA,GAASA,GAGb5F,KAAK6yB,UAAUjtB,EAAO+5B,GAEf3/B,OAECA,KAAK6yB,cAw/BrBmK,GAAMuD,aAAergB,EAAU,0GAr8B/B,WACI,IAAK9E,EAAYpb,KAAKwgC,eAClB,OAAOxgC,KAAKwgC,cAGhB,IAAIrtB,KAKJ,GAHA6K,EAAW7K,EAAGnT,OACdmT,EAAI+d,GAAc/d,IAEZwR,GAAI,CACN,IAAI4P,EAAQphB,EAAEuL,OAAS/C,EAAUxI,EAAEwR,IAAM6K,GAAYrc,EAAEwR,IACvD3kB,KAAKwgC,cAAgBxgC,KAAKmd,WACtBqC,EAAcrM,EAAEwR,GAAI4P,EAAMoK,WAAa,OAE3C3+B,KAAKwgC,eAAgB,EAGzB,OAAOxgC,KAAKwgC,gBAi8BhB,IAAIC,GAAU7f,EAAO7b,UAErB07B,GAAQ3E,SAv5GR,SAAmBz4B,EAAK4e,EAAKoM,GACzB,IAAInL,EAASljB,KAAK0gC,UAAUr9B,IAAQrD,KAAK0gC,UAAoB,SAC7D,OAAOlgB,EAAW0C,GAAUA,EAAO5jB,KAAK2iB,EAAKoM,GAAOnL,GAs5GxDud,GAAQhd,eA14GR,SAAyBpgB,GACrB,IAAIuY,EAAS5b,KAAK2gC,gBAAgBt9B,GAC9Bu9B,EAAc5gC,KAAK2gC,gBAAgBt9B,EAAI+P,eAE3C,OAAIwI,IAAWglB,EACJhlB,GAGX5b,KAAK2gC,gBAAgBt9B,GAAOu9B,EAAYp6B,QAAQ,mBAAoB,SAAU4X,GAC1E,OAAOA,EAAI5Y,MAAM,KAGdxF,KAAK2gC,gBAAgBt9B,KA+3GhCo9B,GAAQnd,YA13GR,WACI,OAAOtjB,KAAK6gC,cA03GhBJ,GAAQ/d,QAp3GR,SAAkBtD,GACd,OAAOpf,KAAK8gC,SAASt6B,QAAQ,KAAM4Y,IAo3GvCqhB,GAAQtP,SAAkByE,GAC1B6K,GAAQ7C,WAAkBhI,GAC1B6K,GAAQ1J,aAl2GR,SAAuB3X,EAAQyX,EAAetK,EAAQuK,GAClD,IAAI5T,EAASljB,KAAK+gC,cAAcxU,GAChC,OAAQ/L,EAAW0C,GACfA,EAAO9D,EAAQyX,EAAetK,EAAQuK,GACtC5T,EAAO1c,QAAQ,MAAO4Y,IA+1G9BqhB,GAAQO,WA51GR,SAAqB1N,EAAMpQ,GACvB,IAAItH,EAAS5b,KAAK+gC,cAAczN,EAAO,EAAI,SAAW,QACtD,OAAO9S,EAAW5E,GAAUA,EAAOsH,GAAUtH,EAAOpV,QAAQ,MAAO0c,IA21GvEud,GAAQ/8B,IA7+GR,SAAcqb,GACV,IAAIZ,EAAMnf,EACV,IAAKA,KAAK+f,EAEFyB,EADJrC,EAAOY,EAAO/f,IAEVgB,KAAKhB,GAAKmf,EAEVne,KAAK,IAAMhB,GAAKmf,EAGxBne,KAAKkrB,QAAUnM,EAIf/e,KAAK28B,+BAAiC,IAAIl2B,QACrCzG,KAAKy8B,wBAAwBwE,QAAUjhC,KAAK08B,cAAcuE,QACvD,IAAM,UAAYA,SAg+G9BR,GAAQ/a,OAp/FR,SAAuBzI,EAAGrB,GACtB,OAAKqB,EAIE9H,EAAQnV,KAAKsyB,SAAWtyB,KAAKsyB,QAAQrV,EAAE6H,SAC1C9kB,KAAKsyB,SAAStyB,KAAKsyB,QAAQ4O,UAAY3G,IAAkB3mB,KAAKgI,GAAU,SAAW,cAAcqB,EAAE6H,SAJ5F3P,EAAQnV,KAAKsyB,SAAWtyB,KAAKsyB,QAChCtyB,KAAKsyB,QAAoB,YAk/FrCmO,GAAQhb,YA3+FR,SAA4BxI,EAAGrB,GAC3B,OAAKqB,EAIE9H,EAAQnV,KAAKmhC,cAAgBnhC,KAAKmhC,aAAalkB,EAAE6H,SACpD9kB,KAAKmhC,aAAa5G,GAAiB3mB,KAAKgI,GAAU,SAAW,cAAcqB,EAAE6H,SAJtE3P,EAAQnV,KAAKmhC,cAAgBnhC,KAAKmhC,aACrCnhC,KAAKmhC,aAAyB,YAy+F1CV,GAAQ3a,YA17FR,SAA4BZ,EAAWtJ,EAAQE,GAC3C,IAAI9c,EAAGijB,EAAK0B,EAEZ,GAAI3jB,KAAKohC,kBACL,OAAOnc,EAAkB3lB,KAAKU,KAAMklB,EAAWtJ,EAAQE,GAY3D,IATK9b,KAAKslB,eACNtlB,KAAKslB,gBACLtlB,KAAKulB,oBACLvlB,KAAKwlB,sBAMJxmB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAYrB,GAVAijB,EAAMtG,GAAW,IAAM3c,IACnB8c,IAAW9b,KAAKulB,iBAAiBvmB,KACjCgB,KAAKulB,iBAAiBvmB,GAAK,IAAIyH,OAAO,IAAMzG,KAAK0lB,OAAOzD,EAAK,IAAIzb,QAAQ,IAAK,IAAM,IAAK,KACzFxG,KAAKwlB,kBAAkBxmB,GAAK,IAAIyH,OAAO,IAAMzG,KAAKylB,YAAYxD,EAAK,IAAIzb,QAAQ,IAAK,IAAM,IAAK,MAE9FsV,GAAW9b,KAAKslB,aAAatmB,KAC9B2kB,EAAQ,IAAM3jB,KAAK0lB,OAAOzD,EAAK,IAAM,KAAOjiB,KAAKylB,YAAYxD,EAAK,IAClEjiB,KAAKslB,aAAatmB,GAAK,IAAIyH,OAAOkd,EAAMnd,QAAQ,IAAK,IAAK,MAG1DsV,GAAqB,SAAXF,GAAqB5b,KAAKulB,iBAAiBvmB,GAAG4U,KAAKsR,GAC7D,OAAOlmB,EACJ,GAAI8c,GAAqB,QAAXF,GAAoB5b,KAAKwlB,kBAAkBxmB,GAAG4U,KAAKsR,GACpE,OAAOlmB,EACJ,IAAK8c,GAAU9b,KAAKslB,aAAatmB,GAAG4U,KAAKsR,GAC5C,OAAOlmB,IA05FnByhC,GAAQnG,YAv1FR,SAAsBxW,GAClB,OAAI9jB,KAAKohC,mBACA5lB,EAAWxb,KAAM,iBAClBimB,GAAmB3mB,KAAKU,MAExB8jB,EACO9jB,KAAKwmB,mBAELxmB,KAAKsmB,eAGX9K,EAAWxb,KAAM,kBAClBA,KAAKsmB,aAAeqU,IAEjB36B,KAAKwmB,oBAAsB1C,EAC9B9jB,KAAKwmB,mBAAqBxmB,KAAKsmB,eAy0F3Cma,GAAQpG,iBA52FR,SAA2BvW,GACvB,OAAI9jB,KAAKohC,mBACA5lB,EAAWxb,KAAM,iBAClBimB,GAAmB3mB,KAAKU,MAExB8jB,EACO9jB,KAAKymB,wBAELzmB,KAAKumB,oBAGX/K,EAAWxb,KAAM,uBAClBA,KAAKumB,kBAAoBmU,IAEtB16B,KAAKymB,yBAA2B3C,EACnC9jB,KAAKymB,wBAA0BzmB,KAAKumB,oBAg2FhDka,GAAQ5Y,KAlnFR,SAAqB5F,GACjB,OAAOiG,GAAWjG,EAAKjiB,KAAKyvB,MAAMjI,IAAKxnB,KAAKyvB,MAAMhI,KAAKI,MAknF3D4Y,GAAQY,eAtmFR,WACI,OAAOrhC,KAAKyvB,MAAMhI,KAsmFtBgZ,GAAQa,eA3mFR,WACI,OAAOthC,KAAKyvB,MAAMjI,KA6mFtBiZ,GAAQvX,SAlgFR,SAAyBjM,EAAGrB,GACxB,OAAKqB,EAIE9H,EAAQnV,KAAKuhC,WAAavhC,KAAKuhC,UAAUtkB,EAAE8L,OAC9C/oB,KAAKuhC,UAAUvhC,KAAKuhC,UAAUL,SAASttB,KAAKgI,GAAU,SAAW,cAAcqB,EAAE8L,OAJ1E5T,EAAQnV,KAAKuhC,WAAavhC,KAAKuhC,UAClCvhC,KAAKuhC,UAAsB,YAggFvCd,GAAQzX,YAp/ER,SAA4B/L,GACxB,OAAO,EAAMjd,KAAKwhC,aAAavkB,EAAE8L,OAAS/oB,KAAKwhC,cAo/EnDf,GAAQxX,cA1/ER,SAA8BhM,GAC1B,OAAO,EAAMjd,KAAKyhC,eAAexkB,EAAE8L,OAAS/oB,KAAKyhC,gBA0/ErDhB,GAAQjY,cAl7ER,SAA8BG,EAAa/M,EAAQE,GAC/C,IAAI9c,EAAGijB,EAAK0B,EAEZ,GAAI3jB,KAAK0hC,oBACL,OAAOhZ,GAAoBppB,KAAKU,KAAM2oB,EAAa/M,EAAQE,GAU/D,IAPK9b,KAAK4oB,iBACN5oB,KAAK4oB,kBACL5oB,KAAK8oB,qBACL9oB,KAAK6oB,uBACL7oB,KAAK2hC,uBAGJ3iC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAcpB,GAXAijB,EAAMtG,GAAW,IAAM,IAAIoN,IAAI/pB,GAC3B8c,IAAW9b,KAAK2hC,mBAAmB3iC,KACnCgB,KAAK2hC,mBAAmB3iC,GAAK,IAAIyH,OAAO,IAAMzG,KAAKkpB,SAASjH,EAAK,IAAIzb,QAAQ,IAAK,MAAS,IAAK,KAChGxG,KAAK6oB,oBAAoB7pB,GAAK,IAAIyH,OAAO,IAAMzG,KAAKipB,cAAchH,EAAK,IAAIzb,QAAQ,IAAK,MAAS,IAAK,KACtGxG,KAAK8oB,kBAAkB9pB,GAAK,IAAIyH,OAAO,IAAMzG,KAAKgpB,YAAY/G,EAAK,IAAIzb,QAAQ,IAAK,MAAS,IAAK,MAEjGxG,KAAK4oB,eAAe5pB,KACrB2kB,EAAQ,IAAM3jB,KAAKkpB,SAASjH,EAAK,IAAM,KAAOjiB,KAAKipB,cAAchH,EAAK,IAAM,KAAOjiB,KAAKgpB,YAAY/G,EAAK,IACzGjiB,KAAK4oB,eAAe5pB,GAAK,IAAIyH,OAAOkd,EAAMnd,QAAQ,IAAK,IAAK,MAG5DsV,GAAqB,SAAXF,GAAqB5b,KAAK2hC,mBAAmB3iC,GAAG4U,KAAK+U,GAC/D,OAAO3pB,EACJ,GAAI8c,GAAqB,QAAXF,GAAoB5b,KAAK6oB,oBAAoB7pB,GAAG4U,KAAK+U,GACtE,OAAO3pB,EACJ,GAAI8c,GAAqB,OAAXF,GAAmB5b,KAAK8oB,kBAAkB9pB,GAAG4U,KAAK+U,GACnE,OAAO3pB,EACJ,IAAK8c,GAAU9b,KAAK4oB,eAAe5pB,GAAG4U,KAAK+U,GAC9C,OAAO3pB,IAi5EnByhC,GAAQxF,cAn2ER,SAAwBnX,GACpB,OAAI9jB,KAAK0hC,qBACAlmB,EAAWxb,KAAM,mBAClBmpB,GAAqB7pB,KAAKU,MAE1B8jB,EACO9jB,KAAK2pB,qBAEL3pB,KAAKwpB,iBAGXhO,EAAWxb,KAAM,oBAClBA,KAAKwpB,eAAiB6R,IAEnBr7B,KAAK2pB,sBAAwB7F,EAChC9jB,KAAK2pB,qBAAuB3pB,KAAKwpB,iBAq1E7CiX,GAAQzF,mBAh1ER,SAA6BlX,GACzB,OAAI9jB,KAAK0hC,qBACAlmB,EAAWxb,KAAM,mBAClBmpB,GAAqB7pB,KAAKU,MAE1B8jB,EACO9jB,KAAK4pB,0BAEL5pB,KAAKypB,sBAGXjO,EAAWxb,KAAM,yBAClBA,KAAKypB,oBAAsB6R,IAExBt7B,KAAK4pB,2BAA6B9F,EACrC9jB,KAAK4pB,0BAA4B5pB,KAAKypB,sBAk0ElDgX,GAAQ1F,iBA7zER,SAA2BjX,GACvB,OAAI9jB,KAAK0hC,qBACAlmB,EAAWxb,KAAM,mBAClBmpB,GAAqB7pB,KAAKU,MAE1B8jB,EACO9jB,KAAK6pB,wBAEL7pB,KAAK0pB,oBAGXlO,EAAWxb,KAAM,uBAClBA,KAAK0pB,kBAAoB6R,IAEtBv7B,KAAK6pB,yBAA2B/F,EACnC9jB,KAAK6pB,wBAA0B7pB,KAAK0pB,oBAizEhD+W,GAAQnQ,KArpER,SAAqB1qB,GAGjB,MAAiD,OAAxCA,EAAQ,IAAIyN,cAAcR,OAAO,IAmpE9C4tB,GAAQ5jB,SA/oER,SAAyBkN,EAAOE,EAAS2X,GACrC,OAAI7X,EAAQ,GACD6X,EAAU,KAAO,KAEjBA,EAAU,KAAO,MAuuEhChX,GAAmB,MACfmR,uBAAwB,uBACxBrZ,QAAU,SAAUtD,GAChB,IAAI9T,EAAI8T,EAAS,GAKjB,OAAOA,GAJoC,IAA7BC,EAAMD,EAAS,IAAM,IAAa,KACrC,IAAN9T,EAAW,KACL,IAANA,EAAW,KACL,IAANA,EAAW,KAAO,SAM/ByP,EAAMwhB,KAAOrc,EAAU,wDAAyD0K,IAChF7P,EAAM8mB,SAAW3hB,EAAU,gEAAiE4K,IAE5F,IAAIgX,GAAU//B,KAAK+M,IA0JfizB,GAAiBvL,GAAO,MACxBiB,GAAiBjB,GAAO,KACxBwL,GAAiBxL,GAAO,KACxByL,GAAiBzL,GAAO,KACxB0L,GAAiB1L,GAAO,KACxB2L,GAAiB3L,GAAO,KACxB4L,GAAiB5L,GAAO,KACxB6L,GAAiB7L,GAAO,KAaxBrE,GAAewE,GAAW,gBAC1BzE,GAAeyE,GAAW,WAC1B1M,GAAe0M,GAAW,WAC1B5M,GAAe4M,GAAW,SAC1B1E,GAAe0E,GAAW,QAC1BjR,GAAeiR,GAAW,UAC1B9E,GAAe8E,GAAW,SAM1B30B,GAAQD,KAAKC,MACbk1B,IACAC,GAAI,GACJx4B,EAAI,GACJse,EAAI,GACJ8J,EAAI,GACJD,EAAI,GACJE,EAAI,IA6EJqQ,GAAQt1B,KAAK+M,IAwDbwzB,GAAU3Q,GAAS5sB,UA0FvB,OAxFAu9B,GAAQnlB,QA/pDR,WACI,OAAOnd,KAAKod,UA+pDhBklB,GAAQxzB,IAvUR,WACI,IAAI+b,EAAiB7qB,KAAKuyB,MAa1B,OAXAvyB,KAAKoyB,cAAgB0P,GAAQ9hC,KAAKoyB,eAClCpyB,KAAKqyB,MAAgByP,GAAQ9hC,KAAKqyB,OAClCryB,KAAKsyB,QAAgBwP,GAAQ9hC,KAAKsyB,SAElCzH,EAAKsH,aAAgB2P,GAAQjX,EAAKsH,cAClCtH,EAAKqH,QAAgB4P,GAAQjX,EAAKqH,SAClCrH,EAAKZ,QAAgB6X,GAAQjX,EAAKZ,SAClCY,EAAKd,MAAgB+X,GAAQjX,EAAKd,OAClCc,EAAKnF,OAAgBoc,GAAQjX,EAAKnF,QAClCmF,EAAKgH,MAAgBiQ,GAAQjX,EAAKgH,OAE3B7xB,MA0TXsiC,GAAQj3B,IA5SR,SAAgBzF,EAAOxF,GACnB,OAAOg2B,GAAcp2B,KAAM4F,EAAOxF,EAAO,IA4S7CkiC,GAAQlG,SAxSR,SAAqBx2B,EAAOxF,GACxB,OAAOg2B,GAAcp2B,KAAM4F,EAAOxF,GAAQ,IAwS9CkiC,GAAQ5L,GAnOR,SAAavV,GACT,IAAKnhB,KAAKmd,UACN,OAAOxP,IAEX,IAAIskB,EACAvM,EACAyM,EAAenyB,KAAKoyB,cAIxB,GAAc,WAFdjR,EAAQD,EAAeC,KAEY,SAAVA,EAGrB,OAFA8Q,EAASjyB,KAAKqyB,MAAUF,EAAe,MACvCzM,EAAS1lB,KAAKsyB,QAAUgE,GAAarE,GACpB,UAAV9Q,EAAoBuE,EAASA,EAAS,GAI7C,OADAuM,EAAOjyB,KAAKqyB,MAAQtwB,KAAKC,MAAMu0B,GAAav2B,KAAKsyB,UACzCnR,GACJ,IAAK,OAAW,OAAO8Q,EAAO,EAAQE,EAAe,OACrD,IAAK,MAAW,OAAOF,EAAeE,EAAe,MACrD,IAAK,OAAW,OAAc,GAAPF,EAAeE,EAAe,KACrD,IAAK,SAAW,OAAc,KAAPF,EAAeE,EAAe,IACrD,IAAK,SAAW,OAAc,MAAPF,EAAeE,EAAe,IAErD,IAAK,cAAe,OAAOpwB,KAAKsL,MAAa,MAAP4kB,GAAgBE,EACtD,QAAS,MAAM,IAAIjzB,MAAM,gBAAkBiiB,KA2MvDmhB,GAAQP,eAAiBA,GACzBO,GAAQ7K,UAAiBA,GACzB6K,GAAQN,UAAiBA,GACzBM,GAAQL,QAAiBA,GACzBK,GAAQJ,OAAiBA,GACzBI,GAAQH,QAAiBA,GACzBG,GAAQF,SAAiBA,GACzBE,GAAQD,QAAiBA,GACzBC,GAAQ5mB,QA7MR,WACI,OAAK1b,KAAKmd,UAINnd,KAAKoyB,cACQ,MAAbpyB,KAAKqyB,MACJryB,KAAKsyB,QAAU,GAAM,OACK,QAA3BjT,EAAMrf,KAAKsyB,QAAU,IANd3kB,KA4Mf20B,GAAQ9P,QAvSR,WACI,IAIIN,EAASjI,EAASF,EAAO8H,EAAO0Q,EAJhCpQ,EAAenyB,KAAKoyB,cACpBH,EAAejyB,KAAKqyB,MACpB3M,EAAe1lB,KAAKsyB,QACpBzH,EAAe7qB,KAAKuyB,MAwCxB,OAnCOJ,GAAgB,GAAKF,GAAQ,GAAKvM,GAAU,GAC1CyM,GAAgB,GAAKF,GAAQ,GAAKvM,GAAU,IACjDyM,GAAuD,MAAvCkE,GAAQE,GAAa7Q,GAAUuM,GAC/CA,EAAO,EACPvM,EAAS,GAKbmF,EAAKsH,aAAeA,EAAe,IAEnCD,EAAoB/S,EAASgT,EAAe,KAC5CtH,EAAKqH,QAAeA,EAAU,GAE9BjI,EAAoB9K,EAAS+S,EAAU,IACvCrH,EAAKZ,QAAeA,EAAU,GAE9BF,EAAoB5K,EAAS8K,EAAU,IACvCY,EAAKd,MAAeA,EAAQ,GAE5BkI,GAAQ9S,EAAS4K,EAAQ,IAGzBwY,EAAiBpjB,EAASmX,GAAarE,IACvCvM,GAAU6c,EACVtQ,GAAQoE,GAAQE,GAAagM,IAG7B1Q,EAAQ1S,EAASuG,EAAS,IAC1BA,GAAU,GAEVmF,EAAKoH,KAASA,EACdpH,EAAKnF,OAASA,EACdmF,EAAKgH,MAASA,EAEP7xB,MA4PXsiC,GAAQp+B,IApLR,SAAgBid,GAEZ,OADAA,EAAQD,EAAeC,GAChBnhB,KAAKmd,UAAYnd,KAAKmhB,EAAQ,OAASxT,KAmLlD20B,GAAQnQ,aAAiBA,GACzBmQ,GAAQpQ,QAAiBA,GACzBoQ,GAAQrY,QAAiBA,GACzBqY,GAAQvY,MAAiBA,GACzBuY,GAAQrQ,KAAiBA,GACzBqQ,GAAQtQ,MAvKR,WACI,OAAO7S,EAASnf,KAAKiyB,OAAS,IAuKlCqQ,GAAQ5c,OAAiBA,GACzB4c,GAAQzQ,MAAiBA,GACzByQ,GAAQzE,SAjGR,SAAmB2E,GACf,IAAKxiC,KAAKmd,UACN,OAAOnd,KAAK8iB,aAAaQ,cAG7B,IAAIzH,EAAS7b,KAAK8iB,aACdI,EAAS8T,GAAeh3B,MAAOwiC,EAAY3mB,GAM/C,OAJI2mB,IACAtf,EAASrH,EAAOmlB,YAAYhhC,KAAMkjB,IAG/BrH,EAAO+hB,WAAW1a,IAsF7Bof,GAAQxD,YAAiB1H,GACzBkL,GAAQjxB,SAAiB+lB,GACzBkL,GAAQlD,OAAiBhI,GACzBkL,GAAQzmB,OAAiBA,GACzBymB,GAAQxf,WAAiBA,GAGzBwf,GAAQG,YAAcviB,EAAU,sFAAuFkX,IACvHkL,GAAQ/F,KAAOA,GAMf/Z,EAAe,IAAK,EAAG,EAAG,QAC1BA,EAAe,IAAK,EAAG,EAAG,WAI1BkB,EAAc,IAAKsW,IACnBtW,EAAc,IAAKyW,IACnB5V,EAAc,IAAK,SAAU3e,EAAOgE,EAAOmV,GACvCA,EAAOtB,GAAK,IAAInC,KAA6B,IAAxBrZ,WAAW2D,EAAO,OAE3C2e,EAAc,IAAK,SAAU3e,EAAOgE,EAAOmV,GACvCA,EAAOtB,GAAK,IAAInC,KAAK+D,EAAMzZ,MAM/BmV,EAAM2nB,QAAU,SAxzIhB,SAA0B/f,GACtB3H,GAAe2H,EAyzInBggB,CAAgBnT,IAEhBzU,EAAMQ,GAAwByhB,GAC9BjiB,EAAMjK,IApwDN,WAGI,OAAOwgB,GAAO,cAFA9rB,MAAMlG,KAAKsP,UAAW,KAowDxCmM,EAAMhK,IA/vDN,WAGI,OAAOugB,GAAO,aAFA9rB,MAAMlG,KAAKsP,UAAW,KA+vDxCmM,EAAMsT,IA1vDI,WACN,OAAO/S,KAAK+S,IAAM/S,KAAK+S,OAAS,IAAK/S,MA0vDzCP,EAAMiB,IAAwBL,EAC9BZ,EAAMskB,KAriBN,SAAqBz5B,GACjB,OAAO4pB,GAAoB,IAAR5pB,IAqiBvBmV,EAAM2K,OA9aN,SAAqB9J,EAAQrX,GACzB,OAAOyxB,GAAepa,EAAQrX,EAAO,WA8azCwW,EAAMM,OAAwBA,EAC9BN,EAAMc,OAAwB+O,GAC9B7P,EAAMohB,QAAwBpe,EAC9BhD,EAAM6W,SAAwBiC,GAC9B9Y,EAAMmE,SAAwBA,EAC9BnE,EAAMmO,SA5aN,SAAuBiN,EAAcva,EAAQrX,GACzC,OAAO2xB,GAAiBC,EAAcva,EAAQrX,EAAO,aA4azDwW,EAAMglB,UAziBN,WACI,OAAOvQ,GAAYnmB,MAAM,KAAMuF,WAAWmxB,aAyiB9ChlB,EAAM+H,WAAwBgI,GAC9B/P,EAAM0X,WAAwBA,GAC9B1X,EAAM0K,YApbN,SAA0B7J,EAAQrX,GAC9B,OAAOyxB,GAAepa,EAAQrX,EAAO,gBAobzCwW,EAAMiO,YAzaN,SAA0BmN,EAAcva,EAAQrX,GAC5C,OAAO2xB,GAAiBC,EAAcva,EAAQrX,EAAO,gBAyazDwW,EAAMgQ,aAAwBA,GAC9BhQ,EAAM6nB,aAh/EN,SAAsBn+B,EAAMsa,GACxB,GAAc,MAAVA,EAAgB,CAChB,IAAIlD,EAAQ6E,EAAesK,GAEN,MAAjBP,GAAQhmB,KACRic,EAAe+J,GAAQhmB,GAAMymB,UAGjCrP,EAAS,IAAI+E,EADb7B,EAAS0B,EAAaC,EAAc3B,KAE7BoM,aAAeV,GAAQhmB,GAC9BgmB,GAAQhmB,GAAQoX,EAGhB+O,GAAmBnmB,QAGE,MAAjBgmB,GAAQhmB,KAC0B,MAA9BgmB,GAAQhmB,GAAM0mB,aACdV,GAAQhmB,GAAQgmB,GAAQhmB,GAAM0mB,aACN,MAAjBV,GAAQhmB,WACRgmB,GAAQhmB,IAI3B,OAAOgmB,GAAQhmB,IAy9EnBsW,EAAM0P,QA97EN,WACI,OAAOmN,GAAOnN,KA87ElB1P,EAAMkO,cAjbN,SAA4BkN,EAAcva,EAAQrX,GAC9C,OAAO2xB,GAAiBC,EAAcva,EAAQrX,EAAO,kBAibzDwW,EAAMmG,eAAwBA,EAC9BnG,EAAM8nB,qBAtLN,SAAqCC,GACjC,YAAyB97B,IAArB87B,EACO9gC,GAEsB,mBAAvB,IACNA,GAAQ8gC,GACD,IAiLf/nB,EAAMgoB,sBA3KN,SAAsCC,EAAWC,GAC7C,YAA8Bj8B,IAA1BkwB,GAAW8L,UAGDh8B,IAAVi8B,EACO/L,GAAW8L,IAEtB9L,GAAW8L,GAAaC,EACN,MAAdD,IACA9L,GAAWC,GAAK8L,EAAQ,IAErB,KAiKXloB,EAAMsiB,eA/zCN,SAA2B6F,EAAU7U,GACjC,IAAIiF,EAAO4P,EAAS5P,KAAKjF,EAAK,QAAQ,GACtC,OAAOiF,GAAQ,EAAI,WACXA,GAAQ,EAAI,WACZA,EAAO,EAAI,UACXA,EAAO,EAAI,UACXA,EAAO,EAAI,UACXA,EAAO,EAAI,WAAa,YAyzCpCvY,EAAMhW,UAAwBi4B,GAEvBjiB,SAIDooB,GAAG,SAASpkC,EAAQU,EAAOJ,GAOjC,aAMA,SAASu/B,EAASxgB,GACjB,GAAY,OAARA,QAAwBpX,IAARoX,EACnB,MAAM,IAAIzX,UAAU,yDAGrB,OAAOxD,OAAOib,GATf,IAAIglB,EAAwBjgC,OAAOigC,sBAC/Bj7B,EAAiBhF,OAAO4B,UAAUoD,eAClCk7B,EAAmBlgC,OAAO4B,UAAUu+B,qBAsDxC7jC,EAAOJ,QA5CP,WACC,IACC,IAAK8D,OAAOlD,OACX,OAAO,EAMR,IAAIsjC,EAAQ,IAAI/0B,OAAO,OAEvB,GADA+0B,EAAM,GAAK,KACkC,MAAzCpgC,OAAOqgC,oBAAoBD,GAAO,GACrC,OAAO,EAKR,IAAK,IADDE,KACKzkC,EAAI,EAAGA,EAAI,GAAIA,IACvBykC,EAAM,IAAMj1B,OAAOqF,aAAa7U,IAAMA,EAKvC,GAAwB,eAHXmE,OAAOqgC,oBAAoBC,GAAO3gC,IAAI,SAAUrE,GAC5D,OAAOglC,EAAMhlC,KAEH6G,KAAK,IACf,OAAO,EAIR,IAAIo+B,KAIJ,MAHA,uBAAuBt+B,MAAM,IAAIxD,QAAQ,SAAU+hC,GAClDD,EAAMC,GAAUA,IAGf,yBADExgC,OAAOC,KAAKD,OAAOlD,UAAWyjC,IAAQp+B,KAAK,IAM9C,MAAO1C,GAER,OAAO,GAIQghC,GAAoBzgC,OAAOlD,OAAS,SAAU4jC,EAAQ5C,GAKtE,IAAK,IAJD/iB,EAEAnU,EADAkU,EAAK2gB,EAASiF,GAGTllC,EAAI,EAAGA,EAAIiQ,UAAUrP,OAAQZ,IAAK,CAC1Cuf,EAAO/a,OAAOyL,UAAUjQ,IAExB,IAAK,IAAI0E,KAAO6a,EACX/V,EAAe7I,KAAK4e,EAAM7a,KAC7B4a,EAAG5a,GAAO6a,EAAK7a,IAIjB,GAAI+/B,EAAuB,CAC1Br5B,EAAUq5B,EAAsBllB,GAChC,IAAK,IAAIlf,EAAI,EAAGA,EAAI+K,EAAQxK,OAAQP,IAC/BqkC,EAAiB/jC,KAAK4e,EAAMnU,EAAQ/K,MACvCif,EAAGlU,EAAQ/K,IAAMkf,EAAKnU,EAAQ/K,MAMlC,OAAOif,QAGF6lB,GAAG,SAAS/kC,EAAQU,EAAOJ,IAOhC,SAAU0kC,EAAMpkC,GAEb,aAEA,IAAImb,EACJ,GAAuB,iBAAZzb,EAAsB,CAG7B,IAAMyb,EAAS/b,EAAQ,UAAa,MAAOR,IAC3CkB,EAAOJ,QAAUM,EAAQmb,OACA,mBAAXlb,QAAyBA,OAAOC,IAE9CD,OAAO,SAAUokC,GAIb,IAAMlpB,EAASkpB,EADN,UACiB,MAAOzlC,IACjC,OAAOoB,EAAQmb,KAGnBipB,EAAKE,QAAUtkC,EAAQokC,EAAKjpB,QApBpC,CAsBE9a,KAAM,SAAU8a,GAEd,aAKA,IAAIopB,EAA8B,mBAAXppB,EAEvBqpB,IAAsBhiC,OAAOsB,iBAE7BnC,EAAWa,OAAOb,SAElB8iC,EAAMjiC,OAAO8V,WAEbosB,EAAW,SAAS3jC,EAAInC,EAAGokB,EAAU2hB,GAE7BH,EACAzjC,EAAG+C,iBAAiBlF,EAAGokB,IAAY2hB,GAEnC5jC,EAAG6jC,YAAY,KAAOhmC,EAAGokB,IAIjC6hB,EAAc,SAAS9jC,EAAInC,EAAGokB,EAAU2hB,GAEhCH,EACAzjC,EAAGwC,oBAAoB3E,EAAGokB,IAAY2hB,GAEtC5jC,EAAG+jC,YAAY,KAAOlmC,EAAGokB,IAIjC+hB,EAAO,SAASpxB,GAEZ,OAAOA,EAAIoxB,KAAOpxB,EAAIoxB,OAASpxB,EAAI9M,QAAQ,aAAa,KAG5Dm+B,EAAW,SAASjkC,EAAIkkC,GAEpB,OAA+D,KAAvD,IAAMlkC,EAAGmkC,UAAY,KAAKxgC,QAAQ,IAAMugC,EAAK,MAGzDE,EAAW,SAASpkC,EAAIkkC,GAEfD,EAASjkC,EAAIkkC,KACdlkC,EAAGmkC,UAA8B,KAAjBnkC,EAAGmkC,UAAoBD,EAAKlkC,EAAGmkC,UAAY,IAAMD,IAIzEG,EAAc,SAASrkC,EAAIkkC,GAEvBlkC,EAAGmkC,UAAYH,GAAM,IAAMhkC,EAAGmkC,UAAY,KAAKr+B,QAAQ,IAAMo+B,EAAK,IAAK,OAG3EzvB,EAAU,SAAStL,GAEf,MAAO,QAAU+J,KAAKzQ,OAAO4B,UAAUsM,SAAS/R,KAAKuK,KAGzDwR,EAAS,SAASxR,GAEd,MAAO,OAAS+J,KAAKzQ,OAAO4B,UAAUsM,SAAS/R,KAAKuK,MAAU9F,MAAM8F,EAAI6T,YAG5EsnB,EAAY,SAASjf,GAEjB,IAAIgD,EAAMhD,EAAK+H,SACf,OAAe,IAAR/E,GAAqB,IAARA,GAGxBpC,EAAa,SAAS9B,GAGlB,OAAOA,EAAO,GAAM,GAAKA,EAAO,KAAQ,GAAKA,EAAO,KAAQ,GAGhEogB,EAAiB,SAASpgB,EAAMC,GAE5B,OAAQ,GAAI6B,EAAW9B,GAAQ,GAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAIC,IAGpFogB,EAAkB,SAASnf,GAEnB1K,EAAO0K,IAAOA,EAAKof,SAAS,EAAE,EAAE,EAAE,IAG1CC,EAAe,SAAStmC,EAAEwM,GAGtB,OAAOxM,EAAE4e,YAAcpS,EAAEoS,WAG7BjC,EAAS,SAASwC,EAAIC,EAAMmnB,GAExB,IAAIlnB,EAAMmnB,EACV,IAAKnnB,KAAQD,GACTonB,OAAuBt+B,IAAbiX,EAAGE,KACwB,iBAAfD,EAAKC,IAAqC,OAAfD,EAAKC,SAA0CnX,IAAxBkX,EAAKC,GAAMtb,SAC3EwY,EAAO6C,EAAKC,IACRknB,IACApnB,EAAGE,GAAQ,IAAI7C,KAAK4C,EAAKC,GAAMT,YAG9BvI,EAAQ+I,EAAKC,IACdknB,IACApnB,EAAGE,GAAQD,EAAKC,GAAM3Y,MAAM,IAGhCyY,EAAGE,GAAQ1C,KAAWyC,EAAKC,GAAOknB,IAE/BA,GAAcC,IACrBrnB,EAAGE,GAAQD,EAAKC,IAGxB,OAAOF,GAGXsnB,EAAY,SAAS7kC,EAAI8kC,EAAW3a,GAEhC,IAAI4a,EAEAnkC,EAASoB,cACT+iC,EAAKnkC,EAASoB,YAAY,eACvBkC,UAAU4gC,GAAW,GAAM,GAC9BC,EAAKhqB,EAAOgqB,EAAI5a,GAChBnqB,EAAGiC,cAAc8iC,IACVnkC,EAASokC,oBAChBD,EAAKnkC,EAASokC,oBACdD,EAAKhqB,EAAOgqB,EAAI5a,GAChBnqB,EAAG6kC,UAAU,KAAOC,EAAWC,KAIvCE,EAAiB,SAAS7J,GAStB,OARIA,EAAShX,MAAQ,IACjBgX,EAASjX,MAAQ9iB,KAAKqL,KAAKrL,KAAK+M,IAAIgtB,EAAShX,OAAO,IACpDgX,EAAShX,OAAS,IAElBgX,EAAShX,MAAQ,KACjBgX,EAASjX,MAAQ9iB,KAAKsL,MAAMtL,KAAK+M,IAAIgtB,EAAShX,OAAO,IACrDgX,EAAShX,OAAS,IAEfgX,GAMX5N,GAGI4H,MAAO,KAGP8P,WAAO5+B,EAIP6+B,SAAU,cAGVC,YAAY,EAGZlqB,OAAQ,aAIRvK,SAAU,KAGVC,MAAO,KAGPy0B,YAAa,KAGbC,gBAAgB,EAGhBC,SAAU,EAGVC,cAAc,EAGdC,QAAS,KAETC,QAAS,KAGTC,UAAW,GAGXC,gBAAgB,EAGhBC,eAAe,EAGfC,QAAS,EACTC,QAAS,KACTC,cAAU1/B,EACV2/B,cAAU3/B,EAEV4/B,WAAY,KACZC,SAAU,KAEVC,OAAO,EAGPC,WAAY,GAGZC,oBAAoB,EAGpBC,iCAAiC,EAGjCC,4CAA4C,EAG5CC,eAAgB,EAIhBC,aAAc,OAGdC,eAAWrgC,EAGXsgC,mBAAoB,EAGpBC,MACIC,cAAgB,iBAChBC,UAAgB,aAChB/hB,QAAiB,UAAU,WAAW,QAAQ,QAAQ,MAAM,OAAO,OAAO,SAAS,YAAY,UAAU,WAAW,YACpHwD,UAAiB,SAAS,SAAS,UAAU,YAAY,WAAW,SAAS,YAC7ED,eAAiB,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,QAIzDye,MAAO,KAGPC,UAGAC,SAAU,KACVC,OAAQ,KACRC,QAAS,KACTC,OAAQ,MAOZC,EAAgB,SAASC,EAAMlf,EAAKkC,GAGhC,IADAlC,GAAOkf,EAAKhC,SACLld,GAAO,GACVA,GAAO,EAEX,OAAOkC,EAAOgd,EAAKV,KAAKte,cAAcF,GAAOkf,EAAKV,KAAKre,SAASH,IAGpEmf,EAAY,SAASD,GAEjB,IAAItnC,KACAwnC,EAAe,QACnB,GAAIF,EAAKG,QAAS,CACd,IAAIH,EAAKhB,gCAQL,MAAO,6BAPPtmC,EAAII,KAAK,4BAELknC,EAAKf,4CACLvmC,EAAII,KAAK,yBA6BrB,OAtBIknC,EAAKI,YACL1nC,EAAII,KAAK,eAETknC,EAAKK,SACL3nC,EAAII,KAAK,YAETknC,EAAKM,aACL5nC,EAAII,KAAK,eACTonC,EAAe,QAEfF,EAAKO,UACL7nC,EAAII,KAAK,aAETknC,EAAKQ,WACL9nC,EAAII,KAAK,cAETknC,EAAKS,cACL/nC,EAAII,KAAK,iBAETknC,EAAKU,YACLhoC,EAAII,KAAK,eAEN,iBAAmBknC,EAAKlf,IAAM,YAAcpoB,EAAI2E,KAAK,KAAO,oBAAsB6iC,EAAe,wEAEvEF,EAAKpjB,KAAO,sBAAwBojB,EAAKnjB,MAAQ,oBAAsBmjB,EAAKlf,IAAM,KACnGkf,EAAKlf,IACZ,kBAIb6f,EAAa,SAAU9hB,EAAG7J,EAAG4J,GAEzB,IAAIgiB,EAAS,IAAIvtB,KAAKuL,EAAG,EAAG,GAE5B,MAAO,yBADO9kB,KAAKqL,OAAQ,IAAIkO,KAAKuL,EAAG5J,EAAG6J,GAAK+hB,GAAU,MAAYA,EAAO/a,SAAS,GAAG,GAC5C,SAGhDgb,EAAY,SAAS7W,EAAM6U,EAAOP,EAAewC,GAE7C,MAAO,uBAAyBxC,EAAgB,mBAAqB,KAAOwC,EAAgB,eAAiB,IAAM,MAAQjC,EAAQ7U,EAAK+W,UAAY/W,GAAM3sB,KAAK,IAAM,SAGzK2jC,EAAa,SAASC,GAElB,MAAO,UAAYA,EAAK5jC,KAAK,IAAM,YAGvC6jC,EAAa,SAASlB,GAElB,IAAIjpC,EAAG2B,KAIP,IAHIsnC,EAAK3B,gBACL3lC,EAAII,KAAK,aAER/B,EAAI,EAAGA,EAAI,EAAGA,IACf2B,EAAII,KAAK,gCAAkCinC,EAAcC,EAAMjpC,GAAK,KAAOgpC,EAAcC,EAAMjpC,GAAG,GAAQ,gBAE9G,MAAO,eAAiBipC,EAAKnB,MAAQnmC,EAAIqoC,UAAYroC,GAAK2E,KAAK,IAAM,iBAGzE8jC,EAAc,SAASC,EAAUl2B,EAAG0R,EAAMC,EAAOwkB,EAASC,GAEtD,IAAIvqC,EAAG2J,EAAGhI,EAKN6oC,EACAC,EALAxB,EAAOoB,EAASK,GAChBC,EAAY9kB,IAASojB,EAAKzB,QAC1BoD,EAAY/kB,IAASojB,EAAKxB,QAC1BoD,EAAO,YAAcN,EAAS,6DAG9BO,GAAO,EACP5+B,GAAO,EAEX,IAAKvK,KAAU3B,EAAI,EAAGA,EAAI,GAAIA,IAC1B2B,EAAII,KAAK,mBAAqB8jB,IAASykB,EAAUtqC,EAAImU,EAAI,GAAKnU,EAAImU,GAAK,KAClEnU,IAAM8lB,EAAQ,uBAAwB,KACrC6kB,GAAa3qC,EAAIipC,EAAKvB,UAAckD,GAAa5qC,EAAIipC,EAAKtB,SAAY,sBAAwB,IAAM,IACtGsB,EAAKV,KAAK7hB,OAAO1mB,GAAK,aAa9B,IAVAwqC,EAAY,2BAA6BvB,EAAKV,KAAK7hB,OAAOZ,GAAS,+DAAiEnkB,EAAI2E,KAAK,IAAM,kBAE/I6P,EAAQ8yB,EAAK5B,YACbrnC,EAAIipC,EAAK5B,UAAU,GACnB19B,EAAIs/B,EAAK5B,UAAU,GAAK,IAExBrnC,EAAI6lB,EAAOojB,EAAK5B,UAChB19B,EAAI,EAAIkc,EAAOojB,EAAK5B,WAGnB1lC,KAAU3B,EAAI2J,GAAK3J,GAAKipC,EAAKxB,QAASznC,IACnCA,GAAKipC,EAAKzB,SACV7lC,EAAII,KAAK,kBAAoB/B,EAAI,KAAOA,IAAM6lB,EAAO,uBAAwB,IAAM,IAAM,EAAM,aA0BvG,OAvBA4kB,EAAW,2BAA6B5kB,EAAOojB,EAAKlB,WAAa,8DAAgEpmC,EAAI2E,KAAK,IAAM,kBAE5I2iC,EAAKjB,mBACL6C,GAAQJ,EAAWD,EAEnBK,GAAQL,EAAYC,EAGpBE,IAAwB,IAAV7kB,GAAemjB,EAAKvB,UAAY5hB,KAC9CglB,GAAO,GAGPF,IAAwB,KAAV9kB,GAAgBmjB,EAAKtB,UAAY7hB,KAC/C5Z,GAAO,GAGD,IAANiI,IACA02B,GAAQ,4BAA8BC,EAAO,GAAK,gBAAkB,mBAAqB7B,EAAKV,KAAKC,cAAgB,aAEnHr0B,IAAOk2B,EAASK,GAAGvC,eAAiB,IACpC0C,GAAQ,4BAA8B3+B,EAAO,GAAK,gBAAkB,mBAAqB+8B,EAAKV,KAAKE,UAAY,aAG5GoC,GAAQ,UAGnBE,EAAc,SAAS9B,EAAMpd,EAAM0e,GAE/B,MAAO,0FAA4FA,EAAS,KAAOJ,EAAWlB,GAAQgB,EAAWpe,GAAQ,YAO7JoZ,EAAU,SAASp/B,GAEf,IAAI8V,EAAO3a,KACPioC,EAAOttB,EAAKoE,OAAOla,GAEvB8V,EAAKqvB,aAAe,SAASzrC,GAEzB,GAAKoc,EAAKsvB,GAAV,CAIA,IAAIpG,GADJtlC,EAAIA,GAAK4D,OAAOqV,OACDqsB,QAAUtlC,EAAE2rC,WAC3B,GAAKrG,EAuBL,GAnBKc,EAASd,EAAQ,kBACdc,EAASd,EAAQ,gBAAmBc,EAASd,EAAQ,aAAgBc,EAASd,EAAOjjC,WAAY,eAW5F+jC,EAASd,EAAQ,aACtBlpB,EAAKwvB,YAEAxF,EAASd,EAAQ,cACtBlpB,EAAK8sB,aAdL9sB,EAAKyvB,QAAQ,IAAI9uB,KAAKuoB,EAAOwG,aAAa,kBAAmBxG,EAAOwG,aAAa,mBAAoBxG,EAAOwG,aAAa,mBACrHpC,EAAKrC,OACLxB,EAAI,WACAzpB,EAAK2vB,OACDrC,EAAKX,mBAAqBW,EAAKnS,OAC/BmS,EAAKnS,MAAMyU,QAEhB,OAUV5F,EAASd,EAAQ,eASlBlpB,EAAK6vB,IAAK,MATwB,CAElC,IAAIjsC,EAAEksC,eAIF,OADAlsC,EAAEmsC,aAAc,GACT,EAHPnsC,EAAEksC,oBAUd9vB,EAAKgwB,UAAY,SAASpsC,GAGtB,IAAIslC,GADJtlC,EAAIA,GAAK4D,OAAOqV,OACDqsB,QAAUtlC,EAAE2rC,WACtBrG,IAGDc,EAASd,EAAQ,qBACjBlpB,EAAKiwB,UAAU/G,EAAOzjC,OAEjBukC,EAASd,EAAQ,qBACtBlpB,EAAKkwB,SAAShH,EAAOzjC,SAI7Bua,EAAKmwB,aAAe,SAASvsC,GAIzB,GAFAA,EAAIA,GAAK4D,OAAOqV,MAEZmD,EAAKowB,YAEL,OAAOxsC,EAAEysC,SACL,KAAK,GACL,KAAK,GACG/C,EAAKnS,OACLmS,EAAKnS,MAAMyU,OAEf,MACJ,KAAK,GACDhsC,EAAEksC,iBACF9vB,EAAKswB,WAAW,WAAY,GAC5B,MACJ,KAAK,GACDtwB,EAAKswB,WAAW,WAAY,GAC5B,MACJ,KAAK,GACDtwB,EAAKswB,WAAW,MAAO,GACvB,MACJ,KAAK,GACDtwB,EAAKswB,WAAW,MAAO,KAMvCtwB,EAAKuwB,eAAiB,SAAS3sC,GAE3B,IAAIwnB,EAEAxnB,EAAE4sC,UAAYxwB,IAIdoL,EADAkiB,EAAK32B,MACE22B,EAAK32B,MAAM22B,EAAKnS,MAAM11B,MAAO6nC,EAAKrsB,QAClCsoB,GACPne,EAAOjL,EAAOmtB,EAAKnS,MAAM11B,MAAO6nC,EAAKrsB,OAAQqsB,EAAK/B,gBAClCngB,EAAK5I,UAAa4I,EAAK8Y,SAAW,KAG3C,IAAIvjB,KAAKA,KAAKhK,MAAM22B,EAAKnS,MAAM11B,QAEtCib,EAAO0K,IACTpL,EAAKyvB,QAAQrkB,GAEVpL,EAAKsvB,IACNtvB,EAAKywB,SAIbzwB,EAAK0wB,cAAgB,WAEjB1wB,EAAKywB,QAGTzwB,EAAK2wB,cAAgB,WAEjB3wB,EAAKywB,QAGTzwB,EAAK4wB,aAAe,WAGhB,IAAIC,EAAMlqC,EAASmqC,cACnB,GACI,GAAI9G,EAAS6G,EAAK,eACd,aAGAA,EAAMA,EAAI5qC,YAEb+Z,EAAK6vB,KACN7vB,EAAK+wB,GAAKtH,EAAI,WACVzpB,EAAK2vB,QACN,KAEP3vB,EAAK6vB,IAAK,GAGd7vB,EAAKgxB,SAAW,SAASptC,GAGrB,IAAIslC,GADJtlC,EAAIA,GAAK4D,OAAOqV,OACDqsB,QAAUtlC,EAAE2rC,WACvBsB,EAAM3H,EACV,GAAKA,EAAL,EAGKM,GAAqBQ,EAASd,EAAQ,iBAClCA,EAAO+H,WACR/H,EAAOgI,aAAa,WAAY,WAChCxH,EAASR,EAAQ,SAAUlpB,EAAKgwB,aAGxC,GACI,GAAIhG,EAAS6G,EAAK,gBAAkBA,IAAQvD,EAAK6D,QAC7C,aAGAN,EAAMA,EAAI5qC,YACd+Z,EAAKsvB,IAAMpG,IAAWoE,EAAK6D,SAAWN,IAAQvD,EAAK6D,SACnDnxB,EAAK2vB,SAIb3vB,EAAKja,GAAKY,EAASyqC,cAAc,OACjCpxB,EAAKja,GAAGmkC,UAAY,eAAiBoD,EAAKnB,MAAQ,UAAY,KAAOmB,EAAKP,MAAQ,IAAMO,EAAKP,MAAQ,IAErGrD,EAAS1pB,EAAKja,GAAI,YAAaia,EAAKqvB,cAAc,GAClD3F,EAAS1pB,EAAKja,GAAI,WAAYia,EAAKqvB,cAAc,GACjD3F,EAAS1pB,EAAKja,GAAI,SAAUia,EAAKgwB,WACjCtG,EAAS/iC,EAAU,UAAWqZ,EAAKmwB,cAE/B7C,EAAKnS,QACDmS,EAAKZ,UACLY,EAAKZ,UAAU2E,YAAYrxB,EAAKja,IACzBunC,EAAKrC,MACZtkC,EAAS2qC,KAAKD,YAAYrxB,EAAKja,IAE/BunC,EAAKnS,MAAMl1B,WAAWsrC,aAAavxB,EAAKja,GAAIunC,EAAKnS,MAAMqW,aAE3D9H,EAAS4D,EAAKnS,MAAO,SAAUnb,EAAKuwB,gBAE/BjD,EAAKlC,cACF7B,GAAa+D,EAAKnS,MAAM11B,MACxB6nC,EAAKlC,YAAcjrB,EAAOmtB,EAAKnS,MAAM11B,MAAO6nC,EAAKrsB,QAAQijB,SAEzDoJ,EAAKlC,YAAc,IAAIzqB,KAAKA,KAAKhK,MAAM22B,EAAKnS,MAAM11B,QAEtD6nC,EAAKjC,gBAAiB,IAI9B,IAAIoG,EAAUnE,EAAKlC,YAEf1qB,EAAO+wB,GACHnE,EAAKjC,eACLrrB,EAAKyvB,QAAQgC,GAAS,GAEtBzxB,EAAK0xB,SAASD,GAGlBzxB,EAAK0xB,SAAS,IAAI/wB,MAGlB2sB,EAAKrC,OACL5lC,KAAKsqC,OACL3vB,EAAKja,GAAGmkC,WAAa,YACrBR,EAAS4D,EAAK6D,QAAS,QAASnxB,EAAK2wB,eACrCjH,EAAS4D,EAAK6D,QAAS,QAASnxB,EAAK0wB,eACrChH,EAAS4D,EAAK6D,QAAS,OAAQnxB,EAAK4wB,eAEpCvrC,KAAKorC,QA4jBb,OApjBAnH,EAAQl/B,WAMJga,OAAQ,SAASla,GAER7E,KAAK0pC,KACN1pC,KAAK0pC,GAAKjuB,KAAWyS,GAAU,IAGnC,IAAI+Z,EAAOxsB,EAAOzb,KAAK0pC,GAAI7kC,GAAS,GAEpCojC,EAAKnB,QAAUmB,EAAKnB,MAEpBmB,EAAKnS,MAASmS,EAAKnS,OAASmS,EAAKnS,MAAMjzB,SAAYolC,EAAKnS,MAAQ,KAEhEmS,EAAKP,MAAgC,iBAAhBO,EAAKP,OAAuBO,EAAKP,MAAQO,EAAKP,MAAQ,KAE3EO,EAAKrC,cAA0B5+B,IAAfihC,EAAKrC,MAAsBqC,EAAKnS,OAASmS,EAAKrC,MAAQqC,EAAKnS,OAE3EmS,EAAK6D,QAAW7D,EAAK6D,SAAW7D,EAAK6D,QAAQjpC,SAAYolC,EAAK6D,QAAU7D,EAAKnS,MAE7EmS,EAAKqE,kBAAoBrE,EAAKqE,gBAE9BrE,EAAKsE,aAA8C,mBAAvBtE,EAAKsE,aAA+BtE,EAAKsE,aAAe,KAEpF,IAAIC,EAAM14B,SAASm0B,EAAKd,eAAgB,KAAO,EAmB/C,GAlBAc,EAAKd,eAAiBqF,EAAM,EAAI,EAAIA,EAE/BnxB,EAAO4sB,EAAK9B,WACb8B,EAAK9B,SAAU,GAEd9qB,EAAO4sB,EAAK7B,WACb6B,EAAK7B,SAAU,GAEd6B,EAAK9B,SAAW8B,EAAK7B,SAAY6B,EAAK7B,QAAU6B,EAAK9B,UACtD8B,EAAK7B,QAAU6B,EAAK9B,SAAU,GAE9B8B,EAAK9B,SACLnmC,KAAKysC,WAAWxE,EAAK9B,SAErB8B,EAAK7B,SACLpmC,KAAK0sC,WAAWzE,EAAK7B,SAGrBjxB,EAAQ8yB,EAAK5B,WAAY,CACzB,IAAIsG,GAAW,IAAIrxB,MAAO4L,cAAgB,GAC1C+gB,EAAK5B,UAAU,GAAKvyB,SAASm0B,EAAK5B,UAAU,GAAI,KAAOsG,EACvD1E,EAAK5B,UAAU,GAAKvyB,SAASm0B,EAAK5B,UAAU,GAAI,KAAOsG,OAEvD1E,EAAK5B,UAAYtkC,KAAK+M,IAAIgF,SAASm0B,EAAK5B,UAAW,MAAQnY,EAASmY,UAChE4B,EAAK5B,UAAY,MACjB4B,EAAK5B,UAAY,KAIzB,OAAO4B,GAMX52B,SAAU,SAASuK,GAGf,OADAA,EAASA,GAAU5b,KAAK0pC,GAAG9tB,OACtBP,EAAOrb,KAAKyd,IAGbzd,KAAK0pC,GAAGr4B,SACHrR,KAAK0pC,GAAGr4B,SAASrR,KAAKyd,GAAI7B,GAE/BsoB,EACKppB,EAAO9a,KAAKyd,IAAI7B,OAAOA,GAEzB5b,KAAKyd,GAAGmvB,eARJ,IAcfC,UAAW,WAEP,OAAO3I,EAAYppB,EAAO9a,KAAKyd,IAAM,MAMzCqvB,UAAW,SAAS/mB,EAAMgnB,GAElB7I,GAAappB,EAAOoE,SAAS6G,IAC7B/lB,KAAKoqC,QAAQrkB,EAAK8Y,SAAUkO,IAOpCte,QAAS,WAEL,OAAOpT,EAAOrb,KAAKyd,IAAM,IAAInC,KAAKtb,KAAKyd,GAAGC,WAAa,MAM3D0sB,QAAS,SAASrkB,EAAMgnB,GAEpB,IAAKhnB,EAQD,OAPA/lB,KAAKyd,GAAK,KAENzd,KAAK0pC,GAAG5T,QACR91B,KAAK0pC,GAAG5T,MAAM11B,MAAQ,GACtBmlC,EAAUvlC,KAAK0pC,GAAG5T,MAAO,UAAYqV,QAASnrC,QAG3CA,KAAKgtC,OAKhB,GAHoB,iBAATjnB,IACPA,EAAO,IAAIzK,KAAKA,KAAKhK,MAAMyU,KAE1B1K,EAAO0K,GAAZ,CAIA,IAAIjV,EAAM9Q,KAAK0pC,GAAGvD,QACdp1B,EAAM/Q,KAAK0pC,GAAGtD,QAEd/qB,EAAOvK,IAAQiV,EAAOjV,EACtBiV,EAAOjV,EACAuK,EAAOtK,IAAQgV,EAAOhV,IAC7BgV,EAAOhV,GAGX/Q,KAAKyd,GAAK,IAAInC,KAAKyK,EAAKrI,WACxBwnB,EAAgBllC,KAAKyd,IACrBzd,KAAKqsC,SAASrsC,KAAKyd,IAEfzd,KAAK0pC,GAAG5T,QACR91B,KAAK0pC,GAAG5T,MAAM11B,MAAQJ,KAAKqR,WAC3Bk0B,EAAUvlC,KAAK0pC,GAAG5T,MAAO,UAAYqV,QAASnrC,QAE7C+sC,GAA+C,mBAArB/sC,KAAK0pC,GAAG9B,UACnC5nC,KAAK0pC,GAAG9B,SAAStoC,KAAKU,KAAMA,KAAKyuB,aAOzC4d,SAAU,SAAStmB,GAEf,IAAIknB,GAAc,EAElB,GAAK5xB,EAAO0K,GAAZ,CAIA,GAAI/lB,KAAKktC,UAAW,CAChB,IAAIC,EAAmB,IAAI7xB,KAAKtb,KAAKktC,UAAU,GAAGroB,KAAM7kB,KAAKktC,UAAU,GAAGpoB,MAAO,GAC7EsoB,EAAkB,IAAI9xB,KAAKtb,KAAKktC,UAAUltC,KAAKktC,UAAU3tC,OAAO,GAAGslB,KAAM7kB,KAAKktC,UAAUltC,KAAKktC,UAAU3tC,OAAO,GAAGulB,MAAO,GACxHuoB,EAActnB,EAAKrI,UAEvB0vB,EAAgBxnB,SAASwnB,EAAgB5e,WAAW,GACpD4e,EAAgBhD,QAAQgD,EAAgB3e,UAAU,GAClDwe,EAAeI,EAAcF,EAAiBzvB,WAAa0vB,EAAgB1vB,UAAY2vB,EAGvFJ,IACAjtC,KAAKktC,YACDpoB,MAAOiB,EAAKyI,WACZ3J,KAAMkB,EAAKmB,gBAEc,UAAzBlnB,KAAK0pC,GAAGtC,eACRpnC,KAAKktC,UAAU,GAAGpoB,OAAS,EAAI9kB,KAAK0pC,GAAGvC,iBAI/CnnC,KAAKstC,oBAGTrC,WAAY,SAASnY,EAAMb,GAEvB,IAGIsb,EAHAxkB,EAAM/oB,KAAKyuB,WAAa,IAAInT,KAC5BkyB,EAA4B,GAAf15B,SAASme,GAAS,GAAG,GAAG,IAI5B,QAATa,EACAya,EAAS,IAAIjyB,KAAKyN,EAAIrN,UAAY8xB,GAClB,aAAT1a,IACPya,EAAS,IAAIjyB,KAAKyN,EAAIrN,UAAY8xB,IAGtCxtC,KAAKoqC,QAAQmD,IAGjBD,gBAAiB,WACbttC,KAAKktC,UAAU,GAAKvH,EAAe3lC,KAAKktC,UAAU,IAClD,IAAK,IAAI/5B,EAAI,EAAGA,EAAInT,KAAK0pC,GAAGvC,eAAgBh0B,IACxCnT,KAAKktC,UAAU/5B,GAAKwyB,GAChB7gB,MAAO9kB,KAAKktC,UAAU,GAAGpoB,MAAQ3R,EACjC0R,KAAM7kB,KAAKktC,UAAU,GAAGroB,OAGhC7kB,KAAKgtC,QAGTS,UAAW,WAEPztC,KAAKqsC,SAAS,IAAI/wB,OAMtBsvB,UAAW,SAAS9lB,GAEX/gB,MAAM+gB,KACP9kB,KAAKktC,UAAU,GAAGpoB,MAAQhR,SAASgR,EAAO,IAC1C9kB,KAAKstC,oBAIb7F,UAAW,WAEPznC,KAAKktC,UAAU,GAAGpoB,QAClB9kB,KAAKstC,mBAGTnD,UAAW,WAEPnqC,KAAKktC,UAAU,GAAGpoB,QAClB9kB,KAAKstC,mBAMTzC,SAAU,SAAShmB,GAEV9gB,MAAM8gB,KACP7kB,KAAKktC,UAAU,GAAGroB,KAAO/Q,SAAS+Q,EAAM,IACxC7kB,KAAKstC,oBAObb,WAAY,SAASrsC,GAEdA,aAAiBkb,MAChB4pB,EAAgB9kC,GAChBJ,KAAK0pC,GAAGvD,QAAU/lC,EAClBJ,KAAK0pC,GAAGlD,QAAWpmC,EAAM8mB,cACzBlnB,KAAK0pC,GAAGhD,SAAWtmC,EAAMouB,aAEzBxuB,KAAK0pC,GAAGvD,QAAUjY,EAASiY,QAC3BnmC,KAAK0pC,GAAGlD,QAAWtY,EAASsY,QAC5BxmC,KAAK0pC,GAAGhD,SAAWxY,EAASwY,SAC5B1mC,KAAK0pC,GAAG9C,WAAa1Y,EAAS0Y,YAGlC5mC,KAAKgtC,QAMTN,WAAY,SAAStsC,GAEdA,aAAiBkb,MAChB4pB,EAAgB9kC,GAChBJ,KAAK0pC,GAAGtD,QAAUhmC,EAClBJ,KAAK0pC,GAAGjD,QAAUrmC,EAAM8mB,cACxBlnB,KAAK0pC,GAAG/C,SAAWvmC,EAAMouB,aAEzBxuB,KAAK0pC,GAAGtD,QAAUlY,EAASkY,QAC3BpmC,KAAK0pC,GAAGjD,QAAUvY,EAASuY,QAC3BzmC,KAAK0pC,GAAG/C,SAAWzY,EAASyY,SAC5B3mC,KAAK0pC,GAAG7C,SAAW3Y,EAAS2Y,UAGhC7mC,KAAKgtC,QAGTU,cAAe,SAASttC,GAEpBJ,KAAK0pC,GAAG9C,WAAaxmC,GAGzButC,YAAa,SAASvtC,GAElBJ,KAAK0pC,GAAG7C,SAAWzmC,GAMvB4sC,KAAM,SAASh0B,GAEX,GAAKhZ,KAAKiqC,IAAOjxB,EAAjB,CAGA,IAMIuwB,EANAtB,EAAOjoC,KAAK0pC,GACZlD,EAAUyB,EAAKzB,QACfC,EAAUwB,EAAKxB,QACfC,EAAWuB,EAAKvB,SAChBC,EAAWsB,EAAKtB,SAChBkD,EAAO,GAGP7pC,KAAK4tC,IAAMpH,IACXxmC,KAAK4tC,GAAKpH,GACLziC,MAAM2iC,IAAa1mC,KAAK6tC,GAAKnH,IAC9B1mC,KAAK6tC,GAAKnH,IAGd1mC,KAAK4tC,IAAMnH,IACXzmC,KAAK4tC,GAAKnH,GACL1iC,MAAM4iC,IAAa3mC,KAAK6tC,GAAKlH,IAC9B3mC,KAAK6tC,GAAKlH,IAIlB4C,EAAS,cAAgBxnC,KAAKuL,SAAS+D,SAAS,IAAI7K,QAAQ,WAAY,IAAI+b,OAAO,EAAG,GAEtF,IAAK,IAAIpP,EAAI,EAAGA,EAAI80B,EAAKd,eAAgBh0B,IACrC02B,GAAQ,4BAA8BT,EAAYppC,KAAMmT,EAAGnT,KAAKktC,UAAU/5B,GAAG0R,KAAM7kB,KAAKktC,UAAU/5B,GAAG2R,MAAO9kB,KAAKktC,UAAU,GAAGroB,KAAM0kB,GAAUvpC,KAAK8tC,OAAO9tC,KAAKktC,UAAU/5B,GAAG0R,KAAM7kB,KAAKktC,UAAU/5B,GAAG2R,MAAOykB,GAAU,SAGzNvpC,KAAKU,GAAGqtC,UAAYlE,EAEhB5B,EAAKrC,OACkB,WAApBqC,EAAKnS,MAAM/uB,MACVq9B,EAAI,WACA6D,EAAK6D,QAAQkC,SACd,GAImB,mBAAnBhuC,KAAK0pC,GAAG3B,QACf/nC,KAAK0pC,GAAG3B,OAAO/nC,MAGfioC,EAAKrC,OAELqC,EAAKnS,MAAM+V,aAAa,aAAc,uCAI9CoC,eAAgB,WAEZ,IAAInY,EAAO0V,EAAKnrC,EAAOc,EAAQ+sC,EAAeC,EAAgBrtC,EAAWyE,EAAM6oC,EAAKC,EAEpF,IAAIruC,KAAK0pC,GAAGrC,UAAZ,CAYA,GAVArnC,KAAKU,GAAGJ,MAAMulC,SAAW,WAEzB/P,EAAQ91B,KAAK0pC,GAAGoC,QAChBN,EAAM1V,EACNz1B,EAAQL,KAAKU,GAAGH,YAChBY,EAASnB,KAAKU,GAAG6B,aACjB2rC,EAAgB/rC,OAAOmsC,YAAchtC,EAASC,gBAAgBI,YAC9DwsC,EAAiBhsC,OAAOosC,aAAejtC,EAASC,gBAAgBitC,aAChE1tC,EAAYqB,OAAOssC,aAAentC,EAAS2qC,KAAKnrC,WAAaQ,EAASC,gBAAgBT,UAE3C,mBAAhCg1B,EAAM4Y,sBAEbnpC,GADA8oC,EAAavY,EAAM4Y,yBACDnpC,KAAOpD,OAAOwsC,YAChCP,EAAMC,EAAWO,OAASzsC,OAAOssC,iBAIjC,IAFAlpC,EAAOimC,EAAIqD,WACXT,EAAO5C,EAAIsD,UAAYtD,EAAIjpC,aACpBipC,EAAMA,EAAIuD,cACbxpC,GAAQimC,EAAIqD,WACZT,GAAQ5C,EAAIsD,WAKf9uC,KAAK0pC,GAAG5D,YAAcvgC,EAAOlF,EAAQ6tC,GAElCluC,KAAK0pC,GAAG7D,SAASxhC,QAAQ,UAAY,GACrCkB,EAAOlF,EAAQy1B,EAAMv1B,YAAc,KAGvCgF,EAAOA,EAAOlF,EAAQy1B,EAAMv1B,cAE3BP,KAAK0pC,GAAG5D,YAAcsI,EAAMjtC,EAASgtC,EAAiBrtC,GAEnDd,KAAK0pC,GAAG7D,SAASxhC,QAAQ,QAAU,GACnC+pC,EAAMjtC,EAAS20B,EAAMvzB,aAAe,KAGxC6rC,EAAMA,EAAMjtC,EAAS20B,EAAMvzB,cAG/BvC,KAAKU,GAAGJ,MAAMiF,KAAOA,EAAO,KAC5BvF,KAAKU,GAAGJ,MAAM8tC,IAAMA,EAAM,OAM9BN,OAAQ,SAASjpB,EAAMC,EAAOykB,GAE1B,IAAItB,EAASjoC,KAAK0pC,GACdrb,EAAS,IAAI/S,KACb2W,EAASgT,EAAepgB,EAAMC,GAC9BkqB,EAAS,IAAI1zB,KAAKuJ,EAAMC,EAAO,GAAGgJ,SAClCjD,KACAokB,KACJ/J,EAAgB7W,GACZ4Z,EAAKhC,SAAW,IAChB+I,GAAU/G,EAAKhC,UACF,IACT+I,GAAU,GAUlB,IAPA,IAAIxH,EAA0B,IAAV1iB,EAAc,GAAKA,EAAQ,EAC3C2iB,EAAsB,KAAV3iB,EAAe,EAAIA,EAAQ,EACvCoqB,EAAgC,IAAVpqB,EAAcD,EAAO,EAAIA,EAC/CsqB,EAA4B,KAAVrqB,EAAeD,EAAO,EAAIA,EAC5CuqB,EAAsBnK,EAAeiK,EAAqB1H,GAC1D6H,EAAQpd,EAAO+c,EACfM,EAAQD,EACNC,EAAQ,GACVA,GAAS,EAEbD,GAAS,EAAIC,EAEb,IAAK,IADDC,GAAiB,EACZvwC,EAAI,EAAGN,EAAI,EAAGM,EAAIqwC,EAAOrwC,IAClC,CACI,IAAI+pB,EAAM,IAAIzN,KAAKuJ,EAAMC,EAAY9lB,EAAIgwC,EAAT,GAC5BzG,IAAaltB,EAAOrb,KAAKyd,KAAM2nB,EAAarc,EAAK/oB,KAAKyd,IACtD6qB,EAAUlD,EAAarc,EAAKsF,GAC5Bma,GAAwD,IAA7CP,EAAKN,OAAOtjC,QAAQ0kB,EAAI6jB,gBACnCxE,EAAUppC,EAAIgwC,GAAUhwC,GAAMizB,EAAO+c,EACrCQ,EAAiBxwC,EAAIgwC,EAAT,EACZS,EAAc3qB,EACd4qB,EAAa7qB,EACb6jB,EAAeT,EAAKrB,YAAcxB,EAAa6C,EAAKrB,WAAY7d,GAChE4f,EAAaV,EAAKpB,UAAYzB,EAAa6C,EAAKpB,SAAU9d,GAC1D0f,EAAYR,EAAKrB,YAAcqB,EAAKpB,UAAYoB,EAAKrB,WAAa7d,GAAOA,EAAMkf,EAAKpB,SACpFwB,EAAcJ,EAAK9B,SAAWpd,EAAMkf,EAAK9B,SAC3B8B,EAAK7B,SAAWrd,EAAMkf,EAAK7B,SAC3B6B,EAAKqE,iBAAmBtH,EAAUjc,IAClCkf,EAAKsE,cAAgBtE,EAAKsE,aAAaxjB,GAErDqf,IACIppC,EAAIgwC,GACJQ,EAAYJ,EAAsBI,EAClCC,EAAcjI,EACdkI,EAAaR,IAEbM,GAAwBvd,EACxBwd,EAAchI,EACdiI,EAAaP,IAIrB,IAAIQ,GACI5mB,IAAKymB,EACL1qB,MAAO2qB,EACP5qB,KAAM6qB,EACNlH,SAAUA,EACVD,WAAYA,EACZD,QAASA,EACTD,WAAYA,EACZD,QAASA,EACTM,aAAcA,EACdC,WAAYA,EACZF,UAAWA,EACXxB,gCAAiCgB,EAAKhB,gCACtCC,2CAA4Ce,EAAKf,4CAGrDe,EAAK1B,eAAiBgC,IACtBgH,GAAiB,GAGrBN,EAAIluC,KAAKmnC,EAAUyH,IAEP,KAANjxC,IACEupC,EAAK3B,gBACL2I,EAAI7lC,QAAQw/B,EAAW5pC,EAAIgwC,EAAQlqB,EAAOD,IAE9CgG,EAAK9pB,KAAK+nC,EAAUmG,EAAKhH,EAAKnB,MAAOmB,EAAK1B,cAAegJ,IACzDN,KACAvwC,EAAI,EACJ6wC,GAAiB,GAGzB,OAAOxF,EAAY9B,EAAMpd,EAAM0e,IAGnCwB,UAAW,WAEP,OAAO/qC,KAAKiqC,IAGhBmB,KAAM,WAEGprC,KAAK+qC,cACN/qC,KAAKiqC,IAAK,EACVjqC,KAAKgtC,OACLjI,EAAY/kC,KAAKU,GAAI,aACjBV,KAAK0pC,GAAG9D,QACRvB,EAAS/iC,EAAU,QAAStB,KAAK2rC,UACjC3rC,KAAKiuC,kBAEqB,mBAAnBjuC,KAAK0pC,GAAG7B,QACf7nC,KAAK0pC,GAAG7B,OAAOvoC,KAAKU,QAKhCsqC,KAAM,WAEF,IAAIthC,EAAIhJ,KAAKiqC,IACH,IAANjhC,IACIhJ,KAAK0pC,GAAG9D,OACRpB,EAAYljC,EAAU,QAAStB,KAAK2rC,UAExC3rC,KAAKU,GAAGJ,MAAMulC,SAAW,SACzB7lC,KAAKU,GAAGJ,MAAMiF,KAAO,OACrBvF,KAAKU,GAAGJ,MAAM8tC,IAAM,OACpBtJ,EAAS9kC,KAAKU,GAAI,aAClBV,KAAKiqC,IAAK,OACAjjC,IAANgC,GAA8C,mBAApBhJ,KAAK0pC,GAAG5B,SAClC9nC,KAAK0pC,GAAG5B,QAAQxoC,KAAKU,QAQjCiD,QAAS,WAELjD,KAAKsqC,OACL9F,EAAYxkC,KAAKU,GAAI,YAAaV,KAAKgqC,cAAc,GACrDxF,EAAYxkC,KAAKU,GAAI,WAAYV,KAAKgqC,cAAc,GACpDxF,EAAYxkC,KAAKU,GAAI,SAAUV,KAAK2qC,WACpCnG,EAAYljC,EAAU,UAAWtB,KAAK8qC,cAClC9qC,KAAK0pC,GAAG5T,QACR0O,EAAYxkC,KAAK0pC,GAAG5T,MAAO,SAAU91B,KAAKkrC,gBACtClrC,KAAK0pC,GAAG9D,QACRpB,EAAYxkC,KAAK0pC,GAAGoC,QAAS,QAAS9rC,KAAKsrC,eAC3C9G,EAAYxkC,KAAK0pC,GAAGoC,QAAS,QAAS9rC,KAAKqrC,eAC3C7G,EAAYxkC,KAAK0pC,GAAGoC,QAAS,OAAQ9rC,KAAKurC,gBAG9CvrC,KAAKU,GAAGE,YACRZ,KAAKU,GAAGE,WAAWgvC,YAAY5vC,KAAKU,MAMzCujC,MAIRnpB,OAAS,IAAI+0B,GAAG,SAAS9wC,EAAQU,EAAOJ,GAC3C,aAKA,SAASywC,EAAsB7H,GAC9B,OAAQA,EAAK8H,aACZ,IAAK,QACJ,OAAO,SAAU1sC,EAAKjD,EAAOmE,GAC5B,OAAiB,OAAVnE,GACN4vC,EAAO3sC,EAAK4kC,GACZ,IACA1jC,EACA,KACCe,KAAK,KACN0qC,EAAO3sC,EAAK4kC,GACZ,IACA+H,EAAOzrC,EAAO0jC,GACd,KACA+H,EAAO5vC,EAAO6nC,IACb3iC,KAAK,KAGT,IAAK,UACJ,OAAO,SAAUjC,EAAKjD,GACrB,OAAiB,OAAVA,EAAiB4vC,EAAO3sC,EAAK4kC,IACnC+H,EAAO3sC,EAAK4kC,GACZ,MACA+H,EAAO5vC,EAAO6nC,IACb3iC,KAAK,KAGT,QACC,OAAO,SAAUjC,EAAKjD,GACrB,OAAiB,OAAVA,EAAiB4vC,EAAO3sC,EAAK4kC,IACnC+H,EAAO3sC,EAAK4kC,GACZ,IACA+H,EAAO5vC,EAAO6nC,IACb3iC,KAAK,MAKX,SAAS2qC,EAAqBhI,GAC7B,IAAI3hC,EAEJ,OAAQ2hC,EAAK8H,aACZ,IAAK,QACJ,OAAO,SAAU1sC,EAAKjD,EAAO8vC,GAC5B5pC,EAAS,aAAaD,KAAKhD,GAE3BA,EAAMA,EAAImD,QAAQ,WAAY,IAEzBF,QAKoBU,IAArBkpC,EAAY7sC,KACf6sC,EAAY7sC,OAGb6sC,EAAY7sC,GAAKiD,EAAO,IAAMlG,GAR7B8vC,EAAY7sC,GAAOjD,GAWtB,IAAK,UACJ,OAAO,SAAUiD,EAAKjD,EAAO8vC,GAC5B5pC,EAAS,UAAUD,KAAKhD,GACxBA,EAAMA,EAAImD,QAAQ,QAAS,IAEtBF,OAG2BU,IAArBkpC,EAAY7sC,GAKvB6sC,EAAY7sC,MAAUqC,OAAOwqC,EAAY7sC,GAAMjD,GAJ9C8vC,EAAY7sC,IAAQjD,GAHpB8vC,EAAY7sC,GAAOjD,GAUtB,QACC,OAAO,SAAUiD,EAAKjD,EAAO8vC,QACHlpC,IAArBkpC,EAAY7sC,GAKhB6sC,EAAY7sC,MAAUqC,OAAOwqC,EAAY7sC,GAAMjD,GAJ9C8vC,EAAY7sC,GAAOjD,IASxB,SAAS4vC,EAAO5vC,EAAO6nC,GACtB,OAAIA,EAAK+H,OACD/H,EAAKnsB,OAASq0B,EAAgB/vC,GAASgwC,mBAAmBhwC,GAG3DA,EAGR,SAASiwC,EAAWzqC,GACnB,OAAId,MAAMqQ,QAAQvP,GACVA,EAAMic,OACc,iBAAVjc,EACVyqC,EAAWltC,OAAOC,KAAKwC,IAAQic,KAAK,SAAU/iB,EAAGwM,GACvD,OAAOC,OAAOzM,GAAKyM,OAAOD,KACxBxI,IAAI,SAAUO,GAChB,OAAOuC,EAAMvC,KAIRuC,EA/GR,IAAIuqC,EAAkBpxC,EAAQ,qBAC1BuxC,EAAevxC,EAAQ,iBACvBwxC,EAAkBxxC,EAAQ,wBAgH9BM,EAAQmxC,QAAU,SAAUl9B,GAC3B,OAAOA,EAAIlO,MAAM,KAAK,IAAM,IAG7B/F,EAAQiS,MAAQ,SAAUgC,EAAK20B,GAG9B,IAAIwI,EAAYR,EAFhBhI,EAAOqI,GAAcP,YAAa,QAAS9H,IAMvCnU,EAAM3wB,OAAOutC,OAAO,MAExB,MAAmB,iBAARp9B,EACHwgB,GAGRxgB,EAAMA,EAAIoxB,OAAOl+B,QAAQ,YAAa,MAMtC8M,EAAIlO,MAAM,KAAKxD,QAAQ,SAAU+P,GAChC,IAAIuhB,EAAQvhB,EAAMnL,QAAQ,MAAO,KAAKpB,MAAM,KAGxC/B,EAAM6vB,EAAM5qB,QACZ8V,EAAM8U,EAAM3zB,OAAS,EAAI2zB,EAAM5tB,KAAK,UAAO0B,EAI/CoX,OAAcpX,IAARoX,EAAoB,KAAOmyB,EAAgBnyB,GAEjDqyB,EAAUF,EAAgBltC,GAAM+a,EAAK0V,KAG/B3wB,OAAOC,KAAK0wB,GAAKjS,OAAO8uB,OAAO,SAAUrqC,EAAQjD,GACvD,IAAI+a,EAAM0V,EAAIzwB,GAQd,OAPI6I,QAAQkS,IAAuB,iBAARA,IAAqBtZ,MAAMqQ,QAAQiJ,GAE7D9X,EAAOjD,GAAOgtC,EAAWjyB,GAEzB9X,EAAOjD,GAAO+a,EAGR9X,GACLnD,OAAOutC,OAAO,QA3BT5c,GA8BTz0B,EAAQqK,UAAY,SAAUG,EAAKo+B,GASlC,IAAIwI,EAAYX,EAFhB7H,EAAOqI,GALNN,QAAQ,EACRl0B,QAAQ,EACRi0B,YAAa,QAGgB9H,IAI9B,OAAOp+B,EAAM1G,OAAOC,KAAKyG,GAAKgY,OAAO/e,IAAI,SAAUO,GAClD,IAAI+a,EAAMvU,EAAIxG,GAEd,QAAY2D,IAARoX,EACH,MAAO,GAGR,GAAY,OAARA,EACH,OAAO4xB,EAAO3sC,EAAK4kC,GAGpB,GAAInjC,MAAMqQ,QAAQiJ,GAAM,CACvB,IAAI9X,KAUJ,OARA8X,EAAI5Y,QAAQ5D,QAAQ,SAAUgvC,QAChB5pC,IAAT4pC,GAIJtqC,EAAOvF,KAAK0vC,EAAUptC,EAAKutC,EAAMtqC,EAAO/G,WAGlC+G,EAAOhB,KAAK,KAGpB,OAAO0qC,EAAO3sC,EAAK4kC,GAAQ,IAAM+H,EAAO5xB,EAAK6pB,KAC3Cx2B,OAAO,SAAUzM,GACnB,OAAOA,EAAEzF,OAAS,IAChB+F,KAAK,KAAO,MAGburC,uBAAuB,EAAEC,gBAAgB,EAAEC,oBAAoB,IAAIC,GAAG,SAASjyC,EAAQU,EAAOJ,GACjG,aACAI,EAAOJ,QAAU,SAAUiU,GAC1B,OAAO88B,mBAAmB98B,GAAK9M,QAAQ,WAAY,SAAU2M,GAC5D,MAAO,IAAMA,EAAE89B,WAAW,GAAG5/B,SAAS,IAAI+B,sBAItC89B,IAAI,SAASnyC,EAAQU,EAAOJ,GAClC,aAMA,SAAS8xC,IACP,MAAO,kLALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,YAAaF,KAE9B,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKC,IAAI,SAAS1yC,EAAQU,EAAOJ,GAC7C,aAMA,SAAS8xC,IACP,MAAO,sLALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,aAAcF,KAE/B,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKE,IAAI,SAAS3yC,EAAQU,EAAOJ,GAC7C,aAMA,SAAS8xC,IACP,MAAO,ooCALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,SAAUF,KAE3B,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKG,IAAI,SAAS5yC,EAAQU,EAAOJ,GAC7C,aASA,SAASwC,EAAOnB,GACVkxC,EAAKlxC,EAAGmxC,cAAc,UACxBnxC,EAAGoxC,UAAUzmC,IAAI,QAEjB3K,EAAGoxC,UAAUz5B,OAAO,QAXxB,IAAI+4B,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAGhB4tC,EADY7yC,EAAQ,sBACH6yC,KAUjBzyC,EAAO,qaAQXM,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,YAAa,GAAKlyC,GAEnC,OADA6E,EAAKutC,EAAO1vC,GACL0vC,GAG8B1vC,OAAQA,KAE5CkwC,qBAAqB,GAAGP,SAAS,KAAKQ,IAAI,SAASjzC,EAAQU,EAAOJ,GACrE,aAMA,SAAS8xC,IACP,MAAO,oLALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,SAAUF,KAE3B,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKS,IAAI,SAASlzC,EAAQU,EAAOJ,GAC7C,aAUA,SAASwC,EAAOnB,GACd,IACI82B,KADUhyB,MAAMlG,KAAKoB,EAAGwxC,iBAAiB,SAC5BvB,OAAO,SAAUwB,EAAKlD,GACrC,IAAImD,EAAQR,EAAK3C,EAAI4C,cAAc,WAC/B1wB,EAAQywB,EAAK3C,EAAI4C,cAAc,WAEnC,OADAQ,EAAMpD,EAAI4C,cAAc,aAAcO,EAAQjxB,GACvCgxB,EAAMC,EAAQjxB,GACpB,GACHkxB,EAAM3xC,EAAGmxC,cAAc,UAAWra,GAClC8a,EAAU5xC,EAAGwxC,iBAAiB,oBAGhC,SAASI,EAAUC,GACjB,IAAIC,GAAY,KACbhtC,MAAMlG,KAAKizC,GAAO3wC,QAAQ,SAAUoG,GACrC,IAAI5D,EAAS4D,EAAKkqC,iBAAiB,SAC/Bh2B,EAA4B,KAApB9X,EAAO,GAAGhE,OAAoC,KAApBgE,EAAO,GAAGhE,OAAoC,KAApBgE,EAAO,GAAGhE,MAExE4H,EAAK1H,MAAMmyC,QADTD,GAAat2B,EACM,OAEA,OAEvBs2B,EAAYt2B,IA9BhB,IAAIk1B,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAEhB0uC,EAAY3zC,EAAQ,sBACpB6yC,EAAOc,EAAUd,KACjBS,EAAQK,EAAUL,MA2BlBM,EAAS,mSACT1D,EAAM,2aACN2D,EAAS,4OAQbnzC,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,YAAasB,EAAS,sBAAwB1D,EAAI4D,OAAO,IAAM,IAAMD,EAAS,UAE/F,OADA5uC,EAAKutC,EAAO1vC,GACL0vC,GAG8B1vC,OAAQA,KAE5CkwC,qBAAqB,GAAGP,SAAS,KAAKsB,IAAI,SAAS/zC,EAAQU,EAAOJ,GACrE,aAEA,IACIgyC,EADWtyC,EAAQ,UACHsyC,KAMpB5xC,EAAOJ,SAAYiyC,SAJnB,WACE,OAAOD,EAAK,YAAa,oCAKxBG,SAAS,KAAKuB,IAAI,SAASh0C,EAAQU,EAAOJ,GAC7C,aAMA,SAAS8xC,IACP,MAAO,0FALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,UAAWF,KAE5B,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKwB,IAAI,SAASj0C,EAAQU,EAAOJ,GAC7C,aAMA,SAAS8xC,IACP,MAAO,yKALT,IAAIC,EAAWryC,EAAQ,UACnBsyC,EAAOD,EAASC,KAChBrtC,EAAOotC,EAASptC,KAYpBvE,EAAOJ,SAAYiyC,SANnB,WACE,IAAIC,EAAQF,EAAK,MAAOF,KAExB,OADAntC,EAAKutC,GACEA,MAKNC,SAAS,KAAKyB,IAAI,SAASl0C,EAAQU,EAAOJ,GAC7C,aAkDA,SAAS6zC,EAAcC,EAASC,GAC9B,OAAOC,EAASF,EAASC,GAAWtwC,IAAI,SAAUpC,GAChD,OAAO4yC,EAAO1B,KAAKlxC,KAIvB,SAAS6yC,EAAUJ,GACjB,OAAOE,EAASF,EAAS,gBAAgBrwC,IAAI,SAAUpC,GACrD,OAAOA,EAAGN,QAId,SAASozC,EAAaL,GACpB,OAAOE,EAASF,EAAS,mBAAmBrwC,IAAI,SAAUpC,GACxD,OAAOA,EAAGN,QAId,SAASqzC,EAAKN,EAAStoB,GACrB6oB,EAAcP,EAAS,MAAOtoB,EAAK8oB,QACnCD,EAAcP,EAAS,QAAStoB,EAAK+oB,cACrCC,EAAUV,EAAStoB,EAAKP,OACxBwpB,EAAaX,EAAStoB,EAAKkpB,UAG7B,SAASL,EAAcP,EAASC,EAAWvoB,GACrCA,GACFwoB,EAASF,EAASC,GAAWxxC,QAAQ,SAAUlB,EAAI6D,GAC7CsmB,EAAKtmB,IAAQ+uC,EAAOjB,MAAM3xC,EAAImqB,EAAKtmB,MAK7C,SAASsvC,EAAUV,EAAStoB,GACtBA,GACFwoB,EAASF,EAAS,gBAAgBvxC,QAAQ,SAAUlB,EAAI6D,GAClDsmB,EAAKtmB,KACP7D,EAAGN,MAAQyqB,EAAKtmB,GAChB7D,EAAGiC,cAAc,IAAI+B,MAAM,aAMnC,SAASovC,EAAaX,EAAStoB,GACzBA,GACFwoB,EAASF,EAAS,mBAAmBvxC,QAAQ,SAAUlB,EAAI6D,GACrDsmB,EAAKtmB,KACP7D,EAAGN,MAAQyqB,EAAKtmB,GAChB7D,EAAGiC,cAAc,IAAI+B,MAAM,aAjGnC,IACI2uC,EADWt0C,EAAQ,gBACCs0C,SAEpBC,EAASv0C,EAAQ,sBACjBgB,EAAWhB,EAAQ,YAYnBi1C,GACFC,UAXcl1C,EAAQ,gBAYtBm1C,WAXen1C,EAAQ,iBAYvB4zC,OAXW5zC,EAAQ,aAYnBo1C,UAXcp1C,EAAQ,gBAYtBq1C,UAXcr1C,EAAQ,gBAYtBqgB,OAXWrgB,EAAQ,aAYnB6zB,UAXc7zB,EAAQ,gBAYtBs1C,QAXYt1C,EAAQ,cAYpB2P,IAXQ3P,EAAQ,WAyFlBU,EAAOJ,SACLqxC,OA5EF,SAAgB3pC,EAAM8jB,GACpB,IAAI0mB,EAAQyC,EAAIjtC,GAAMuqC,WAItB,OAHIzmB,GAAM4oB,EAAKlC,EAAO1mB,GAClBmpB,EAAIjtC,GAAMlF,QAAQmyC,EAAIjtC,GAAMlF,OAAO0vC,GACvCxxC,EAASwxC,EAAMW,iBAAiB,aACzBX,GAwEP+C,KArEF,SAAcnB,GACZ,OACEpsC,KAAMosC,EAAQoB,QAAQxtC,KACtB8jB,MACE8oB,OAAQT,EAAcC,EAAS,OAC/BS,aAAcV,EAAcC,EAAS,SACrC7oB,MAAOipB,EAAUJ,GACjBY,SAAUP,EAAaL,MA+D3BM,KAAMA,EACNO,IAAKA,KAGJjC,qBAAqB,GAAGyC,eAAe,GAAGC,eAAe,GAAGC,gBAAgB,GAAGC,YAAY,GAAGC,eAAe,GAAGC,YAAY,GAAGC,eAAe,GAAGC,eAAe,GAAGC,aAAa,GAAGC,SAAS,GAAGl1C,SAAW,IAAIm1C,IAAI,SAASn2C,EAAQU,EAAOJ,GAC7O,aAEA,IAAI+xC,EAAWryC,EAAQ,gBACnBs0C,EAAWjC,EAASiC,SACpB8B,EAAmB/D,EAAS+D,iBAE5B7B,EAASv0C,EAAQ,sBAmCrBU,EAAOJ,SAAYgyC,KAjCnB,SAActqC,EAAM8iC,GAClB,IAAIsJ,EAAU7xC,SAASyqC,cAAc,OACrCoH,EAAQrB,UAAUzmC,IAAI,UACtB8nC,EAAQrB,UAAUzmC,IAAI,iBACtB8nC,EAAQrB,UAAUzmC,IAAI,SACtB8nC,EAAQoB,QAAQxtC,KAAOA,EACvBosC,EAAQrB,UAAUzmC,IAAI,SAAWtE,GACjCosC,EAAQpF,UAAYlE,EACpB,IAAIuL,EAAQ9zC,SAASyqC,cAAc,OAKnC,OAJAqJ,EAAMtD,UAAUzmC,IAAI,QACpB+pC,EAAMtD,UAAUzmC,IAAI,eACpB+pC,EAAMrH,UAAY,8SAAgThnC,EAAO,sFACzUosC,EAAQkC,sBAAsB,aAAcD,GACrCjC,GAoBsBnvC,KAjB/B,SAAcmvC,EAAStxC,GACrBsB,OAAOC,KAAKkwC,EAAOU,KAAKpyC,QAAQ,SAAUyB,GACxCgwC,EAASF,EAAS,IAAM9vC,GAAKzB,QAAQ,SAAUlB,GAC7C,OAAO4yC,EAAOU,IAAI3wC,GAAKW,KAAKtD,OAGhCyyC,EAAQ1vC,iBAAiB,iBAAkB,WACrC5B,GAAQA,EAAOsxC,KAErBE,EAASF,EAAS,OAAOvxC,QAAQ,SAAUlB,GACzC,OAAOA,EAAG+C,iBAAiB,QAAS,WAC9B5B,GAAQA,EAAOsxC,GACnBgC,YAOHpD,qBAAqB,GAAGyC,eAAe,KAAKc,IAAI,SAASv2C,EAAQU,EAAOJ,GAC3E,aAEA,IACIk2C,EADWx2C,EAAQ,UACCw2C,SAcxB91C,EAAOJ,SAAY2E,KAZnB,SAActD,GACZ60C,EAAS70C,EAAI,SAWgBkxC,KAR/B,SAAclxC,GACZ,MAAoB,SAAbA,EAAGN,OAO+BiyC,MAJ3C,SAAe3xC,EAAI0d,GACjB1d,EAAGN,MAAQge,MAKVozB,SAAS,KAAKgE,IAAI,SAASz2C,EAAQU,EAAOJ,GAC7C,aAeA,SAASo2C,EAAS/0C,GACZA,EAAGoxC,UAAUnoC,SAAS,OACxB,IAAIs6B,GACFnO,MAAOp1B,EACPkb,OAAQ,aACRqqB,SAAU,EACV2B,SAAU,WACR,OAAOlnC,EAAGiC,cAAc,IAAI+B,MAAM,WAEpC6iC,MACEC,cAAe,kBACfC,UAAW,oBACX/hB,QAAS,QAAS,OAAQ,SAAU,QAAS,SAAU,SAAU,WAAY,QAAS,OAAQ,QAAS,WAAY,YACnHwD,UAAW,SAAU,UAAW,QAAS,SAAU,UAAW,QAAS,UACvED,eAAgB,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,SA3B5D,IAAIysB,EAA4B,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAwB,SAAU/rC,GAAO,cAAcA,GAAS,SAAUA,GAAO,OAAOA,GAAyB,mBAAX8rC,QAAyB9rC,EAAIgsC,cAAgBF,QAAU9rC,IAAQ8rC,OAAO5wC,UAAY,gBAAkB8E,GAGlQ0rC,EADWx2C,EAAQ,UACCw2C,SAEpBz6B,EAAS/b,EAAQ,UACjBklC,EAAUllC,EAAQ,WAuCtBU,EAAOJ,SAAY2E,KArCnB,SAActD,GACZ60C,EAAS70C,EAAI,QACb+0C,EAAS/0C,IAmCoBkxC,KAZ/B,SAAclxC,GACZ,OAAOoa,EAAOpa,EAAGN,MAAO,eAWiBiyC,MAR3C,SAAe3xC,EAAI0d,GACE,iBAARA,EACT1d,EAAGN,MAAQ0a,EAAOsD,GAAKxC,OAAO,cACyC,iBAA9C,IAARwC,EAAsB,YAAcs3B,EAAQt3B,KAAsBA,EAAIxC,SAAWd,EAAO/V,UAAU6W,SACnHlb,EAAGN,MAAQge,EAAIxC,OAAO,mBAMvB41B,SAAS,GAAG12B,OAAS,EAAEg7B,QAAU,IAAIC,IAAI,SAASh3C,EAAQU,EAAOJ,GACpE,aAcAI,EAAOJ,SAAY2E,KAZnB,SAActD,GACZA,EAAG6zC,QAAQnB,UAAY,QAWMxB,KAR/B,SAAclxC,GACZ,OAAOA,EAAGqtC,WAO+BsE,MAJ3C,SAAe3xC,EAAI0d,GACjB1d,EAAGqtC,UAAY3vB,SAKX43B,IAAI,SAASj3C,EAAQU,EAAOJ,GAClC,aAkBA,SAAS42C,EAAYv1C,EAAI0d,GACvB,IAAI83B,EAAiC,SAAvBx1C,EAAG6zC,QAAQ4B,QAAqBl0C,WAAWmc,EAAK,IAAMtK,SAASsK,EAAK,IAClF,OAAO7S,OAAOxH,MAAMmyC,GAAW,EAAIA,EAlBrC,IACIX,EADWx2C,EAAQ,UACCw2C,SAoBxB91C,EAAOJ,SAAY2E,KAlBnB,SAActD,GACZA,EAAG6zC,QAAQ4B,QAAUz1C,EAAGoxC,UAAUnoC,SAAS,SAAW,OAAS,QAC/D4rC,EAAS70C,EAAI,WAgBgBkxC,KAb/B,SAAclxC,GACZ,OAAOu1C,EAAYv1C,EAAIA,EAAGN,QAYeiyC,MAT3C,SAAe3xC,EAAI0d,GACjB1d,EAAGN,MAAQ61C,EAAYv1C,EAAI0d,OAU1BozB,SAAS,KAAK4E,IAAI,SAASr3C,EAAQU,EAAOJ,GAC7C,aAEA,IACIk2C,EADWx2C,EAAQ,UACCw2C,SAcxB91C,EAAOJ,SAAY2E,KAZnB,SAActD,GACZ60C,EAAS70C,EAAI,SAWgBkxC,KAR/B,SAAclxC,GACZ,OAAOA,EAAGN,OAO+BiyC,MAJ3C,SAAe3xC,EAAI0d,GACjB1d,EAAGN,MAAQge,MAKVozB,SAAS,KAAK6E,IAAI,SAASt3C,EAAQU,EAAOJ,GAC7C,aAEA,IAMI20C,GACFsC,KAPSv3C,EAAQ,WAQjBgnB,KAPShnB,EAAQ,WAQjBw3C,KAPSx3C,EAAQ,WAQjBqgB,OAPWrgB,EAAQ,aAQnBy3C,KAPSz3C,EAAQ,YAkBnBU,EAAOJ,SAAYuyC,KARnB,SAAc6E,GACZ,OAAOzC,EAAIyC,EAAYlC,QAAQnB,WAAWxB,KAAK6E,IAOlBpE,MAJ/B,SAAeoE,EAAar4B,GAC1B41B,EAAIyC,EAAYlC,QAAQnB,WAAWf,MAAMoE,EAAar4B,IAGX41B,IAAKA,KAE/C0C,UAAU,GAAGC,UAAU,GAAGC,UAAU,GAAG/B,YAAY,GAAGgC,UAAU,KAAKC,IAAI,SAAS/3C,EAAQU,EAAOJ,GACpG,aAkCA,SAAS03C,EAAItyC,EAAMuyC,EAAYnN,GAC7B,IAAInpC,EAAKY,SAASyqC,cAActnC,GAGhC,OAFIuyC,GAAYt2C,EAAGmrC,aAAa,QAASmL,EAAW1xC,KAAK,MACrDukC,IAAMnpC,EAAGqtC,UAAYlE,GAClBnpC,EAGT,SAASu2C,EAAUv2C,EAAI+D,GACrB/D,EAAGmrC,aAAa,OAAQpnC,GAG1B,SAASyyC,EAAcx2C,EAAIy2C,GACzBz2C,EAAG6zC,QAAQ4C,QAAUA,EAGvB13C,EAAOJ,SAAYk2C,SA/CnB,SAAkB70C,EAAI0yC,GACpB,IAAID,EAAU4D,EAAI,OAAQ,cAAe,gBAGzC,GAAIr2C,EAAGoxC,UAAUnoC,SAAS,QAAS,CACjC,IAAIytC,EAAQL,EAAI,QAAS,qBAAsB,gDAC/C5D,EAAQnH,YAAYoL,GACpB,IAAI3yC,EAAOsyC,EAAI,SAAU,cAAe,sBACxCtyC,EAAKhB,iBAAiB,QAAS,WAC7B,OAAOwzC,EAAUv2C,EAAI+D,EAAKrE,SAE5BqE,EAAKonC,aAAa,cAAe,SACjCsH,EAAQnH,YAAYvnC,GAKtB,GAHI/D,EAAGoxC,UAAUnoC,SAAS,QACxBjJ,EAAGmrC,aAAa,WAAY,YAE1BnrC,EAAGoxC,UAAUnoC,SAAS,WAAY,CACpC,IAAI0tC,EAASN,EAAI,QAAS,qBAAsB,UAChD5D,EAAQnH,YAAYqL,GACpB,IAAIF,EAAUJ,EAAI,SAAU,iBAAkB,sBAC9CI,EAAQ1zC,iBAAiB,QAAS,WAChC,OAAOyzC,EAAcx2C,EAAIy2C,EAAQ/2C,SAEnC+2C,EAAQtL,aAAa,cAAe,UACpCsH,EAAQnH,YAAYmL,GACpBz2C,EAAGmrC,aAAa,WAAY,YAE9BnrC,EAAG6zC,QAAQnB,UAAYA,EACvB1yC,EAAG20C,sBAAsB,WAAYlC,UAoBjCmE,IAAI,SAASv4C,EAAQU,EAAOJ,GAClC,aAQA,SAASk4C,IACPC,EAAGxzC,OAPL,IAAIwzC,EAAKz4C,EAAQ,QAEjBuC,SAASmC,iBAAiB,mBAAoB,WAC5C8zC,QAOCE,OAAO,KAAKC,IAAI,SAAS34C,EAAQU,EAAOJ,GAC3C,aAIA,SAASs4C,EAAWC,EAAO/sB,GAGzB,MAAO,8FAAwG+sB,EAAQ,kEAA4EA,EAAQ,sLAFhMnuC,KAAKC,UAAUmhB,GAEuW,mCAGnY,SAASgtB,EAAahO,GACpB,IAAI5W,EAAU,2BAA2B5sB,KAAKwjC,GAC9C,QAAI5W,GAAgBxpB,KAAK6H,MAAM2hB,EAAQ,IAVzC,IAAI6kB,EAAY/4C,EAAQ,cAwCxBU,EAAOJ,SAAY04C,mBAnBnB,SAA4B5/B,EAAMwK,GAChC,IAAIlJ,EAAS,IAAID,WACjBC,EAAOu+B,WAAW7/B,GAClBsB,EAAOw+B,OAAS,SAAU15C,GACxB,OAAOokB,EAASk1B,EAAat5C,EAAEslC,OAAOv9B,WAeiB4xC,kBAX3D,SAA2Bv+B,EAAKgJ,GAC9B,IAAIw1B,EAAU,IAAIC,eAClBD,EAAQv+B,KAAK,MAAOD,GAAK,GACzBw+B,EAAQE,OACRF,EAAQG,mBAAqB,WACA,IAAvBH,EAAQj/B,YAAuC,MAAnBi/B,EAAQI,QACtC51B,EAASk1B,EAAaM,EAAQK,iBAK6DC,WA1BjG,SAAoBb,EAAO/sB,GACzB,IAAI6tB,EAAWf,EAAWC,EAAO/sB,GAC7BlS,EAAO,IAAIC,MAAM8/B,IAAa3xC,KAAM,6BACpC4xC,GAAQ,IAAIr9B,MAAOwjB,cAAc15B,MAAM,KAAK,GAChD0yC,EAAUjhC,OAAO8B,EAAMi/B,EAAQ,IAAMe,EAAQ,aAwB5CC,aAAa,IAAIC,IAAI,SAAS95C,EAAQU,EAAOJ,GAChD,aAcA,SAASy5C,IACPx3C,SAASy3C,eAAe,QAAQhL,UAAY,GAC5CiL,IAGF,SAASA,IACPC,EAAW,OAAQ,QACnBA,EAAW,UAAW,QACtBA,EAAW,YAAa,QAG1B,SAASC,IACPD,EAAW,OAAQ,SACnBA,EAAW,UAAW,QACtBA,EAAW,YAAa,QAG1B,SAASA,EAAWE,EAAI/6B,GACtB9c,SAASy3C,eAAeI,GAAI74C,MAAMmyC,QAAUr0B,EAI9C,SAASg7B,IACPC,EAAW,QACX/3C,SAASuwC,cAAc,gBAAgBpuC,iBAAiB,QAAS41C,GAqBnE,SAASA,EAAWC,GAClB,IAAIC,EAA+B,iBAATD,EAAoBA,EAAOh4C,SAAS2qC,KAAK6F,UAAUnoC,SAAS,aAAe,OAAS,OAE9G6vC,EAAoBD,KAkCtB,SAASE,IACP,IAAIC,EAAep4C,SAASyqC,cAAc,OAW1C,OAVA2N,EAAa5H,UAAUzmC,IAAI,kBAC3BquC,EAAa3L,UAAY,0DACzB5qC,OAAOC,KAAKu2C,EAAO3F,KAAKpyC,QAAQ,SAAUyB,GACxC,IAAIu2C,EAAYt4C,SAASyqC,cAAc,KACvC6N,EAAU9H,UAAUzmC,IAAI,QACxBuuC,EAAU9H,UAAUzmC,IAAI,gBACxBuuC,EAAUrF,QAAQxtC,KAAO1D,EACzBu2C,EAAU7L,UAAY1qC,EACtBq2C,EAAa7H,cAAc,YAAY7F,YAAY4N,KAE9CF,EAGT,SAASG,IACPv4C,SAASy3C,eAAe,QAAQt1C,iBAAiB,QAAS,SAAUlF,GAClE,IAAIu7C,EAASv7C,EAAEslC,OAAOiO,UAAUnoC,SAAS,QAAUpL,EAAEslC,OAAStlC,EAAEslC,OAAOjjC,WAAWkxC,UAAUnoC,SAAS,QAAUpL,EAAEslC,OAAOjjC,WAAa,KACjIk5C,GACF32C,OAAOC,KAAK22C,GAAcn4C,QAAQ,SAAUyB,GACtCy2C,EAAOhI,UAAUnoC,SAAStG,IAAM02C,EAAa12C,GAAKy2C,OAiB9D,SAASE,IACP14C,SAASy3C,eAAe,QAAQt1C,iBAAiB,QAAS,SAAUlF,GAClE,IAAI07C,EAAS34C,SAASuwC,cAAc,2BAChCptC,EAAOw1C,GAAUA,EAAO75C,MAAQ65C,EAAO75C,MAAQ,QACnD85C,EAAMzB,WAAWh0C,EAAM01C,KACvB57C,EAAEksC,mBAEJnpC,SAASy3C,eAAe,aAAat1C,iBAAiB,QAAS,SAAUlF,GACvE,IAAI07C,EAAS34C,SAASuwC,cAAc,cAChCptC,EAAOw1C,GAAUA,EAAOlM,UAAYkM,EAAOlM,UAAY,UAC3DmM,EAAMzB,WAAWh0C,EAAM01C,GAAS,IAChC57C,EAAEksC,mBAIN,SAAS0P,EAASj+B,GAChB,IAAIk+B,KAMJ,OALA/G,EAAS/xC,SAASy3C,eAAe,QAAS,UAAUn3C,QAAQ,SAAU2vC,GACpE,IAAI8I,EAAOV,EAAOrF,KAAK/C,GACnBr1B,IAAOm+B,EAAKxvB,KAAK8oB,WACrByG,EAAWr5C,KAAKs5C,KAEXD,EAGT,SAASE,IACPh5C,SAASy3C,eAAe,gBAAgBt1C,iBAAiB,SAAU,SAAUlF,GAC3E27C,EAAMnC,mBAAmBx5C,EAAEslC,OAAO0W,MAAM,GAAIC,GAC5Cj8C,EAAEksC,mBAEJ,IAAIgQ,EAAQC,EAAYppC,MAAMnP,OAAO0X,SAAS8gC,QAC1CF,EAAMG,SAASV,EAAMhC,kBAAkBuC,EAAMG,QAASJ,GAG5D,SAASA,EAAS3vB,GAChB,IAAIgwB,EAAWv5C,SAASw5C,yBACxBjwB,EAAKjpB,QAAQ,SAAU2vC,GACrBsJ,EAAS7O,YAAY2N,EAAOjJ,OAAOa,EAAMxqC,KAAMwqC,EAAM1mB,SAEvDvpB,SAASy3C,eAAe,QAAQ/M,YAAY6O,GAC5C3B,IACA6B,IAGF,SAASC,IACP15C,SAASy3C,eAAe,SAASt1C,iBAAiB,QAAS,SAAUlF,GACnEu6C,IACAv6C,EAAEksC,mBAIN,SAASwQ,IACP35C,SAASy3C,eAAe,QAAQt1C,iBAAiB,SAAU,SAAUlF,GACnEA,EAAEksC,mBAxLN,IAAIiQ,EAAc37C,EAAQ,gBACtB46C,EAAS56C,EAAQ,mBACjBm7C,EAAQn7C,EAAQ,WAEhBqyC,EAAWryC,EAAQ,UACnBs0C,EAAWjC,EAASiC,SACpB6H,EAAe9J,EAAS8J,aACxBH,EAAa3J,EAAS2J,WAgCtBvB,GACF2B,KAAM,WACJ75C,SAAS2qC,KAAK6F,UAAUz5B,OAAO,aAC/B/W,SAAS2qC,KAAK6F,UAAUzmC,IAAI,aAC5BgoC,EAAS/xC,SAAS2qC,KAAM,SAASrqC,QAAQ,SAAUlB,GACjDA,EAAGmrC,aAAa,kBAAmB,WAGvC4H,KAAM,WACJnyC,SAAS2qC,KAAK6F,UAAUz5B,OAAO,aAC/B/W,SAAS2qC,KAAK6F,UAAUzmC,IAAI,aAC5BgoC,EAAS/xC,SAAS2qC,KAAM,SAASrqC,QAAQ,SAAUlB,GACjDA,EAAG06C,gBAAgB,qBAErBL,MAWAhB,GACFsB,WAAY,SAAoBvB,GAC9B,IAAIvI,EAAQ2J,EAAapB,EAAQ,SAC7BwB,EAAW/J,EAAMgK,gBACjBD,GAAU/J,EAAM3wC,WAAWsrC,aAAaqF,EAAO+J,IAErDE,YAAa,SAAqB1B,GACpBoB,EAAapB,EAAQ,SAC3BzhC,UAERojC,SAAU,SAAkB3B,GACtBA,EAAOhI,UAAUnoC,SAAS,WAC5BuxC,EAAapB,EAAQ,eAAejI,cAAc,mBAAmBx5B,SACrEyhC,EAAOhI,UAAUz5B,OAAO,YAEZ6iC,EAAapB,EAAQ,eAC3BzE,sBAAsB,YAAaoE,KACzCK,EAAOhI,UAAUzmC,IAAI,YAGzBqwC,aAAc,SAAsB5B,GAClC,IAAIvI,EAAQ2J,EAAapB,EAAQ,SAC7B6B,EAAWhC,EAAOjJ,OAAOoJ,EAAOvF,QAAQxtC,MAC5CwqC,EAAM8D,sBAAsB,cAAesG,GAC3CtC,EAAW,QACX6B,EAAapB,EAAQ,eAAejI,cAAc,aAAaC,UAAUz5B,OAAO,UAChF6iC,EAAapB,EAAQ,kBAAkBzhC,WAkG3C5Y,EAAOJ,SAAY2E,KAnEnB,WACEo1C,IACAkB,IACAN,IACAH,IACAmB,IACAC,IACAjC,QA8DC4C,kBAAkB,GAAGC,UAAU,GAAGrK,SAAS,GAAGsK,eAAe,IAAIC,IAAI,SAASh9C,EAAQU,EAAOJ,GAChG,aAQA,SAAS28C,EAAUC,GACjB,SAAUz2C,MAAMlG,KAAK28C,GAGvB,SAAS5I,EAAS3yC,EAAI+5C,GACpB,OAAOuB,EAAUt7C,EAAGwxC,iBAAiBuI,IAGvC,SAASS,EAAax6C,EAAImkC,GACxB,IAAIqX,EAASx7C,EAAGy7C,cAEhB,OAAID,EAAOpK,UAAUnoC,SAASk7B,GAAmBqX,EAC1ChB,EAAagB,EAAQrX,GAY9B,SAASkW,IACP,IAAIqB,EAAO96C,SAASy3C,eAAe,QAEnCsD,EAAqBD,EADLj5C,OAAOlD,UAAWq8C,EAAiBF,GAAOG,IAE1Dx8C,EAAS8B,OAAOP,SAASuwC,cAAc,aAQzC,SAASwK,EAAqBD,EAAM5qC,GAClC6hC,EAAS+I,EAAM,YAAYx6C,QAAQ,SAAUlB,GACvCA,EAAG6zC,QAAQ4C,UACb7D,EAAOjB,MAAM3xC,EAAIyJ,EAAOrB,SAASpI,EAAG6zC,QAAQ4C,QAAS3lC,IACzC0pC,EAAax6C,EAAI,SACvBiC,cAAc,IAAI+B,MAAM,sBAKpC,SAAS43C,EAAiBF,GACxB,OAAO/I,EAAS+I,EAAM,UAAUzL,OAAO,SAAUwB,EAAKzxC,GAEpD,OADAyxC,EAAIzxC,EAAG2pC,aAAa,SAAWiJ,EAAO1B,KAAKlxC,GACpCyxC,OAvDX,IAAImB,EAASv0C,EAAQ,mBACjBoL,EAASpL,EAAQ,aAAaoQ,OAC9BpP,EAAWhB,EAAQ,YAEnBy9C,OAAQ,EAiBRD,GACFE,UAAW,SAAmB12B,EAAMkM,GAClC,OAAOlM,EAAKwN,QAAQloB,IAAI4mB,EAAM,SAEhCyqB,WAAY,SAAoB32B,EAAMkM,GACpC,OAAOlM,EAAKwN,QAAQ6I,SAASnK,EAAM,UAiCvCxyB,EAAOJ,SACLg0C,SAAUA,EAAU6H,aAAcA,EAAcH,WAAYA,EAAY5F,iBAvB1E,WACEwH,aAAaH,GACbA,EAAQvkC,WAAW8iC,EAAY,SAwB9B6B,kBAAkB,GAAG78C,SAAW,EAAE88C,YAAY,SAAS","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*!\n\tAutosize 4.0.0\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(['exports', 'module'], factory);\n\t} else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n\t\tfactory(exports, module);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports, mod);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (exports, module) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : (function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'delete': function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t})();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function (name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = ta.clientWidth;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tvar originalHeight = ta.style.height;\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\n\t\t\tvar endHeight = ta.scrollHeight + heightOffset;\n\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\tta.style.height = originalHeight;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tta.style.height = endHeight + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that\n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight !== styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = (function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap['delete'](ta);\n\t\t}).bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function (el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\tmodule.exports = autosize;\n});\n},{}],2:[function(require,module,exports){\n'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n\n},{}],3:[function(require,module,exports){\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.exprEval = factory());\n}(this, (function () { 'use strict';\n\nvar INUMBER = 'INUMBER';\nvar IOP1 = 'IOP1';\nvar IOP2 = 'IOP2';\nvar IOP3 = 'IOP3';\nvar IVAR = 'IVAR';\nvar IFUNCALL = 'IFUNCALL';\nvar IEXPR = 'IEXPR';\nvar IMEMBER = 'IMEMBER';\n\nfunction Instruction(type, value) {\n  this.type = type;\n  this.value = (value !== undefined && value !== null) ? value : 0;\n}\n\nInstruction.prototype.toString = function () {\n  switch (this.type) {\n    case INUMBER:\n    case IOP1:\n    case IOP2:\n    case IOP3:\n    case IVAR:\n      return this.value;\n    case IFUNCALL:\n      return 'CALL ' + this.value;\n    case IMEMBER:\n      return '.' + this.value;\n    default:\n      return 'Invalid Instruction';\n  }\n};\n\nfunction unaryInstruction(value) {\n  return new Instruction(IOP1, value);\n}\n\nfunction binaryInstruction(value) {\n  return new Instruction(IOP2, value);\n}\n\nfunction ternaryInstruction(value) {\n  return new Instruction(IOP3, value);\n}\n\nfunction simplify(tokens, unaryOps, binaryOps, ternaryOps, values) {\n  var nstack = [];\n  var newexpression = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item);\n    } else if (type === IVAR && values.hasOwnProperty(item.value)) {\n      item = new Instruction(INUMBER, values[item.value]);\n      nstack.push(item);\n    } else if (type === IOP2 && nstack.length > 1) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = binaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value, n2.value));\n      nstack.push(item);\n    } else if (type === IOP3 && nstack.length > 2) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(n1.value ? n2.value : n3.value);\n      } else {\n        f = ternaryOps[item.value];\n        item = new Instruction(INUMBER, f(n1.value, n2.value, n3.value));\n        nstack.push(item);\n      }\n    } else if (type === IOP1 && nstack.length > 0) {\n      n1 = nstack.pop();\n      f = unaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value));\n      nstack.push(item);\n    } else if (type === IEXPR) {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(new Instruction(IEXPR, simplify(item.value, unaryOps, binaryOps, ternaryOps, values)));\n    } else if (type === IMEMBER && nstack.length > 0) {\n      n1 = nstack.pop();\n      nstack.push(new Instruction(INUMBER, n1.value[item.value]));\n    } else {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(item);\n    }\n  }\n  while (nstack.length > 0) {\n    newexpression.push(nstack.shift());\n  }\n  return newexpression;\n}\n\nfunction substitute(tokens, variable, expr) {\n  var newexpression = [];\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === IVAR && item.value === variable) {\n      for (var j = 0; j < expr.tokens.length; j++) {\n        var expritem = expr.tokens[j];\n        var replitem;\n        if (expritem.type === IOP1) {\n          replitem = unaryInstruction(expritem.value);\n        } else if (expritem.type === IOP2) {\n          replitem = binaryInstruction(expritem.value);\n        } else if (expritem.type === IOP3) {\n          replitem = ternaryInstruction(expritem.value);\n        } else {\n          replitem = new Instruction(expritem.type, expritem.value);\n        }\n        newexpression.push(replitem);\n      }\n    } else if (type === IEXPR) {\n      newexpression.push(new Instruction(IEXPR, substitute(item.value, variable, expr)));\n    } else {\n      newexpression.push(item);\n    }\n  }\n  return newexpression;\n}\n\nfunction evaluate(tokens, expr, values) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item.value);\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = expr.binaryOps[item.value];\n      nstack.push(f(n1, n2));\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(evaluate(n1 ? n2 : n3, expr, values));\n      } else {\n        f = expr.ternaryOps[item.value];\n        nstack.push(f(n1, n2, n3));\n      }\n    } else if (type === IVAR) {\n      if (item.value in expr.functions) {\n        nstack.push(expr.functions[item.value]);\n      } else {\n        var v = values[item.value];\n        if (v !== undefined) {\n          nstack.push(v);\n        } else {\n          throw new Error('undefined variable: ' + item.value);\n        }\n      }\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = expr.unaryOps[item.value];\n      nstack.push(f(n1));\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      if (f.apply && f.call) {\n        nstack.push(f.apply(undefined, args));\n      } else {\n        throw new Error(f + ' is not a function');\n      }\n    } else if (type === IEXPR) {\n      nstack.push(item.value);\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1[item.value]);\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nfunction expressionToString(tokens, toJS) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      if (typeof item.value === 'number' && item.value < 0) {\n        nstack.push('(' + item.value + ')');\n      } else {\n        nstack.push(escapeValue(item.value));\n      }\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (toJS) {\n        if (f === '^') {\n          nstack.push('Math.pow(' + n1 + ', ' + n2 + ')');\n        } else if (f === 'and') {\n          nstack.push('(!!' + n1 + ' && !!' + n2 + ')');\n        } else if (f === 'or') {\n          nstack.push('(!!' + n1 + ' || !!' + n2 + ')');\n        } else if (f === '||') {\n          nstack.push('(String(' + n1 + ') + String(' + n2 + '))');\n        } else if (f === '==') {\n          nstack.push('(' + n1 + ' === ' + n2 + ')');\n        } else if (f === '!=') {\n          nstack.push('(' + n1 + ' !== ' + n2 + ')');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      } else {\n        nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '?') {\n        nstack.push('(' + n1 + ' ? ' + n2 + ' : ' + n3 + ')');\n      } else {\n        throw new Error('invalid Expression');\n      }\n    } else if (type === IVAR) {\n      nstack.push(item.value);\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '-' || f === '+') {\n        nstack.push('(' + f + n1 + ')');\n      } else if (toJS) {\n        if (f === 'not') {\n          nstack.push('(' + '!' + n1 + ')');\n        } else if (f === '!') {\n          nstack.push('fac(' + n1 + ')');\n        } else {\n          nstack.push(f + '(' + n1 + ')');\n        }\n      } else if (f === '!') {\n        nstack.push('(' + n1 + '!)');\n      } else {\n        nstack.push('(' + f + ' ' + n1 + ')');\n      }\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      nstack.push(f + '(' + args.join(', ') + ')');\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1 + '.' + item.value);\n    } else if (type === IEXPR) {\n      nstack.push('(' + expressionToString(item.value, toJS) + ')');\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nfunction escapeValue(v) {\n  if (typeof v === 'string') {\n    return JSON.stringify(v).replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n  }\n  return v;\n}\n\nfunction contains(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getSymbols(tokens, symbols, options) {\n  options = options || {};\n  var withMembers = !!options.withMembers;\n  var prevVar = null;\n\n  for (var i = 0; i < tokens.length; i++) {\n    var item = tokens[i];\n    if (item.type === IVAR && !contains(symbols, item.value)) {\n      if (prevVar !== null || !withMembers) {\n        symbols.push(item.value);\n      } else {\n        prevVar = item.value;\n      }\n    } else if (item.type === IMEMBER && withMembers && prevVar !== null) {\n      prevVar += '.' + item.value;\n    } else if (item.type === IEXPR) {\n      getSymbols(item.value, symbols, options);\n    } else if (prevVar !== null) {\n      if (!contains(symbols, prevVar)) {\n        symbols.push(prevVar);\n      }\n      prevVar = null;\n    }\n  }\n\n  if (prevVar !== null && !contains(symbols, prevVar)) {\n    symbols.push(prevVar);\n  }\n}\n\nfunction Expression(tokens, parser) {\n  this.tokens = tokens;\n  this.parser = parser;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.functions = parser.functions;\n}\n\nExpression.prototype.simplify = function (values) {\n  values = values || {};\n  return new Expression(simplify(this.tokens, this.unaryOps, this.binaryOps, this.ternaryOps, values), this.parser);\n};\n\nExpression.prototype.substitute = function (variable, expr) {\n  if (!(expr instanceof Expression)) {\n    expr = this.parser.parse(String(expr));\n  }\n\n  return new Expression(substitute(this.tokens, variable, expr), this.parser);\n};\n\nExpression.prototype.evaluate = function (values) {\n  values = values || {};\n  return evaluate(this.tokens, this, values);\n};\n\nExpression.prototype.toString = function () {\n  return expressionToString(this.tokens, false);\n};\n\nExpression.prototype.symbols = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  return vars;\n};\n\nExpression.prototype.variables = function (options) {\n  options = options || {};\n  var vars = [];\n  getSymbols(this.tokens, vars, options);\n  var functions = this.functions;\n  return vars.filter(function (name) {\n    return !(name in functions);\n  });\n};\n\nExpression.prototype.toJSFunction = function (param, variables) {\n  var expr = this;\n  var f = new Function(param, 'with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return ' + expressionToString(this.simplify(variables).tokens, true) + '; }'); // eslint-disable-line no-new-func\n  return function () {\n    return f.apply(expr, arguments);\n  };\n};\n\nvar TEOF = 'TEOF';\nvar TOP = 'TOP';\nvar TNUMBER = 'TNUMBER';\nvar TSTRING = 'TSTRING';\nvar TPAREN = 'TPAREN';\nvar TCOMMA = 'TCOMMA';\nvar TNAME = 'TNAME';\n\nfunction Token(type, value, index) {\n  this.type = type;\n  this.value = value;\n  this.index = index;\n}\n\nToken.prototype.toString = function () {\n  return this.type + ': ' + this.value;\n};\n\nfunction TokenStream(parser, expression) {\n  this.pos = 0;\n  this.current = null;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.consts = parser.consts;\n  this.expression = expression;\n  this.savedPosition = 0;\n  this.savedCurrent = null;\n  this.options = parser.options;\n}\n\nTokenStream.prototype.newToken = function (type, value, pos) {\n  return new Token(type, value, pos != null ? pos : this.pos);\n};\n\nTokenStream.prototype.save = function () {\n  this.savedPosition = this.pos;\n  this.savedCurrent = this.current;\n};\n\nTokenStream.prototype.restore = function () {\n  this.pos = this.savedPosition;\n  this.current = this.savedCurrent;\n};\n\nTokenStream.prototype.next = function () {\n  if (this.pos >= this.expression.length) {\n    return this.newToken(TEOF, 'EOF');\n  }\n\n  if (this.isWhitespace() || this.isComment()) {\n    return this.next();\n  } else if (this.isRadixInteger() ||\n      this.isNumber() ||\n      this.isOperator() ||\n      this.isString() ||\n      this.isParen() ||\n      this.isComma() ||\n      this.isNamedOp() ||\n      this.isConst() ||\n      this.isName()) {\n    return this.current;\n  } else {\n    this.parseError('Unknown character \"' + this.expression.charAt(this.pos) + '\"');\n  }\n};\n\nTokenStream.prototype.isString = function () {\n  var r = false;\n  var startPos = this.pos;\n  var quote = this.expression.charAt(startPos);\n\n  if (quote === '\\'' || quote === '\"') {\n    var index = this.expression.indexOf(quote, startPos + 1);\n    while (index >= 0 && this.pos < this.expression.length) {\n      this.pos = index + 1;\n      if (this.expression.charAt(index - 1) !== '\\\\') {\n        var rawString = this.expression.substring(startPos + 1, index);\n        this.current = this.newToken(TSTRING, this.unescape(rawString), startPos);\n        r = true;\n        break;\n      }\n      index = this.expression.indexOf(quote, index + 1);\n    }\n  }\n  return r;\n};\n\nTokenStream.prototype.isParen = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '(' || c === ')') {\n    this.current = this.newToken(TPAREN, c);\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isComma = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === ',') {\n    this.current = this.newToken(TCOMMA, ',');\n    this.pos++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isConst = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && c !== '.' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.consts) {\n      this.current = this.newToken(TNUMBER, this.consts[str]);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isNamedOp = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (this.isOperatorEnabled(str) && (str in this.binaryOps || str in this.unaryOps || str in this.ternaryOps)) {\n      this.current = this.newToken(TOP, str);\n      this.pos += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isName = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  var hasLetter = false;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos && c === '$') {\n        continue;\n      } else if (i === this.pos || !hasLetter || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    } else {\n      hasLetter = true;\n    }\n  }\n  if (hasLetter) {\n    var str = this.expression.substring(startPos, i);\n    this.current = this.newToken(TNAME, str);\n    this.pos += str.length;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isWhitespace = function () {\n  var r = false;\n  var c = this.expression.charAt(this.pos);\n  while (c === ' ' || c === '\\t' || c === '\\n' || c === '\\r') {\n    r = true;\n    this.pos++;\n    if (this.pos >= this.expression.length) {\n      break;\n    }\n    c = this.expression.charAt(this.pos);\n  }\n  return r;\n};\n\nvar codePointPattern = /^[0-9a-f]{4}$/i;\n\nTokenStream.prototype.unescape = function (v) {\n  var index = v.indexOf('\\\\');\n  if (index < 0) {\n    return v;\n  }\n\n  var buffer = v.substring(0, index);\n  while (index >= 0) {\n    var c = v.charAt(++index);\n    switch (c) {\n      case '\\'':\n        buffer += '\\'';\n        break;\n      case '\"':\n        buffer += '\"';\n        break;\n      case '\\\\':\n        buffer += '\\\\';\n        break;\n      case '/':\n        buffer += '/';\n        break;\n      case 'b':\n        buffer += '\\b';\n        break;\n      case 'f':\n        buffer += '\\f';\n        break;\n      case 'n':\n        buffer += '\\n';\n        break;\n      case 'r':\n        buffer += '\\r';\n        break;\n      case 't':\n        buffer += '\\t';\n        break;\n      case 'u':\n        // interpret the following 4 characters as the hex of the unicode code point\n        var codePoint = v.substring(index + 1, index + 5);\n        if (!codePointPattern.test(codePoint)) {\n          this.parseError('Illegal escape sequence: \\\\u' + codePoint);\n        }\n        buffer += String.fromCharCode(parseInt(codePoint, 16));\n        index += 4;\n        break;\n      default:\n        throw this.parseError('Illegal escape sequence: \"\\\\' + c + '\"');\n    }\n    ++index;\n    var backslash = v.indexOf('\\\\', index);\n    buffer += v.substring(index, backslash < 0 ? v.length : backslash);\n    index = backslash;\n  }\n\n  return buffer;\n};\n\nTokenStream.prototype.isComment = function () {\n  var c = this.expression.charAt(this.pos);\n  if (c === '/' && this.expression.charAt(this.pos + 1) === '*') {\n    this.pos = this.expression.indexOf('*/', this.pos) + 2;\n    if (this.pos === 1) {\n      this.pos = this.expression.length;\n    }\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isRadixInteger = function () {\n  var pos = this.pos;\n\n  if (pos >= this.expression.length - 2 || this.expression.charAt(pos) !== '0') {\n    return false;\n  }\n  ++pos;\n\n  var radix;\n  var validDigit;\n  if (this.expression.charAt(pos) === 'x') {\n    radix = 16;\n    validDigit = /^[0-9a-f]$/i;\n    ++pos;\n  } else if (this.expression.charAt(pos) === 'b') {\n    radix = 2;\n    validDigit = /^[01]$/i;\n    ++pos;\n  } else {\n    return false;\n  }\n\n  var valid = false;\n  var startPos = pos;\n\n  while (pos < this.expression.length) {\n    var c = this.expression.charAt(pos);\n    if (validDigit.test(c)) {\n      pos++;\n      valid = true;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseInt(this.expression.substring(startPos, pos), radix));\n    this.pos = pos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isNumber = function () {\n  var valid = false;\n  var pos = this.pos;\n  var startPos = pos;\n  var resetPos = pos;\n  var foundDot = false;\n  var foundDigits = false;\n  var c;\n\n  while (pos < this.expression.length) {\n    c = this.expression.charAt(pos);\n    if ((c >= '0' && c <= '9') || (!foundDot && c === '.')) {\n      if (c === '.') {\n        foundDot = true;\n      } else {\n        foundDigits = true;\n      }\n      pos++;\n      valid = foundDigits;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    resetPos = pos;\n  }\n\n  if (c === 'e' || c === 'E') {\n    pos++;\n    var acceptSign = true;\n    var validExponent = false;\n    while (pos < this.expression.length) {\n      c = this.expression.charAt(pos);\n      if (acceptSign && (c === '+' || c === '-')) {\n        acceptSign = false;\n      } else if (c >= '0' && c <= '9') {\n        validExponent = true;\n        acceptSign = false;\n      } else {\n        break;\n      }\n      pos++;\n    }\n\n    if (!validExponent) {\n      pos = resetPos;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseFloat(this.expression.substring(startPos, pos)));\n    this.pos = pos;\n  } else {\n    this.pos = resetPos;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isOperator = function () {\n  var startPos = this.pos;\n  var c = this.expression.charAt(this.pos);\n\n  if (c === '+' || c === '-' || c === '*' || c === '/' || c === '%' || c === '^' || c === '?' || c === ':' || c === '.') {\n    this.current = this.newToken(TOP, c);\n  } else if (c === '' || c === '') {\n    this.current = this.newToken(TOP, '*');\n  } else if (c === '>') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '>=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '>');\n    }\n  } else if (c === '<') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '<=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, '<');\n    }\n  } else if (c === '|') {\n    if (this.expression.charAt(this.pos + 1) === '|') {\n      this.current = this.newToken(TOP, '||');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '=') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '==');\n      this.pos++;\n    } else {\n      return false;\n    }\n  } else if (c === '!') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '!=');\n      this.pos++;\n    } else {\n      this.current = this.newToken(TOP, c);\n    }\n  } else {\n    return false;\n  }\n  this.pos++;\n\n  if (this.isOperatorEnabled(this.current.value)) {\n    return true;\n  } else {\n    this.pos = startPos;\n    return false;\n  }\n};\n\nvar optionNameMap = {\n  '+': 'add',\n  '-': 'subtract',\n  '*': 'multiply',\n  '/': 'divide',\n  '%': 'remainder',\n  '^': 'power',\n  '!': 'factorial',\n  '<': 'comparison',\n  '>': 'comparison',\n  '<=': 'comparison',\n  '>=': 'comparison',\n  '==': 'comparison',\n  '!=': 'comparison',\n  '||': 'concatenate',\n  'and': 'logical',\n  'or': 'logical',\n  'not': 'logical',\n  '?': 'conditional',\n  ':': 'conditional'\n};\n\nfunction getOptionName(op) {\n  return optionNameMap.hasOwnProperty(op) ? optionNameMap[op] : op;\n}\n\nTokenStream.prototype.isOperatorEnabled = function (op) {\n  var optionName = getOptionName(op);\n  var operators = this.options.operators || {};\n\n  // in is a special case for now because it's disabled by default\n  if (optionName === 'in') {\n    return !!operators['in'];\n  }\n\n  return !(optionName in operators) || !!operators[optionName];\n};\n\nTokenStream.prototype.getCoordinates = function () {\n  var line = 0;\n  var column;\n  var newline = -1;\n  do {\n    line++;\n    column = this.pos - newline;\n    newline = this.expression.indexOf('\\n', newline + 1);\n  } while (newline >= 0 && newline < this.pos);\n\n  return {\n    line: line,\n    column: column\n  };\n};\n\nTokenStream.prototype.parseError = function (msg) {\n  var coords = this.getCoordinates();\n  throw new Error('parse error [' + coords.line + ':' + coords.column + ']: ' + msg);\n};\n\nfunction ParserState(parser, tokenStream, options) {\n  this.parser = parser;\n  this.tokens = tokenStream;\n  this.current = null;\n  this.nextToken = null;\n  this.next();\n  this.savedCurrent = null;\n  this.savedNextToken = null;\n  this.allowMemberAccess = options.allowMemberAccess !== false;\n}\n\nParserState.prototype.next = function () {\n  this.current = this.nextToken;\n  return (this.nextToken = this.tokens.next());\n};\n\nParserState.prototype.tokenMatches = function (token, value) {\n  if (typeof value === 'undefined') {\n    return true;\n  } else if (Array.isArray(value)) {\n    return contains(value, token.value);\n  } else if (typeof value === 'function') {\n    return value(token);\n  } else {\n    return token.value === value;\n  }\n};\n\nParserState.prototype.save = function () {\n  this.savedCurrent = this.current;\n  this.savedNextToken = this.nextToken;\n  this.tokens.save();\n};\n\nParserState.prototype.restore = function () {\n  this.tokens.restore();\n  this.current = this.savedCurrent;\n  this.nextToken = this.savedNextToken;\n};\n\nParserState.prototype.accept = function (type, value) {\n  if (this.nextToken.type === type && this.tokenMatches(this.nextToken, value)) {\n    this.next();\n    return true;\n  }\n  return false;\n};\n\nParserState.prototype.expect = function (type, value) {\n  if (!this.accept(type, value)) {\n    var coords = this.tokens.getCoordinates();\n    throw new Error('parse error [' + coords.line + ':' + coords.column + ']: Expected ' + (value || type));\n  }\n};\n\nParserState.prototype.parseAtom = function (instr) {\n  if (this.accept(TNAME)) {\n    instr.push(new Instruction(IVAR, this.current.value));\n  } else if (this.accept(TNUMBER)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TSTRING)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TPAREN, '(')) {\n    this.parseExpression(instr);\n    this.expect(TPAREN, ')');\n  } else {\n    throw new Error('unexpected ' + this.nextToken);\n  }\n};\n\nParserState.prototype.parseExpression = function (instr) {\n  this.parseConditionalExpression(instr);\n};\n\nParserState.prototype.parseConditionalExpression = function (instr) {\n  this.parseOrExpression(instr);\n  while (this.accept(TOP, '?')) {\n    var trueBranch = [];\n    var falseBranch = [];\n    this.parseConditionalExpression(trueBranch);\n    this.expect(TOP, ':');\n    this.parseConditionalExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(ternaryInstruction('?'));\n  }\n};\n\nParserState.prototype.parseOrExpression = function (instr) {\n  this.parseAndExpression(instr);\n  while (this.accept(TOP, 'or')) {\n    this.parseAndExpression(instr);\n    instr.push(binaryInstruction('or'));\n  }\n};\n\nParserState.prototype.parseAndExpression = function (instr) {\n  this.parseComparison(instr);\n  while (this.accept(TOP, 'and')) {\n    this.parseComparison(instr);\n    instr.push(binaryInstruction('and'));\n  }\n};\n\nvar COMPARISON_OPERATORS = ['==', '!=', '<', '<=', '>=', '>', 'in'];\n\nParserState.prototype.parseComparison = function (instr) {\n  this.parseAddSub(instr);\n  while (this.accept(TOP, COMPARISON_OPERATORS)) {\n    var op = this.current;\n    this.parseAddSub(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar ADD_SUB_OPERATORS = ['+', '-', '||'];\n\nParserState.prototype.parseAddSub = function (instr) {\n  this.parseTerm(instr);\n  while (this.accept(TOP, ADD_SUB_OPERATORS)) {\n    var op = this.current;\n    this.parseTerm(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nvar TERM_OPERATORS = ['*', '/', '%'];\n\nParserState.prototype.parseTerm = function (instr) {\n  this.parseFactor(instr);\n  while (this.accept(TOP, TERM_OPERATORS)) {\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseFactor = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  this.save();\n  if (this.accept(TOP, isPrefixOperator)) {\n    if ((this.current.value !== '-' && this.current.value !== '+' && this.nextToken.type === TPAREN && this.nextToken.value === '(')) {\n      this.restore();\n      this.parseExponential(instr);\n    } else {\n      var op = this.current;\n      this.parseFactor(instr);\n      instr.push(unaryInstruction(op.value));\n    }\n  } else {\n    this.parseExponential(instr);\n  }\n};\n\nParserState.prototype.parseExponential = function (instr) {\n  this.parsePostfixExpression(instr);\n  while (this.accept(TOP, '^')) {\n    this.parseFactor(instr);\n    instr.push(binaryInstruction('^'));\n  }\n};\n\nParserState.prototype.parsePostfixExpression = function (instr) {\n  this.parseFunctionCall(instr);\n  while (this.accept(TOP, '!')) {\n    instr.push(unaryInstruction('!'));\n  }\n};\n\nParserState.prototype.parseFunctionCall = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TOP, isPrefixOperator)) {\n    var op = this.current;\n    this.parseAtom(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseMemberExpression(instr);\n    while (this.accept(TPAREN, '(')) {\n      if (this.accept(TPAREN, ')')) {\n        instr.push(new Instruction(IFUNCALL, 0));\n      } else {\n        var argCount = this.parseArgumentList(instr);\n        instr.push(new Instruction(IFUNCALL, argCount));\n      }\n    }\n  }\n};\n\nParserState.prototype.parseArgumentList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TPAREN, ')')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseMemberExpression = function (instr) {\n  this.parseAtom(instr);\n  while (this.accept(TOP, '.')) {\n    if (!this.allowMemberAccess) {\n      throw new Error('unexpected \".\", member access is not permitted');\n    }\n\n    this.expect(TNAME);\n    instr.push(new Instruction(IMEMBER, this.current.value));\n  }\n};\n\nfunction add(a, b) {\n  return Number(a) + Number(b);\n}\n\nfunction sub(a, b) {\n  return a - b;\n}\n\nfunction mul(a, b) {\n  return a * b;\n}\n\nfunction div(a, b) {\n  return a / b;\n}\n\nfunction mod(a, b) {\n  return a % b;\n}\n\nfunction concat(a, b) {\n  return '' + a + b;\n}\n\nfunction equal(a, b) {\n  return a === b;\n}\n\nfunction notEqual(a, b) {\n  return a !== b;\n}\n\nfunction greaterThan(a, b) {\n  return a > b;\n}\n\nfunction lessThan(a, b) {\n  return a < b;\n}\n\nfunction greaterThanEqual(a, b) {\n  return a >= b;\n}\n\nfunction lessThanEqual(a, b) {\n  return a <= b;\n}\n\nfunction andOperator(a, b) {\n  return Boolean(a && b);\n}\n\nfunction orOperator(a, b) {\n  return Boolean(a || b);\n}\n\nfunction inOperator(a, b) {\n  return contains(b, a);\n}\n\nfunction sinh(a) {\n  return ((Math.exp(a) - Math.exp(-a)) / 2);\n}\n\nfunction cosh(a) {\n  return ((Math.exp(a) + Math.exp(-a)) / 2);\n}\n\nfunction tanh(a) {\n  if (a === Infinity) return 1;\n  if (a === -Infinity) return -1;\n  return (Math.exp(a) - Math.exp(-a)) / (Math.exp(a) + Math.exp(-a));\n}\n\nfunction asinh(a) {\n  if (a === -Infinity) return a;\n  return Math.log(a + Math.sqrt((a * a) + 1));\n}\n\nfunction acosh(a) {\n  return Math.log(a + Math.sqrt((a * a) - 1));\n}\n\nfunction atanh(a) {\n  return (Math.log((1 + a) / (1 - a)) / 2);\n}\n\nfunction log10(a) {\n  return Math.log(a) * Math.LOG10E;\n}\n\nfunction neg(a) {\n  return -a;\n}\n\nfunction not(a) {\n  return !a;\n}\n\nfunction trunc(a) {\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n}\n\nfunction random(a) {\n  return Math.random() * (a || 1);\n}\n\nfunction factorial(a) { // a!\n  return gamma(a + 1);\n}\n\nfunction isInteger(value) {\n  return isFinite(value) && (value === Math.round(value));\n}\n\nvar GAMMA_G = 4.7421875;\nvar GAMMA_P = [\n  0.99999999999999709182,\n  57.156235665862923517, -59.597960355475491248,\n  14.136097974741747174, -0.49191381609762019978,\n  0.33994649984811888699e-4,\n  0.46523628927048575665e-4, -0.98374475304879564677e-4,\n  0.15808870322491248884e-3, -0.21026444172410488319e-3,\n  0.21743961811521264320e-3, -0.16431810653676389022e-3,\n  0.84418223983852743293e-4, -0.26190838401581408670e-4,\n  0.36899182659531622704e-5\n];\n\n// Gamma function from math.js\nfunction gamma(n) {\n  var t, x;\n\n  if (isInteger(n)) {\n    if (n <= 0) {\n      return isFinite(n) ? Infinity : NaN;\n    }\n\n    if (n > 171) {\n      return Infinity; // Will overflow\n    }\n\n    var value = n - 2;\n    var res = n - 1;\n    while (value > 1) {\n      res *= value;\n      value--;\n    }\n\n    if (res === 0) {\n      res = 1; // 0! is per definition 1\n    }\n\n    return res;\n  }\n\n  if (n < 0.5) {\n    return Math.PI / (Math.sin(Math.PI * n) * gamma(1 - n));\n  }\n\n  if (n >= 171.35) {\n    return Infinity; // will overflow\n  }\n\n  if (n > 85.0) { // Extended Stirling Approx\n    var twoN = n * n;\n    var threeN = twoN * n;\n    var fourN = threeN * n;\n    var fiveN = fourN * n;\n    return Math.sqrt(2 * Math.PI / n) * Math.pow((n / Math.E), n) *\n      (1 + (1 / (12 * n)) + (1 / (288 * twoN)) - (139 / (51840 * threeN)) -\n      (571 / (2488320 * fourN)) + (163879 / (209018880 * fiveN)) +\n      (5246819 / (75246796800 * fiveN * n)));\n  }\n\n  --n;\n  x = GAMMA_P[0];\n  for (var i = 1; i < GAMMA_P.length; ++i) {\n    x += GAMMA_P[i] / (n + i);\n  }\n\n  t = n + GAMMA_G + 0.5;\n  return Math.sqrt(2 * Math.PI) * Math.pow(t, n + 0.5) * Math.exp(-t) * x;\n}\n\nfunction stringLength(s) {\n  return String(s).length;\n}\n\nfunction hypot() {\n  var sum = 0;\n  var larg = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = Math.abs(arguments[i]);\n    var div;\n    if (larg < arg) {\n      div = larg / arg;\n      sum = (sum * div * div) + 1;\n      larg = arg;\n    } else if (arg > 0) {\n      div = arg / larg;\n      sum += div * div;\n    } else {\n      sum += arg;\n    }\n  }\n  return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n}\n\nfunction condition(cond, yep, nope) {\n  return cond ? yep : nope;\n}\n\nfunction Parser(options) {\n  this.options = options || {};\n  this.unaryOps = {\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    sinh: Math.sinh || sinh,\n    cosh: Math.cosh || cosh,\n    tanh: Math.tanh || tanh,\n    asinh: Math.asinh || asinh,\n    acosh: Math.acosh || acosh,\n    atanh: Math.atanh || atanh,\n    sqrt: Math.sqrt,\n    log: Math.log,\n    ln: Math.log,\n    lg: Math.log10 || log10,\n    log10: Math.log10 || log10,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    floor: Math.floor,\n    round: Math.round,\n    trunc: Math.trunc || trunc,\n    '-': neg,\n    '+': Number,\n    exp: Math.exp,\n    not: not,\n    length: stringLength,\n    '!': factorial\n  };\n\n  this.binaryOps = {\n    '+': add,\n    '-': sub,\n    '*': mul,\n    '/': div,\n    '%': mod,\n    '^': Math.pow,\n    '||': concat,\n    '==': equal,\n    '!=': notEqual,\n    '>': greaterThan,\n    '<': lessThan,\n    '>=': greaterThanEqual,\n    '<=': lessThanEqual,\n    and: andOperator,\n    or: orOperator,\n    'in': inOperator\n  };\n\n  this.ternaryOps = {\n    '?': condition\n  };\n\n  this.functions = {\n    random: random,\n    fac: factorial,\n    min: Math.min,\n    max: Math.max,\n    hypot: Math.hypot || hypot,\n    pyt: Math.hypot || hypot, // backward compat\n    pow: Math.pow,\n    atan2: Math.atan2,\n    'if': condition,\n    gamma: gamma\n  };\n\n  this.consts = {\n    E: Math.E,\n    PI: Math.PI,\n    'true': true,\n    'false': false\n  };\n}\n\nParser.prototype.parse = function (expr) {\n  var instr = [];\n  var parserState = new ParserState(\n    this,\n    new TokenStream(this, expr),\n    { allowMemberAccess: this.options.allowMemberAccess }\n  );\n\n  parserState.parseExpression(instr);\n  parserState.expect(TEOF, 'EOF');\n\n  return new Expression(instr, this);\n};\n\nParser.prototype.evaluate = function (expr, variables) {\n  return this.parse(expr).evaluate(variables);\n};\n\nvar sharedParser = new Parser();\n\nParser.parse = function (expr) {\n  return sharedParser.parse(expr);\n};\n\nParser.evaluate = function (expr, variables) {\n  return sharedParser.parse(expr).evaluate(variables);\n};\n\n/*!\n Based on ndef.parser, by Raphael Graf(r@undefined.ch)\n http://www.undefined.ch/mparser/index.html\n\n Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)\n\n You are free to use and modify this code in anyway you find useful. Please leave this comment in the code\n to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,\n but don't feel like you have to let me know or ask permission.\n*/\n\nvar index = {\n  Parser: Parser,\n  Expression: Expression\n};\n\nreturn index;\n\n})));\n\n},{}],4:[function(require,module,exports){\n/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.2\n * 2016-06-16 18:25:19\n *\n * By Eli Grey, http://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd !== null)) {\n  define(\"FileSaver.js\", function() {\n    return saveAs;\n  });\n}\n\n},{}],5:[function(require,module,exports){\n//! moment.js\n//! version : 2.18.1\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\nvar hookCallback;\n\nfunction hooks () {\n    return hookCallback.apply(null, arguments);\n}\n\n// This is done to register the method called with moment()\n// without creating circular dependencies.\nfunction setHookCallback (callback) {\n    hookCallback = callback;\n}\n\nfunction isArray(input) {\n    return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n}\n\nfunction isObject(input) {\n    // IE8 will treat undefined and null as object if it wasn't for\n    // input != null\n    return input != null && Object.prototype.toString.call(input) === '[object Object]';\n}\n\nfunction isObjectEmpty(obj) {\n    var k;\n    for (k in obj) {\n        // even if its not own property I'd still call it non-empty\n        return false;\n    }\n    return true;\n}\n\nfunction isUndefined(input) {\n    return input === void 0;\n}\n\nfunction isNumber(input) {\n    return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n}\n\nfunction isDate(input) {\n    return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n}\n\nfunction map(arr, fn) {\n    var res = [], i;\n    for (i = 0; i < arr.length; ++i) {\n        res.push(fn(arr[i], i));\n    }\n    return res;\n}\n\nfunction hasOwnProp(a, b) {\n    return Object.prototype.hasOwnProperty.call(a, b);\n}\n\nfunction extend(a, b) {\n    for (var i in b) {\n        if (hasOwnProp(b, i)) {\n            a[i] = b[i];\n        }\n    }\n\n    if (hasOwnProp(b, 'toString')) {\n        a.toString = b.toString;\n    }\n\n    if (hasOwnProp(b, 'valueOf')) {\n        a.valueOf = b.valueOf;\n    }\n\n    return a;\n}\n\nfunction createUTC (input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, true).utc();\n}\n\nfunction defaultParsingFlags() {\n    // We need to deep clone this object.\n    return {\n        empty           : false,\n        unusedTokens    : [],\n        unusedInput     : [],\n        overflow        : -2,\n        charsLeftOver   : 0,\n        nullInput       : false,\n        invalidMonth    : null,\n        invalidFormat   : false,\n        userInvalidated : false,\n        iso             : false,\n        parsedDateParts : [],\n        meridiem        : null,\n        rfc2822         : false,\n        weekdayMismatch : false\n    };\n}\n\nfunction getParsingFlags(m) {\n    if (m._pf == null) {\n        m._pf = defaultParsingFlags();\n    }\n    return m._pf;\n}\n\nvar some;\nif (Array.prototype.some) {\n    some = Array.prototype.some;\n} else {\n    some = function (fun) {\n        var t = Object(this);\n        var len = t.length >>> 0;\n\n        for (var i = 0; i < len; i++) {\n            if (i in t && fun.call(this, t[i], i, t)) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n}\n\nvar some$1 = some;\n\nfunction isValid(m) {\n    if (m._isValid == null) {\n        var flags = getParsingFlags(m);\n        var parsedParts = some$1.call(flags.parsedDateParts, function (i) {\n            return i != null;\n        });\n        var isNowValid = !isNaN(m._d.getTime()) &&\n            flags.overflow < 0 &&\n            !flags.empty &&\n            !flags.invalidMonth &&\n            !flags.invalidWeekday &&\n            !flags.nullInput &&\n            !flags.invalidFormat &&\n            !flags.userInvalidated &&\n            (!flags.meridiem || (flags.meridiem && parsedParts));\n\n        if (m._strict) {\n            isNowValid = isNowValid &&\n                flags.charsLeftOver === 0 &&\n                flags.unusedTokens.length === 0 &&\n                flags.bigHour === undefined;\n        }\n\n        if (Object.isFrozen == null || !Object.isFrozen(m)) {\n            m._isValid = isNowValid;\n        }\n        else {\n            return isNowValid;\n        }\n    }\n    return m._isValid;\n}\n\nfunction createInvalid (flags) {\n    var m = createUTC(NaN);\n    if (flags != null) {\n        extend(getParsingFlags(m), flags);\n    }\n    else {\n        getParsingFlags(m).userInvalidated = true;\n    }\n\n    return m;\n}\n\n// Plugins that add properties should also add the key here (null value),\n// so we can properly clone ourselves.\nvar momentProperties = hooks.momentProperties = [];\n\nfunction copyConfig(to, from) {\n    var i, prop, val;\n\n    if (!isUndefined(from._isAMomentObject)) {\n        to._isAMomentObject = from._isAMomentObject;\n    }\n    if (!isUndefined(from._i)) {\n        to._i = from._i;\n    }\n    if (!isUndefined(from._f)) {\n        to._f = from._f;\n    }\n    if (!isUndefined(from._l)) {\n        to._l = from._l;\n    }\n    if (!isUndefined(from._strict)) {\n        to._strict = from._strict;\n    }\n    if (!isUndefined(from._tzm)) {\n        to._tzm = from._tzm;\n    }\n    if (!isUndefined(from._isUTC)) {\n        to._isUTC = from._isUTC;\n    }\n    if (!isUndefined(from._offset)) {\n        to._offset = from._offset;\n    }\n    if (!isUndefined(from._pf)) {\n        to._pf = getParsingFlags(from);\n    }\n    if (!isUndefined(from._locale)) {\n        to._locale = from._locale;\n    }\n\n    if (momentProperties.length > 0) {\n        for (i = 0; i < momentProperties.length; i++) {\n            prop = momentProperties[i];\n            val = from[prop];\n            if (!isUndefined(val)) {\n                to[prop] = val;\n            }\n        }\n    }\n\n    return to;\n}\n\nvar updateInProgress = false;\n\n// Moment prototype object\nfunction Moment(config) {\n    copyConfig(this, config);\n    this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n    if (!this.isValid()) {\n        this._d = new Date(NaN);\n    }\n    // Prevent infinite loop in case updateOffset creates new moment\n    // objects.\n    if (updateInProgress === false) {\n        updateInProgress = true;\n        hooks.updateOffset(this);\n        updateInProgress = false;\n    }\n}\n\nfunction isMoment (obj) {\n    return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n}\n\nfunction absFloor (number) {\n    if (number < 0) {\n        // -0 -> 0\n        return Math.ceil(number) || 0;\n    } else {\n        return Math.floor(number);\n    }\n}\n\nfunction toInt(argumentForCoercion) {\n    var coercedNumber = +argumentForCoercion,\n        value = 0;\n\n    if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n        value = absFloor(coercedNumber);\n    }\n\n    return value;\n}\n\n// compare two arrays, return the number of differences\nfunction compareArrays(array1, array2, dontConvert) {\n    var len = Math.min(array1.length, array2.length),\n        lengthDiff = Math.abs(array1.length - array2.length),\n        diffs = 0,\n        i;\n    for (i = 0; i < len; i++) {\n        if ((dontConvert && array1[i] !== array2[i]) ||\n            (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n            diffs++;\n        }\n    }\n    return diffs + lengthDiff;\n}\n\nfunction warn(msg) {\n    if (hooks.suppressDeprecationWarnings === false &&\n            (typeof console !==  'undefined') && console.warn) {\n        console.warn('Deprecation warning: ' + msg);\n    }\n}\n\nfunction deprecate(msg, fn) {\n    var firstTime = true;\n\n    return extend(function () {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(null, msg);\n        }\n        if (firstTime) {\n            var args = [];\n            var arg;\n            for (var i = 0; i < arguments.length; i++) {\n                arg = '';\n                if (typeof arguments[i] === 'object') {\n                    arg += '\\n[' + i + '] ';\n                    for (var key in arguments[0]) {\n                        arg += key + ': ' + arguments[0][key] + ', ';\n                    }\n                    arg = arg.slice(0, -2); // Remove trailing comma and space\n                } else {\n                    arg = arguments[i];\n                }\n                args.push(arg);\n            }\n            warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n            firstTime = false;\n        }\n        return fn.apply(this, arguments);\n    }, fn);\n}\n\nvar deprecations = {};\n\nfunction deprecateSimple(name, msg) {\n    if (hooks.deprecationHandler != null) {\n        hooks.deprecationHandler(name, msg);\n    }\n    if (!deprecations[name]) {\n        warn(msg);\n        deprecations[name] = true;\n    }\n}\n\nhooks.suppressDeprecationWarnings = false;\nhooks.deprecationHandler = null;\n\nfunction isFunction(input) {\n    return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n}\n\nfunction set (config) {\n    var prop, i;\n    for (i in config) {\n        prop = config[i];\n        if (isFunction(prop)) {\n            this[i] = prop;\n        } else {\n            this['_' + i] = prop;\n        }\n    }\n    this._config = config;\n    // Lenient ordinal parsing accepts just a number in addition to\n    // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    this._dayOfMonthOrdinalParseLenient = new RegExp(\n        (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n            '|' + (/\\d{1,2}/).source);\n}\n\nfunction mergeConfigs(parentConfig, childConfig) {\n    var res = extend({}, parentConfig), prop;\n    for (prop in childConfig) {\n        if (hasOwnProp(childConfig, prop)) {\n            if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                res[prop] = {};\n                extend(res[prop], parentConfig[prop]);\n                extend(res[prop], childConfig[prop]);\n            } else if (childConfig[prop] != null) {\n                res[prop] = childConfig[prop];\n            } else {\n                delete res[prop];\n            }\n        }\n    }\n    for (prop in parentConfig) {\n        if (hasOwnProp(parentConfig, prop) &&\n                !hasOwnProp(childConfig, prop) &&\n                isObject(parentConfig[prop])) {\n            // make sure changes to properties don't modify parent config\n            res[prop] = extend({}, res[prop]);\n        }\n    }\n    return res;\n}\n\nfunction Locale(config) {\n    if (config != null) {\n        this.set(config);\n    }\n}\n\nvar keys;\n\nif (Object.keys) {\n    keys = Object.keys;\n} else {\n    keys = function (obj) {\n        var i, res = [];\n        for (i in obj) {\n            if (hasOwnProp(obj, i)) {\n                res.push(i);\n            }\n        }\n        return res;\n    };\n}\n\nvar keys$1 = keys;\n\nvar defaultCalendar = {\n    sameDay : '[Today at] LT',\n    nextDay : '[Tomorrow at] LT',\n    nextWeek : 'dddd [at] LT',\n    lastDay : '[Yesterday at] LT',\n    lastWeek : '[Last] dddd [at] LT',\n    sameElse : 'L'\n};\n\nfunction calendar (key, mom, now) {\n    var output = this._calendar[key] || this._calendar['sameElse'];\n    return isFunction(output) ? output.call(mom, now) : output;\n}\n\nvar defaultLongDateFormat = {\n    LTS  : 'h:mm:ss A',\n    LT   : 'h:mm A',\n    L    : 'MM/DD/YYYY',\n    LL   : 'MMMM D, YYYY',\n    LLL  : 'MMMM D, YYYY h:mm A',\n    LLLL : 'dddd, MMMM D, YYYY h:mm A'\n};\n\nfunction longDateFormat (key) {\n    var format = this._longDateFormat[key],\n        formatUpper = this._longDateFormat[key.toUpperCase()];\n\n    if (format || !formatUpper) {\n        return format;\n    }\n\n    this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n        return val.slice(1);\n    });\n\n    return this._longDateFormat[key];\n}\n\nvar defaultInvalidDate = 'Invalid date';\n\nfunction invalidDate () {\n    return this._invalidDate;\n}\n\nvar defaultOrdinal = '%d';\nvar defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\nfunction ordinal (number) {\n    return this._ordinal.replace('%d', number);\n}\n\nvar defaultRelativeTime = {\n    future : 'in %s',\n    past   : '%s ago',\n    s  : 'a few seconds',\n    ss : '%d seconds',\n    m  : 'a minute',\n    mm : '%d minutes',\n    h  : 'an hour',\n    hh : '%d hours',\n    d  : 'a day',\n    dd : '%d days',\n    M  : 'a month',\n    MM : '%d months',\n    y  : 'a year',\n    yy : '%d years'\n};\n\nfunction relativeTime (number, withoutSuffix, string, isFuture) {\n    var output = this._relativeTime[string];\n    return (isFunction(output)) ?\n        output(number, withoutSuffix, string, isFuture) :\n        output.replace(/%d/i, number);\n}\n\nfunction pastFuture (diff, output) {\n    var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n    return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n}\n\nvar aliases = {};\n\nfunction addUnitAlias (unit, shorthand) {\n    var lowerCase = unit.toLowerCase();\n    aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n}\n\nfunction normalizeUnits(units) {\n    return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n}\n\nfunction normalizeObjectUnits(inputObject) {\n    var normalizedInput = {},\n        normalizedProp,\n        prop;\n\n    for (prop in inputObject) {\n        if (hasOwnProp(inputObject, prop)) {\n            normalizedProp = normalizeUnits(prop);\n            if (normalizedProp) {\n                normalizedInput[normalizedProp] = inputObject[prop];\n            }\n        }\n    }\n\n    return normalizedInput;\n}\n\nvar priorities = {};\n\nfunction addUnitPriority(unit, priority) {\n    priorities[unit] = priority;\n}\n\nfunction getPrioritizedUnits(unitsObj) {\n    var units = [];\n    for (var u in unitsObj) {\n        units.push({unit: u, priority: priorities[u]});\n    }\n    units.sort(function (a, b) {\n        return a.priority - b.priority;\n    });\n    return units;\n}\n\nfunction makeGetSet (unit, keepTime) {\n    return function (value) {\n        if (value != null) {\n            set$1(this, unit, value);\n            hooks.updateOffset(this, keepTime);\n            return this;\n        } else {\n            return get(this, unit);\n        }\n    };\n}\n\nfunction get (mom, unit) {\n    return mom.isValid() ?\n        mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n}\n\nfunction set$1 (mom, unit, value) {\n    if (mom.isValid()) {\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n    }\n}\n\n// MOMENTS\n\nfunction stringGet (units) {\n    units = normalizeUnits(units);\n    if (isFunction(this[units])) {\n        return this[units]();\n    }\n    return this;\n}\n\n\nfunction stringSet (units, value) {\n    if (typeof units === 'object') {\n        units = normalizeObjectUnits(units);\n        var prioritized = getPrioritizedUnits(units);\n        for (var i = 0; i < prioritized.length; i++) {\n            this[prioritized[i].unit](units[prioritized[i].unit]);\n        }\n    } else {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units](value);\n        }\n    }\n    return this;\n}\n\nfunction zeroFill(number, targetLength, forceSign) {\n    var absNumber = '' + Math.abs(number),\n        zerosToFill = targetLength - absNumber.length,\n        sign = number >= 0;\n    return (sign ? (forceSign ? '+' : '') : '-') +\n        Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n}\n\nvar formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\nvar localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\nvar formatFunctions = {};\n\nvar formatTokenFunctions = {};\n\n// token:    'M'\n// padded:   ['MM', 2]\n// ordinal:  'Mo'\n// callback: function () { this.month() + 1 }\nfunction addFormatToken (token, padded, ordinal, callback) {\n    var func = callback;\n    if (typeof callback === 'string') {\n        func = function () {\n            return this[callback]();\n        };\n    }\n    if (token) {\n        formatTokenFunctions[token] = func;\n    }\n    if (padded) {\n        formatTokenFunctions[padded[0]] = function () {\n            return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n        };\n    }\n    if (ordinal) {\n        formatTokenFunctions[ordinal] = function () {\n            return this.localeData().ordinal(func.apply(this, arguments), token);\n        };\n    }\n}\n\nfunction removeFormattingTokens(input) {\n    if (input.match(/\\[[\\s\\S]/)) {\n        return input.replace(/^\\[|\\]$/g, '');\n    }\n    return input.replace(/\\\\/g, '');\n}\n\nfunction makeFormatFunction(format) {\n    var array = format.match(formattingTokens), i, length;\n\n    for (i = 0, length = array.length; i < length; i++) {\n        if (formatTokenFunctions[array[i]]) {\n            array[i] = formatTokenFunctions[array[i]];\n        } else {\n            array[i] = removeFormattingTokens(array[i]);\n        }\n    }\n\n    return function (mom) {\n        var output = '', i;\n        for (i = 0; i < length; i++) {\n            output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n        }\n        return output;\n    };\n}\n\n// format date using native date object\nfunction formatMoment(m, format) {\n    if (!m.isValid()) {\n        return m.localeData().invalidDate();\n    }\n\n    format = expandFormat(format, m.localeData());\n    formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n    return formatFunctions[format](m);\n}\n\nfunction expandFormat(format, locale) {\n    var i = 5;\n\n    function replaceLongDateFormatTokens(input) {\n        return locale.longDateFormat(input) || input;\n    }\n\n    localFormattingTokens.lastIndex = 0;\n    while (i >= 0 && localFormattingTokens.test(format)) {\n        format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n        localFormattingTokens.lastIndex = 0;\n        i -= 1;\n    }\n\n    return format;\n}\n\nvar match1         = /\\d/;            //       0 - 9\nvar match2         = /\\d\\d/;          //      00 - 99\nvar match3         = /\\d{3}/;         //     000 - 999\nvar match4         = /\\d{4}/;         //    0000 - 9999\nvar match6         = /[+-]?\\d{6}/;    // -999999 - 999999\nvar match1to2      = /\\d\\d?/;         //       0 - 99\nvar match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\nvar match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\nvar match1to3      = /\\d{1,3}/;       //       0 - 999\nvar match1to4      = /\\d{1,4}/;       //       0 - 9999\nvar match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\nvar matchUnsigned  = /\\d+/;           //       0 - inf\nvar matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\nvar matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\nvar matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\nvar matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n// any word (or two) characters or numbers including two/three word month in arabic.\n// includes scottish gaelic two word and hyphenated months\nvar matchWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i;\n\n\nvar regexes = {};\n\nfunction addRegexToken (token, regex, strictRegex) {\n    regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n        return (isStrict && strictRegex) ? strictRegex : regex;\n    };\n}\n\nfunction getParseRegexForToken (token, config) {\n    if (!hasOwnProp(regexes, token)) {\n        return new RegExp(unescapeFormat(token));\n    }\n\n    return regexes[token](config._strict, config._locale);\n}\n\n// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\nfunction unescapeFormat(s) {\n    return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n        return p1 || p2 || p3 || p4;\n    }));\n}\n\nfunction regexEscape(s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nvar tokens = {};\n\nfunction addParseToken (token, callback) {\n    var i, func = callback;\n    if (typeof token === 'string') {\n        token = [token];\n    }\n    if (isNumber(callback)) {\n        func = function (input, array) {\n            array[callback] = toInt(input);\n        };\n    }\n    for (i = 0; i < token.length; i++) {\n        tokens[token[i]] = func;\n    }\n}\n\nfunction addWeekParseToken (token, callback) {\n    addParseToken(token, function (input, array, config, token) {\n        config._w = config._w || {};\n        callback(input, config._w, config, token);\n    });\n}\n\nfunction addTimeToArrayFromToken(token, input, config) {\n    if (input != null && hasOwnProp(tokens, token)) {\n        tokens[token](input, config._a, config, token);\n    }\n}\n\nvar YEAR = 0;\nvar MONTH = 1;\nvar DATE = 2;\nvar HOUR = 3;\nvar MINUTE = 4;\nvar SECOND = 5;\nvar MILLISECOND = 6;\nvar WEEK = 7;\nvar WEEKDAY = 8;\n\nvar indexOf;\n\nif (Array.prototype.indexOf) {\n    indexOf = Array.prototype.indexOf;\n} else {\n    indexOf = function (o) {\n        // I know\n        var i;\n        for (i = 0; i < this.length; ++i) {\n            if (this[i] === o) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\nvar indexOf$1 = indexOf;\n\nfunction daysInMonth(year, month) {\n    return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\n}\n\n// FORMATTING\n\naddFormatToken('M', ['MM', 2], 'Mo', function () {\n    return this.month() + 1;\n});\n\naddFormatToken('MMM', 0, 0, function (format) {\n    return this.localeData().monthsShort(this, format);\n});\n\naddFormatToken('MMMM', 0, 0, function (format) {\n    return this.localeData().months(this, format);\n});\n\n// ALIASES\n\naddUnitAlias('month', 'M');\n\n// PRIORITY\n\naddUnitPriority('month', 8);\n\n// PARSING\n\naddRegexToken('M',    match1to2);\naddRegexToken('MM',   match1to2, match2);\naddRegexToken('MMM',  function (isStrict, locale) {\n    return locale.monthsShortRegex(isStrict);\n});\naddRegexToken('MMMM', function (isStrict, locale) {\n    return locale.monthsRegex(isStrict);\n});\n\naddParseToken(['M', 'MM'], function (input, array) {\n    array[MONTH] = toInt(input) - 1;\n});\n\naddParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n    var month = config._locale.monthsParse(input, token, config._strict);\n    // if we didn't find a month name, mark the date as invalid.\n    if (month != null) {\n        array[MONTH] = month;\n    } else {\n        getParsingFlags(config).invalidMonth = input;\n    }\n});\n\n// LOCALES\n\nvar MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\nvar defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\nfunction localeMonths (m, format) {\n    if (!m) {\n        return isArray(this._months) ? this._months :\n            this._months['standalone'];\n    }\n    return isArray(this._months) ? this._months[m.month()] :\n        this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n}\n\nvar defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\nfunction localeMonthsShort (m, format) {\n    if (!m) {\n        return isArray(this._monthsShort) ? this._monthsShort :\n            this._monthsShort['standalone'];\n    }\n    return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n        this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n}\n\nfunction handleStrictParse(monthName, format, strict) {\n    var i, ii, mom, llc = monthName.toLocaleLowerCase();\n    if (!this._monthsParse) {\n        // this is not used\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n        for (i = 0; i < 12; ++i) {\n            mom = createUTC([2000, i]);\n            this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n            this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'MMM') {\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'MMM') {\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._longMonthsParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortMonthsParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeMonthsParse (monthName, format, strict) {\n    var i, mom, regex;\n\n    if (this._monthsParseExact) {\n        return handleStrictParse.call(this, monthName, format, strict);\n    }\n\n    if (!this._monthsParse) {\n        this._monthsParse = [];\n        this._longMonthsParse = [];\n        this._shortMonthsParse = [];\n    }\n\n    // TODO: add sorting\n    // Sorting makes sure if one month (or abbr) is a prefix of another\n    // see sorting in computeMonthsParse\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        if (strict && !this._longMonthsParse[i]) {\n            this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n            this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n        }\n        if (!strict && !this._monthsParse[i]) {\n            regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n            this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n            return i;\n        } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n            return i;\n        } else if (!strict && this._monthsParse[i].test(monthName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction setMonth (mom, value) {\n    var dayOfMonth;\n\n    if (!mom.isValid()) {\n        // No op\n        return mom;\n    }\n\n    if (typeof value === 'string') {\n        if (/^\\d+$/.test(value)) {\n            value = toInt(value);\n        } else {\n            value = mom.localeData().monthsParse(value);\n            // TODO: Another silent failure?\n            if (!isNumber(value)) {\n                return mom;\n            }\n        }\n    }\n\n    dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n    mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n    return mom;\n}\n\nfunction getSetMonth (value) {\n    if (value != null) {\n        setMonth(this, value);\n        hooks.updateOffset(this, true);\n        return this;\n    } else {\n        return get(this, 'Month');\n    }\n}\n\nfunction getDaysInMonth () {\n    return daysInMonth(this.year(), this.month());\n}\n\nvar defaultMonthsShortRegex = matchWord;\nfunction monthsShortRegex (isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsShortStrictRegex;\n        } else {\n            return this._monthsShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsShortRegex')) {\n            this._monthsShortRegex = defaultMonthsShortRegex;\n        }\n        return this._monthsShortStrictRegex && isStrict ?\n            this._monthsShortStrictRegex : this._monthsShortRegex;\n    }\n}\n\nvar defaultMonthsRegex = matchWord;\nfunction monthsRegex (isStrict) {\n    if (this._monthsParseExact) {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            computeMonthsParse.call(this);\n        }\n        if (isStrict) {\n            return this._monthsStrictRegex;\n        } else {\n            return this._monthsRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_monthsRegex')) {\n            this._monthsRegex = defaultMonthsRegex;\n        }\n        return this._monthsStrictRegex && isStrict ?\n            this._monthsStrictRegex : this._monthsRegex;\n    }\n}\n\nfunction computeMonthsParse () {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var shortPieces = [], longPieces = [], mixedPieces = [],\n        i, mom;\n    for (i = 0; i < 12; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, i]);\n        shortPieces.push(this.monthsShort(mom, ''));\n        longPieces.push(this.months(mom, ''));\n        mixedPieces.push(this.months(mom, ''));\n        mixedPieces.push(this.monthsShort(mom, ''));\n    }\n    // Sorting makes sure if one month (or abbr) is a prefix of another it\n    // will match the longer piece.\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n    for (i = 0; i < 12; i++) {\n        shortPieces[i] = regexEscape(shortPieces[i]);\n        longPieces[i] = regexEscape(longPieces[i]);\n    }\n    for (i = 0; i < 24; i++) {\n        mixedPieces[i] = regexEscape(mixedPieces[i]);\n    }\n\n    this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._monthsShortRegex = this._monthsRegex;\n    this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n    this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n}\n\n// FORMATTING\n\naddFormatToken('Y', 0, 0, function () {\n    var y = this.year();\n    return y <= 9999 ? '' + y : '+' + y;\n});\n\naddFormatToken(0, ['YY', 2], 0, function () {\n    return this.year() % 100;\n});\n\naddFormatToken(0, ['YYYY',   4],       0, 'year');\naddFormatToken(0, ['YYYYY',  5],       0, 'year');\naddFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n// ALIASES\n\naddUnitAlias('year', 'y');\n\n// PRIORITIES\n\naddUnitPriority('year', 1);\n\n// PARSING\n\naddRegexToken('Y',      matchSigned);\naddRegexToken('YY',     match1to2, match2);\naddRegexToken('YYYY',   match1to4, match4);\naddRegexToken('YYYYY',  match1to6, match6);\naddRegexToken('YYYYYY', match1to6, match6);\n\naddParseToken(['YYYYY', 'YYYYYY'], YEAR);\naddParseToken('YYYY', function (input, array) {\n    array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n});\naddParseToken('YY', function (input, array) {\n    array[YEAR] = hooks.parseTwoDigitYear(input);\n});\naddParseToken('Y', function (input, array) {\n    array[YEAR] = parseInt(input, 10);\n});\n\n// HELPERS\n\nfunction daysInYear(year) {\n    return isLeapYear(year) ? 366 : 365;\n}\n\nfunction isLeapYear(year) {\n    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\n\n// HOOKS\n\nhooks.parseTwoDigitYear = function (input) {\n    return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n};\n\n// MOMENTS\n\nvar getSetYear = makeGetSet('FullYear', true);\n\nfunction getIsLeapYear () {\n    return isLeapYear(this.year());\n}\n\nfunction createDate (y, m, d, h, M, s, ms) {\n    // can't just apply() to create a date:\n    // https://stackoverflow.com/q/181348\n    var date = new Date(y, m, d, h, M, s, ms);\n\n    // the date constructor remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {\n        date.setFullYear(y);\n    }\n    return date;\n}\n\nfunction createUTCDate (y) {\n    var date = new Date(Date.UTC.apply(null, arguments));\n\n    // the Date.UTC function remaps years 0-99 to 1900-1999\n    if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {\n        date.setUTCFullYear(y);\n    }\n    return date;\n}\n\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n        fwd = 7 + dow - doy,\n        // first-week day local weekday -- which local weekday is fwd\n        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n    return -fwdlw + fwd - 1;\n}\n\n// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\nfunction dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n    var localWeekday = (7 + weekday - dow) % 7,\n        weekOffset = firstWeekOffset(year, dow, doy),\n        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n        resYear, resDayOfYear;\n\n    if (dayOfYear <= 0) {\n        resYear = year - 1;\n        resDayOfYear = daysInYear(resYear) + dayOfYear;\n    } else if (dayOfYear > daysInYear(year)) {\n        resYear = year + 1;\n        resDayOfYear = dayOfYear - daysInYear(year);\n    } else {\n        resYear = year;\n        resDayOfYear = dayOfYear;\n    }\n\n    return {\n        year: resYear,\n        dayOfYear: resDayOfYear\n    };\n}\n\nfunction weekOfYear(mom, dow, doy) {\n    var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n        resWeek, resYear;\n\n    if (week < 1) {\n        resYear = mom.year() - 1;\n        resWeek = week + weeksInYear(resYear, dow, doy);\n    } else if (week > weeksInYear(mom.year(), dow, doy)) {\n        resWeek = week - weeksInYear(mom.year(), dow, doy);\n        resYear = mom.year() + 1;\n    } else {\n        resYear = mom.year();\n        resWeek = week;\n    }\n\n    return {\n        week: resWeek,\n        year: resYear\n    };\n}\n\nfunction weeksInYear(year, dow, doy) {\n    var weekOffset = firstWeekOffset(year, dow, doy),\n        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n}\n\n// FORMATTING\n\naddFormatToken('w', ['ww', 2], 'wo', 'week');\naddFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n// ALIASES\n\naddUnitAlias('week', 'w');\naddUnitAlias('isoWeek', 'W');\n\n// PRIORITIES\n\naddUnitPriority('week', 5);\naddUnitPriority('isoWeek', 5);\n\n// PARSING\n\naddRegexToken('w',  match1to2);\naddRegexToken('ww', match1to2, match2);\naddRegexToken('W',  match1to2);\naddRegexToken('WW', match1to2, match2);\n\naddWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n    week[token.substr(0, 1)] = toInt(input);\n});\n\n// HELPERS\n\n// LOCALES\n\nfunction localeWeek (mom) {\n    return weekOfYear(mom, this._week.dow, this._week.doy).week;\n}\n\nvar defaultLocaleWeek = {\n    dow : 0, // Sunday is the first day of the week.\n    doy : 6  // The week that contains Jan 1st is the first week of the year.\n};\n\nfunction localeFirstDayOfWeek () {\n    return this._week.dow;\n}\n\nfunction localeFirstDayOfYear () {\n    return this._week.doy;\n}\n\n// MOMENTS\n\nfunction getSetWeek (input) {\n    var week = this.localeData().week(this);\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\nfunction getSetISOWeek (input) {\n    var week = weekOfYear(this, 1, 4).week;\n    return input == null ? week : this.add((input - week) * 7, 'd');\n}\n\n// FORMATTING\n\naddFormatToken('d', 0, 'do', 'day');\n\naddFormatToken('dd', 0, 0, function (format) {\n    return this.localeData().weekdaysMin(this, format);\n});\n\naddFormatToken('ddd', 0, 0, function (format) {\n    return this.localeData().weekdaysShort(this, format);\n});\n\naddFormatToken('dddd', 0, 0, function (format) {\n    return this.localeData().weekdays(this, format);\n});\n\naddFormatToken('e', 0, 0, 'weekday');\naddFormatToken('E', 0, 0, 'isoWeekday');\n\n// ALIASES\n\naddUnitAlias('day', 'd');\naddUnitAlias('weekday', 'e');\naddUnitAlias('isoWeekday', 'E');\n\n// PRIORITY\naddUnitPriority('day', 11);\naddUnitPriority('weekday', 11);\naddUnitPriority('isoWeekday', 11);\n\n// PARSING\n\naddRegexToken('d',    match1to2);\naddRegexToken('e',    match1to2);\naddRegexToken('E',    match1to2);\naddRegexToken('dd',   function (isStrict, locale) {\n    return locale.weekdaysMinRegex(isStrict);\n});\naddRegexToken('ddd',   function (isStrict, locale) {\n    return locale.weekdaysShortRegex(isStrict);\n});\naddRegexToken('dddd',   function (isStrict, locale) {\n    return locale.weekdaysRegex(isStrict);\n});\n\naddWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n    var weekday = config._locale.weekdaysParse(input, token, config._strict);\n    // if we didn't get a weekday name, mark the date as invalid\n    if (weekday != null) {\n        week.d = weekday;\n    } else {\n        getParsingFlags(config).invalidWeekday = input;\n    }\n});\n\naddWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n    week[token] = toInt(input);\n});\n\n// HELPERS\n\nfunction parseWeekday(input, locale) {\n    if (typeof input !== 'string') {\n        return input;\n    }\n\n    if (!isNaN(input)) {\n        return parseInt(input, 10);\n    }\n\n    input = locale.weekdaysParse(input);\n    if (typeof input === 'number') {\n        return input;\n    }\n\n    return null;\n}\n\nfunction parseIsoWeekday(input, locale) {\n    if (typeof input === 'string') {\n        return locale.weekdaysParse(input) % 7 || 7;\n    }\n    return isNaN(input) ? null : input;\n}\n\n// LOCALES\n\nvar defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\nfunction localeWeekdays (m, format) {\n    if (!m) {\n        return isArray(this._weekdays) ? this._weekdays :\n            this._weekdays['standalone'];\n    }\n    return isArray(this._weekdays) ? this._weekdays[m.day()] :\n        this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];\n}\n\nvar defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\nfunction localeWeekdaysShort (m) {\n    return (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n}\n\nvar defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\nfunction localeWeekdaysMin (m) {\n    return (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n}\n\nfunction handleStrictParse$1(weekdayName, format, strict) {\n    var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._minWeekdaysParse = [];\n\n        for (i = 0; i < 7; ++i) {\n            mom = createUTC([2000, 1]).day(i);\n            this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n            this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n            this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n        }\n    }\n\n    if (strict) {\n        if (format === 'dddd') {\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    } else {\n        if (format === 'dddd') {\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else if (format === 'ddd') {\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        } else {\n            ii = indexOf$1.call(this._minWeekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._weekdaysParse, llc);\n            if (ii !== -1) {\n                return ii;\n            }\n            ii = indexOf$1.call(this._shortWeekdaysParse, llc);\n            return ii !== -1 ? ii : null;\n        }\n    }\n}\n\nfunction localeWeekdaysParse (weekdayName, format, strict) {\n    var i, mom, regex;\n\n    if (this._weekdaysParseExact) {\n        return handleStrictParse$1.call(this, weekdayName, format, strict);\n    }\n\n    if (!this._weekdaysParse) {\n        this._weekdaysParse = [];\n        this._minWeekdaysParse = [];\n        this._shortWeekdaysParse = [];\n        this._fullWeekdaysParse = [];\n    }\n\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n\n        mom = createUTC([2000, 1]).day(i);\n        if (strict && !this._fullWeekdaysParse[i]) {\n            this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');\n            this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');\n            this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');\n        }\n        if (!this._weekdaysParse[i]) {\n            regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n            this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n        }\n        // test the regex\n        if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n            return i;\n        } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n            return i;\n        }\n    }\n}\n\n// MOMENTS\n\nfunction getSetDayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n    if (input != null) {\n        input = parseWeekday(input, this.localeData());\n        return this.add(input - day, 'd');\n    } else {\n        return day;\n    }\n}\n\nfunction getSetLocaleDayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n    return input == null ? weekday : this.add(input - weekday, 'd');\n}\n\nfunction getSetISODayOfWeek (input) {\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n\n    // behaves the same as moment#day except\n    // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n    // as a setter, sunday should belong to the previous week.\n\n    if (input != null) {\n        var weekday = parseIsoWeekday(input, this.localeData());\n        return this.day(this.day() % 7 ? weekday : weekday - 7);\n    } else {\n        return this.day() || 7;\n    }\n}\n\nvar defaultWeekdaysRegex = matchWord;\nfunction weekdaysRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysStrictRegex;\n        } else {\n            return this._weekdaysRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            this._weekdaysRegex = defaultWeekdaysRegex;\n        }\n        return this._weekdaysStrictRegex && isStrict ?\n            this._weekdaysStrictRegex : this._weekdaysRegex;\n    }\n}\n\nvar defaultWeekdaysShortRegex = matchWord;\nfunction weekdaysShortRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysShortStrictRegex;\n        } else {\n            return this._weekdaysShortRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n            this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n        }\n        return this._weekdaysShortStrictRegex && isStrict ?\n            this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n    }\n}\n\nvar defaultWeekdaysMinRegex = matchWord;\nfunction weekdaysMinRegex (isStrict) {\n    if (this._weekdaysParseExact) {\n        if (!hasOwnProp(this, '_weekdaysRegex')) {\n            computeWeekdaysParse.call(this);\n        }\n        if (isStrict) {\n            return this._weekdaysMinStrictRegex;\n        } else {\n            return this._weekdaysMinRegex;\n        }\n    } else {\n        if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n            this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n        }\n        return this._weekdaysMinStrictRegex && isStrict ?\n            this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n    }\n}\n\n\nfunction computeWeekdaysParse () {\n    function cmpLenRev(a, b) {\n        return b.length - a.length;\n    }\n\n    var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n        i, mom, minp, shortp, longp;\n    for (i = 0; i < 7; i++) {\n        // make the regex if we don't have it already\n        mom = createUTC([2000, 1]).day(i);\n        minp = this.weekdaysMin(mom, '');\n        shortp = this.weekdaysShort(mom, '');\n        longp = this.weekdays(mom, '');\n        minPieces.push(minp);\n        shortPieces.push(shortp);\n        longPieces.push(longp);\n        mixedPieces.push(minp);\n        mixedPieces.push(shortp);\n        mixedPieces.push(longp);\n    }\n    // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n    // will match the longer piece.\n    minPieces.sort(cmpLenRev);\n    shortPieces.sort(cmpLenRev);\n    longPieces.sort(cmpLenRev);\n    mixedPieces.sort(cmpLenRev);\n    for (i = 0; i < 7; i++) {\n        shortPieces[i] = regexEscape(shortPieces[i]);\n        longPieces[i] = regexEscape(longPieces[i]);\n        mixedPieces[i] = regexEscape(mixedPieces[i]);\n    }\n\n    this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n    this._weekdaysShortRegex = this._weekdaysRegex;\n    this._weekdaysMinRegex = this._weekdaysRegex;\n\n    this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n    this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n}\n\n// FORMATTING\n\nfunction hFormat() {\n    return this.hours() % 12 || 12;\n}\n\nfunction kFormat() {\n    return this.hours() || 24;\n}\n\naddFormatToken('H', ['HH', 2], 0, 'hour');\naddFormatToken('h', ['hh', 2], 0, hFormat);\naddFormatToken('k', ['kk', 2], 0, kFormat);\n\naddFormatToken('hmm', 0, 0, function () {\n    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('hmmss', 0, 0, function () {\n    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2);\n});\n\naddFormatToken('Hmm', 0, 0, function () {\n    return '' + this.hours() + zeroFill(this.minutes(), 2);\n});\n\naddFormatToken('Hmmss', 0, 0, function () {\n    return '' + this.hours() + zeroFill(this.minutes(), 2) +\n        zeroFill(this.seconds(), 2);\n});\n\nfunction meridiem (token, lowercase) {\n    addFormatToken(token, 0, 0, function () {\n        return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n    });\n}\n\nmeridiem('a', true);\nmeridiem('A', false);\n\n// ALIASES\n\naddUnitAlias('hour', 'h');\n\n// PRIORITY\naddUnitPriority('hour', 13);\n\n// PARSING\n\nfunction matchMeridiem (isStrict, locale) {\n    return locale._meridiemParse;\n}\n\naddRegexToken('a',  matchMeridiem);\naddRegexToken('A',  matchMeridiem);\naddRegexToken('H',  match1to2);\naddRegexToken('h',  match1to2);\naddRegexToken('k',  match1to2);\naddRegexToken('HH', match1to2, match2);\naddRegexToken('hh', match1to2, match2);\naddRegexToken('kk', match1to2, match2);\n\naddRegexToken('hmm', match3to4);\naddRegexToken('hmmss', match5to6);\naddRegexToken('Hmm', match3to4);\naddRegexToken('Hmmss', match5to6);\n\naddParseToken(['H', 'HH'], HOUR);\naddParseToken(['k', 'kk'], function (input, array, config) {\n    var kInput = toInt(input);\n    array[HOUR] = kInput === 24 ? 0 : kInput;\n});\naddParseToken(['a', 'A'], function (input, array, config) {\n    config._isPm = config._locale.isPM(input);\n    config._meridiem = input;\n});\naddParseToken(['h', 'hh'], function (input, array, config) {\n    array[HOUR] = toInt(input);\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('hmmss', function (input, array, config) {\n    var pos1 = input.length - 4;\n    var pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n    getParsingFlags(config).bigHour = true;\n});\naddParseToken('Hmm', function (input, array, config) {\n    var pos = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos));\n    array[MINUTE] = toInt(input.substr(pos));\n});\naddParseToken('Hmmss', function (input, array, config) {\n    var pos1 = input.length - 4;\n    var pos2 = input.length - 2;\n    array[HOUR] = toInt(input.substr(0, pos1));\n    array[MINUTE] = toInt(input.substr(pos1, 2));\n    array[SECOND] = toInt(input.substr(pos2));\n});\n\n// LOCALES\n\nfunction localeIsPM (input) {\n    // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n    // Using charAt should be more compatible.\n    return ((input + '').toLowerCase().charAt(0) === 'p');\n}\n\nvar defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\nfunction localeMeridiem (hours, minutes, isLower) {\n    if (hours > 11) {\n        return isLower ? 'pm' : 'PM';\n    } else {\n        return isLower ? 'am' : 'AM';\n    }\n}\n\n\n// MOMENTS\n\n// Setting the hour should keep the time, because the user explicitly\n// specified which hour he wants. So trying to maintain the same hour (in\n// a new timezone) makes sense. Adding/subtracting hours does not follow\n// this rule.\nvar getSetHour = makeGetSet('Hours', true);\n\n// months\n// week\n// weekdays\n// meridiem\nvar baseConfig = {\n    calendar: defaultCalendar,\n    longDateFormat: defaultLongDateFormat,\n    invalidDate: defaultInvalidDate,\n    ordinal: defaultOrdinal,\n    dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n    relativeTime: defaultRelativeTime,\n\n    months: defaultLocaleMonths,\n    monthsShort: defaultLocaleMonthsShort,\n\n    week: defaultLocaleWeek,\n\n    weekdays: defaultLocaleWeekdays,\n    weekdaysMin: defaultLocaleWeekdaysMin,\n    weekdaysShort: defaultLocaleWeekdaysShort,\n\n    meridiemParse: defaultLocaleMeridiemParse\n};\n\n// internal storage for locale config files\nvar locales = {};\nvar localeFamilies = {};\nvar globalLocale;\n\nfunction normalizeLocale(key) {\n    return key ? key.toLowerCase().replace('_', '-') : key;\n}\n\n// pick the locale from the array\n// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\nfunction chooseLocale(names) {\n    var i = 0, j, next, locale, split;\n\n    while (i < names.length) {\n        split = normalizeLocale(names[i]).split('-');\n        j = split.length;\n        next = normalizeLocale(names[i + 1]);\n        next = next ? next.split('-') : null;\n        while (j > 0) {\n            locale = loadLocale(split.slice(0, j).join('-'));\n            if (locale) {\n                return locale;\n            }\n            if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                //the next array item is better than a shallower substring of this one\n                break;\n            }\n            j--;\n        }\n        i++;\n    }\n    return null;\n}\n\nfunction loadLocale(name) {\n    var oldLocale = null;\n    // TODO: Find a better way to register and load all the locales in Node\n    if (!locales[name] && (typeof module !== 'undefined') &&\n            module && module.exports) {\n        try {\n            oldLocale = globalLocale._abbr;\n            require('./locale/' + name);\n            // because defineLocale currently also sets the global locale, we\n            // want to undo that for lazy loaded locales\n            getSetGlobalLocale(oldLocale);\n        } catch (e) { }\n    }\n    return locales[name];\n}\n\n// This function will load locale and then set the global locale.  If\n// no arguments are passed in, it will simply return the current global\n// locale key.\nfunction getSetGlobalLocale (key, values) {\n    var data;\n    if (key) {\n        if (isUndefined(values)) {\n            data = getLocale(key);\n        }\n        else {\n            data = defineLocale(key, values);\n        }\n\n        if (data) {\n            // moment.duration._locale = moment._locale = data;\n            globalLocale = data;\n        }\n    }\n\n    return globalLocale._abbr;\n}\n\nfunction defineLocale (name, config) {\n    if (config !== null) {\n        var parentConfig = baseConfig;\n        config.abbr = name;\n        if (locales[name] != null) {\n            deprecateSimple('defineLocaleOverride',\n                    'use moment.updateLocale(localeName, config) to change ' +\n                    'an existing locale. moment.defineLocale(localeName, ' +\n                    'config) should only be used for creating a new locale ' +\n                    'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n            parentConfig = locales[name]._config;\n        } else if (config.parentLocale != null) {\n            if (locales[config.parentLocale] != null) {\n                parentConfig = locales[config.parentLocale]._config;\n            } else {\n                if (!localeFamilies[config.parentLocale]) {\n                    localeFamilies[config.parentLocale] = [];\n                }\n                localeFamilies[config.parentLocale].push({\n                    name: name,\n                    config: config\n                });\n                return null;\n            }\n        }\n        locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n        if (localeFamilies[name]) {\n            localeFamilies[name].forEach(function (x) {\n                defineLocale(x.name, x.config);\n            });\n        }\n\n        // backwards compat for now: also set the locale\n        // make sure we set the locale AFTER all child locales have been\n        // created, so we won't end up with the child locale set.\n        getSetGlobalLocale(name);\n\n\n        return locales[name];\n    } else {\n        // useful for testing\n        delete locales[name];\n        return null;\n    }\n}\n\nfunction updateLocale(name, config) {\n    if (config != null) {\n        var locale, parentConfig = baseConfig;\n        // MERGE\n        if (locales[name] != null) {\n            parentConfig = locales[name]._config;\n        }\n        config = mergeConfigs(parentConfig, config);\n        locale = new Locale(config);\n        locale.parentLocale = locales[name];\n        locales[name] = locale;\n\n        // backwards compat for now: also set the locale\n        getSetGlobalLocale(name);\n    } else {\n        // pass null for config to unupdate, useful for tests\n        if (locales[name] != null) {\n            if (locales[name].parentLocale != null) {\n                locales[name] = locales[name].parentLocale;\n            } else if (locales[name] != null) {\n                delete locales[name];\n            }\n        }\n    }\n    return locales[name];\n}\n\n// returns locale data\nfunction getLocale (key) {\n    var locale;\n\n    if (key && key._locale && key._locale._abbr) {\n        key = key._locale._abbr;\n    }\n\n    if (!key) {\n        return globalLocale;\n    }\n\n    if (!isArray(key)) {\n        //short-circuit everything else\n        locale = loadLocale(key);\n        if (locale) {\n            return locale;\n        }\n        key = [key];\n    }\n\n    return chooseLocale(key);\n}\n\nfunction listLocales() {\n    return keys$1(locales);\n}\n\nfunction checkOverflow (m) {\n    var overflow;\n    var a = m._a;\n\n    if (a && getParsingFlags(m).overflow === -2) {\n        overflow =\n            a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n            a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n            a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n            a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n            a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n            a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n            -1;\n\n        if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n            overflow = DATE;\n        }\n        if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n            overflow = WEEK;\n        }\n        if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n            overflow = WEEKDAY;\n        }\n\n        getParsingFlags(m).overflow = overflow;\n    }\n\n    return m;\n}\n\n// iso 8601 regex\n// 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\nvar extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\nvar basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\nvar tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\nvar isoDates = [\n    ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n    ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n    ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n    ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n    ['YYYY-DDD', /\\d{4}-\\d{3}/],\n    ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n    ['YYYYYYMMDD', /[+-]\\d{10}/],\n    ['YYYYMMDD', /\\d{8}/],\n    // YYYYMM is NOT allowed by the standard\n    ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n    ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n    ['YYYYDDD', /\\d{7}/]\n];\n\n// iso time formats and regexes\nvar isoTimes = [\n    ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n    ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n    ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n    ['HH:mm', /\\d\\d:\\d\\d/],\n    ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n    ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n    ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n    ['HHmm', /\\d\\d\\d\\d/],\n    ['HH', /\\d\\d/]\n];\n\nvar aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n// date from iso format\nfunction configFromISO(config) {\n    var i, l,\n        string = config._i,\n        match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n        allowTime, dateFormat, timeFormat, tzFormat;\n\n    if (match) {\n        getParsingFlags(config).iso = true;\n\n        for (i = 0, l = isoDates.length; i < l; i++) {\n            if (isoDates[i][1].exec(match[1])) {\n                dateFormat = isoDates[i][0];\n                allowTime = isoDates[i][2] !== false;\n                break;\n            }\n        }\n        if (dateFormat == null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[3]) {\n            for (i = 0, l = isoTimes.length; i < l; i++) {\n                if (isoTimes[i][1].exec(match[3])) {\n                    // match[2] should be 'T' or space\n                    timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                    break;\n                }\n            }\n            if (timeFormat == null) {\n                config._isValid = false;\n                return;\n            }\n        }\n        if (!allowTime && timeFormat != null) {\n            config._isValid = false;\n            return;\n        }\n        if (match[4]) {\n            if (tzRegex.exec(match[4])) {\n                tzFormat = 'Z';\n            } else {\n                config._isValid = false;\n                return;\n            }\n        }\n        config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n        configFromStringAndFormat(config);\n    } else {\n        config._isValid = false;\n    }\n}\n\n// RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\nvar basicRfcRegex = /^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d?\\d\\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(?:\\d\\d)?\\d\\d\\s)(\\d\\d:\\d\\d)(\\:\\d\\d)?(\\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\\d{4}))$/;\n\n// date and time from ref 2822 format\nfunction configFromRFC2822(config) {\n    var string, match, dayFormat,\n        dateFormat, timeFormat, tzFormat;\n    var timezones = {\n        ' GMT': ' +0000',\n        ' EDT': ' -0400',\n        ' EST': ' -0500',\n        ' CDT': ' -0500',\n        ' CST': ' -0600',\n        ' MDT': ' -0600',\n        ' MST': ' -0700',\n        ' PDT': ' -0700',\n        ' PST': ' -0800'\n    };\n    var military = 'YXWVUTSRQPONZABCDEFGHIKLM';\n    var timezone, timezoneIndex;\n\n    string = config._i\n        .replace(/\\([^\\)]*\\)|[\\n\\t]/g, ' ') // Remove comments and folding whitespace\n        .replace(/(\\s\\s+)/g, ' ') // Replace multiple-spaces with a single space\n        .replace(/^\\s|\\s$/g, ''); // Remove leading and trailing spaces\n    match = basicRfcRegex.exec(string);\n\n    if (match) {\n        dayFormat = match[1] ? 'ddd' + ((match[1].length === 5) ? ', ' : ' ') : '';\n        dateFormat = 'D MMM ' + ((match[2].length > 10) ? 'YYYY ' : 'YY ');\n        timeFormat = 'HH:mm' + (match[4] ? ':ss' : '');\n\n        // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n        if (match[1]) { // day of week given\n            var momentDate = new Date(match[2]);\n            var momentDay = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][momentDate.getDay()];\n\n            if (match[1].substr(0,3) !== momentDay) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return;\n            }\n        }\n\n        switch (match[5].length) {\n            case 2: // military\n                if (timezoneIndex === 0) {\n                    timezone = ' +0000';\n                } else {\n                    timezoneIndex = military.indexOf(match[5][1].toUpperCase()) - 12;\n                    timezone = ((timezoneIndex < 0) ? ' -' : ' +') +\n                        (('' + timezoneIndex).replace(/^-?/, '0')).match(/..$/)[0] + '00';\n                }\n                break;\n            case 4: // Zone\n                timezone = timezones[match[5]];\n                break;\n            default: // UT or +/-9999\n                timezone = timezones[' GMT'];\n        }\n        match[5] = timezone;\n        config._i = match.splice(1).join('');\n        tzFormat = ' ZZ';\n        config._f = dayFormat + dateFormat + timeFormat + tzFormat;\n        configFromStringAndFormat(config);\n        getParsingFlags(config).rfc2822 = true;\n    } else {\n        config._isValid = false;\n    }\n}\n\n// date from iso format or fallback\nfunction configFromString(config) {\n    var matched = aspNetJsonRegex.exec(config._i);\n\n    if (matched !== null) {\n        config._d = new Date(+matched[1]);\n        return;\n    }\n\n    configFromISO(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    configFromRFC2822(config);\n    if (config._isValid === false) {\n        delete config._isValid;\n    } else {\n        return;\n    }\n\n    // Final attempt, use Input Fallback\n    hooks.createFromInputFallback(config);\n}\n\nhooks.createFromInputFallback = deprecate(\n    'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n    'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n    'discouraged and will be removed in an upcoming major release. Please refer to ' +\n    'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n    function (config) {\n        config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n    }\n);\n\n// Pick the first defined of two or three arguments.\nfunction defaults(a, b, c) {\n    if (a != null) {\n        return a;\n    }\n    if (b != null) {\n        return b;\n    }\n    return c;\n}\n\nfunction currentDateArray(config) {\n    // hooks is actually the exported moment object\n    var nowValue = new Date(hooks.now());\n    if (config._useUTC) {\n        return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n    }\n    return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n}\n\n// convert an array to a date.\n// the array should mirror the parameters below\n// note: all values past the year are optional and will default to the lowest possible value.\n// [year, month, day , hour, minute, second, millisecond]\nfunction configFromArray (config) {\n    var i, date, input = [], currentDate, yearToUse;\n\n    if (config._d) {\n        return;\n    }\n\n    currentDate = currentDateArray(config);\n\n    //compute day of the year from weeks and weekdays\n    if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n        dayOfYearFromWeekInfo(config);\n    }\n\n    //if the day of the year is set, figure out what it is\n    if (config._dayOfYear != null) {\n        yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n        if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n            getParsingFlags(config)._overflowDayOfYear = true;\n        }\n\n        date = createUTCDate(yearToUse, 0, config._dayOfYear);\n        config._a[MONTH] = date.getUTCMonth();\n        config._a[DATE] = date.getUTCDate();\n    }\n\n    // Default to current date.\n    // * if no year, month, day of month are given, default to today\n    // * if day of month is given, default month and year\n    // * if month is given, default only year\n    // * if year is given, don't default anything\n    for (i = 0; i < 3 && config._a[i] == null; ++i) {\n        config._a[i] = input[i] = currentDate[i];\n    }\n\n    // Zero out whatever was not defaulted, including time\n    for (; i < 7; i++) {\n        config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n    }\n\n    // Check for 24:00:00.000\n    if (config._a[HOUR] === 24 &&\n            config._a[MINUTE] === 0 &&\n            config._a[SECOND] === 0 &&\n            config._a[MILLISECOND] === 0) {\n        config._nextDay = true;\n        config._a[HOUR] = 0;\n    }\n\n    config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n    // Apply timezone offset from input. The actual utcOffset can be changed\n    // with parseZone.\n    if (config._tzm != null) {\n        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n    }\n\n    if (config._nextDay) {\n        config._a[HOUR] = 24;\n    }\n}\n\nfunction dayOfYearFromWeekInfo(config) {\n    var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n    w = config._w;\n    if (w.GG != null || w.W != null || w.E != null) {\n        dow = 1;\n        doy = 4;\n\n        // TODO: We need to take the current isoWeekYear, but that depends on\n        // how we interpret now (local, utc, fixed offset). So create\n        // a now version of current config (take local/utc/offset flags, and\n        // create now).\n        weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n        week = defaults(w.W, 1);\n        weekday = defaults(w.E, 1);\n        if (weekday < 1 || weekday > 7) {\n            weekdayOverflow = true;\n        }\n    } else {\n        dow = config._locale._week.dow;\n        doy = config._locale._week.doy;\n\n        var curWeek = weekOfYear(createLocal(), dow, doy);\n\n        weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n        // Default to current week.\n        week = defaults(w.w, curWeek.week);\n\n        if (w.d != null) {\n            // weekday -- low day numbers are considered next week\n            weekday = w.d;\n            if (weekday < 0 || weekday > 6) {\n                weekdayOverflow = true;\n            }\n        } else if (w.e != null) {\n            // local weekday -- counting starts from begining of week\n            weekday = w.e + dow;\n            if (w.e < 0 || w.e > 6) {\n                weekdayOverflow = true;\n            }\n        } else {\n            // default to begining of week\n            weekday = dow;\n        }\n    }\n    if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n        getParsingFlags(config)._overflowWeeks = true;\n    } else if (weekdayOverflow != null) {\n        getParsingFlags(config)._overflowWeekday = true;\n    } else {\n        temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n        config._a[YEAR] = temp.year;\n        config._dayOfYear = temp.dayOfYear;\n    }\n}\n\n// constant that refers to the ISO standard\nhooks.ISO_8601 = function () {};\n\n// constant that refers to the RFC 2822 form\nhooks.RFC_2822 = function () {};\n\n// date from string and format string\nfunction configFromStringAndFormat(config) {\n    // TODO: Move this to another part of the creation flow to prevent circular deps\n    if (config._f === hooks.ISO_8601) {\n        configFromISO(config);\n        return;\n    }\n    if (config._f === hooks.RFC_2822) {\n        configFromRFC2822(config);\n        return;\n    }\n    config._a = [];\n    getParsingFlags(config).empty = true;\n\n    // This array is used to make a Date, either with `new Date` or `Date.UTC`\n    var string = '' + config._i,\n        i, parsedInput, tokens, token, skipped,\n        stringLength = string.length,\n        totalParsedInputLength = 0;\n\n    tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n        // console.log('token', token, 'parsedInput', parsedInput,\n        //         'regex', getParseRegexForToken(token, config));\n        if (parsedInput) {\n            skipped = string.substr(0, string.indexOf(parsedInput));\n            if (skipped.length > 0) {\n                getParsingFlags(config).unusedInput.push(skipped);\n            }\n            string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n            totalParsedInputLength += parsedInput.length;\n        }\n        // don't parse if it's not a known token\n        if (formatTokenFunctions[token]) {\n            if (parsedInput) {\n                getParsingFlags(config).empty = false;\n            }\n            else {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n            addTimeToArrayFromToken(token, parsedInput, config);\n        }\n        else if (config._strict && !parsedInput) {\n            getParsingFlags(config).unusedTokens.push(token);\n        }\n    }\n\n    // add remaining unparsed input length to the string\n    getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n    if (string.length > 0) {\n        getParsingFlags(config).unusedInput.push(string);\n    }\n\n    // clear _12h flag if hour is <= 12\n    if (config._a[HOUR] <= 12 &&\n        getParsingFlags(config).bigHour === true &&\n        config._a[HOUR] > 0) {\n        getParsingFlags(config).bigHour = undefined;\n    }\n\n    getParsingFlags(config).parsedDateParts = config._a.slice(0);\n    getParsingFlags(config).meridiem = config._meridiem;\n    // handle meridiem\n    config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n    configFromArray(config);\n    checkOverflow(config);\n}\n\n\nfunction meridiemFixWrap (locale, hour, meridiem) {\n    var isPm;\n\n    if (meridiem == null) {\n        // nothing to do\n        return hour;\n    }\n    if (locale.meridiemHour != null) {\n        return locale.meridiemHour(hour, meridiem);\n    } else if (locale.isPM != null) {\n        // Fallback\n        isPm = locale.isPM(meridiem);\n        if (isPm && hour < 12) {\n            hour += 12;\n        }\n        if (!isPm && hour === 12) {\n            hour = 0;\n        }\n        return hour;\n    } else {\n        // this is not supposed to happen\n        return hour;\n    }\n}\n\n// date from string and array of format strings\nfunction configFromStringAndArray(config) {\n    var tempConfig,\n        bestMoment,\n\n        scoreToBeat,\n        i,\n        currentScore;\n\n    if (config._f.length === 0) {\n        getParsingFlags(config).invalidFormat = true;\n        config._d = new Date(NaN);\n        return;\n    }\n\n    for (i = 0; i < config._f.length; i++) {\n        currentScore = 0;\n        tempConfig = copyConfig({}, config);\n        if (config._useUTC != null) {\n            tempConfig._useUTC = config._useUTC;\n        }\n        tempConfig._f = config._f[i];\n        configFromStringAndFormat(tempConfig);\n\n        if (!isValid(tempConfig)) {\n            continue;\n        }\n\n        // if there is any input that was not parsed add a penalty for that format\n        currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n        //or tokens\n        currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n        getParsingFlags(tempConfig).score = currentScore;\n\n        if (scoreToBeat == null || currentScore < scoreToBeat) {\n            scoreToBeat = currentScore;\n            bestMoment = tempConfig;\n        }\n    }\n\n    extend(config, bestMoment || tempConfig);\n}\n\nfunction configFromObject(config) {\n    if (config._d) {\n        return;\n    }\n\n    var i = normalizeObjectUnits(config._i);\n    config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n        return obj && parseInt(obj, 10);\n    });\n\n    configFromArray(config);\n}\n\nfunction createFromConfig (config) {\n    var res = new Moment(checkOverflow(prepareConfig(config)));\n    if (res._nextDay) {\n        // Adding is smart enough around DST\n        res.add(1, 'd');\n        res._nextDay = undefined;\n    }\n\n    return res;\n}\n\nfunction prepareConfig (config) {\n    var input = config._i,\n        format = config._f;\n\n    config._locale = config._locale || getLocale(config._l);\n\n    if (input === null || (format === undefined && input === '')) {\n        return createInvalid({nullInput: true});\n    }\n\n    if (typeof input === 'string') {\n        config._i = input = config._locale.preparse(input);\n    }\n\n    if (isMoment(input)) {\n        return new Moment(checkOverflow(input));\n    } else if (isDate(input)) {\n        config._d = input;\n    } else if (isArray(format)) {\n        configFromStringAndArray(config);\n    } else if (format) {\n        configFromStringAndFormat(config);\n    }  else {\n        configFromInput(config);\n    }\n\n    if (!isValid(config)) {\n        config._d = null;\n    }\n\n    return config;\n}\n\nfunction configFromInput(config) {\n    var input = config._i;\n    if (isUndefined(input)) {\n        config._d = new Date(hooks.now());\n    } else if (isDate(input)) {\n        config._d = new Date(input.valueOf());\n    } else if (typeof input === 'string') {\n        configFromString(config);\n    } else if (isArray(input)) {\n        config._a = map(input.slice(0), function (obj) {\n            return parseInt(obj, 10);\n        });\n        configFromArray(config);\n    } else if (isObject(input)) {\n        configFromObject(config);\n    } else if (isNumber(input)) {\n        // from milliseconds\n        config._d = new Date(input);\n    } else {\n        hooks.createFromInputFallback(config);\n    }\n}\n\nfunction createLocalOrUTC (input, format, locale, strict, isUTC) {\n    var c = {};\n\n    if (locale === true || locale === false) {\n        strict = locale;\n        locale = undefined;\n    }\n\n    if ((isObject(input) && isObjectEmpty(input)) ||\n            (isArray(input) && input.length === 0)) {\n        input = undefined;\n    }\n    // object construction must be done this way.\n    // https://github.com/moment/moment/issues/1423\n    c._isAMomentObject = true;\n    c._useUTC = c._isUTC = isUTC;\n    c._l = locale;\n    c._i = input;\n    c._f = format;\n    c._strict = strict;\n\n    return createFromConfig(c);\n}\n\nfunction createLocal (input, format, locale, strict) {\n    return createLocalOrUTC(input, format, locale, strict, false);\n}\n\nvar prototypeMin = deprecate(\n    'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n    function () {\n        var other = createLocal.apply(null, arguments);\n        if (this.isValid() && other.isValid()) {\n            return other < this ? this : other;\n        } else {\n            return createInvalid();\n        }\n    }\n);\n\nvar prototypeMax = deprecate(\n    'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n    function () {\n        var other = createLocal.apply(null, arguments);\n        if (this.isValid() && other.isValid()) {\n            return other > this ? this : other;\n        } else {\n            return createInvalid();\n        }\n    }\n);\n\n// Pick a moment m from moments so that m[fn](other) is true for all\n// other. This relies on the function fn to be transitive.\n//\n// moments should either be an array of moment objects or an array, whose\n// first element is an array of moment objects.\nfunction pickBy(fn, moments) {\n    var res, i;\n    if (moments.length === 1 && isArray(moments[0])) {\n        moments = moments[0];\n    }\n    if (!moments.length) {\n        return createLocal();\n    }\n    res = moments[0];\n    for (i = 1; i < moments.length; ++i) {\n        if (!moments[i].isValid() || moments[i][fn](res)) {\n            res = moments[i];\n        }\n    }\n    return res;\n}\n\n// TODO: Use [].sort instead?\nfunction min () {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isBefore', args);\n}\n\nfunction max () {\n    var args = [].slice.call(arguments, 0);\n\n    return pickBy('isAfter', args);\n}\n\nvar now = function () {\n    return Date.now ? Date.now() : +(new Date());\n};\n\nvar ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\nfunction isDurationValid(m) {\n    for (var key in m) {\n        if (!(ordering.indexOf(key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n            return false;\n        }\n    }\n\n    var unitHasDecimal = false;\n    for (var i = 0; i < ordering.length; ++i) {\n        if (m[ordering[i]]) {\n            if (unitHasDecimal) {\n                return false; // only allow non-integers for smallest unit\n            }\n            if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                unitHasDecimal = true;\n            }\n        }\n    }\n\n    return true;\n}\n\nfunction isValid$1() {\n    return this._isValid;\n}\n\nfunction createInvalid$1() {\n    return createDuration(NaN);\n}\n\nfunction Duration (duration) {\n    var normalizedInput = normalizeObjectUnits(duration),\n        years = normalizedInput.year || 0,\n        quarters = normalizedInput.quarter || 0,\n        months = normalizedInput.month || 0,\n        weeks = normalizedInput.week || 0,\n        days = normalizedInput.day || 0,\n        hours = normalizedInput.hour || 0,\n        minutes = normalizedInput.minute || 0,\n        seconds = normalizedInput.second || 0,\n        milliseconds = normalizedInput.millisecond || 0;\n\n    this._isValid = isDurationValid(normalizedInput);\n\n    // representation for dateAddRemove\n    this._milliseconds = +milliseconds +\n        seconds * 1e3 + // 1000\n        minutes * 6e4 + // 1000 * 60\n        hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n    // Because of dateAddRemove treats 24 hours as different from a\n    // day when working around DST, we need to store them separately\n    this._days = +days +\n        weeks * 7;\n    // It is impossible translate months into days without knowing\n    // which months you are are talking about, so we have to store\n    // it separately.\n    this._months = +months +\n        quarters * 3 +\n        years * 12;\n\n    this._data = {};\n\n    this._locale = getLocale();\n\n    this._bubble();\n}\n\nfunction isDuration (obj) {\n    return obj instanceof Duration;\n}\n\nfunction absRound (number) {\n    if (number < 0) {\n        return Math.round(-1 * number) * -1;\n    } else {\n        return Math.round(number);\n    }\n}\n\n// FORMATTING\n\nfunction offset (token, separator) {\n    addFormatToken(token, 0, 0, function () {\n        var offset = this.utcOffset();\n        var sign = '+';\n        if (offset < 0) {\n            offset = -offset;\n            sign = '-';\n        }\n        return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n    });\n}\n\noffset('Z', ':');\noffset('ZZ', '');\n\n// PARSING\n\naddRegexToken('Z',  matchShortOffset);\naddRegexToken('ZZ', matchShortOffset);\naddParseToken(['Z', 'ZZ'], function (input, array, config) {\n    config._useUTC = true;\n    config._tzm = offsetFromString(matchShortOffset, input);\n});\n\n// HELPERS\n\n// timezone chunker\n// '+10:00' > ['10',  '00']\n// '-1530'  > ['-15', '30']\nvar chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\nfunction offsetFromString(matcher, string) {\n    var matches = (string || '').match(matcher);\n\n    if (matches === null) {\n        return null;\n    }\n\n    var chunk   = matches[matches.length - 1] || [];\n    var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n    var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n    return minutes === 0 ?\n      0 :\n      parts[0] === '+' ? minutes : -minutes;\n}\n\n// Return a moment from input, that is local/utc/zone equivalent to model.\nfunction cloneWithOffset(input, model) {\n    var res, diff;\n    if (model._isUTC) {\n        res = model.clone();\n        diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n        // Use low-level api, because this fn is low-level api.\n        res._d.setTime(res._d.valueOf() + diff);\n        hooks.updateOffset(res, false);\n        return res;\n    } else {\n        return createLocal(input).local();\n    }\n}\n\nfunction getDateOffset (m) {\n    // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n    // https://github.com/moment/moment/pull/1871\n    return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n}\n\n// HOOKS\n\n// This function will be called whenever a moment is mutated.\n// It is intended to keep the offset in sync with the timezone.\nhooks.updateOffset = function () {};\n\n// MOMENTS\n\n// keepLocalTime = true means only change the timezone, without\n// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n// +0200, so we adjust the time as needed, to be valid.\n//\n// Keeping the time actually adds/subtracts (one hour)\n// from the actual represented time. That is why we call updateOffset\n// a second time. In case it wants us to change the offset again\n// _changeInProgress == true case, then we have to adjust, because\n// there is no such time in the given timezone.\nfunction getSetOffset (input, keepLocalTime, keepMinutes) {\n    var offset = this._offset || 0,\n        localAdjust;\n    if (!this.isValid()) {\n        return input != null ? this : NaN;\n    }\n    if (input != null) {\n        if (typeof input === 'string') {\n            input = offsetFromString(matchShortOffset, input);\n            if (input === null) {\n                return this;\n            }\n        } else if (Math.abs(input) < 16 && !keepMinutes) {\n            input = input * 60;\n        }\n        if (!this._isUTC && keepLocalTime) {\n            localAdjust = getDateOffset(this);\n        }\n        this._offset = input;\n        this._isUTC = true;\n        if (localAdjust != null) {\n            this.add(localAdjust, 'm');\n        }\n        if (offset !== input) {\n            if (!keepLocalTime || this._changeInProgress) {\n                addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n            } else if (!this._changeInProgress) {\n                this._changeInProgress = true;\n                hooks.updateOffset(this, true);\n                this._changeInProgress = null;\n            }\n        }\n        return this;\n    } else {\n        return this._isUTC ? offset : getDateOffset(this);\n    }\n}\n\nfunction getSetZone (input, keepLocalTime) {\n    if (input != null) {\n        if (typeof input !== 'string') {\n            input = -input;\n        }\n\n        this.utcOffset(input, keepLocalTime);\n\n        return this;\n    } else {\n        return -this.utcOffset();\n    }\n}\n\nfunction setOffsetToUTC (keepLocalTime) {\n    return this.utcOffset(0, keepLocalTime);\n}\n\nfunction setOffsetToLocal (keepLocalTime) {\n    if (this._isUTC) {\n        this.utcOffset(0, keepLocalTime);\n        this._isUTC = false;\n\n        if (keepLocalTime) {\n            this.subtract(getDateOffset(this), 'm');\n        }\n    }\n    return this;\n}\n\nfunction setOffsetToParsedOffset () {\n    if (this._tzm != null) {\n        this.utcOffset(this._tzm, false, true);\n    } else if (typeof this._i === 'string') {\n        var tZone = offsetFromString(matchOffset, this._i);\n        if (tZone != null) {\n            this.utcOffset(tZone);\n        }\n        else {\n            this.utcOffset(0, true);\n        }\n    }\n    return this;\n}\n\nfunction hasAlignedHourOffset (input) {\n    if (!this.isValid()) {\n        return false;\n    }\n    input = input ? createLocal(input).utcOffset() : 0;\n\n    return (this.utcOffset() - input) % 60 === 0;\n}\n\nfunction isDaylightSavingTime () {\n    return (\n        this.utcOffset() > this.clone().month(0).utcOffset() ||\n        this.utcOffset() > this.clone().month(5).utcOffset()\n    );\n}\n\nfunction isDaylightSavingTimeShifted () {\n    if (!isUndefined(this._isDSTShifted)) {\n        return this._isDSTShifted;\n    }\n\n    var c = {};\n\n    copyConfig(c, this);\n    c = prepareConfig(c);\n\n    if (c._a) {\n        var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n        this._isDSTShifted = this.isValid() &&\n            compareArrays(c._a, other.toArray()) > 0;\n    } else {\n        this._isDSTShifted = false;\n    }\n\n    return this._isDSTShifted;\n}\n\nfunction isLocal () {\n    return this.isValid() ? !this._isUTC : false;\n}\n\nfunction isUtcOffset () {\n    return this.isValid() ? this._isUTC : false;\n}\n\nfunction isUtc () {\n    return this.isValid() ? this._isUTC && this._offset === 0 : false;\n}\n\n// ASP.NET json date format regex\nvar aspNetRegex = /^(\\-)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n// from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n// somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n// and further modified to allow for strings containing both week and day\nvar isoRegex = /^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;\n\nfunction createDuration (input, key) {\n    var duration = input,\n        // matching against regexp is expensive, do it on demand\n        match = null,\n        sign,\n        ret,\n        diffRes;\n\n    if (isDuration(input)) {\n        duration = {\n            ms : input._milliseconds,\n            d  : input._days,\n            M  : input._months\n        };\n    } else if (isNumber(input)) {\n        duration = {};\n        if (key) {\n            duration[key] = input;\n        } else {\n            duration.milliseconds = input;\n        }\n    } else if (!!(match = aspNetRegex.exec(input))) {\n        sign = (match[1] === '-') ? -1 : 1;\n        duration = {\n            y  : 0,\n            d  : toInt(match[DATE])                         * sign,\n            h  : toInt(match[HOUR])                         * sign,\n            m  : toInt(match[MINUTE])                       * sign,\n            s  : toInt(match[SECOND])                       * sign,\n            ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n        };\n    } else if (!!(match = isoRegex.exec(input))) {\n        sign = (match[1] === '-') ? -1 : 1;\n        duration = {\n            y : parseIso(match[2], sign),\n            M : parseIso(match[3], sign),\n            w : parseIso(match[4], sign),\n            d : parseIso(match[5], sign),\n            h : parseIso(match[6], sign),\n            m : parseIso(match[7], sign),\n            s : parseIso(match[8], sign)\n        };\n    } else if (duration == null) {// checks for null or undefined\n        duration = {};\n    } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n        diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n        duration = {};\n        duration.ms = diffRes.milliseconds;\n        duration.M = diffRes.months;\n    }\n\n    ret = new Duration(duration);\n\n    if (isDuration(input) && hasOwnProp(input, '_locale')) {\n        ret._locale = input._locale;\n    }\n\n    return ret;\n}\n\ncreateDuration.fn = Duration.prototype;\ncreateDuration.invalid = createInvalid$1;\n\nfunction parseIso (inp, sign) {\n    // We'd normally use ~~inp for this, but unfortunately it also\n    // converts floats to ints.\n    // inp may be undefined, so careful calling replace on it.\n    var res = inp && parseFloat(inp.replace(',', '.'));\n    // apply sign while we're at it\n    return (isNaN(res) ? 0 : res) * sign;\n}\n\nfunction positiveMomentsDifference(base, other) {\n    var res = {milliseconds: 0, months: 0};\n\n    res.months = other.month() - base.month() +\n        (other.year() - base.year()) * 12;\n    if (base.clone().add(res.months, 'M').isAfter(other)) {\n        --res.months;\n    }\n\n    res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n    return res;\n}\n\nfunction momentsDifference(base, other) {\n    var res;\n    if (!(base.isValid() && other.isValid())) {\n        return {milliseconds: 0, months: 0};\n    }\n\n    other = cloneWithOffset(other, base);\n    if (base.isBefore(other)) {\n        res = positiveMomentsDifference(base, other);\n    } else {\n        res = positiveMomentsDifference(other, base);\n        res.milliseconds = -res.milliseconds;\n        res.months = -res.months;\n    }\n\n    return res;\n}\n\n// TODO: remove 'name' arg after deprecation is removed\nfunction createAdder(direction, name) {\n    return function (val, period) {\n        var dur, tmp;\n        //invert the arguments, but complain about it\n        if (period !== null && !isNaN(+period)) {\n            deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n            'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n            tmp = val; val = period; period = tmp;\n        }\n\n        val = typeof val === 'string' ? +val : val;\n        dur = createDuration(val, period);\n        addSubtract(this, dur, direction);\n        return this;\n    };\n}\n\nfunction addSubtract (mom, duration, isAdding, updateOffset) {\n    var milliseconds = duration._milliseconds,\n        days = absRound(duration._days),\n        months = absRound(duration._months);\n\n    if (!mom.isValid()) {\n        // No op\n        return;\n    }\n\n    updateOffset = updateOffset == null ? true : updateOffset;\n\n    if (milliseconds) {\n        mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n    }\n    if (days) {\n        set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n    }\n    if (months) {\n        setMonth(mom, get(mom, 'Month') + months * isAdding);\n    }\n    if (updateOffset) {\n        hooks.updateOffset(mom, days || months);\n    }\n}\n\nvar add      = createAdder(1, 'add');\nvar subtract = createAdder(-1, 'subtract');\n\nfunction getCalendarFormat(myMoment, now) {\n    var diff = myMoment.diff(now, 'days', true);\n    return diff < -6 ? 'sameElse' :\n            diff < -1 ? 'lastWeek' :\n            diff < 0 ? 'lastDay' :\n            diff < 1 ? 'sameDay' :\n            diff < 2 ? 'nextDay' :\n            diff < 7 ? 'nextWeek' : 'sameElse';\n}\n\nfunction calendar$1 (time, formats) {\n    // We want to compare the start of today, vs this.\n    // Getting start-of-today depends on whether we're local/utc/offset or not.\n    var now = time || createLocal(),\n        sod = cloneWithOffset(now, this).startOf('day'),\n        format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n    var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n    return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n}\n\nfunction clone () {\n    return new Moment(this);\n}\n\nfunction isAfter (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() > localInput.valueOf();\n    } else {\n        return localInput.valueOf() < this.clone().startOf(units).valueOf();\n    }\n}\n\nfunction isBefore (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input);\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() < localInput.valueOf();\n    } else {\n        return this.clone().endOf(units).valueOf() < localInput.valueOf();\n    }\n}\n\nfunction isBetween (from, to, units, inclusivity) {\n    inclusivity = inclusivity || '()';\n    return (inclusivity[0] === '(' ? this.isAfter(from, units) : !this.isBefore(from, units)) &&\n        (inclusivity[1] === ')' ? this.isBefore(to, units) : !this.isAfter(to, units));\n}\n\nfunction isSame (input, units) {\n    var localInput = isMoment(input) ? input : createLocal(input),\n        inputMs;\n    if (!(this.isValid() && localInput.isValid())) {\n        return false;\n    }\n    units = normalizeUnits(units || 'millisecond');\n    if (units === 'millisecond') {\n        return this.valueOf() === localInput.valueOf();\n    } else {\n        inputMs = localInput.valueOf();\n        return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n    }\n}\n\nfunction isSameOrAfter (input, units) {\n    return this.isSame(input, units) || this.isAfter(input,units);\n}\n\nfunction isSameOrBefore (input, units) {\n    return this.isSame(input, units) || this.isBefore(input,units);\n}\n\nfunction diff (input, units, asFloat) {\n    var that,\n        zoneDelta,\n        delta, output;\n\n    if (!this.isValid()) {\n        return NaN;\n    }\n\n    that = cloneWithOffset(input, this);\n\n    if (!that.isValid()) {\n        return NaN;\n    }\n\n    zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n    units = normalizeUnits(units);\n\n    if (units === 'year' || units === 'month' || units === 'quarter') {\n        output = monthDiff(this, that);\n        if (units === 'quarter') {\n            output = output / 3;\n        } else if (units === 'year') {\n            output = output / 12;\n        }\n    } else {\n        delta = this - that;\n        output = units === 'second' ? delta / 1e3 : // 1000\n            units === 'minute' ? delta / 6e4 : // 1000 * 60\n            units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60\n            units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\n            units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\n            delta;\n    }\n    return asFloat ? output : absFloor(output);\n}\n\nfunction monthDiff (a, b) {\n    // difference in months\n    var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n        // b is in (anchor - 1 month, anchor + 1 month)\n        anchor = a.clone().add(wholeMonthDiff, 'months'),\n        anchor2, adjust;\n\n    if (b - anchor < 0) {\n        anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor - anchor2);\n    } else {\n        anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n        // linear across the month\n        adjust = (b - anchor) / (anchor2 - anchor);\n    }\n\n    //check for negative zero, return zero if negative zero\n    return -(wholeMonthDiff + adjust) || 0;\n}\n\nhooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\nhooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\nfunction toString () {\n    return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n}\n\nfunction toISOString() {\n    if (!this.isValid()) {\n        return null;\n    }\n    var m = this.clone().utc();\n    if (m.year() < 0 || m.year() > 9999) {\n        return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n    }\n    if (isFunction(Date.prototype.toISOString)) {\n        // native implementation is ~50x faster, use it when we can\n        return this.toDate().toISOString();\n    }\n    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n}\n\n/**\n * Return a human readable representation of a moment that can\n * also be evaluated to get a new moment which is the same\n *\n * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n */\nfunction inspect () {\n    if (!this.isValid()) {\n        return 'moment.invalid(/* ' + this._i + ' */)';\n    }\n    var func = 'moment';\n    var zone = '';\n    if (!this.isLocal()) {\n        func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n        zone = 'Z';\n    }\n    var prefix = '[' + func + '(\"]';\n    var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n    var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n    var suffix = zone + '[\")]';\n\n    return this.format(prefix + year + datetime + suffix);\n}\n\nfunction format (inputString) {\n    if (!inputString) {\n        inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n    }\n    var output = formatMoment(this, inputString);\n    return this.localeData().postformat(output);\n}\n\nfunction from (time, withoutSuffix) {\n    if (this.isValid() &&\n            ((isMoment(time) && time.isValid()) ||\n             createLocal(time).isValid())) {\n        return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction fromNow (withoutSuffix) {\n    return this.from(createLocal(), withoutSuffix);\n}\n\nfunction to (time, withoutSuffix) {\n    if (this.isValid() &&\n            ((isMoment(time) && time.isValid()) ||\n             createLocal(time).isValid())) {\n        return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n    } else {\n        return this.localeData().invalidDate();\n    }\n}\n\nfunction toNow (withoutSuffix) {\n    return this.to(createLocal(), withoutSuffix);\n}\n\n// If passed a locale key, it will set the locale for this\n// instance.  Otherwise, it will return the locale configuration\n// variables for this instance.\nfunction locale (key) {\n    var newLocaleData;\n\n    if (key === undefined) {\n        return this._locale._abbr;\n    } else {\n        newLocaleData = getLocale(key);\n        if (newLocaleData != null) {\n            this._locale = newLocaleData;\n        }\n        return this;\n    }\n}\n\nvar lang = deprecate(\n    'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n    function (key) {\n        if (key === undefined) {\n            return this.localeData();\n        } else {\n            return this.locale(key);\n        }\n    }\n);\n\nfunction localeData () {\n    return this._locale;\n}\n\nfunction startOf (units) {\n    units = normalizeUnits(units);\n    // the following switch intentionally omits break keywords\n    // to utilize falling through the cases.\n    switch (units) {\n        case 'year':\n            this.month(0);\n            /* falls through */\n        case 'quarter':\n        case 'month':\n            this.date(1);\n            /* falls through */\n        case 'week':\n        case 'isoWeek':\n        case 'day':\n        case 'date':\n            this.hours(0);\n            /* falls through */\n        case 'hour':\n            this.minutes(0);\n            /* falls through */\n        case 'minute':\n            this.seconds(0);\n            /* falls through */\n        case 'second':\n            this.milliseconds(0);\n    }\n\n    // weeks are a special case\n    if (units === 'week') {\n        this.weekday(0);\n    }\n    if (units === 'isoWeek') {\n        this.isoWeekday(1);\n    }\n\n    // quarters are also special\n    if (units === 'quarter') {\n        this.month(Math.floor(this.month() / 3) * 3);\n    }\n\n    return this;\n}\n\nfunction endOf (units) {\n    units = normalizeUnits(units);\n    if (units === undefined || units === 'millisecond') {\n        return this;\n    }\n\n    // 'date' is an alias for 'day', so it should be considered as such.\n    if (units === 'date') {\n        units = 'day';\n    }\n\n    return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n}\n\nfunction valueOf () {\n    return this._d.valueOf() - ((this._offset || 0) * 60000);\n}\n\nfunction unix () {\n    return Math.floor(this.valueOf() / 1000);\n}\n\nfunction toDate () {\n    return new Date(this.valueOf());\n}\n\nfunction toArray () {\n    var m = this;\n    return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n}\n\nfunction toObject () {\n    var m = this;\n    return {\n        years: m.year(),\n        months: m.month(),\n        date: m.date(),\n        hours: m.hours(),\n        minutes: m.minutes(),\n        seconds: m.seconds(),\n        milliseconds: m.milliseconds()\n    };\n}\n\nfunction toJSON () {\n    // new Date(NaN).toJSON() === null\n    return this.isValid() ? this.toISOString() : null;\n}\n\nfunction isValid$2 () {\n    return isValid(this);\n}\n\nfunction parsingFlags () {\n    return extend({}, getParsingFlags(this));\n}\n\nfunction invalidAt () {\n    return getParsingFlags(this).overflow;\n}\n\nfunction creationData() {\n    return {\n        input: this._i,\n        format: this._f,\n        locale: this._locale,\n        isUTC: this._isUTC,\n        strict: this._strict\n    };\n}\n\n// FORMATTING\n\naddFormatToken(0, ['gg', 2], 0, function () {\n    return this.weekYear() % 100;\n});\n\naddFormatToken(0, ['GG', 2], 0, function () {\n    return this.isoWeekYear() % 100;\n});\n\nfunction addWeekYearFormatToken (token, getter) {\n    addFormatToken(0, [token, token.length], 0, getter);\n}\n\naddWeekYearFormatToken('gggg',     'weekYear');\naddWeekYearFormatToken('ggggg',    'weekYear');\naddWeekYearFormatToken('GGGG',  'isoWeekYear');\naddWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n// ALIASES\n\naddUnitAlias('weekYear', 'gg');\naddUnitAlias('isoWeekYear', 'GG');\n\n// PRIORITY\n\naddUnitPriority('weekYear', 1);\naddUnitPriority('isoWeekYear', 1);\n\n\n// PARSING\n\naddRegexToken('G',      matchSigned);\naddRegexToken('g',      matchSigned);\naddRegexToken('GG',     match1to2, match2);\naddRegexToken('gg',     match1to2, match2);\naddRegexToken('GGGG',   match1to4, match4);\naddRegexToken('gggg',   match1to4, match4);\naddRegexToken('GGGGG',  match1to6, match6);\naddRegexToken('ggggg',  match1to6, match6);\n\naddWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n    week[token.substr(0, 2)] = toInt(input);\n});\n\naddWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n    week[token] = hooks.parseTwoDigitYear(input);\n});\n\n// MOMENTS\n\nfunction getSetWeekYear (input) {\n    return getSetWeekYearHelper.call(this,\n            input,\n            this.week(),\n            this.weekday(),\n            this.localeData()._week.dow,\n            this.localeData()._week.doy);\n}\n\nfunction getSetISOWeekYear (input) {\n    return getSetWeekYearHelper.call(this,\n            input, this.isoWeek(), this.isoWeekday(), 1, 4);\n}\n\nfunction getISOWeeksInYear () {\n    return weeksInYear(this.year(), 1, 4);\n}\n\nfunction getWeeksInYear () {\n    var weekInfo = this.localeData()._week;\n    return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n}\n\nfunction getSetWeekYearHelper(input, week, weekday, dow, doy) {\n    var weeksTarget;\n    if (input == null) {\n        return weekOfYear(this, dow, doy).year;\n    } else {\n        weeksTarget = weeksInYear(input, dow, doy);\n        if (week > weeksTarget) {\n            week = weeksTarget;\n        }\n        return setWeekAll.call(this, input, week, weekday, dow, doy);\n    }\n}\n\nfunction setWeekAll(weekYear, week, weekday, dow, doy) {\n    var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n        date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n    this.year(date.getUTCFullYear());\n    this.month(date.getUTCMonth());\n    this.date(date.getUTCDate());\n    return this;\n}\n\n// FORMATTING\n\naddFormatToken('Q', 0, 'Qo', 'quarter');\n\n// ALIASES\n\naddUnitAlias('quarter', 'Q');\n\n// PRIORITY\n\naddUnitPriority('quarter', 7);\n\n// PARSING\n\naddRegexToken('Q', match1);\naddParseToken('Q', function (input, array) {\n    array[MONTH] = (toInt(input) - 1) * 3;\n});\n\n// MOMENTS\n\nfunction getSetQuarter (input) {\n    return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n}\n\n// FORMATTING\n\naddFormatToken('D', ['DD', 2], 'Do', 'date');\n\n// ALIASES\n\naddUnitAlias('date', 'D');\n\n// PRIOROITY\naddUnitPriority('date', 9);\n\n// PARSING\n\naddRegexToken('D',  match1to2);\naddRegexToken('DD', match1to2, match2);\naddRegexToken('Do', function (isStrict, locale) {\n    // TODO: Remove \"ordinalParse\" fallback in next major release.\n    return isStrict ?\n      (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n      locale._dayOfMonthOrdinalParseLenient;\n});\n\naddParseToken(['D', 'DD'], DATE);\naddParseToken('Do', function (input, array) {\n    array[DATE] = toInt(input.match(match1to2)[0], 10);\n});\n\n// MOMENTS\n\nvar getSetDayOfMonth = makeGetSet('Date', true);\n\n// FORMATTING\n\naddFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n// ALIASES\n\naddUnitAlias('dayOfYear', 'DDD');\n\n// PRIORITY\naddUnitPriority('dayOfYear', 4);\n\n// PARSING\n\naddRegexToken('DDD',  match1to3);\naddRegexToken('DDDD', match3);\naddParseToken(['DDD', 'DDDD'], function (input, array, config) {\n    config._dayOfYear = toInt(input);\n});\n\n// HELPERS\n\n// MOMENTS\n\nfunction getSetDayOfYear (input) {\n    var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n    return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n}\n\n// FORMATTING\n\naddFormatToken('m', ['mm', 2], 0, 'minute');\n\n// ALIASES\n\naddUnitAlias('minute', 'm');\n\n// PRIORITY\n\naddUnitPriority('minute', 14);\n\n// PARSING\n\naddRegexToken('m',  match1to2);\naddRegexToken('mm', match1to2, match2);\naddParseToken(['m', 'mm'], MINUTE);\n\n// MOMENTS\n\nvar getSetMinute = makeGetSet('Minutes', false);\n\n// FORMATTING\n\naddFormatToken('s', ['ss', 2], 0, 'second');\n\n// ALIASES\n\naddUnitAlias('second', 's');\n\n// PRIORITY\n\naddUnitPriority('second', 15);\n\n// PARSING\n\naddRegexToken('s',  match1to2);\naddRegexToken('ss', match1to2, match2);\naddParseToken(['s', 'ss'], SECOND);\n\n// MOMENTS\n\nvar getSetSecond = makeGetSet('Seconds', false);\n\n// FORMATTING\n\naddFormatToken('S', 0, 0, function () {\n    return ~~(this.millisecond() / 100);\n});\n\naddFormatToken(0, ['SS', 2], 0, function () {\n    return ~~(this.millisecond() / 10);\n});\n\naddFormatToken(0, ['SSS', 3], 0, 'millisecond');\naddFormatToken(0, ['SSSS', 4], 0, function () {\n    return this.millisecond() * 10;\n});\naddFormatToken(0, ['SSSSS', 5], 0, function () {\n    return this.millisecond() * 100;\n});\naddFormatToken(0, ['SSSSSS', 6], 0, function () {\n    return this.millisecond() * 1000;\n});\naddFormatToken(0, ['SSSSSSS', 7], 0, function () {\n    return this.millisecond() * 10000;\n});\naddFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n    return this.millisecond() * 100000;\n});\naddFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n    return this.millisecond() * 1000000;\n});\n\n\n// ALIASES\n\naddUnitAlias('millisecond', 'ms');\n\n// PRIORITY\n\naddUnitPriority('millisecond', 16);\n\n// PARSING\n\naddRegexToken('S',    match1to3, match1);\naddRegexToken('SS',   match1to3, match2);\naddRegexToken('SSS',  match1to3, match3);\n\nvar token;\nfor (token = 'SSSS'; token.length <= 9; token += 'S') {\n    addRegexToken(token, matchUnsigned);\n}\n\nfunction parseMs(input, array) {\n    array[MILLISECOND] = toInt(('0.' + input) * 1000);\n}\n\nfor (token = 'S'; token.length <= 9; token += 'S') {\n    addParseToken(token, parseMs);\n}\n// MOMENTS\n\nvar getSetMillisecond = makeGetSet('Milliseconds', false);\n\n// FORMATTING\n\naddFormatToken('z',  0, 0, 'zoneAbbr');\naddFormatToken('zz', 0, 0, 'zoneName');\n\n// MOMENTS\n\nfunction getZoneAbbr () {\n    return this._isUTC ? 'UTC' : '';\n}\n\nfunction getZoneName () {\n    return this._isUTC ? 'Coordinated Universal Time' : '';\n}\n\nvar proto = Moment.prototype;\n\nproto.add               = add;\nproto.calendar          = calendar$1;\nproto.clone             = clone;\nproto.diff              = diff;\nproto.endOf             = endOf;\nproto.format            = format;\nproto.from              = from;\nproto.fromNow           = fromNow;\nproto.to                = to;\nproto.toNow             = toNow;\nproto.get               = stringGet;\nproto.invalidAt         = invalidAt;\nproto.isAfter           = isAfter;\nproto.isBefore          = isBefore;\nproto.isBetween         = isBetween;\nproto.isSame            = isSame;\nproto.isSameOrAfter     = isSameOrAfter;\nproto.isSameOrBefore    = isSameOrBefore;\nproto.isValid           = isValid$2;\nproto.lang              = lang;\nproto.locale            = locale;\nproto.localeData        = localeData;\nproto.max               = prototypeMax;\nproto.min               = prototypeMin;\nproto.parsingFlags      = parsingFlags;\nproto.set               = stringSet;\nproto.startOf           = startOf;\nproto.subtract          = subtract;\nproto.toArray           = toArray;\nproto.toObject          = toObject;\nproto.toDate            = toDate;\nproto.toISOString       = toISOString;\nproto.inspect           = inspect;\nproto.toJSON            = toJSON;\nproto.toString          = toString;\nproto.unix              = unix;\nproto.valueOf           = valueOf;\nproto.creationData      = creationData;\n\n// Year\nproto.year       = getSetYear;\nproto.isLeapYear = getIsLeapYear;\n\n// Week Year\nproto.weekYear    = getSetWeekYear;\nproto.isoWeekYear = getSetISOWeekYear;\n\n// Quarter\nproto.quarter = proto.quarters = getSetQuarter;\n\n// Month\nproto.month       = getSetMonth;\nproto.daysInMonth = getDaysInMonth;\n\n// Week\nproto.week           = proto.weeks        = getSetWeek;\nproto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\nproto.weeksInYear    = getWeeksInYear;\nproto.isoWeeksInYear = getISOWeeksInYear;\n\n// Day\nproto.date       = getSetDayOfMonth;\nproto.day        = proto.days             = getSetDayOfWeek;\nproto.weekday    = getSetLocaleDayOfWeek;\nproto.isoWeekday = getSetISODayOfWeek;\nproto.dayOfYear  = getSetDayOfYear;\n\n// Hour\nproto.hour = proto.hours = getSetHour;\n\n// Minute\nproto.minute = proto.minutes = getSetMinute;\n\n// Second\nproto.second = proto.seconds = getSetSecond;\n\n// Millisecond\nproto.millisecond = proto.milliseconds = getSetMillisecond;\n\n// Offset\nproto.utcOffset            = getSetOffset;\nproto.utc                  = setOffsetToUTC;\nproto.local                = setOffsetToLocal;\nproto.parseZone            = setOffsetToParsedOffset;\nproto.hasAlignedHourOffset = hasAlignedHourOffset;\nproto.isDST                = isDaylightSavingTime;\nproto.isLocal              = isLocal;\nproto.isUtcOffset          = isUtcOffset;\nproto.isUtc                = isUtc;\nproto.isUTC                = isUtc;\n\n// Timezone\nproto.zoneAbbr = getZoneAbbr;\nproto.zoneName = getZoneName;\n\n// Deprecations\nproto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\nproto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\nproto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\nproto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\nproto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\nfunction createUnix (input) {\n    return createLocal(input * 1000);\n}\n\nfunction createInZone () {\n    return createLocal.apply(null, arguments).parseZone();\n}\n\nfunction preParsePostFormat (string) {\n    return string;\n}\n\nvar proto$1 = Locale.prototype;\n\nproto$1.calendar        = calendar;\nproto$1.longDateFormat  = longDateFormat;\nproto$1.invalidDate     = invalidDate;\nproto$1.ordinal         = ordinal;\nproto$1.preparse        = preParsePostFormat;\nproto$1.postformat      = preParsePostFormat;\nproto$1.relativeTime    = relativeTime;\nproto$1.pastFuture      = pastFuture;\nproto$1.set             = set;\n\n// Month\nproto$1.months            =        localeMonths;\nproto$1.monthsShort       =        localeMonthsShort;\nproto$1.monthsParse       =        localeMonthsParse;\nproto$1.monthsRegex       = monthsRegex;\nproto$1.monthsShortRegex  = monthsShortRegex;\n\n// Week\nproto$1.week = localeWeek;\nproto$1.firstDayOfYear = localeFirstDayOfYear;\nproto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n// Day of Week\nproto$1.weekdays       =        localeWeekdays;\nproto$1.weekdaysMin    =        localeWeekdaysMin;\nproto$1.weekdaysShort  =        localeWeekdaysShort;\nproto$1.weekdaysParse  =        localeWeekdaysParse;\n\nproto$1.weekdaysRegex       =        weekdaysRegex;\nproto$1.weekdaysShortRegex  =        weekdaysShortRegex;\nproto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n// Hours\nproto$1.isPM = localeIsPM;\nproto$1.meridiem = localeMeridiem;\n\nfunction get$1 (format, index, field, setter) {\n    var locale = getLocale();\n    var utc = createUTC().set(setter, index);\n    return locale[field](utc, format);\n}\n\nfunction listMonthsImpl (format, index, field) {\n    if (isNumber(format)) {\n        index = format;\n        format = undefined;\n    }\n\n    format = format || '';\n\n    if (index != null) {\n        return get$1(format, index, field, 'month');\n    }\n\n    var i;\n    var out = [];\n    for (i = 0; i < 12; i++) {\n        out[i] = get$1(format, i, field, 'month');\n    }\n    return out;\n}\n\n// ()\n// (5)\n// (fmt, 5)\n// (fmt)\n// (true)\n// (true, 5)\n// (true, fmt, 5)\n// (true, fmt)\nfunction listWeekdaysImpl (localeSorted, format, index, field) {\n    if (typeof localeSorted === 'boolean') {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    } else {\n        format = localeSorted;\n        index = format;\n        localeSorted = false;\n\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n    }\n\n    var locale = getLocale(),\n        shift = localeSorted ? locale._week.dow : 0;\n\n    if (index != null) {\n        return get$1(format, (index + shift) % 7, field, 'day');\n    }\n\n    var i;\n    var out = [];\n    for (i = 0; i < 7; i++) {\n        out[i] = get$1(format, (i + shift) % 7, field, 'day');\n    }\n    return out;\n}\n\nfunction listMonths (format, index) {\n    return listMonthsImpl(format, index, 'months');\n}\n\nfunction listMonthsShort (format, index) {\n    return listMonthsImpl(format, index, 'monthsShort');\n}\n\nfunction listWeekdays (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n}\n\nfunction listWeekdaysShort (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n}\n\nfunction listWeekdaysMin (localeSorted, format, index) {\n    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n}\n\ngetSetGlobalLocale('en', {\n    dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n    ordinal : function (number) {\n        var b = number % 10,\n            output = (toInt(number % 100 / 10) === 1) ? 'th' :\n            (b === 1) ? 'st' :\n            (b === 2) ? 'nd' :\n            (b === 3) ? 'rd' : 'th';\n        return number + output;\n    }\n});\n\n// Side effect imports\nhooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\nhooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\nvar mathAbs = Math.abs;\n\nfunction abs () {\n    var data           = this._data;\n\n    this._milliseconds = mathAbs(this._milliseconds);\n    this._days         = mathAbs(this._days);\n    this._months       = mathAbs(this._months);\n\n    data.milliseconds  = mathAbs(data.milliseconds);\n    data.seconds       = mathAbs(data.seconds);\n    data.minutes       = mathAbs(data.minutes);\n    data.hours         = mathAbs(data.hours);\n    data.months        = mathAbs(data.months);\n    data.years         = mathAbs(data.years);\n\n    return this;\n}\n\nfunction addSubtract$1 (duration, input, value, direction) {\n    var other = createDuration(input, value);\n\n    duration._milliseconds += direction * other._milliseconds;\n    duration._days         += direction * other._days;\n    duration._months       += direction * other._months;\n\n    return duration._bubble();\n}\n\n// supports only 2.0-style add(1, 's') or add(duration)\nfunction add$1 (input, value) {\n    return addSubtract$1(this, input, value, 1);\n}\n\n// supports only 2.0-style subtract(1, 's') or subtract(duration)\nfunction subtract$1 (input, value) {\n    return addSubtract$1(this, input, value, -1);\n}\n\nfunction absCeil (number) {\n    if (number < 0) {\n        return Math.floor(number);\n    } else {\n        return Math.ceil(number);\n    }\n}\n\nfunction bubble () {\n    var milliseconds = this._milliseconds;\n    var days         = this._days;\n    var months       = this._months;\n    var data         = this._data;\n    var seconds, minutes, hours, years, monthsFromDays;\n\n    // if we have a mix of positive and negative values, bubble down first\n    // check: https://github.com/moment/moment/issues/2166\n    if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n            (milliseconds <= 0 && days <= 0 && months <= 0))) {\n        milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n        days = 0;\n        months = 0;\n    }\n\n    // The following code bubbles up values, see the tests for\n    // examples of what that means.\n    data.milliseconds = milliseconds % 1000;\n\n    seconds           = absFloor(milliseconds / 1000);\n    data.seconds      = seconds % 60;\n\n    minutes           = absFloor(seconds / 60);\n    data.minutes      = minutes % 60;\n\n    hours             = absFloor(minutes / 60);\n    data.hours        = hours % 24;\n\n    days += absFloor(hours / 24);\n\n    // convert days to months\n    monthsFromDays = absFloor(daysToMonths(days));\n    months += monthsFromDays;\n    days -= absCeil(monthsToDays(monthsFromDays));\n\n    // 12 months -> 1 year\n    years = absFloor(months / 12);\n    months %= 12;\n\n    data.days   = days;\n    data.months = months;\n    data.years  = years;\n\n    return this;\n}\n\nfunction daysToMonths (days) {\n    // 400 years have 146097 days (taking into account leap year rules)\n    // 400 years have 12 months === 4800\n    return days * 4800 / 146097;\n}\n\nfunction monthsToDays (months) {\n    // the reverse of daysToMonths\n    return months * 146097 / 4800;\n}\n\nfunction as (units) {\n    if (!this.isValid()) {\n        return NaN;\n    }\n    var days;\n    var months;\n    var milliseconds = this._milliseconds;\n\n    units = normalizeUnits(units);\n\n    if (units === 'month' || units === 'year') {\n        days   = this._days   + milliseconds / 864e5;\n        months = this._months + daysToMonths(days);\n        return units === 'month' ? months : months / 12;\n    } else {\n        // handle milliseconds separately because of floating point math errors (issue #1867)\n        days = this._days + Math.round(monthsToDays(this._months));\n        switch (units) {\n            case 'week'   : return days / 7     + milliseconds / 6048e5;\n            case 'day'    : return days         + milliseconds / 864e5;\n            case 'hour'   : return days * 24    + milliseconds / 36e5;\n            case 'minute' : return days * 1440  + milliseconds / 6e4;\n            case 'second' : return days * 86400 + milliseconds / 1000;\n            // Math.floor prevents floating point math errors here\n            case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n            default: throw new Error('Unknown unit ' + units);\n        }\n    }\n}\n\n// TODO: Use this.as('ms')?\nfunction valueOf$1 () {\n    if (!this.isValid()) {\n        return NaN;\n    }\n    return (\n        this._milliseconds +\n        this._days * 864e5 +\n        (this._months % 12) * 2592e6 +\n        toInt(this._months / 12) * 31536e6\n    );\n}\n\nfunction makeAs (alias) {\n    return function () {\n        return this.as(alias);\n    };\n}\n\nvar asMilliseconds = makeAs('ms');\nvar asSeconds      = makeAs('s');\nvar asMinutes      = makeAs('m');\nvar asHours        = makeAs('h');\nvar asDays         = makeAs('d');\nvar asWeeks        = makeAs('w');\nvar asMonths       = makeAs('M');\nvar asYears        = makeAs('y');\n\nfunction get$2 (units) {\n    units = normalizeUnits(units);\n    return this.isValid() ? this[units + 's']() : NaN;\n}\n\nfunction makeGetter(name) {\n    return function () {\n        return this.isValid() ? this._data[name] : NaN;\n    };\n}\n\nvar milliseconds = makeGetter('milliseconds');\nvar seconds      = makeGetter('seconds');\nvar minutes      = makeGetter('minutes');\nvar hours        = makeGetter('hours');\nvar days         = makeGetter('days');\nvar months       = makeGetter('months');\nvar years        = makeGetter('years');\n\nfunction weeks () {\n    return absFloor(this.days() / 7);\n}\n\nvar round = Math.round;\nvar thresholds = {\n    ss: 44,         // a few seconds to seconds\n    s : 45,         // seconds to minute\n    m : 45,         // minutes to hour\n    h : 22,         // hours to day\n    d : 26,         // days to month\n    M : 11          // months to year\n};\n\n// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\nfunction substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n    return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n}\n\nfunction relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n    var duration = createDuration(posNegDuration).abs();\n    var seconds  = round(duration.as('s'));\n    var minutes  = round(duration.as('m'));\n    var hours    = round(duration.as('h'));\n    var days     = round(duration.as('d'));\n    var months   = round(duration.as('M'));\n    var years    = round(duration.as('y'));\n\n    var a = seconds <= thresholds.ss && ['s', seconds]  ||\n            seconds < thresholds.s   && ['ss', seconds] ||\n            minutes <= 1             && ['m']           ||\n            minutes < thresholds.m   && ['mm', minutes] ||\n            hours   <= 1             && ['h']           ||\n            hours   < thresholds.h   && ['hh', hours]   ||\n            days    <= 1             && ['d']           ||\n            days    < thresholds.d   && ['dd', days]    ||\n            months  <= 1             && ['M']           ||\n            months  < thresholds.M   && ['MM', months]  ||\n            years   <= 1             && ['y']           || ['yy', years];\n\n    a[2] = withoutSuffix;\n    a[3] = +posNegDuration > 0;\n    a[4] = locale;\n    return substituteTimeAgo.apply(null, a);\n}\n\n// This function allows you to set the rounding function for relative time strings\nfunction getSetRelativeTimeRounding (roundingFunction) {\n    if (roundingFunction === undefined) {\n        return round;\n    }\n    if (typeof(roundingFunction) === 'function') {\n        round = roundingFunction;\n        return true;\n    }\n    return false;\n}\n\n// This function allows you to set a threshold for relative time strings\nfunction getSetRelativeTimeThreshold (threshold, limit) {\n    if (thresholds[threshold] === undefined) {\n        return false;\n    }\n    if (limit === undefined) {\n        return thresholds[threshold];\n    }\n    thresholds[threshold] = limit;\n    if (threshold === 's') {\n        thresholds.ss = limit - 1;\n    }\n    return true;\n}\n\nfunction humanize (withSuffix) {\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var locale = this.localeData();\n    var output = relativeTime$1(this, !withSuffix, locale);\n\n    if (withSuffix) {\n        output = locale.pastFuture(+this, output);\n    }\n\n    return locale.postformat(output);\n}\n\nvar abs$1 = Math.abs;\n\nfunction toISOString$1() {\n    // for ISO strings we do not use the normal bubbling rules:\n    //  * milliseconds bubble up until they become hours\n    //  * days do not bubble at all\n    //  * months bubble up until they become years\n    // This is because there is no context-free conversion between hours and days\n    // (think of clock changes)\n    // and also not between days and months (28-31 days per month)\n    if (!this.isValid()) {\n        return this.localeData().invalidDate();\n    }\n\n    var seconds = abs$1(this._milliseconds) / 1000;\n    var days         = abs$1(this._days);\n    var months       = abs$1(this._months);\n    var minutes, hours, years;\n\n    // 3600 seconds -> 60 minutes -> 1 hour\n    minutes           = absFloor(seconds / 60);\n    hours             = absFloor(minutes / 60);\n    seconds %= 60;\n    minutes %= 60;\n\n    // 12 months -> 1 year\n    years  = absFloor(months / 12);\n    months %= 12;\n\n\n    // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n    var Y = years;\n    var M = months;\n    var D = days;\n    var h = hours;\n    var m = minutes;\n    var s = seconds;\n    var total = this.asSeconds();\n\n    if (!total) {\n        // this is the same as C#'s (Noda) and python (isodate)...\n        // but not other JS (goog.date)\n        return 'P0D';\n    }\n\n    return (total < 0 ? '-' : '') +\n        'P' +\n        (Y ? Y + 'Y' : '') +\n        (M ? M + 'M' : '') +\n        (D ? D + 'D' : '') +\n        ((h || m || s) ? 'T' : '') +\n        (h ? h + 'H' : '') +\n        (m ? m + 'M' : '') +\n        (s ? s + 'S' : '');\n}\n\nvar proto$2 = Duration.prototype;\n\nproto$2.isValid        = isValid$1;\nproto$2.abs            = abs;\nproto$2.add            = add$1;\nproto$2.subtract       = subtract$1;\nproto$2.as             = as;\nproto$2.asMilliseconds = asMilliseconds;\nproto$2.asSeconds      = asSeconds;\nproto$2.asMinutes      = asMinutes;\nproto$2.asHours        = asHours;\nproto$2.asDays         = asDays;\nproto$2.asWeeks        = asWeeks;\nproto$2.asMonths       = asMonths;\nproto$2.asYears        = asYears;\nproto$2.valueOf        = valueOf$1;\nproto$2._bubble        = bubble;\nproto$2.get            = get$2;\nproto$2.milliseconds   = milliseconds;\nproto$2.seconds        = seconds;\nproto$2.minutes        = minutes;\nproto$2.hours          = hours;\nproto$2.days           = days;\nproto$2.weeks          = weeks;\nproto$2.months         = months;\nproto$2.years          = years;\nproto$2.humanize       = humanize;\nproto$2.toISOString    = toISOString$1;\nproto$2.toString       = toISOString$1;\nproto$2.toJSON         = toISOString$1;\nproto$2.locale         = locale;\nproto$2.localeData     = localeData;\n\n// Deprecations\nproto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\nproto$2.lang = lang;\n\n// Side effect imports\n\n// FORMATTING\n\naddFormatToken('X', 0, 0, 'unix');\naddFormatToken('x', 0, 0, 'valueOf');\n\n// PARSING\n\naddRegexToken('x', matchSigned);\naddRegexToken('X', matchTimestamp);\naddParseToken('X', function (input, array, config) {\n    config._d = new Date(parseFloat(input, 10) * 1000);\n});\naddParseToken('x', function (input, array, config) {\n    config._d = new Date(toInt(input));\n});\n\n// Side effect imports\n\n\nhooks.version = '2.18.1';\n\nsetHookCallback(createLocal);\n\nhooks.fn                    = proto;\nhooks.min                   = min;\nhooks.max                   = max;\nhooks.now                   = now;\nhooks.utc                   = createUTC;\nhooks.unix                  = createUnix;\nhooks.months                = listMonths;\nhooks.isDate                = isDate;\nhooks.locale                = getSetGlobalLocale;\nhooks.invalid               = createInvalid;\nhooks.duration              = createDuration;\nhooks.isMoment              = isMoment;\nhooks.weekdays              = listWeekdays;\nhooks.parseZone             = createInZone;\nhooks.localeData            = getLocale;\nhooks.isDuration            = isDuration;\nhooks.monthsShort           = listMonthsShort;\nhooks.weekdaysMin           = listWeekdaysMin;\nhooks.defineLocale          = defineLocale;\nhooks.updateLocale          = updateLocale;\nhooks.locales               = listLocales;\nhooks.weekdaysShort         = listWeekdaysShort;\nhooks.normalizeUnits        = normalizeUnits;\nhooks.relativeTimeRounding = getSetRelativeTimeRounding;\nhooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\nhooks.calendarFormat        = getCalendarFormat;\nhooks.prototype             = proto;\n\nreturn hooks;\n\n})));\n\n},{}],6:[function(require,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],7:[function(require,module,exports){\n/*!\n * Pikaday\n *\n * Copyright  2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday\n */\n\n(function (root, factory)\n{\n    'use strict';\n\n    var moment;\n    if (typeof exports === 'object') {\n        // CommonJS module\n        // Load moment.js as an optional dependency\n        try { moment = require('moment'); } catch (e) {}\n        module.exports = factory(moment);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(function (req)\n        {\n            // Load moment.js as an optional dependency\n            var id = 'moment';\n            try { moment = req(id); } catch (e) {}\n            return factory(moment);\n        });\n    } else {\n        root.Pikaday = factory(root.moment);\n    }\n}(this, function (moment)\n{\n    'use strict';\n\n    /**\n     * feature detection and helper functions\n     */\n    var hasMoment = typeof moment === 'function',\n\n    hasEventListeners = !!window.addEventListener,\n\n    document = window.document,\n\n    sto = window.setTimeout,\n\n    addEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.addEventListener(e, callback, !!capture);\n        } else {\n            el.attachEvent('on' + e, callback);\n        }\n    },\n\n    removeEvent = function(el, e, callback, capture)\n    {\n        if (hasEventListeners) {\n            el.removeEventListener(e, callback, !!capture);\n        } else {\n            el.detachEvent('on' + e, callback);\n        }\n    },\n\n    trim = function(str)\n    {\n        return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    hasClass = function(el, cn)\n    {\n        return (' ' + el.className + ' ').indexOf(' ' + cn + ' ') !== -1;\n    },\n\n    addClass = function(el, cn)\n    {\n        if (!hasClass(el, cn)) {\n            el.className = (el.className === '') ? cn : el.className + ' ' + cn;\n        }\n    },\n\n    removeClass = function(el, cn)\n    {\n        el.className = trim((' ' + el.className + ' ').replace(' ' + cn + ' ', ' '));\n    },\n\n    isArray = function(obj)\n    {\n        return (/Array/).test(Object.prototype.toString.call(obj));\n    },\n\n    isDate = function(obj)\n    {\n        return (/Date/).test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime());\n    },\n\n    isWeekend = function(date)\n    {\n        var day = date.getDay();\n        return day === 0 || day === 6;\n    },\n\n    isLeapYear = function(year)\n    {\n        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951\n        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n    },\n\n    getDaysInMonth = function(year, month)\n    {\n        return [31, isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n\n    setToStartOfDay = function(date)\n    {\n        if (isDate(date)) date.setHours(0,0,0,0);\n    },\n\n    compareDates = function(a,b)\n    {\n        // weak date comparison (use setToStartOfDay(date) to ensure correct result)\n        return a.getTime() === b.getTime();\n    },\n\n    extend = function(to, from, overwrite)\n    {\n        var prop, hasProp;\n        for (prop in from) {\n            hasProp = to[prop] !== undefined;\n            if (hasProp && typeof from[prop] === 'object' && from[prop] !== null && from[prop].nodeName === undefined) {\n                if (isDate(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = new Date(from[prop].getTime());\n                    }\n                }\n                else if (isArray(from[prop])) {\n                    if (overwrite) {\n                        to[prop] = from[prop].slice(0);\n                    }\n                } else {\n                    to[prop] = extend({}, from[prop], overwrite);\n                }\n            } else if (overwrite || !hasProp) {\n                to[prop] = from[prop];\n            }\n        }\n        return to;\n    },\n\n    fireEvent = function(el, eventName, data)\n    {\n        var ev;\n\n        if (document.createEvent) {\n            ev = document.createEvent('HTMLEvents');\n            ev.initEvent(eventName, true, false);\n            ev = extend(ev, data);\n            el.dispatchEvent(ev);\n        } else if (document.createEventObject) {\n            ev = document.createEventObject();\n            ev = extend(ev, data);\n            el.fireEvent('on' + eventName, ev);\n        }\n    },\n\n    adjustCalendar = function(calendar) {\n        if (calendar.month < 0) {\n            calendar.year -= Math.ceil(Math.abs(calendar.month)/12);\n            calendar.month += 12;\n        }\n        if (calendar.month > 11) {\n            calendar.year += Math.floor(Math.abs(calendar.month)/12);\n            calendar.month -= 12;\n        }\n        return calendar;\n    },\n\n    /**\n     * defaults and localisation\n     */\n    defaults = {\n\n        // bind the picker to a form field\n        field: null,\n\n        // automatically show/hide the picker on `field` focus (default `true` if `field` is set)\n        bound: undefined,\n\n        // position of the datepicker, relative to the field (default to bottom & left)\n        // ('bottom' & 'left' keywords are not used, 'top' & 'right' are modifier on the bottom/left position)\n        position: 'bottom left',\n\n        // automatically fit in the viewport even if it means repositioning from the position option\n        reposition: true,\n\n        // the default output format for `.toString()` and `field` value\n        format: 'YYYY-MM-DD',\n\n        // the toString function which gets passed a current date object and format\n        // and returns a string\n        toString: null,\n\n        // used to create date object from current input string\n        parse: null,\n\n        // the initial date to view when first opened\n        defaultDate: null,\n\n        // make the `defaultDate` the initial selected value\n        setDefaultDate: false,\n\n        // first day of week (0: Sunday, 1: Monday etc)\n        firstDay: 0,\n\n        // the default flag for moment's strict date parsing\n        formatStrict: false,\n\n        // the minimum/earliest date that can be selected\n        minDate: null,\n        // the maximum/latest date that can be selected\n        maxDate: null,\n\n        // number of years either side, or array of upper/lower range\n        yearRange: 10,\n\n        // show week numbers at head of row\n        showWeekNumber: false,\n\n        // Week picker mode\n        pickWholeWeek: false,\n\n        // used internally (don't config outside)\n        minYear: 0,\n        maxYear: 9999,\n        minMonth: undefined,\n        maxMonth: undefined,\n\n        startRange: null,\n        endRange: null,\n\n        isRTL: false,\n\n        // Additional text to append to the year in the calendar title\n        yearSuffix: '',\n\n        // Render the month after year in the calendar title\n        showMonthAfterYear: false,\n\n        // Render days of the calendar grid that fall in the next or previous month\n        showDaysInNextAndPreviousMonths: false,\n\n        // Allows user to select days that fall in the next or previous month\n        enableSelectionDaysInNextAndPreviousMonths: false,\n\n        // how many months are visible\n        numberOfMonths: 1,\n\n        // when numberOfMonths is used, this will help you to choose where the main calendar will be (default `left`, can be set to `right`)\n        // only used for the first display or when a selected date is not visible\n        mainCalendar: 'left',\n\n        // Specify a DOM element to render the calendar in\n        container: undefined,\n\n        // Blur field when date is selected\n        blurFieldOnSelect : true,\n\n        // internationalization\n        i18n: {\n            previousMonth : 'Previous Month',\n            nextMonth     : 'Next Month',\n            months        : ['January','February','March','April','May','June','July','August','September','October','November','December'],\n            weekdays      : ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],\n            weekdaysShort : ['Sun','Mon','Tue','Wed','Thu','Fri','Sat']\n        },\n\n        // Theme Classname\n        theme: null,\n\n        // events array\n        events: [],\n\n        // callback function\n        onSelect: null,\n        onOpen: null,\n        onClose: null,\n        onDraw: null\n    },\n\n\n    /**\n     * templating functions to abstract HTML rendering\n     */\n    renderDayName = function(opts, day, abbr)\n    {\n        day += opts.firstDay;\n        while (day >= 7) {\n            day -= 7;\n        }\n        return abbr ? opts.i18n.weekdaysShort[day] : opts.i18n.weekdays[day];\n    },\n\n    renderDay = function(opts)\n    {\n        var arr = [];\n        var ariaSelected = 'false';\n        if (opts.isEmpty) {\n            if (opts.showDaysInNextAndPreviousMonths) {\n                arr.push('is-outside-current-month');\n\n                if(!opts.enableSelectionDaysInNextAndPreviousMonths) {\n                    arr.push('is-selection-disabled');\n                }\n\n            } else {\n                return '<td class=\"is-empty\"></td>';\n            }\n        }\n        if (opts.isDisabled) {\n            arr.push('is-disabled');\n        }\n        if (opts.isToday) {\n            arr.push('is-today');\n        }\n        if (opts.isSelected) {\n            arr.push('is-selected');\n            ariaSelected = 'true';\n        }\n        if (opts.hasEvent) {\n            arr.push('has-event');\n        }\n        if (opts.isInRange) {\n            arr.push('is-inrange');\n        }\n        if (opts.isStartRange) {\n            arr.push('is-startrange');\n        }\n        if (opts.isEndRange) {\n            arr.push('is-endrange');\n        }\n        return '<td data-day=\"' + opts.day + '\" class=\"' + arr.join(' ') + '\" aria-selected=\"' + ariaSelected + '\">' +\n                 '<button class=\"pika-button pika-day\" type=\"button\" ' +\n                    'data-pika-year=\"' + opts.year + '\" data-pika-month=\"' + opts.month + '\" data-pika-day=\"' + opts.day + '\">' +\n                        opts.day +\n                 '</button>' +\n               '</td>';\n    },\n\n    renderWeek = function (d, m, y) {\n        // Lifted from http://javascript.about.com/library/blweekyear.htm, lightly modified.\n        var onejan = new Date(y, 0, 1),\n            weekNum = Math.ceil((((new Date(y, m, d) - onejan) / 86400000) + onejan.getDay()+1)/7);\n        return '<td class=\"pika-week\">' + weekNum + '</td>';\n    },\n\n    renderRow = function(days, isRTL, pickWholeWeek, isRowSelected)\n    {\n        return '<tr class=\"pika-row' + (pickWholeWeek ? ' pick-whole-week' : '') + (isRowSelected ? ' is-selected' : '') + '\">' + (isRTL ? days.reverse() : days).join('') + '</tr>';\n    },\n\n    renderBody = function(rows)\n    {\n        return '<tbody>' + rows.join('') + '</tbody>';\n    },\n\n    renderHead = function(opts)\n    {\n        var i, arr = [];\n        if (opts.showWeekNumber) {\n            arr.push('<th></th>');\n        }\n        for (i = 0; i < 7; i++) {\n            arr.push('<th scope=\"col\"><abbr title=\"' + renderDayName(opts, i) + '\">' + renderDayName(opts, i, true) + '</abbr></th>');\n        }\n        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';\n    },\n\n    renderTitle = function(instance, c, year, month, refYear, randId)\n    {\n        var i, j, arr,\n            opts = instance._o,\n            isMinYear = year === opts.minYear,\n            isMaxYear = year === opts.maxYear,\n            html = '<div id=\"' + randId + '\" class=\"pika-title\" role=\"heading\" aria-live=\"assertive\">',\n            monthHtml,\n            yearHtml,\n            prev = true,\n            next = true;\n\n        for (arr = [], i = 0; i < 12; i++) {\n            arr.push('<option value=\"' + (year === refYear ? i - c : 12 + i - c) + '\"' +\n                (i === month ? ' selected=\"selected\"': '') +\n                ((isMinYear && i < opts.minMonth) || (isMaxYear && i > opts.maxMonth) ? 'disabled=\"disabled\"' : '') + '>' +\n                opts.i18n.months[i] + '</option>');\n        }\n\n        monthHtml = '<div class=\"pika-label\">' + opts.i18n.months[month] + '<select class=\"pika-select pika-select-month\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (isArray(opts.yearRange)) {\n            i = opts.yearRange[0];\n            j = opts.yearRange[1] + 1;\n        } else {\n            i = year - opts.yearRange;\n            j = 1 + year + opts.yearRange;\n        }\n\n        for (arr = []; i < j && i <= opts.maxYear; i++) {\n            if (i >= opts.minYear) {\n                arr.push('<option value=\"' + i + '\"' + (i === year ? ' selected=\"selected\"': '') + '>' + (i) + '</option>');\n            }\n        }\n        yearHtml = '<div class=\"pika-label\">' + year + opts.yearSuffix + '<select class=\"pika-select pika-select-year\" tabindex=\"-1\">' + arr.join('') + '</select></div>';\n\n        if (opts.showMonthAfterYear) {\n            html += yearHtml + monthHtml;\n        } else {\n            html += monthHtml + yearHtml;\n        }\n\n        if (isMinYear && (month === 0 || opts.minMonth >= month)) {\n            prev = false;\n        }\n\n        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {\n            next = false;\n        }\n\n        if (c === 0) {\n            html += '<button class=\"pika-prev' + (prev ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.previousMonth + '</button>';\n        }\n        if (c === (instance._o.numberOfMonths - 1) ) {\n            html += '<button class=\"pika-next' + (next ? '' : ' is-disabled') + '\" type=\"button\">' + opts.i18n.nextMonth + '</button>';\n        }\n\n        return html += '</div>';\n    },\n\n    renderTable = function(opts, data, randId)\n    {\n        return '<table cellpadding=\"0\" cellspacing=\"0\" class=\"pika-table\" role=\"grid\" aria-labelledby=\"' + randId + '\">' + renderHead(opts) + renderBody(data) + '</table>';\n    },\n\n\n    /**\n     * Pikaday constructor\n     */\n    Pikaday = function(options)\n    {\n        var self = this,\n            opts = self.config(options);\n\n        self._onMouseDown = function(e)\n        {\n            if (!self._v) {\n                return;\n            }\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n\n            if (!hasClass(target, 'is-disabled')) {\n                if (hasClass(target, 'pika-button') && !hasClass(target, 'is-empty') && !hasClass(target.parentNode, 'is-disabled')) {\n                    self.setDate(new Date(target.getAttribute('data-pika-year'), target.getAttribute('data-pika-month'), target.getAttribute('data-pika-day')));\n                    if (opts.bound) {\n                        sto(function() {\n                            self.hide();\n                            if (opts.blurFieldOnSelect && opts.field) {\n                                opts.field.blur();\n                            }\n                        }, 100);\n                    }\n                }\n                else if (hasClass(target, 'pika-prev')) {\n                    self.prevMonth();\n                }\n                else if (hasClass(target, 'pika-next')) {\n                    self.nextMonth();\n                }\n            }\n            if (!hasClass(target, 'pika-select')) {\n                // if this is touch event prevent mouse events emulation\n                if (e.preventDefault) {\n                    e.preventDefault();\n                } else {\n                    e.returnValue = false;\n                    return false;\n                }\n            } else {\n                self._c = true;\n            }\n        };\n\n        self._onChange = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement;\n            if (!target) {\n                return;\n            }\n            if (hasClass(target, 'pika-select-month')) {\n                self.gotoMonth(target.value);\n            }\n            else if (hasClass(target, 'pika-select-year')) {\n                self.gotoYear(target.value);\n            }\n        };\n\n        self._onKeyChange = function(e)\n        {\n            e = e || window.event;\n\n            if (self.isVisible()) {\n\n                switch(e.keyCode){\n                    case 13:\n                    case 27:\n                        if (opts.field) {\n                            opts.field.blur();\n                        }\n                        break;\n                    case 37:\n                        e.preventDefault();\n                        self.adjustDate('subtract', 1);\n                        break;\n                    case 38:\n                        self.adjustDate('subtract', 7);\n                        break;\n                    case 39:\n                        self.adjustDate('add', 1);\n                        break;\n                    case 40:\n                        self.adjustDate('add', 7);\n                        break;\n                }\n            }\n        };\n\n        self._onInputChange = function(e)\n        {\n            var date;\n\n            if (e.firedBy === self) {\n                return;\n            }\n            if (opts.parse) {\n                date = opts.parse(opts.field.value, opts.format);\n            } else if (hasMoment) {\n                date = moment(opts.field.value, opts.format, opts.formatStrict);\n                date = (date && date.isValid()) ? date.toDate() : null;\n            }\n            else {\n                date = new Date(Date.parse(opts.field.value));\n            }\n            if (isDate(date)) {\n              self.setDate(date);\n            }\n            if (!self._v) {\n                self.show();\n            }\n        };\n\n        self._onInputFocus = function()\n        {\n            self.show();\n        };\n\n        self._onInputClick = function()\n        {\n            self.show();\n        };\n\n        self._onInputBlur = function()\n        {\n            // IE allows pika div to gain focus; catch blur the input field\n            var pEl = document.activeElement;\n            do {\n                if (hasClass(pEl, 'pika-single')) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n\n            if (!self._c) {\n                self._b = sto(function() {\n                    self.hide();\n                }, 50);\n            }\n            self._c = false;\n        };\n\n        self._onClick = function(e)\n        {\n            e = e || window.event;\n            var target = e.target || e.srcElement,\n                pEl = target;\n            if (!target) {\n                return;\n            }\n            if (!hasEventListeners && hasClass(target, 'pika-select')) {\n                if (!target.onchange) {\n                    target.setAttribute('onchange', 'return;');\n                    addEvent(target, 'change', self._onChange);\n                }\n            }\n            do {\n                if (hasClass(pEl, 'pika-single') || pEl === opts.trigger) {\n                    return;\n                }\n            }\n            while ((pEl = pEl.parentNode));\n            if (self._v && target !== opts.trigger && pEl !== opts.trigger) {\n                self.hide();\n            }\n        };\n\n        self.el = document.createElement('div');\n        self.el.className = 'pika-single' + (opts.isRTL ? ' is-rtl' : '') + (opts.theme ? ' ' + opts.theme : '');\n\n        addEvent(self.el, 'mousedown', self._onMouseDown, true);\n        addEvent(self.el, 'touchend', self._onMouseDown, true);\n        addEvent(self.el, 'change', self._onChange);\n        addEvent(document, 'keydown', self._onKeyChange);\n\n        if (opts.field) {\n            if (opts.container) {\n                opts.container.appendChild(self.el);\n            } else if (opts.bound) {\n                document.body.appendChild(self.el);\n            } else {\n                opts.field.parentNode.insertBefore(self.el, opts.field.nextSibling);\n            }\n            addEvent(opts.field, 'change', self._onInputChange);\n\n            if (!opts.defaultDate) {\n                if (hasMoment && opts.field.value) {\n                    opts.defaultDate = moment(opts.field.value, opts.format).toDate();\n                } else {\n                    opts.defaultDate = new Date(Date.parse(opts.field.value));\n                }\n                opts.setDefaultDate = true;\n            }\n        }\n\n        var defDate = opts.defaultDate;\n\n        if (isDate(defDate)) {\n            if (opts.setDefaultDate) {\n                self.setDate(defDate, true);\n            } else {\n                self.gotoDate(defDate);\n            }\n        } else {\n            self.gotoDate(new Date());\n        }\n\n        if (opts.bound) {\n            this.hide();\n            self.el.className += ' is-bound';\n            addEvent(opts.trigger, 'click', self._onInputClick);\n            addEvent(opts.trigger, 'focus', self._onInputFocus);\n            addEvent(opts.trigger, 'blur', self._onInputBlur);\n        } else {\n            this.show();\n        }\n    };\n\n\n    /**\n     * public Pikaday API\n     */\n    Pikaday.prototype = {\n\n\n        /**\n         * configure functionality\n         */\n        config: function(options)\n        {\n            if (!this._o) {\n                this._o = extend({}, defaults, true);\n            }\n\n            var opts = extend(this._o, options, true);\n\n            opts.isRTL = !!opts.isRTL;\n\n            opts.field = (opts.field && opts.field.nodeName) ? opts.field : null;\n\n            opts.theme = (typeof opts.theme) === 'string' && opts.theme ? opts.theme : null;\n\n            opts.bound = !!(opts.bound !== undefined ? opts.field && opts.bound : opts.field);\n\n            opts.trigger = (opts.trigger && opts.trigger.nodeName) ? opts.trigger : opts.field;\n\n            opts.disableWeekends = !!opts.disableWeekends;\n\n            opts.disableDayFn = (typeof opts.disableDayFn) === 'function' ? opts.disableDayFn : null;\n\n            var nom = parseInt(opts.numberOfMonths, 10) || 1;\n            opts.numberOfMonths = nom > 4 ? 4 : nom;\n\n            if (!isDate(opts.minDate)) {\n                opts.minDate = false;\n            }\n            if (!isDate(opts.maxDate)) {\n                opts.maxDate = false;\n            }\n            if ((opts.minDate && opts.maxDate) && opts.maxDate < opts.minDate) {\n                opts.maxDate = opts.minDate = false;\n            }\n            if (opts.minDate) {\n                this.setMinDate(opts.minDate);\n            }\n            if (opts.maxDate) {\n                this.setMaxDate(opts.maxDate);\n            }\n\n            if (isArray(opts.yearRange)) {\n                var fallback = new Date().getFullYear() - 10;\n                opts.yearRange[0] = parseInt(opts.yearRange[0], 10) || fallback;\n                opts.yearRange[1] = parseInt(opts.yearRange[1], 10) || fallback;\n            } else {\n                opts.yearRange = Math.abs(parseInt(opts.yearRange, 10)) || defaults.yearRange;\n                if (opts.yearRange > 100) {\n                    opts.yearRange = 100;\n                }\n            }\n\n            return opts;\n        },\n\n        /**\n         * return a formatted string of the current selection (using Moment.js if available)\n         */\n        toString: function(format)\n        {\n            format = format || this._o.format;\n            if (!isDate(this._d)) {\n                return '';\n            }\n            if (this._o.toString) {\n              return this._o.toString(this._d, format);\n            }\n            if (hasMoment) {\n              return moment(this._d).format(format);\n            }\n            return this._d.toDateString();\n        },\n\n        /**\n         * return a Moment.js object of the current selection (if available)\n         */\n        getMoment: function()\n        {\n            return hasMoment ? moment(this._d) : null;\n        },\n\n        /**\n         * set the current selection from a Moment.js object (if available)\n         */\n        setMoment: function(date, preventOnSelect)\n        {\n            if (hasMoment && moment.isMoment(date)) {\n                this.setDate(date.toDate(), preventOnSelect);\n            }\n        },\n\n        /**\n         * return a Date object of the current selection\n         */\n        getDate: function()\n        {\n            return isDate(this._d) ? new Date(this._d.getTime()) : null;\n        },\n\n        /**\n         * set the current selection\n         */\n        setDate: function(date, preventOnSelect)\n        {\n            if (!date) {\n                this._d = null;\n\n                if (this._o.field) {\n                    this._o.field.value = '';\n                    fireEvent(this._o.field, 'change', { firedBy: this });\n                }\n\n                return this.draw();\n            }\n            if (typeof date === 'string') {\n                date = new Date(Date.parse(date));\n            }\n            if (!isDate(date)) {\n                return;\n            }\n\n            var min = this._o.minDate,\n                max = this._o.maxDate;\n\n            if (isDate(min) && date < min) {\n                date = min;\n            } else if (isDate(max) && date > max) {\n                date = max;\n            }\n\n            this._d = new Date(date.getTime());\n            setToStartOfDay(this._d);\n            this.gotoDate(this._d);\n\n            if (this._o.field) {\n                this._o.field.value = this.toString();\n                fireEvent(this._o.field, 'change', { firedBy: this });\n            }\n            if (!preventOnSelect && typeof this._o.onSelect === 'function') {\n                this._o.onSelect.call(this, this.getDate());\n            }\n        },\n\n        /**\n         * change view to a specific date\n         */\n        gotoDate: function(date)\n        {\n            var newCalendar = true;\n\n            if (!isDate(date)) {\n                return;\n            }\n\n            if (this.calendars) {\n                var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),\n                    lastVisibleDate = new Date(this.calendars[this.calendars.length-1].year, this.calendars[this.calendars.length-1].month, 1),\n                    visibleDate = date.getTime();\n                // get the end of the month\n                lastVisibleDate.setMonth(lastVisibleDate.getMonth()+1);\n                lastVisibleDate.setDate(lastVisibleDate.getDate()-1);\n                newCalendar = (visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate);\n            }\n\n            if (newCalendar) {\n                this.calendars = [{\n                    month: date.getMonth(),\n                    year: date.getFullYear()\n                }];\n                if (this._o.mainCalendar === 'right') {\n                    this.calendars[0].month += 1 - this._o.numberOfMonths;\n                }\n            }\n\n            this.adjustCalendars();\n        },\n\n        adjustDate: function(sign, days) {\n\n            var day = this.getDate() || new Date();\n            var difference = parseInt(days)*24*60*60*1000;\n\n            var newDay;\n\n            if (sign === 'add') {\n                newDay = new Date(day.valueOf() + difference);\n            } else if (sign === 'subtract') {\n                newDay = new Date(day.valueOf() - difference);\n            }\n\n            this.setDate(newDay);\n        },\n\n        adjustCalendars: function() {\n            this.calendars[0] = adjustCalendar(this.calendars[0]);\n            for (var c = 1; c < this._o.numberOfMonths; c++) {\n                this.calendars[c] = adjustCalendar({\n                    month: this.calendars[0].month + c,\n                    year: this.calendars[0].year\n                });\n            }\n            this.draw();\n        },\n\n        gotoToday: function()\n        {\n            this.gotoDate(new Date());\n        },\n\n        /**\n         * change view to a specific month (zero-index, e.g. 0: January)\n         */\n        gotoMonth: function(month)\n        {\n            if (!isNaN(month)) {\n                this.calendars[0].month = parseInt(month, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        nextMonth: function()\n        {\n            this.calendars[0].month++;\n            this.adjustCalendars();\n        },\n\n        prevMonth: function()\n        {\n            this.calendars[0].month--;\n            this.adjustCalendars();\n        },\n\n        /**\n         * change view to a specific full year (e.g. \"2012\")\n         */\n        gotoYear: function(year)\n        {\n            if (!isNaN(year)) {\n                this.calendars[0].year = parseInt(year, 10);\n                this.adjustCalendars();\n            }\n        },\n\n        /**\n         * change the minDate\n         */\n        setMinDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.minDate = value;\n                this._o.minYear  = value.getFullYear();\n                this._o.minMonth = value.getMonth();\n            } else {\n                this._o.minDate = defaults.minDate;\n                this._o.minYear  = defaults.minYear;\n                this._o.minMonth = defaults.minMonth;\n                this._o.startRange = defaults.startRange;\n            }\n\n            this.draw();\n        },\n\n        /**\n         * change the maxDate\n         */\n        setMaxDate: function(value)\n        {\n            if(value instanceof Date) {\n                setToStartOfDay(value);\n                this._o.maxDate = value;\n                this._o.maxYear = value.getFullYear();\n                this._o.maxMonth = value.getMonth();\n            } else {\n                this._o.maxDate = defaults.maxDate;\n                this._o.maxYear = defaults.maxYear;\n                this._o.maxMonth = defaults.maxMonth;\n                this._o.endRange = defaults.endRange;\n            }\n\n            this.draw();\n        },\n\n        setStartRange: function(value)\n        {\n            this._o.startRange = value;\n        },\n\n        setEndRange: function(value)\n        {\n            this._o.endRange = value;\n        },\n\n        /**\n         * refresh the HTML\n         */\n        draw: function(force)\n        {\n            if (!this._v && !force) {\n                return;\n            }\n            var opts = this._o,\n                minYear = opts.minYear,\n                maxYear = opts.maxYear,\n                minMonth = opts.minMonth,\n                maxMonth = opts.maxMonth,\n                html = '',\n                randId;\n\n            if (this._y <= minYear) {\n                this._y = minYear;\n                if (!isNaN(minMonth) && this._m < minMonth) {\n                    this._m = minMonth;\n                }\n            }\n            if (this._y >= maxYear) {\n                this._y = maxYear;\n                if (!isNaN(maxMonth) && this._m > maxMonth) {\n                    this._m = maxMonth;\n                }\n            }\n\n            randId = 'pika-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);\n\n            for (var c = 0; c < opts.numberOfMonths; c++) {\n                html += '<div class=\"pika-lendar\">' + renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId) + '</div>';\n            }\n\n            this.el.innerHTML = html;\n\n            if (opts.bound) {\n                if(opts.field.type !== 'hidden') {\n                    sto(function() {\n                        opts.trigger.focus();\n                    }, 1);\n                }\n            }\n\n            if (typeof this._o.onDraw === 'function') {\n                this._o.onDraw(this);\n            }\n\n            if (opts.bound) {\n                // let the screen reader user know to use arrow keys\n                opts.field.setAttribute('aria-label', 'Use the arrow keys to pick a date');\n            }\n        },\n\n        adjustPosition: function()\n        {\n            var field, pEl, width, height, viewportWidth, viewportHeight, scrollTop, left, top, clientRect;\n\n            if (this._o.container) return;\n\n            this.el.style.position = 'absolute';\n\n            field = this._o.trigger;\n            pEl = field;\n            width = this.el.offsetWidth;\n            height = this.el.offsetHeight;\n            viewportWidth = window.innerWidth || document.documentElement.clientWidth;\n            viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            scrollTop = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\n\n            if (typeof field.getBoundingClientRect === 'function') {\n                clientRect = field.getBoundingClientRect();\n                left = clientRect.left + window.pageXOffset;\n                top = clientRect.bottom + window.pageYOffset;\n            } else {\n                left = pEl.offsetLeft;\n                top  = pEl.offsetTop + pEl.offsetHeight;\n                while((pEl = pEl.offsetParent)) {\n                    left += pEl.offsetLeft;\n                    top  += pEl.offsetTop;\n                }\n            }\n\n            // default position is bottom & left\n            if ((this._o.reposition && left + width > viewportWidth) ||\n                (\n                    this._o.position.indexOf('right') > -1 &&\n                    left - width + field.offsetWidth > 0\n                )\n            ) {\n                left = left - width + field.offsetWidth;\n            }\n            if ((this._o.reposition && top + height > viewportHeight + scrollTop) ||\n                (\n                    this._o.position.indexOf('top') > -1 &&\n                    top - height - field.offsetHeight > 0\n                )\n            ) {\n                top = top - height - field.offsetHeight;\n            }\n\n            this.el.style.left = left + 'px';\n            this.el.style.top = top + 'px';\n        },\n\n        /**\n         * render HTML for a particular month\n         */\n        render: function(year, month, randId)\n        {\n            var opts   = this._o,\n                now    = new Date(),\n                days   = getDaysInMonth(year, month),\n                before = new Date(year, month, 1).getDay(),\n                data   = [],\n                row    = [];\n            setToStartOfDay(now);\n            if (opts.firstDay > 0) {\n                before -= opts.firstDay;\n                if (before < 0) {\n                    before += 7;\n                }\n            }\n            var previousMonth = month === 0 ? 11 : month - 1,\n                nextMonth = month === 11 ? 0 : month + 1,\n                yearOfPreviousMonth = month === 0 ? year - 1 : year,\n                yearOfNextMonth = month === 11 ? year + 1 : year,\n                daysInPreviousMonth = getDaysInMonth(yearOfPreviousMonth, previousMonth);\n            var cells = days + before,\n                after = cells;\n            while(after > 7) {\n                after -= 7;\n            }\n            cells += 7 - after;\n            var isWeekSelected = false;\n            for (var i = 0, r = 0; i < cells; i++)\n            {\n                var day = new Date(year, month, 1 + (i - before)),\n                    isSelected = isDate(this._d) ? compareDates(day, this._d) : false,\n                    isToday = compareDates(day, now),\n                    hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,\n                    isEmpty = i < before || i >= (days + before),\n                    dayNumber = 1 + (i - before),\n                    monthNumber = month,\n                    yearNumber = year,\n                    isStartRange = opts.startRange && compareDates(opts.startRange, day),\n                    isEndRange = opts.endRange && compareDates(opts.endRange, day),\n                    isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,\n                    isDisabled = (opts.minDate && day < opts.minDate) ||\n                                 (opts.maxDate && day > opts.maxDate) ||\n                                 (opts.disableWeekends && isWeekend(day)) ||\n                                 (opts.disableDayFn && opts.disableDayFn(day));\n\n                if (isEmpty) {\n                    if (i < before) {\n                        dayNumber = daysInPreviousMonth + dayNumber;\n                        monthNumber = previousMonth;\n                        yearNumber = yearOfPreviousMonth;\n                    } else {\n                        dayNumber = dayNumber - days;\n                        monthNumber = nextMonth;\n                        yearNumber = yearOfNextMonth;\n                    }\n                }\n\n                var dayConfig = {\n                        day: dayNumber,\n                        month: monthNumber,\n                        year: yearNumber,\n                        hasEvent: hasEvent,\n                        isSelected: isSelected,\n                        isToday: isToday,\n                        isDisabled: isDisabled,\n                        isEmpty: isEmpty,\n                        isStartRange: isStartRange,\n                        isEndRange: isEndRange,\n                        isInRange: isInRange,\n                        showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths,\n                        enableSelectionDaysInNextAndPreviousMonths: opts.enableSelectionDaysInNextAndPreviousMonths\n                    };\n\n                if (opts.pickWholeWeek && isSelected) {\n                    isWeekSelected = true;\n                }\n\n                row.push(renderDay(dayConfig));\n\n                if (++r === 7) {\n                    if (opts.showWeekNumber) {\n                        row.unshift(renderWeek(i - before, month, year));\n                    }\n                    data.push(renderRow(row, opts.isRTL, opts.pickWholeWeek, isWeekSelected));\n                    row = [];\n                    r = 0;\n                    isWeekSelected = false;\n                }\n            }\n            return renderTable(opts, data, randId);\n        },\n\n        isVisible: function()\n        {\n            return this._v;\n        },\n\n        show: function()\n        {\n            if (!this.isVisible()) {\n                this._v = true;\n                this.draw();\n                removeClass(this.el, 'is-hidden');\n                if (this._o.bound) {\n                    addEvent(document, 'click', this._onClick);\n                    this.adjustPosition();\n                }\n                if (typeof this._o.onOpen === 'function') {\n                    this._o.onOpen.call(this);\n                }\n            }\n        },\n\n        hide: function()\n        {\n            var v = this._v;\n            if (v !== false) {\n                if (this._o.bound) {\n                    removeEvent(document, 'click', this._onClick);\n                }\n                this.el.style.position = 'static'; // reset\n                this.el.style.left = 'auto';\n                this.el.style.top = 'auto';\n                addClass(this.el, 'is-hidden');\n                this._v = false;\n                if (v !== undefined && typeof this._o.onClose === 'function') {\n                    this._o.onClose.call(this);\n                }\n            }\n        },\n\n        /**\n         * GAME OVER\n         */\n        destroy: function()\n        {\n            this.hide();\n            removeEvent(this.el, 'mousedown', this._onMouseDown, true);\n            removeEvent(this.el, 'touchend', this._onMouseDown, true);\n            removeEvent(this.el, 'change', this._onChange);\n            removeEvent(document, 'keydown', this._onKeyChange);\n            if (this._o.field) {\n                removeEvent(this._o.field, 'change', this._onInputChange);\n                if (this._o.bound) {\n                    removeEvent(this._o.trigger, 'click', this._onInputClick);\n                    removeEvent(this._o.trigger, 'focus', this._onInputFocus);\n                    removeEvent(this._o.trigger, 'blur', this._onInputBlur);\n                }\n            }\n            if (this.el.parentNode) {\n                this.el.parentNode.removeChild(this.el);\n            }\n        }\n\n    };\n\n    return Pikaday;\n\n}));\n\n},{\"moment\":5}],8:[function(require,module,exports){\n'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\n},{\"decode-uri-component\":2,\"object-assign\":6,\"strict-uri-encode\":9}],9:[function(require,module,exports){\n'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-3\">\\n        <input type=\"text\" class=\"in name date\">\\n      </div>\\n      <div class=\"cell medium-9\">\\n        <p class=\"desc\">Popis</p>\\n      </div>';\n}\n\nfunction assemble() {\n  var block = wrap('dateinput', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],11:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-3\">\\n        <input type=\"text\" class=\"out formula date\">\\n      </div>\\n      <div class=\"cell medium-9\">\\n        <p class=\"desc\">Popis</p>\\n      </div>';\n}\n\nfunction assemble() {\n  var block = wrap('dateoutput', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],12:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '\\n    <div class=\"cell medium-6\">\\n      <h4 class=\"desc card-name\">Nadpis karty</h4>\\n      <p class=\"desc\">Kr\\xE1tce popi\\u0161te, k \\u010Demu se tato karta hod\\xED.</p>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <h4>Autor/ka karty</h4>\\n      <p class=\"desc\">Jm\\xE9no P\\u0159\\xEDjmen\\xED, jmeno.prijmeni@email.cz</p>\\n      <h4>Licence (pravidla pro sd\\xEDlen\\xED)</h4>\\n      <p class=\"desc\">Zde kr\\xE1tce popi\\u0161te, zda kartu sd\\xEDl\\xEDte voln\\u011B\\n      nebo zda \\u017E\\xE1d\\xE1te o dodr\\u017Een\\xED n\\u011Bjak\\xFDch pravidel (nap\\u0159. ponech\\xE1n\\xED\\n      kontaktu na p\\u016Fvodn\\xEDho autora atp. M\\u016F\\u017Eete\\n      ur\\u010Dit i konkr\\xE9tn\\xED licenci (nap\\u0159\\xEDklad Creative Commons).</p>\\n    </div>\\n    <div class=\"cell\">\\n      <div class=\"input-group\">\\n        <span class=\"desc input-group-label\">N\\xE1zev aktivity</span>\\n        <input name=\"_activity-name\" type=\"text\" class=\"in text input-group-field\">\\n      </div>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <p><label>\\n        C\\xEDl aktivity v jedn\\xE9 v\\u011Bt\\u011B<br>\\n        <textarea class=\"in text\"></textarea>\\n      </label></p>\\n    </div>\\n    <div class=\"cell medium-6\">\\n      <p><label>Pozn\\xE1mky<br>\\n      <textarea class=\"in text\"></textarea>\\n      </label></p>\\n    </div>';\n}\n\nfunction assemble() {\n  var block = wrap('header', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],13:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nvar _require2 = require('./../fields/fields'),\n    read = _require2.read;\n\nfunction update(el) {\n  if (read(el.querySelector('.bool'))) {\n    el.classList.add('true');\n  } else {\n    el.classList.remove('true');\n  }\n}\n\nvar code = '\\n<div class=\"cell is-true\">\\n  <p class=\"icon\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i></p>\\n  <p class=\"desc\">Text, pokud je podm\\xEDnka spln\\u011Bna</p>\\n</div>\\n<div class=\"cell is-false\">\\n  <p class=\"icon\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></p>\\n  <p class=\"desc\">Text, pokud podm\\xEDnka nen\\xED spln\\u011Bna</p>\\n</div>\\n<div class=\"cell hide-in-fill-mode\"><input type=\"text\" class=\"out name formula bool\"></div>';\n\nfunction assemble() {\n  var block = wrap('indicator', '' + code);\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble, update: update };\n\n},{\"./../fields/fields\":26,\"./util\":20}],14:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-3\">\\n    <input type=\"text\" class=\"in name number\">\\n  </div>\\n  <div class=\"cell medium-9\">\\n    <p class=\"desc\">Popis \\u010D\\xEDseln\\xE9 hodnoty</p>\\n  </div>\\n  ';\n}\n\nfunction assemble() {\n  var block = wrap('number', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],15:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nvar _require2 = require('./../fields/fields'),\n    read = _require2.read,\n    write = _require2.write;\n\nfunction update(el) {\n  var rows = [].slice.call(el.querySelectorAll('.row'));\n  var total = rows.reduce(function (acc, row) {\n    var price = read(row.querySelector('.price'));\n    var units = read(row.querySelector('.units'));\n    write(row.querySelector('.subtotal'), price * units);\n    return acc + price * units;\n  }, 0);\n  write(el.querySelector('.total'), total);\n  hideEmpty(el.querySelectorAll('.pricelist-item'));\n}\n\nfunction hideEmpty(items) {\n  var lastEmpty = false;\n  [].slice.call(items).forEach(function (item) {\n    var values = item.querySelectorAll('input');\n    var empty = values[0].value === '' && values[1].value === '' && values[2].value === '';\n    if (lastEmpty && empty) {\n      item.style.display = 'none';\n    } else {\n      item.style.display = 'flex';\n    }\n    lastEmpty = empty;\n  });\n}\nvar header = '<div class=\"cell medium-6\"><p class=\"desc\">Polo\\u017Eka</p></div>\\n                <div class=\"cell medium-2\"><p class=\"desc\">Cena</p></div>\\n                <div class=\"cell medium-2\"><p class=\"desc\">Po\\u010Det</p></div>\\n                <div class=\"cell medium-2\"><p class=\"desc\">Celkem</p></div>';\nvar row = '<div class=\"row grid-x pricelist-item\">\\n              <div class=\"cell medium-6\"><input type=\"text\" class=\"in text\"></div>\\n              <div class=\"cell medium-2\"><input type=\"text\" class=\"in number price\"></div>\\n              <div class=\"cell medium-2\"><input type=\"text\" class=\"in number units\"></div>\\n              <div class=\"cell medium-2\"><input type=\"text\" class=\"out number subtotal\"></div>\\n             </div>';\nvar totals = '<div class=\"totals grid-x\">\\n                  <div class=\"cell medium-6\"><p class=\"desc\">Celkem</p></div>\\n                  <div class=\"cell medium-6\"><input type=\"text\" class=\"out name number total\"></div>\\n                 </div>';\n\nfunction assemble() {\n  var block = wrap('pricelist', header + ' <div class=\"cell\">' + row.repeat(10) + ' ' + totals + '</div>');\n  init(block, update);\n  return block;\n}\n\nmodule.exports = { assemble: assemble, update: update };\n\n},{\"./../fields/fields\":26,\"./util\":20}],16:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap;\n\nfunction assemble() {\n  return wrap('separator', '<div class=\"cell\"><hr></div>');\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],17:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '\\n    <div class=\"cell\">\\n      <h4 class=\"desc card-name\">Mezititulek</h4>\\n    </div>';\n}\n\nfunction assemble() {\n  var block = wrap('subhead', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],18:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    wrap = _require.wrap,\n    init = _require.init;\n\nfunction getCode() {\n  return '<div class=\"cell medium-6\">\\n    <p class=\"desc\">Popis</p>\\n  </div>\\n  <div class=\"cell medium-6\">\\n    <input type=\"text\" class=\"out name formula number\">\\n  </div>';\n}\n\nfunction assemble() {\n  var block = wrap('sum', getCode());\n  init(block);\n  return block;\n}\n\nmodule.exports = { assemble: assemble };\n\n},{\"./util\":20}],19:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./../util.js'),\n    allArray = _require.allArray;\n\nvar fields = require('./../fields/fields');\nvar autosize = require('autosize');\n\nvar dateinput = require('./_dateinput');\nvar dateoutput = require('./_dateoutput');\nvar header = require('./_header');\nvar indicator = require('./_indicator');\nvar pricelist = require('./_pricelist');\nvar number = require('./_number');\nvar separator = require('./_separator');\nvar subhead = require('./_subhead');\nvar sum = require('./_sum');\n\nvar all = {\n  dateinput: dateinput,\n  dateoutput: dateoutput,\n  header: header,\n  indicator: indicator,\n  pricelist: pricelist,\n  number: number,\n  separator: separator,\n  subhead: subhead,\n  sum: sum\n};\n\nfunction create(type, data) {\n  var block = all[type].assemble();\n  if (data) fill(block, data);\n  if (all[type].update) all[type].update(block);\n  autosize(block.querySelectorAll('textarea'));\n  return block;\n}\n\nfunction poll(wrapper) {\n  return {\n    type: wrapper.dataset.type,\n    data: {\n      inputs: pollFieldType(wrapper, '.in'),\n      descriptions: pollFieldType(wrapper, '.desc'),\n      names: pollNames(wrapper),\n      formulas: pollFormulas(wrapper)\n    }\n  };\n}\n\nfunction pollFieldType(wrapper, fieldName) {\n  return allArray(wrapper, fieldName).map(function (el) {\n    return fields.read(el);\n  });\n}\n\nfunction pollNames(wrapper) {\n  return allArray(wrapper, '.name-setter').map(function (el) {\n    return el.value;\n  });\n}\n\nfunction pollFormulas(wrapper) {\n  return allArray(wrapper, '.formula-setter').map(function (el) {\n    return el.value;\n  });\n}\n\nfunction fill(wrapper, data) {\n  fillFieldType(wrapper, '.in', data.inputs);\n  fillFieldType(wrapper, '.desc', data.descriptions);\n  fillNames(wrapper, data.names);\n  fillFormulas(wrapper, data.formulas);\n}\n\nfunction fillFieldType(wrapper, fieldName, data) {\n  if (data) {\n    allArray(wrapper, fieldName).forEach(function (el, index) {\n      if (data[index]) fields.write(el, data[index]);\n    });\n  }\n}\n\nfunction fillNames(wrapper, data) {\n  if (data) {\n    allArray(wrapper, '.name-setter').forEach(function (el, index) {\n      if (data[index]) {\n        el.value = data[index];\n        el.dispatchEvent(new Event('input'));\n      }\n    });\n  }\n}\n\nfunction fillFormulas(wrapper, data) {\n  if (data) {\n    allArray(wrapper, '.formula-setter').forEach(function (el, index) {\n      if (data[index]) {\n        el.value = data[index];\n        el.dispatchEvent(new Event('input'));\n      }\n    });\n  }\n}\n\nmodule.exports = {\n  create: create,\n  poll: poll,\n  fill: fill,\n  all: all\n};\n\n},{\"./../fields/fields\":26,\"./../util.js\":31,\"./_dateinput\":10,\"./_dateoutput\":11,\"./_header\":12,\"./_indicator\":13,\"./_number\":14,\"./_pricelist\":15,\"./_separator\":16,\"./_subhead\":17,\"./_sum\":18,\"autosize\":1}],20:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./../util.js'),\n    allArray = _require.allArray,\n    updateCardGently = _require.updateCardGently;\n\nvar fields = require('./../fields/fields');\n\nfunction wrap(type, html) {\n  var wrapper = document.createElement('DIV');\n  wrapper.classList.add('grid-x');\n  wrapper.classList.add('grid-margin-x');\n  wrapper.classList.add('block');\n  wrapper.dataset.type = type;\n  wrapper.classList.add('block-' + type);\n  wrapper.innerHTML = html;\n  var tools = document.createElement('DIV');\n  tools.classList.add('cell');\n  tools.classList.add('block-tools');\n  tools.innerHTML = '\\n    <div class=\"external-tools\">\\n      <a class=\"addBlock tool\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i></a>\\n      <a class=\"swapBlocks tool\"><i class=\"fa fa-arrow-up\" aria-hidden=\"true\"></i><i class=\"fa fa-arrow-down\" aria-hidden=\"true\"></i></a>\\n    </div>\\n    <p class=\"internal-tools\">' + type + ' <a class=\"removeBlock tool\"><i class=\"fa fa-times\" aria-hidden=\"true\"></i></a></p>';\n  wrapper.insertAdjacentElement('afterbegin', tools);\n  return wrapper;\n}\n\nfunction init(wrapper, update) {\n  Object.keys(fields.all).forEach(function (key) {\n    allArray(wrapper, '.' + key).forEach(function (el) {\n      return fields.all[key].init(el);\n    });\n  });\n  wrapper.addEventListener('externalUpdate', function () {\n    if (update) update(wrapper);\n  });\n  allArray(wrapper, '.in').forEach(function (el) {\n    return el.addEventListener('input', function () {\n      if (update) update(wrapper);\n      updateCardGently();\n    });\n  });\n}\n\nmodule.exports = { wrap: wrap, init: init };\n\n},{\"./../fields/fields\":26,\"./../util.js\":31}],21:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  activate(el, 'bool');\n}\n\nfunction read(el) {\n  return el.value === 'true';\n}\n\nfunction write(el, val) {\n  el.value = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":27}],22:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nvar moment = require('moment');\nvar Pikaday = require('pikaday');\n\nfunction init(el) {\n  activate(el, 'date');\n  decorate(el);\n}\n\nfunction decorate(el) {\n  if (el.classList.contains('in')) {\n    new Pikaday({\n      field: el,\n      format: 'D. M. YYYY',\n      firstDay: 1,\n      onSelect: function onSelect() {\n        return el.dispatchEvent(new Event('input'));\n      },\n      i18n: {\n        previousMonth: 'Pedchoz msc',\n        nextMonth: 'Nsledujc msc',\n        months: ['leden', 'nor', 'bezen', 'duben', 'kvten', 'erven', 'ervenec', 'srpen', 'z', 'jen', 'listopad', 'prosinec'],\n        weekdays: ['Nedle', 'Pondl', 'ter', 'Steda', 'tvrtek', 'Ptek', 'Sobota'],\n        weekdaysShort: ['Ne', 'Po', 't', 'St', 't', 'P', 'So']\n      }\n    });\n  }\n}\n\nfunction read(el) {\n  return moment(el.value, 'D. M. YYYY');\n}\n\nfunction write(el, val) {\n  if (typeof val === 'string') {\n    el.value = moment(val).format('D. M. YYYY');\n  } else if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object' && val.format === moment.prototype.format) {\n    el.value = val.format('D. M. YYYY');\n  }\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":27,\"moment\":5,\"pikaday\":7}],23:[function(require,module,exports){\n'use strict';\n\nfunction init(el) {\n  el.dataset.fieldName = 'desc';\n}\n\nfunction read(el) {\n  return el.innerHTML;\n}\n\nfunction write(el, val) {\n  el.innerHTML = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{}],24:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  el.dataset.isFloat = el.classList.contains('float') ? 'true' : 'false';\n  activate(el, 'number');\n}\n\nfunction read(el) {\n  return parseNumber(el, el.value);\n}\n\nfunction write(el, val) {\n  el.value = parseNumber(el, val);\n}\n\nfunction parseNumber(el, val) {\n  var numeric = el.dataset.isFloat === 'true' ? parseFloat(val, 10) : parseInt(val, 10);\n  return Number.isNaN(numeric) ? 0 : numeric;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":27}],25:[function(require,module,exports){\n'use strict';\n\nvar _require = require('./util'),\n    activate = _require.activate;\n\nfunction init(el) {\n  activate(el, 'text');\n}\n\nfunction read(el) {\n  return el.value;\n}\n\nfunction write(el, val) {\n  el.value = val;\n}\n\nmodule.exports = { init: init, read: read, write: write };\n\n},{\"./util\":27}],26:[function(require,module,exports){\n'use strict';\n\nvar bool = require('./_bool');\nvar date = require('./_date');\nvar desc = require('./_desc');\nvar number = require('./_number');\nvar text = require('./_text');\n\nvar all = {\n  bool: bool,\n  date: date,\n  desc: desc,\n  number: number,\n  text: text\n};\n\nfunction read(activeField) {\n  return all[activeField.dataset.fieldName].read(activeField);\n}\n\nfunction write(activeField, val) {\n  all[activeField.dataset.fieldName].write(activeField, val);\n}\n\nmodule.exports = { read: read, write: write, all: all };\n\n},{\"./_bool\":21,\"./_date\":22,\"./_desc\":23,\"./_number\":24,\"./_text\":25}],27:[function(require,module,exports){\n'use strict';\n\nfunction activate(el, fieldName) {\n  var wrapper = cel('DIV', ['key-wrapper', 'input-group']);\n\n  // wrapper.appendChild(type);\n  if (el.classList.contains('name')) {\n    var label = cel('SPAN', ['input-group-label'], '<i class=\"fa fa-tag\" aria-hidden=\"true\"></i>');\n    wrapper.appendChild(label);\n    var name = cel('INPUT', ['name-setter', 'input-group-field']);\n    name.addEventListener('input', function () {\n      return nameInput(el, name.value);\n    });\n    name.setAttribute('placeholder', 'nzev');\n    wrapper.appendChild(name);\n  }\n  if (el.classList.contains('out')) {\n    el.setAttribute('readonly', 'readonly');\n  }\n  if (el.classList.contains('formula')) {\n    var _label = cel('SPAN', ['input-group-label'], '&fnof;');\n    wrapper.appendChild(_label);\n    var formula = cel('INPUT', ['formula-setter', 'input-group-field']);\n    formula.addEventListener('input', function () {\n      return appendFormula(el, formula.value);\n    });\n    formula.setAttribute('placeholder', 'vzorec');\n    wrapper.appendChild(formula);\n    el.setAttribute('readonly', 'readonly');\n  }\n  el.dataset.fieldName = fieldName;\n  el.insertAdjacentElement('afterend', wrapper);\n}\n\nfunction cel(name, classNames, html) {\n  var el = document.createElement(name);\n  if (classNames) el.setAttribute('class', classNames.join(' '));\n  if (html) el.innerHTML = html;\n  return el;\n}\n\nfunction nameInput(el, name) {\n  el.setAttribute('name', name);\n}\n\nfunction appendFormula(el, formula) {\n  el.dataset.formula = formula;\n}\n\nmodule.exports = { activate: activate };\n\n},{}],28:[function(require,module,exports){\n'use strict';\n\nvar ui = require('./ui');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  run();\n});\n\nfunction run() {\n  ui.init();\n}\n\n},{\"./ui\":30}],29:[function(require,module,exports){\n'use strict';\n\nvar fileSaver = require('file-saver');\n\nfunction wrapExport(title, data) {\n  var json = JSON.stringify(data);\n  var url = 'https://jan-martinek.github.io/plancards/';\n  return '<!DOCTYPE html>\\n  <html>\\n  <head>\\n    <meta charset=\"utf-8\">\\n    <title>Ulo\\u017Een\\xE1 karta \"' + title + '\"</title>\\n  </head>\\n  <body>\\n    <h1>Toto je ulo\\u017Een\\xE1 karta \"' + title + '\".</h1>\\n    <p>\\n      Obsah karty m\\u016F\\u017Eete otev\\u0159\\xEDt a upravovat\\n      <a href=\"' + url + '\">na webu Pl\\xE1novac\\xEDch karet</a>.\\n    </p>\\n    <!-- !!!' + json + '!!! -->\\n  </body>\\n  </html>';\n}\n\nfunction unwrapExport(html) {\n  var matches = /<!-- !!!([\\S\\s]+)!!! -->/.exec(html);\n  if (matches) return JSON.parse(matches[1]);\n  return false;\n}\n\nfunction exportCard(title, data) {\n  var contents = wrapExport(title, data);\n  var blob = new Blob([contents], { type: 'text/plain;charset=utf-8' });\n  var today = new Date().toISOString().split('T')[0];\n  fileSaver.saveAs(blob, title + '-' + today + '.html');\n}\n\nfunction importCardFromFile(file, callback) {\n  var reader = new FileReader();\n  reader.readAsText(file);\n  reader.onload = function (e) {\n    return callback(unwrapExport(e.target.result));\n  };\n}\n\nfunction importCardFromUrl(url, callback) {\n  var request = new XMLHttpRequest();\n  request.open('GET', url, true);\n  request.send();\n  request.onreadystatechange = function () {\n    if (request.readyState === 4 && request.status === 200) {\n      callback(unwrapExport(request.responseText));\n    }\n  };\n}\n\nmodule.exports = { importCardFromFile: importCardFromFile, importCardFromUrl: importCardFromUrl, exportCard: exportCard };\n\n},{\"file-saver\":4}],30:[function(require,module,exports){\n'use strict';\n\nvar queryString = require('query-string');\nvar blocks = require('./blocks/blocks');\nvar store = require('./store');\n\nvar _require = require('./util'),\n    allArray = _require.allArray,\n    findAncestor = _require.findAncestor,\n    updateCard = _require.updateCard;\n\n// dashboard / card\n\n\nfunction closeCard() {\n  document.getElementById('card').innerHTML = '';\n  showDashboard();\n}\n\nfunction showDashboard() {\n  setDisplay('card', 'none');\n  setDisplay('toolbar', 'none');\n  setDisplay('dashboard', 'flex');\n}\n\nfunction showCard() {\n  setDisplay('card', 'block');\n  setDisplay('toolbar', 'flex');\n  setDisplay('dashboard', 'none');\n}\n\nfunction setDisplay(id, val) {\n  document.getElementById(id).style.display = val;\n}\n\n// edit / fill mode\nfunction initMode() {\n  toggleMode('fill');\n  document.querySelector('.mode-toggle').addEventListener('click', toggleMode);\n}\n\nvar modeInitializations = {\n  edit: function edit() {\n    document.body.classList.remove('fill-mode');\n    document.body.classList.add('edit-mode');\n    allArray(document.body, '.desc').forEach(function (el) {\n      el.setAttribute('contenteditable', 'true');\n    });\n  },\n  fill: function fill() {\n    document.body.classList.remove('edit-mode');\n    document.body.classList.add('fill-mode');\n    allArray(document.body, '.desc').forEach(function (el) {\n      el.removeAttribute('contenteditable');\n    });\n    updateCard();\n  }\n};\n\nfunction toggleMode(mode) {\n  var detectedMode = typeof mode === 'string' ? mode : document.body.classList.contains('fill-mode') ? 'edit' : 'fill';\n\n  modeInitializations[detectedMode]();\n}\n\n// block tools\nvar blockActions = {\n  swapBlocks: function swapBlocks(button) {\n    var block = findAncestor(button, 'block');\n    var previous = block.previousSibling;\n    if (previous) block.parentNode.insertBefore(block, previous);\n  },\n  removeBlock: function removeBlock(button) {\n    var block = findAncestor(button, 'block');\n    block.remove();\n  },\n  addBlock: function addBlock(button) {\n    if (button.classList.contains('opened')) {\n      findAncestor(button, 'block-tools').querySelector('.add-block-tool').remove();\n      button.classList.remove('opened');\n    } else {\n      var tools = findAncestor(button, 'block-tools');\n      tools.insertAdjacentElement('beforeend', createAddBlockTool());\n      button.classList.add('opened');\n    }\n  },\n  addBlockType: function addBlockType(button) {\n    var block = findAncestor(button, 'block');\n    var newBlock = blocks.create(button.dataset.type);\n    block.insertAdjacentElement('beforebegin', newBlock);\n    toggleMode('edit'); // inits edit mode on block\n    findAncestor(button, 'block-tools').querySelector('.addBlock').classList.remove('opened');\n    findAncestor(button, 'add-block-tool').remove();\n  }\n};\n\nfunction createAddBlockTool() {\n  var addBlockTool = document.createElement('DIV');\n  addBlockTool.classList.add('add-block-tool');\n  addBlockTool.innerHTML = '<div class=\"arrow-up\"></div><div class=\"content\"></div>';\n  Object.keys(blocks.all).forEach(function (key) {\n    var blockLink = document.createElement('A');\n    blockLink.classList.add('tool');\n    blockLink.classList.add('addBlockType');\n    blockLink.dataset.type = key;\n    blockLink.innerHTML = key;\n    addBlockTool.querySelector('.content').appendChild(blockLink);\n  });\n  return addBlockTool;\n}\n\nfunction initBlockTools() {\n  document.getElementById('card').addEventListener('click', function (e) {\n    var button = e.target.classList.contains('tool') ? e.target : e.target.parentNode.classList.contains('tool') ? e.target.parentNode : null;\n    if (button) {\n      Object.keys(blockActions).forEach(function (key) {\n        if (button.classList.contains(key)) blockActions[key](button);\n      });\n    }\n  });\n}\n\n// prep DOM and add listeners to ui\nfunction init() {\n  initMode();\n  initImportCard();\n  initExportCard();\n  initBlockTools();\n  initCloseCard();\n  preventSubmit();\n  showDashboard();\n}\n\nfunction initExportCard() {\n  document.getElementById('save').addEventListener('click', function (e) {\n    var nameEl = document.querySelector('[name=\"_activity-name\"]');\n    var name = nameEl && nameEl.value ? nameEl.value : 'karta';\n    store.exportCard(name, pollData());\n    e.preventDefault();\n  });\n  document.getElementById('saveBlank').addEventListener('click', function (e) {\n    var nameEl = document.querySelector('.card-name');\n    var name = nameEl && nameEl.innerHTML ? nameEl.innerHTML : 'ablona';\n    store.exportCard(name, pollData(true));\n    e.preventDefault();\n  });\n}\n\nfunction pollData(empty) {\n  var cardExport = [];\n  allArray(document.getElementById('card'), '.block').forEach(function (block) {\n    var info = blocks.poll(block);\n    if (empty) info.data.inputs = [];\n    cardExport.push(info);\n  });\n  return cardExport;\n}\n\nfunction initImportCard() {\n  document.getElementById('loadFromFile').addEventListener('change', function (e) {\n    store.importCardFromFile(e.target.files[0], loadCard);\n    e.preventDefault();\n  });\n  var query = queryString.parse(window.location.search);\n  if (query.cardurl) store.importCardFromUrl(query.cardurl, loadCard);\n}\n\nfunction loadCard(data) {\n  var fragment = document.createDocumentFragment();\n  data.forEach(function (block) {\n    fragment.appendChild(blocks.create(block.type, block.data));\n  });\n  document.getElementById('card').appendChild(fragment);\n  showCard();\n  updateCard();\n}\n\nfunction initCloseCard() {\n  document.getElementById('close').addEventListener('click', function (e) {\n    closeCard();\n    e.preventDefault();\n  });\n}\n\nfunction preventSubmit() {\n  document.getElementById('card').addEventListener('submit', function (e) {\n    e.preventDefault();\n  });\n}\n\nmodule.exports = { init: init };\n\n},{\"./blocks/blocks\":19,\"./store\":29,\"./util\":31,\"query-string\":8}],31:[function(require,module,exports){\n'use strict';\n\nvar fields = require('./fields/fields');\nvar parser = require('expr-eval').Parser;\nvar autosize = require('autosize');\n\nvar timer = void 0;\n\nfunction makeArray(nodelist) {\n  return [].slice.call(nodelist);\n}\n\nfunction allArray(el, query) {\n  return makeArray(el.querySelectorAll(query));\n}\n\nfunction findAncestor(el, className) {\n  var parent = el.parentElement;\n\n  if (parent.classList.contains(className)) return parent;\n  return findAncestor(parent, className);\n}\n\nvar customFunctions = {\n  daysAfter: function daysAfter(date, days) {\n    return date.clone().add(days, 'days');\n  },\n  daysBefore: function daysBefore(date, days) {\n    return date.clone().subtract(days, 'days');\n  }\n};\n\nfunction updateCard() {\n  var card = document.getElementById('card');\n  var variables = Object.assign({}, collectVariables(card), customFunctions);\n  updateFormulaResults(card, variables);\n  autosize.update(document.querySelector('textarea'));\n}\n\nfunction updateCardGently() {\n  clearTimeout(timer);\n  timer = setTimeout(updateCard, 180);\n}\n\nfunction updateFormulaResults(card, variables) {\n  allArray(card, '.formula').forEach(function (el) {\n    if (el.dataset.formula) {\n      fields.write(el, parser.evaluate(el.dataset.formula, variables));\n      var block = findAncestor(el, 'block');\n      block.dispatchEvent(new Event('externalUpdate'));\n    }\n  });\n}\n\nfunction collectVariables(card) {\n  return allArray(card, '[name]').reduce(function (acc, el) {\n    acc[el.getAttribute('name')] = fields.read(el);\n    return acc;\n  }, {});\n}\n\nmodule.exports = {\n  allArray: allArray, findAncestor: findAncestor, updateCard: updateCard, updateCardGently: updateCardGently\n};\n\n},{\"./fields/fields\":26,\"autosize\":1,\"expr-eval\":3}]},{},[28])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYXV0b3NpemUvZGlzdC9hdXRvc2l6ZS5qcyIsIm5vZGVfbW9kdWxlcy9kZWNvZGUtdXJpLWNvbXBvbmVudC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9leHByLWV2YWwvZGlzdC9idW5kbGUuanMiLCJub2RlX21vZHVsZXMvZmlsZS1zYXZlci9GaWxlU2F2ZXIuanMiLCJub2RlX21vZHVsZXMvbW9tZW50L21vbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9vYmplY3QtYXNzaWduL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Bpa2FkYXkvcGlrYWRheS5qcyIsIm5vZGVfbW9kdWxlcy9xdWVyeS1zdHJpbmcvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyaWN0LXVyaS1lbmNvZGUvaW5kZXguanMiLCJzcmMvanMvYmxvY2tzL19kYXRlaW5wdXQuanMiLCJzcmMvanMvYmxvY2tzL19kYXRlb3V0cHV0LmpzIiwic3JjL2pzL2Jsb2Nrcy9faGVhZGVyLmpzIiwic3JjL2pzL2Jsb2Nrcy9faW5kaWNhdG9yLmpzIiwic3JjL2pzL2Jsb2Nrcy9fbnVtYmVyLmpzIiwic3JjL2pzL2Jsb2Nrcy9fcHJpY2VsaXN0LmpzIiwic3JjL2pzL2Jsb2Nrcy9fc2VwYXJhdG9yLmpzIiwic3JjL2pzL2Jsb2Nrcy9fc3ViaGVhZC5qcyIsInNyYy9qcy9ibG9ja3MvX3N1bS5qcyIsInNyYy9qcy9ibG9ja3MvYmxvY2tzLmpzIiwic3JjL2pzL2Jsb2Nrcy91dGlsLmpzIiwic3JjL2pzL2ZpZWxkcy9fYm9vbC5qcyIsInNyYy9qcy9maWVsZHMvX2RhdGUuanMiLCJzcmMvanMvZmllbGRzL19kZXNjLmpzIiwic3JjL2pzL2ZpZWxkcy9fbnVtYmVyLmpzIiwic3JjL2pzL2ZpZWxkcy9fdGV4dC5qcyIsInNyYy9qcy9maWVsZHMvZmllbGRzLmpzIiwic3JjL2pzL2ZpZWxkcy91dGlsLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvc3RvcmUuanMiLCJzcmMvanMvdWkuanMiLCJzcmMvanMvdXRpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25TQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3I1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDLzJJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcHRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O2VDTnVCLFFBQVEsUUFBUixDO0lBQWYsSSxZQUFBLEk7SUFBTSxJLFlBQUEsSTs7QUFFZCxTQUFTLE9BQVQsR0FBbUI7QUFDakI7QUFNRDs7QUFFRCxTQUFTLFFBQVQsR0FBb0I7QUFDbEIsTUFBTSxRQUFRLEtBQUssV0FBTCxFQUFrQixTQUFsQixDQUFkO0FBQ0EsT0FBSyxLQUFMO0FBQ0EsU0FBTyxLQUFQO0FBQ0Q7O0FBR0QsT0FBTyxPQUFQLEdBQWlCLEVBQUUsa0JBQUYsRUFBakI7Ozs7O2VDbEJ1QixRQUFRLFFBQVIsQztJQUFmLEksWUFBQSxJO0lBQU0sSSxZQUFBLEk7O0FBRWQsU0FBUyxPQUFULEdBQW1CO0FBQ2pCO0FBTUQ7O0FBRUQsU0FBUyxRQUFULEdBQW9CO0FBQ2xCLE1BQU0sUUFBUSxLQUFLLFlBQUwsRUFBbUIsU0FBbkIsQ0FBZDtBQUNBLE9BQUssS0FBTDtBQUNBLFNBQU8sS0FBUDtBQUNEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLGtCQUFGLEVBQWpCOzs7OztlQ2xCdUIsUUFBUSxRQUFSLEM7SUFBZixJLFlBQUEsSTtJQUFNLEksWUFBQSxJOztBQUVkLFNBQVMsT0FBVCxHQUFtQjtBQUNqQjtBQStCRDs7QUFFRCxTQUFTLFFBQVQsR0FBb0I7QUFDbEIsTUFBTSxRQUFRLEtBQUssUUFBTCxFQUFlLFNBQWYsQ0FBZDtBQUNBLE9BQUssS0FBTDtBQUNBLFNBQU8sS0FBUDtBQUNEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLGtCQUFGLEVBQWpCOzs7OztlQzNDdUIsUUFBUSxRQUFSLEM7SUFBZixJLFlBQUEsSTtJQUFNLEksWUFBQSxJOztnQkFDRyxRQUFRLG9CQUFSLEM7SUFBVCxJLGFBQUEsSTs7QUFFUixTQUFTLE1BQVQsQ0FBZ0IsRUFBaEIsRUFBb0I7QUFDbEIsTUFBSSxLQUFLLEdBQUcsYUFBSCxDQUFpQixPQUFqQixDQUFMLENBQUosRUFBcUM7QUFDbkMsT0FBRyxTQUFILENBQWEsR0FBYixDQUFpQixNQUFqQjtBQUNELEdBRkQsTUFFTztBQUNMLE9BQUcsU0FBSCxDQUFhLE1BQWIsQ0FBb0IsTUFBcEI7QUFDRDtBQUNGOztBQUVELElBQU0sOGJBQU47O0FBV0EsU0FBUyxRQUFULEdBQW9CO0FBQ2xCLE1BQU0sUUFBUSxLQUFLLFdBQUwsT0FBcUIsSUFBckIsQ0FBZDtBQUNBLE9BQUssS0FBTCxFQUFZLE1BQVo7QUFDQSxTQUFPLEtBQVA7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxrQkFBRixFQUFZLGNBQVosRUFBakI7Ozs7O2VDN0J1QixRQUFRLFFBQVIsQztJQUFmLEksWUFBQSxJO0lBQU0sSSxZQUFBLEk7O0FBRWQsU0FBUyxPQUFULEdBQW1CO0FBQ2pCO0FBT0Q7O0FBRUQsU0FBUyxRQUFULEdBQW9CO0FBQ2xCLE1BQU0sUUFBUSxLQUFLLFFBQUwsRUFBZSxTQUFmLENBQWQ7QUFDQSxPQUFLLEtBQUw7QUFDQSxTQUFPLEtBQVA7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxrQkFBRixFQUFqQjs7Ozs7ZUNuQnVCLFFBQVEsUUFBUixDO0lBQWYsSSxZQUFBLEk7SUFBTSxJLFlBQUEsSTs7Z0JBQ1UsUUFBUSxvQkFBUixDO0lBQWhCLEksYUFBQSxJO0lBQU0sSyxhQUFBLEs7O0FBRWQsU0FBUyxNQUFULENBQWdCLEVBQWhCLEVBQW9CO0FBQ2xCLE1BQU0sT0FBTyxHQUFHLEtBQUgsQ0FBUyxJQUFULENBQWMsR0FBRyxnQkFBSCxDQUFvQixNQUFwQixDQUFkLENBQWI7QUFDQSxNQUFNLFFBQVEsS0FBSyxNQUFMLENBQVksVUFBQyxHQUFELEVBQU0sR0FBTixFQUFjO0FBQ3RDLFFBQU0sUUFBUSxLQUFLLElBQUksYUFBSixDQUFrQixRQUFsQixDQUFMLENBQWQ7QUFDQSxRQUFNLFFBQVEsS0FBSyxJQUFJLGFBQUosQ0FBa0IsUUFBbEIsQ0FBTCxDQUFkO0FBQ0EsVUFBTSxJQUFJLGFBQUosQ0FBa0IsV0FBbEIsQ0FBTixFQUFzQyxRQUFRLEtBQTlDO0FBQ0EsV0FBTyxNQUFPLFFBQVEsS0FBdEI7QUFDRCxHQUxhLEVBS1gsQ0FMVyxDQUFkO0FBTUEsUUFBTSxHQUFHLGFBQUgsQ0FBaUIsUUFBakIsQ0FBTixFQUFrQyxLQUFsQztBQUNBLFlBQVUsR0FBRyxnQkFBSCxDQUFvQixpQkFBcEIsQ0FBVjtBQUNEOztBQUVELFNBQVMsU0FBVCxDQUFtQixLQUFuQixFQUEwQjtBQUN4QixNQUFJLFlBQVksS0FBaEI7QUFDQSxLQUFHLEtBQUgsQ0FBUyxJQUFULENBQWMsS0FBZCxFQUFxQixPQUFyQixDQUE2QixVQUFDLElBQUQsRUFBVTtBQUNyQyxRQUFNLFNBQVMsS0FBSyxnQkFBTCxDQUFzQixPQUF0QixDQUFmO0FBQ0EsUUFBTSxRQUFRLE9BQU8sQ0FBUCxFQUFVLEtBQVYsS0FBb0IsRUFBcEIsSUFBMEIsT0FBTyxDQUFQLEVBQVUsS0FBVixLQUFvQixFQUE5QyxJQUFvRCxPQUFPLENBQVAsRUFBVSxLQUFWLEtBQW9CLEVBQXRGO0FBQ0EsUUFBSSxhQUFhLEtBQWpCLEVBQXdCO0FBQ3RCLFdBQUssS0FBTCxDQUFXLE9BQVgsR0FBcUIsTUFBckI7QUFDRCxLQUZELE1BRU87QUFDTCxXQUFLLEtBQUwsQ0FBVyxPQUFYLEdBQXFCLE1BQXJCO0FBQ0Q7QUFDRCxnQkFBWSxLQUFaO0FBQ0QsR0FURDtBQVVEO0FBQ0QsSUFBTSxxVEFBTjtBQUlBLElBQU0sZ2JBQU47QUFNQSxJQUFNLG9QQUFOOztBQUtBLFNBQVMsUUFBVCxHQUFvQjtBQUNsQixNQUFNLFFBQVEsS0FBSyxXQUFMLEVBQXFCLE1BQXJCLDJCQUFpRCxJQUFJLE1BQUosQ0FBVyxFQUFYLENBQWpELFNBQW1FLE1BQW5FLFlBQWQ7QUFDQSxPQUFLLEtBQUwsRUFBWSxNQUFaO0FBQ0EsU0FBTyxLQUFQO0FBQ0Q7O0FBR0QsT0FBTyxPQUFQLEdBQWlCLEVBQUUsa0JBQUYsRUFBWSxjQUFaLEVBQWpCOzs7OztlQ2xEaUIsUUFBUSxRQUFSLEM7SUFBVCxJLFlBQUEsSTs7QUFFUixTQUFTLFFBQVQsR0FBb0I7QUFDbEIsU0FBTyxLQUFLLFdBQUwsRUFBa0IsOEJBQWxCLENBQVA7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxrQkFBRixFQUFqQjs7Ozs7ZUNQdUIsUUFBUSxRQUFSLEM7SUFBZixJLFlBQUEsSTtJQUFNLEksWUFBQSxJOztBQUVkLFNBQVMsT0FBVCxHQUFtQjtBQUNqQjtBQUlEOztBQUVELFNBQVMsUUFBVCxHQUFvQjtBQUNsQixNQUFNLFFBQVEsS0FBSyxTQUFMLEVBQWdCLFNBQWhCLENBQWQ7QUFDQSxPQUFLLEtBQUw7QUFDQSxTQUFPLEtBQVA7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxrQkFBRixFQUFqQjs7Ozs7ZUNoQnVCLFFBQVEsUUFBUixDO0lBQWYsSSxZQUFBLEk7SUFBTSxJLFlBQUEsSTs7QUFFZCxTQUFTLE9BQVQsR0FBbUI7QUFDakI7QUFNRDs7QUFFRCxTQUFTLFFBQVQsR0FBb0I7QUFDbEIsTUFBTSxRQUFRLEtBQUssS0FBTCxFQUFZLFNBQVosQ0FBZDtBQUNBLE9BQUssS0FBTDtBQUNBLFNBQU8sS0FBUDtBQUNEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLGtCQUFGLEVBQWpCOzs7OztlQ2xCcUIsUUFBUSxjQUFSLEM7SUFBYixRLFlBQUEsUTs7QUFDUixJQUFNLFNBQVMsUUFBUSxvQkFBUixDQUFmO0FBQ0EsSUFBTSxXQUFXLFFBQVEsVUFBUixDQUFqQjs7QUFFQSxJQUFNLFlBQVksUUFBUSxjQUFSLENBQWxCO0FBQ0EsSUFBTSxhQUFhLFFBQVEsZUFBUixDQUFuQjtBQUNBLElBQU0sU0FBUyxRQUFRLFdBQVIsQ0FBZjtBQUNBLElBQU0sWUFBWSxRQUFRLGNBQVIsQ0FBbEI7QUFDQSxJQUFNLFlBQVksUUFBUSxjQUFSLENBQWxCO0FBQ0EsSUFBTSxTQUFTLFFBQVEsV0FBUixDQUFmO0FBQ0EsSUFBTSxZQUFZLFFBQVEsY0FBUixDQUFsQjtBQUNBLElBQU0sVUFBVSxRQUFRLFlBQVIsQ0FBaEI7QUFDQSxJQUFNLE1BQU0sUUFBUSxRQUFSLENBQVo7O0FBRUEsSUFBTSxNQUFNO0FBQ1Ysc0JBRFU7QUFFVix3QkFGVTtBQUdWLGdCQUhVO0FBSVYsc0JBSlU7QUFLVixzQkFMVTtBQU1WLGdCQU5VO0FBT1Ysc0JBUFU7QUFRVixrQkFSVTtBQVNWO0FBVFUsQ0FBWjs7QUFZQSxTQUFTLE1BQVQsQ0FBZ0IsSUFBaEIsRUFBc0IsSUFBdEIsRUFBNEI7QUFDMUIsTUFBTSxRQUFRLElBQUksSUFBSixFQUFVLFFBQVYsRUFBZDtBQUNBLE1BQUksSUFBSixFQUFVLEtBQUssS0FBTCxFQUFZLElBQVo7QUFDVixNQUFJLElBQUksSUFBSixFQUFVLE1BQWQsRUFBc0IsSUFBSSxJQUFKLEVBQVUsTUFBVixDQUFpQixLQUFqQjtBQUN0QixXQUFTLE1BQU0sZ0JBQU4sQ0FBdUIsVUFBdkIsQ0FBVDtBQUNBLFNBQU8sS0FBUDtBQUNEOztBQUVELFNBQVMsSUFBVCxDQUFjLE9BQWQsRUFBdUI7QUFDckIsU0FBTztBQUNMLFVBQU0sUUFBUSxPQUFSLENBQWdCLElBRGpCO0FBRUwsVUFBTTtBQUNKLGNBQVEsY0FBYyxPQUFkLEVBQXVCLEtBQXZCLENBREo7QUFFSixvQkFBYyxjQUFjLE9BQWQsRUFBdUIsT0FBdkIsQ0FGVjtBQUdKLGFBQU8sVUFBVSxPQUFWLENBSEg7QUFJSixnQkFBVSxhQUFhLE9BQWI7QUFKTjtBQUZELEdBQVA7QUFTRDs7QUFFRCxTQUFTLGFBQVQsQ0FBdUIsT0FBdkIsRUFBZ0MsU0FBaEMsRUFBMkM7QUFDekMsU0FBTyxTQUFTLE9BQVQsRUFBa0IsU0FBbEIsRUFBNkIsR0FBN0IsQ0FBaUM7QUFBQSxXQUFNLE9BQU8sSUFBUCxDQUFZLEVBQVosQ0FBTjtBQUFBLEdBQWpDLENBQVA7QUFDRDs7QUFFRCxTQUFTLFNBQVQsQ0FBbUIsT0FBbkIsRUFBNEI7QUFDMUIsU0FBTyxTQUFTLE9BQVQsRUFBa0IsY0FBbEIsRUFBa0MsR0FBbEMsQ0FBc0M7QUFBQSxXQUFNLEdBQUcsS0FBVDtBQUFBLEdBQXRDLENBQVA7QUFDRDs7QUFFRCxTQUFTLFlBQVQsQ0FBc0IsT0FBdEIsRUFBK0I7QUFDN0IsU0FBTyxTQUFTLE9BQVQsRUFBa0IsaUJBQWxCLEVBQXFDLEdBQXJDLENBQXlDO0FBQUEsV0FBTSxHQUFHLEtBQVQ7QUFBQSxHQUF6QyxDQUFQO0FBQ0Q7O0FBRUQsU0FBUyxJQUFULENBQWMsT0FBZCxFQUF1QixJQUF2QixFQUE2QjtBQUMzQixnQkFBYyxPQUFkLEVBQXVCLEtBQXZCLEVBQThCLEtBQUssTUFBbkM7QUFDQSxnQkFBYyxPQUFkLEVBQXVCLE9BQXZCLEVBQWdDLEtBQUssWUFBckM7QUFDQSxZQUFVLE9BQVYsRUFBbUIsS0FBSyxLQUF4QjtBQUNBLGVBQWEsT0FBYixFQUFzQixLQUFLLFFBQTNCO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULENBQXVCLE9BQXZCLEVBQWdDLFNBQWhDLEVBQTJDLElBQTNDLEVBQWlEO0FBQy9DLE1BQUksSUFBSixFQUFVO0FBQ1IsYUFBUyxPQUFULEVBQWtCLFNBQWxCLEVBQTZCLE9BQTdCLENBQXFDLFVBQUMsRUFBRCxFQUFLLEtBQUwsRUFBZTtBQUNsRCxVQUFJLEtBQUssS0FBTCxDQUFKLEVBQWlCLE9BQU8sS0FBUCxDQUFhLEVBQWIsRUFBaUIsS0FBSyxLQUFMLENBQWpCO0FBQ2xCLEtBRkQ7QUFHRDtBQUNGOztBQUVELFNBQVMsU0FBVCxDQUFtQixPQUFuQixFQUE0QixJQUE1QixFQUFrQztBQUNoQyxNQUFJLElBQUosRUFBVTtBQUNSLGFBQVMsT0FBVCxFQUFrQixjQUFsQixFQUFrQyxPQUFsQyxDQUEwQyxVQUFDLEVBQUQsRUFBSyxLQUFMLEVBQWU7QUFDdkQsVUFBSSxLQUFLLEtBQUwsQ0FBSixFQUFpQjtBQUNmLFdBQUcsS0FBSCxHQUFXLEtBQUssS0FBTCxDQUFYO0FBQ0EsV0FBRyxhQUFILENBQWlCLElBQUksS0FBSixDQUFVLE9BQVYsQ0FBakI7QUFDRDtBQUNGLEtBTEQ7QUFNRDtBQUNGOztBQUVELFNBQVMsWUFBVCxDQUFzQixPQUF0QixFQUErQixJQUEvQixFQUFxQztBQUNuQyxNQUFJLElBQUosRUFBVTtBQUNSLGFBQVMsT0FBVCxFQUFrQixpQkFBbEIsRUFBcUMsT0FBckMsQ0FBNkMsVUFBQyxFQUFELEVBQUssS0FBTCxFQUFlO0FBQzFELFVBQUksS0FBSyxLQUFMLENBQUosRUFBaUI7QUFDZixXQUFHLEtBQUgsR0FBVyxLQUFLLEtBQUwsQ0FBWDtBQUNBLFdBQUcsYUFBSCxDQUFpQixJQUFJLEtBQUosQ0FBVSxPQUFWLENBQWpCO0FBQ0Q7QUFDRixLQUxEO0FBTUQ7QUFDRjs7QUFHRCxPQUFPLE9BQVAsR0FBaUI7QUFDZixnQkFEZTtBQUVmLFlBRmU7QUFHZixZQUhlO0FBSWY7QUFKZSxDQUFqQjs7Ozs7ZUNoR3VDLFFBQVEsY0FBUixDO0lBQS9CLFEsWUFBQSxRO0lBQVUsZ0IsWUFBQSxnQjs7QUFDbEIsSUFBTSxTQUFTLFFBQVEsb0JBQVIsQ0FBZjs7QUFFQSxTQUFTLElBQVQsQ0FBYyxJQUFkLEVBQW9CLElBQXBCLEVBQTBCO0FBQ3hCLE1BQU0sVUFBVSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBaEI7QUFDQSxVQUFRLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBc0IsUUFBdEI7QUFDQSxVQUFRLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBc0IsZUFBdEI7QUFDQSxVQUFRLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBc0IsT0FBdEI7QUFDQSxVQUFRLE9BQVIsQ0FBZ0IsSUFBaEIsR0FBdUIsSUFBdkI7QUFDQSxVQUFRLFNBQVIsQ0FBa0IsR0FBbEIsWUFBK0IsSUFBL0I7QUFDQSxVQUFRLFNBQVIsR0FBb0IsSUFBcEI7QUFDQSxNQUFNLFFBQVEsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWQ7QUFDQSxRQUFNLFNBQU4sQ0FBZ0IsR0FBaEIsQ0FBb0IsTUFBcEI7QUFDQSxRQUFNLFNBQU4sQ0FBZ0IsR0FBaEIsQ0FBb0IsYUFBcEI7QUFDQSxRQUFNLFNBQU4sbVRBSzhCLElBTDlCO0FBTUEsVUFBUSxxQkFBUixDQUE4QixZQUE5QixFQUE0QyxLQUE1QztBQUNBLFNBQU8sT0FBUDtBQUNEOztBQUVELFNBQVMsSUFBVCxDQUFjLE9BQWQsRUFBdUIsTUFBdkIsRUFBK0I7QUFDN0IsU0FBTyxJQUFQLENBQVksT0FBTyxHQUFuQixFQUF3QixPQUF4QixDQUFnQyxVQUFDLEdBQUQsRUFBUztBQUN2QyxhQUFTLE9BQVQsUUFBc0IsR0FBdEIsRUFBNkIsT0FBN0IsQ0FBcUM7QUFBQSxhQUFNLE9BQU8sR0FBUCxDQUFXLEdBQVgsRUFBZ0IsSUFBaEIsQ0FBcUIsRUFBckIsQ0FBTjtBQUFBLEtBQXJDO0FBQ0QsR0FGRDtBQUdBLFVBQVEsZ0JBQVIsQ0FBeUIsZ0JBQXpCLEVBQTJDLFlBQU07QUFDL0MsUUFBSSxNQUFKLEVBQVksT0FBTyxPQUFQO0FBQ2IsR0FGRDtBQUdBLFdBQVMsT0FBVCxFQUFrQixLQUFsQixFQUF5QixPQUF6QixDQUFpQztBQUFBLFdBQU0sR0FBRyxnQkFBSCxDQUFvQixPQUFwQixFQUE2QixZQUFNO0FBQ3hFLFVBQUksTUFBSixFQUFZLE9BQU8sT0FBUDtBQUNaO0FBQ0QsS0FIc0MsQ0FBTjtBQUFBLEdBQWpDO0FBSUQ7O0FBR0QsT0FBTyxPQUFQLEdBQWlCLEVBQUUsVUFBRixFQUFRLFVBQVIsRUFBakI7Ozs7O2VDdENxQixRQUFRLFFBQVIsQztJQUFiLFEsWUFBQSxROztBQUVSLFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsV0FBUyxFQUFULEVBQWEsTUFBYjtBQUNEOztBQUVELFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsU0FBTyxHQUFHLEtBQUgsS0FBYSxNQUFwQjtBQUNEOztBQUVELFNBQVMsS0FBVCxDQUFlLEVBQWYsRUFBbUIsR0FBbkIsRUFBd0I7QUFDdEIsS0FBRyxLQUFILEdBQVcsR0FBWDtBQUNEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLFVBQUYsRUFBUSxVQUFSLEVBQWMsWUFBZCxFQUFqQjs7Ozs7OztlQ2ZxQixRQUFRLFFBQVIsQztJQUFiLFEsWUFBQSxROztBQUNSLElBQU0sU0FBUyxRQUFRLFFBQVIsQ0FBZjtBQUNBLElBQU0sVUFBVSxRQUFRLFNBQVIsQ0FBaEI7O0FBRUEsU0FBUyxJQUFULENBQWMsRUFBZCxFQUFrQjtBQUNoQixXQUFTLEVBQVQsRUFBYSxNQUFiO0FBQ0EsV0FBUyxFQUFUO0FBQ0Q7O0FBRUQsU0FBUyxRQUFULENBQWtCLEVBQWxCLEVBQXNCO0FBQ3BCLE1BQUksR0FBRyxTQUFILENBQWEsUUFBYixDQUFzQixJQUF0QixDQUFKLEVBQWlDO0FBQy9CLFFBQUksT0FBSixDQUFZO0FBQ1YsYUFBTyxFQURHO0FBRVYsY0FBUSxZQUZFO0FBR1YsZ0JBQVUsQ0FIQTtBQUlWLGdCQUFVO0FBQUEsZUFBTSxHQUFHLGFBQUgsQ0FBaUIsSUFBSSxLQUFKLENBQVUsT0FBVixDQUFqQixDQUFOO0FBQUEsT0FKQTtBQUtWLFlBQU07QUFDSix1QkFBZSxpQkFEWDtBQUVKLG1CQUFXLG1CQUZQO0FBR0osZ0JBQVEsQ0FBQyxPQUFELEVBQVUsTUFBVixFQUFrQixRQUFsQixFQUE0QixPQUE1QixFQUFxQyxRQUFyQyxFQUErQyxRQUEvQyxFQUF5RCxVQUF6RCxFQUFxRSxPQUFyRSxFQUE4RSxNQUE5RSxFQUFzRixPQUF0RixFQUErRixVQUEvRixFQUEyRyxVQUEzRyxDQUhKO0FBSUosa0JBQVUsQ0FBQyxRQUFELEVBQVcsU0FBWCxFQUFzQixPQUF0QixFQUErQixRQUEvQixFQUF5QyxTQUF6QyxFQUFvRCxPQUFwRCxFQUE2RCxRQUE3RCxDQUpOO0FBS0osdUJBQWUsQ0FBQyxJQUFELEVBQU8sSUFBUCxFQUFhLElBQWIsRUFBbUIsSUFBbkIsRUFBeUIsSUFBekIsRUFBK0IsSUFBL0IsRUFBcUMsSUFBckM7QUFMWDtBQUxJLEtBQVo7QUFhRDtBQUNGOztBQUVELFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsU0FBTyxPQUFPLEdBQUcsS0FBVixFQUFpQixZQUFqQixDQUFQO0FBQ0Q7O0FBRUQsU0FBUyxLQUFULENBQWUsRUFBZixFQUFtQixHQUFuQixFQUF3QjtBQUN0QixNQUFJLE9BQU8sR0FBUCxLQUFlLFFBQW5CLEVBQTZCO0FBQzNCLE9BQUcsS0FBSCxHQUFXLE9BQU8sR0FBUCxFQUFZLE1BQVosQ0FBbUIsWUFBbkIsQ0FBWDtBQUNELEdBRkQsTUFFTyxJQUFJLFFBQU8sR0FBUCx5Q0FBTyxHQUFQLE9BQWUsUUFBZixJQUEyQixJQUFJLE1BQUosS0FBZSxPQUFPLFNBQVAsQ0FBaUIsTUFBL0QsRUFBdUU7QUFDNUUsT0FBRyxLQUFILEdBQVcsSUFBSSxNQUFKLENBQVcsWUFBWCxDQUFYO0FBQ0Q7QUFDRjs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxVQUFGLEVBQVEsVUFBUixFQUFjLFlBQWQsRUFBakI7Ozs7O0FDeENBLFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsS0FBRyxPQUFILENBQVcsU0FBWCxHQUF1QixNQUF2QjtBQUNEOztBQUVELFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsU0FBTyxHQUFHLFNBQVY7QUFDRDs7QUFFRCxTQUFTLEtBQVQsQ0FBZSxFQUFmLEVBQW1CLEdBQW5CLEVBQXdCO0FBQ3RCLEtBQUcsU0FBSCxHQUFlLEdBQWY7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxVQUFGLEVBQVEsVUFBUixFQUFjLFlBQWQsRUFBakI7Ozs7O2VDYnFCLFFBQVEsUUFBUixDO0lBQWIsUSxZQUFBLFE7O0FBRVIsU0FBUyxJQUFULENBQWMsRUFBZCxFQUFrQjtBQUNoQixLQUFHLE9BQUgsQ0FBVyxPQUFYLEdBQXFCLEdBQUcsU0FBSCxDQUFhLFFBQWIsQ0FBc0IsT0FBdEIsSUFBaUMsTUFBakMsR0FBMEMsT0FBL0Q7QUFDQSxXQUFTLEVBQVQsRUFBYSxRQUFiO0FBQ0Q7O0FBRUQsU0FBUyxJQUFULENBQWMsRUFBZCxFQUFrQjtBQUNoQixTQUFPLFlBQVksRUFBWixFQUFnQixHQUFHLEtBQW5CLENBQVA7QUFDRDs7QUFFRCxTQUFTLEtBQVQsQ0FBZSxFQUFmLEVBQW1CLEdBQW5CLEVBQXdCO0FBQ3RCLEtBQUcsS0FBSCxHQUFXLFlBQVksRUFBWixFQUFnQixHQUFoQixDQUFYO0FBQ0Q7O0FBRUQsU0FBUyxXQUFULENBQXFCLEVBQXJCLEVBQXlCLEdBQXpCLEVBQThCO0FBQzVCLE1BQU0sVUFBVSxHQUFHLE9BQUgsQ0FBVyxPQUFYLEtBQXVCLE1BQXZCLEdBQ1osV0FBVyxHQUFYLEVBQWdCLEVBQWhCLENBRFksR0FFWixTQUFTLEdBQVQsRUFBYyxFQUFkLENBRko7QUFHQSxTQUFPLE9BQU8sS0FBUCxDQUFhLE9BQWIsSUFBd0IsQ0FBeEIsR0FBNEIsT0FBbkM7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxVQUFGLEVBQVEsVUFBUixFQUFjLFlBQWQsRUFBakI7Ozs7O2VDdkJxQixRQUFRLFFBQVIsQztJQUFiLFEsWUFBQSxROztBQUVSLFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsV0FBUyxFQUFULEVBQWEsTUFBYjtBQUNEOztBQUVELFNBQVMsSUFBVCxDQUFjLEVBQWQsRUFBa0I7QUFDaEIsU0FBTyxHQUFHLEtBQVY7QUFDRDs7QUFFRCxTQUFTLEtBQVQsQ0FBZSxFQUFmLEVBQW1CLEdBQW5CLEVBQXdCO0FBQ3RCLEtBQUcsS0FBSCxHQUFXLEdBQVg7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxVQUFGLEVBQVEsVUFBUixFQUFjLFlBQWQsRUFBakI7Ozs7O0FDZkEsSUFBTSxPQUFPLFFBQVEsU0FBUixDQUFiO0FBQ0EsSUFBTSxPQUFPLFFBQVEsU0FBUixDQUFiO0FBQ0EsSUFBTSxPQUFPLFFBQVEsU0FBUixDQUFiO0FBQ0EsSUFBTSxTQUFTLFFBQVEsV0FBUixDQUFmO0FBQ0EsSUFBTSxPQUFPLFFBQVEsU0FBUixDQUFiOztBQUVBLElBQU0sTUFBTTtBQUNWLFlBRFU7QUFFVixZQUZVO0FBR1YsWUFIVTtBQUlWLGdCQUpVO0FBS1Y7QUFMVSxDQUFaOztBQVFBLFNBQVMsSUFBVCxDQUFjLFdBQWQsRUFBMkI7QUFDekIsU0FBTyxJQUFJLFlBQVksT0FBWixDQUFvQixTQUF4QixFQUFtQyxJQUFuQyxDQUF3QyxXQUF4QyxDQUFQO0FBQ0Q7O0FBRUQsU0FBUyxLQUFULENBQWUsV0FBZixFQUE0QixHQUE1QixFQUFpQztBQUMvQixNQUFJLFlBQVksT0FBWixDQUFvQixTQUF4QixFQUFtQyxLQUFuQyxDQUF5QyxXQUF6QyxFQUFzRCxHQUF0RDtBQUNEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLFVBQUYsRUFBUSxZQUFSLEVBQWUsUUFBZixFQUFqQjs7Ozs7QUN2QkEsU0FBUyxRQUFULENBQWtCLEVBQWxCLEVBQXNCLFNBQXRCLEVBQWlDO0FBQy9CLE1BQU0sVUFBVSxJQUFJLEtBQUosRUFBVyxDQUFDLGFBQUQsRUFBZ0IsYUFBaEIsQ0FBWCxDQUFoQjs7QUFFQTtBQUNBLE1BQUksR0FBRyxTQUFILENBQWEsUUFBYixDQUFzQixNQUF0QixDQUFKLEVBQW1DO0FBQ2pDLFFBQU0sUUFBUSxJQUFJLE1BQUosRUFBWSxDQUFDLG1CQUFELENBQVosRUFBbUMsOENBQW5DLENBQWQ7QUFDQSxZQUFRLFdBQVIsQ0FBb0IsS0FBcEI7QUFDQSxRQUFNLE9BQU8sSUFBSSxPQUFKLEVBQWEsQ0FBQyxhQUFELEVBQWdCLG1CQUFoQixDQUFiLENBQWI7QUFDQSxTQUFLLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCO0FBQUEsYUFBTSxVQUFVLEVBQVYsRUFBYyxLQUFLLEtBQW5CLENBQU47QUFBQSxLQUEvQjtBQUNBLFNBQUssWUFBTCxDQUFrQixhQUFsQixFQUFpQyxPQUFqQztBQUNBLFlBQVEsV0FBUixDQUFvQixJQUFwQjtBQUNEO0FBQ0QsTUFBSSxHQUFHLFNBQUgsQ0FBYSxRQUFiLENBQXNCLEtBQXRCLENBQUosRUFBa0M7QUFDaEMsT0FBRyxZQUFILENBQWdCLFVBQWhCLEVBQTRCLFVBQTVCO0FBQ0Q7QUFDRCxNQUFJLEdBQUcsU0FBSCxDQUFhLFFBQWIsQ0FBc0IsU0FBdEIsQ0FBSixFQUFzQztBQUNwQyxRQUFNLFNBQVEsSUFBSSxNQUFKLEVBQVksQ0FBQyxtQkFBRCxDQUFaLEVBQW1DLFFBQW5DLENBQWQ7QUFDQSxZQUFRLFdBQVIsQ0FBb0IsTUFBcEI7QUFDQSxRQUFNLFVBQVUsSUFBSSxPQUFKLEVBQWEsQ0FBQyxnQkFBRCxFQUFtQixtQkFBbkIsQ0FBYixDQUFoQjtBQUNBLFlBQVEsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0M7QUFBQSxhQUFNLGNBQWMsRUFBZCxFQUFrQixRQUFRLEtBQTFCLENBQU47QUFBQSxLQUFsQztBQUNBLFlBQVEsWUFBUixDQUFxQixhQUFyQixFQUFvQyxRQUFwQztBQUNBLFlBQVEsV0FBUixDQUFvQixPQUFwQjtBQUNBLE9BQUcsWUFBSCxDQUFnQixVQUFoQixFQUE0QixVQUE1QjtBQUNEO0FBQ0QsS0FBRyxPQUFILENBQVcsU0FBWCxHQUF1QixTQUF2QjtBQUNBLEtBQUcscUJBQUgsQ0FBeUIsVUFBekIsRUFBcUMsT0FBckM7QUFDRDs7QUFFRCxTQUFTLEdBQVQsQ0FBYSxJQUFiLEVBQW1CLFVBQW5CLEVBQStCLElBQS9CLEVBQXFDO0FBQ25DLE1BQU0sS0FBSyxTQUFTLGFBQVQsQ0FBdUIsSUFBdkIsQ0FBWDtBQUNBLE1BQUksVUFBSixFQUFnQixHQUFHLFlBQUgsQ0FBZ0IsT0FBaEIsRUFBeUIsV0FBVyxJQUFYLENBQWdCLEdBQWhCLENBQXpCO0FBQ2hCLE1BQUksSUFBSixFQUFVLEdBQUcsU0FBSCxHQUFlLElBQWY7QUFDVixTQUFPLEVBQVA7QUFDRDs7QUFFRCxTQUFTLFNBQVQsQ0FBbUIsRUFBbkIsRUFBdUIsSUFBdkIsRUFBNkI7QUFDM0IsS0FBRyxZQUFILENBQWdCLE1BQWhCLEVBQXdCLElBQXhCO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULENBQXVCLEVBQXZCLEVBQTJCLE9BQTNCLEVBQW9DO0FBQ2xDLEtBQUcsT0FBSCxDQUFXLE9BQVgsR0FBcUIsT0FBckI7QUFDRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUIsRUFBRSxrQkFBRixFQUFqQjs7Ozs7QUM1Q0EsSUFBTSxLQUFLLFFBQVEsTUFBUixDQUFYOztBQUVBLFNBQVMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQU07QUFDbEQ7QUFDRCxDQUZEOztBQUlBLFNBQVMsR0FBVCxHQUFlO0FBQ2IsS0FBRyxJQUFIO0FBQ0Q7Ozs7O0FDUkQsSUFBTSxZQUFZLFFBQVEsWUFBUixDQUFsQjs7QUFFQSxTQUFTLFVBQVQsQ0FBb0IsS0FBcEIsRUFBMkIsSUFBM0IsRUFBaUM7QUFDL0IsTUFBTSxPQUFPLEtBQUssU0FBTCxDQUFlLElBQWYsQ0FBYjtBQUNBLE1BQU0sTUFBTSwyQ0FBWjtBQUNBLGlIQUkwQixLQUoxQiwrRUFPK0IsS0FQL0IseUdBVWUsR0FWZixzRUFZWSxJQVpaO0FBZUQ7O0FBRUQsU0FBUyxZQUFULENBQXNCLElBQXRCLEVBQTRCO0FBQzFCLE1BQU0sVUFBVSwyQkFBMkIsSUFBM0IsQ0FBZ0MsSUFBaEMsQ0FBaEI7QUFDQSxNQUFJLE9BQUosRUFBYSxPQUFPLEtBQUssS0FBTCxDQUFXLFFBQVEsQ0FBUixDQUFYLENBQVA7QUFDYixTQUFPLEtBQVA7QUFDRDs7QUFFRCxTQUFTLFVBQVQsQ0FBb0IsS0FBcEIsRUFBMkIsSUFBM0IsRUFBaUM7QUFDL0IsTUFBTSxXQUFXLFdBQVcsS0FBWCxFQUFrQixJQUFsQixDQUFqQjtBQUNBLE1BQU0sT0FBTyxJQUFJLElBQUosQ0FBUyxDQUFDLFFBQUQsQ0FBVCxFQUFxQixFQUFFLE1BQU0sMEJBQVIsRUFBckIsQ0FBYjtBQUNBLE1BQU0sUUFBUSxJQUFJLElBQUosR0FBVyxXQUFYLEdBQXlCLEtBQXpCLENBQStCLEdBQS9CLEVBQW9DLENBQXBDLENBQWQ7QUFDQSxZQUFVLE1BQVYsQ0FBaUIsSUFBakIsRUFBMEIsS0FBMUIsU0FBbUMsS0FBbkM7QUFDRDs7QUFFRCxTQUFTLGtCQUFULENBQTRCLElBQTVCLEVBQWtDLFFBQWxDLEVBQTRDO0FBQzFDLE1BQU0sU0FBUyxJQUFJLFVBQUosRUFBZjtBQUNBLFNBQU8sVUFBUCxDQUFrQixJQUFsQjtBQUNBLFNBQU8sTUFBUCxHQUFnQjtBQUFBLFdBQUssU0FBUyxhQUFhLEVBQUUsTUFBRixDQUFTLE1BQXRCLENBQVQsQ0FBTDtBQUFBLEdBQWhCO0FBQ0Q7O0FBRUQsU0FBUyxpQkFBVCxDQUEyQixHQUEzQixFQUFnQyxRQUFoQyxFQUEwQztBQUN4QyxNQUFNLFVBQVUsSUFBSSxjQUFKLEVBQWhCO0FBQ0EsVUFBUSxJQUFSLENBQWEsS0FBYixFQUFvQixHQUFwQixFQUF5QixJQUF6QjtBQUNBLFVBQVEsSUFBUjtBQUNBLFVBQVEsa0JBQVIsR0FBNkIsWUFBTTtBQUNqQyxRQUFJLFFBQVEsVUFBUixLQUF1QixDQUF2QixJQUE0QixRQUFRLE1BQVIsS0FBbUIsR0FBbkQsRUFBd0Q7QUFDdEQsZUFBUyxhQUFhLFFBQVEsWUFBckIsQ0FBVDtBQUNEO0FBQ0YsR0FKRDtBQUtEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLHNDQUFGLEVBQXNCLG9DQUF0QixFQUF5QyxzQkFBekMsRUFBakI7Ozs7O0FDckRBLElBQU0sY0FBYyxRQUFRLGNBQVIsQ0FBcEI7QUFDQSxJQUFNLFNBQVMsUUFBUSxpQkFBUixDQUFmO0FBQ0EsSUFBTSxRQUFRLFFBQVEsU0FBUixDQUFkOztlQUMrQyxRQUFRLFFBQVIsQztJQUF2QyxRLFlBQUEsUTtJQUFVLFksWUFBQSxZO0lBQWMsVSxZQUFBLFU7O0FBRWhDOzs7QUFDQSxTQUFTLFNBQVQsR0FBcUI7QUFDbkIsV0FBUyxjQUFULENBQXdCLE1BQXhCLEVBQWdDLFNBQWhDLEdBQTRDLEVBQTVDO0FBQ0E7QUFDRDs7QUFFRCxTQUFTLGFBQVQsR0FBeUI7QUFDdkIsYUFBVyxNQUFYLEVBQW1CLE1BQW5CO0FBQ0EsYUFBVyxTQUFYLEVBQXNCLE1BQXRCO0FBQ0EsYUFBVyxXQUFYLEVBQXdCLE1BQXhCO0FBQ0Q7O0FBRUQsU0FBUyxRQUFULEdBQW9CO0FBQ2xCLGFBQVcsTUFBWCxFQUFtQixPQUFuQjtBQUNBLGFBQVcsU0FBWCxFQUFzQixNQUF0QjtBQUNBLGFBQVcsV0FBWCxFQUF3QixNQUF4QjtBQUNEOztBQUVELFNBQVMsVUFBVCxDQUFvQixFQUFwQixFQUF3QixHQUF4QixFQUE2QjtBQUMzQixXQUFTLGNBQVQsQ0FBd0IsRUFBeEIsRUFBNEIsS0FBNUIsQ0FBa0MsT0FBbEMsR0FBNEMsR0FBNUM7QUFDRDs7QUFFRDtBQUNBLFNBQVMsUUFBVCxHQUFvQjtBQUNsQixhQUFXLE1BQVg7QUFDQSxXQUFTLGFBQVQsQ0FBdUIsY0FBdkIsRUFBdUMsZ0JBQXZDLENBQXdELE9BQXhELEVBQWlFLFVBQWpFO0FBQ0Q7O0FBR0QsSUFBTSxzQkFBc0I7QUFDMUIsUUFBTSxnQkFBTTtBQUNWLGFBQVMsSUFBVCxDQUFjLFNBQWQsQ0FBd0IsTUFBeEIsQ0FBK0IsV0FBL0I7QUFDQSxhQUFTLElBQVQsQ0FBYyxTQUFkLENBQXdCLEdBQXhCLENBQTRCLFdBQTVCO0FBQ0EsYUFBUyxTQUFTLElBQWxCLEVBQXdCLE9BQXhCLEVBQWlDLE9BQWpDLENBQXlDLFVBQUMsRUFBRCxFQUFRO0FBQy9DLFNBQUcsWUFBSCxDQUFnQixpQkFBaEIsRUFBbUMsTUFBbkM7QUFDRCxLQUZEO0FBR0QsR0FQeUI7QUFRMUIsUUFBTSxnQkFBTTtBQUNWLGFBQVMsSUFBVCxDQUFjLFNBQWQsQ0FBd0IsTUFBeEIsQ0FBK0IsV0FBL0I7QUFDQSxhQUFTLElBQVQsQ0FBYyxTQUFkLENBQXdCLEdBQXhCLENBQTRCLFdBQTVCO0FBQ0EsYUFBUyxTQUFTLElBQWxCLEVBQXdCLE9BQXhCLEVBQWlDLE9BQWpDLENBQXlDLFVBQUMsRUFBRCxFQUFRO0FBQy9DLFNBQUcsZUFBSCxDQUFtQixpQkFBbkI7QUFDRCxLQUZEO0FBR0E7QUFDRDtBQWZ5QixDQUE1Qjs7QUFrQkEsU0FBUyxVQUFULENBQW9CLElBQXBCLEVBQTBCO0FBQ3hCLE1BQU0sZUFBZSxPQUFPLElBQVAsS0FBZ0IsUUFBaEIsR0FDakIsSUFEaUIsR0FFakIsU0FBUyxJQUFULENBQWMsU0FBZCxDQUF3QixRQUF4QixDQUFpQyxXQUFqQyxJQUNFLE1BREYsR0FFRSxNQUpOOztBQU1BLHNCQUFvQixZQUFwQjtBQUNEOztBQUdEO0FBQ0EsSUFBTSxlQUFlO0FBQ25CLGNBQVksb0JBQUMsTUFBRCxFQUFZO0FBQ3RCLFFBQU0sUUFBUSxhQUFhLE1BQWIsRUFBcUIsT0FBckIsQ0FBZDtBQUNBLFFBQU0sV0FBVyxNQUFNLGVBQXZCO0FBQ0EsUUFBSSxRQUFKLEVBQWMsTUFBTSxVQUFOLENBQWlCLFlBQWpCLENBQThCLEtBQTlCLEVBQXFDLFFBQXJDO0FBQ2YsR0FMa0I7QUFNbkIsZUFBYSxxQkFBQyxNQUFELEVBQVk7QUFDdkIsUUFBTSxRQUFRLGFBQWEsTUFBYixFQUFxQixPQUFyQixDQUFkO0FBQ0EsVUFBTSxNQUFOO0FBQ0QsR0FUa0I7QUFVbkIsWUFBVSxrQkFBQyxNQUFELEVBQVk7QUFDcEIsUUFBSSxPQUFPLFNBQVAsQ0FBaUIsUUFBakIsQ0FBMEIsUUFBMUIsQ0FBSixFQUF5QztBQUN2QyxtQkFBYSxNQUFiLEVBQXFCLGFBQXJCLEVBQW9DLGFBQXBDLENBQWtELGlCQUFsRCxFQUFxRSxNQUFyRTtBQUNBLGFBQU8sU0FBUCxDQUFpQixNQUFqQixDQUF3QixRQUF4QjtBQUNELEtBSEQsTUFHTztBQUNMLFVBQU0sUUFBUSxhQUFhLE1BQWIsRUFBcUIsYUFBckIsQ0FBZDtBQUNBLFlBQU0scUJBQU4sQ0FBNEIsV0FBNUIsRUFBeUMsb0JBQXpDO0FBQ0EsYUFBTyxTQUFQLENBQWlCLEdBQWpCLENBQXFCLFFBQXJCO0FBQ0Q7QUFDRixHQW5Ca0I7QUFvQm5CLGdCQUFjLHNCQUFDLE1BQUQsRUFBWTtBQUN4QixRQUFNLFFBQVEsYUFBYSxNQUFiLEVBQXFCLE9BQXJCLENBQWQ7QUFDQSxRQUFNLFdBQVcsT0FBTyxNQUFQLENBQWMsT0FBTyxPQUFQLENBQWUsSUFBN0IsQ0FBakI7QUFDQSxVQUFNLHFCQUFOLENBQTRCLGFBQTVCLEVBQTJDLFFBQTNDO0FBQ0EsZUFBVyxNQUFYLEVBSndCLENBSUo7QUFDcEIsaUJBQWEsTUFBYixFQUFxQixhQUFyQixFQUFvQyxhQUFwQyxDQUFrRCxXQUFsRCxFQUErRCxTQUEvRCxDQUF5RSxNQUF6RSxDQUFnRixRQUFoRjtBQUNBLGlCQUFhLE1BQWIsRUFBcUIsZ0JBQXJCLEVBQXVDLE1BQXZDO0FBQ0Q7QUEzQmtCLENBQXJCOztBQThCQSxTQUFTLGtCQUFULEdBQThCO0FBQzVCLE1BQU0sZUFBZSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBckI7QUFDQSxlQUFhLFNBQWIsQ0FBdUIsR0FBdkIsQ0FBMkIsZ0JBQTNCO0FBQ0EsZUFBYSxTQUFiLEdBQXlCLHlEQUF6QjtBQUNBLFNBQU8sSUFBUCxDQUFZLE9BQU8sR0FBbkIsRUFBd0IsT0FBeEIsQ0FBZ0MsVUFBQyxHQUFELEVBQVM7QUFDdkMsUUFBTSxZQUFZLFNBQVMsYUFBVCxDQUF1QixHQUF2QixDQUFsQjtBQUNBLGNBQVUsU0FBVixDQUFvQixHQUFwQixDQUF3QixNQUF4QjtBQUNBLGNBQVUsU0FBVixDQUFvQixHQUFwQixDQUF3QixjQUF4QjtBQUNBLGNBQVUsT0FBVixDQUFrQixJQUFsQixHQUF5QixHQUF6QjtBQUNBLGNBQVUsU0FBVixHQUFzQixHQUF0QjtBQUNBLGlCQUFhLGFBQWIsQ0FBMkIsVUFBM0IsRUFBdUMsV0FBdkMsQ0FBbUQsU0FBbkQ7QUFDRCxHQVBEO0FBUUEsU0FBTyxZQUFQO0FBQ0Q7O0FBRUQsU0FBUyxjQUFULEdBQTBCO0FBQ3hCLFdBQVMsY0FBVCxDQUF3QixNQUF4QixFQUFnQyxnQkFBaEMsQ0FBaUQsT0FBakQsRUFBMEQsVUFBQyxDQUFELEVBQU87QUFDL0QsUUFBTSxTQUFTLEVBQUUsTUFBRixDQUFTLFNBQVQsQ0FBbUIsUUFBbkIsQ0FBNEIsTUFBNUIsSUFDWCxFQUFFLE1BRFMsR0FFWCxFQUFFLE1BQUYsQ0FBUyxVQUFULENBQW9CLFNBQXBCLENBQThCLFFBQTlCLENBQXVDLE1BQXZDLElBQ0UsRUFBRSxNQUFGLENBQVMsVUFEWCxHQUVFLElBSk47QUFLQSxRQUFJLE1BQUosRUFBWTtBQUNWLGFBQU8sSUFBUCxDQUFZLFlBQVosRUFBMEIsT0FBMUIsQ0FBa0MsVUFBQyxHQUFELEVBQVM7QUFDekMsWUFBSSxPQUFPLFNBQVAsQ0FBaUIsUUFBakIsQ0FBMEIsR0FBMUIsQ0FBSixFQUFvQyxhQUFhLEdBQWIsRUFBa0IsTUFBbEI7QUFDckMsT0FGRDtBQUdEO0FBQ0YsR0FYRDtBQVlEOztBQUVEO0FBQ0EsU0FBUyxJQUFULEdBQWdCO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDs7QUFFRCxTQUFTLGNBQVQsR0FBMEI7QUFDeEIsV0FBUyxjQUFULENBQXdCLE1BQXhCLEVBQWdDLGdCQUFoQyxDQUFpRCxPQUFqRCxFQUEwRCxVQUFDLENBQUQsRUFBTztBQUMvRCxRQUFNLFNBQVMsU0FBUyxhQUFULENBQXVCLHlCQUF2QixDQUFmO0FBQ0EsUUFBTSxPQUFRLFVBQVUsT0FBTyxLQUFsQixHQUEyQixPQUFPLEtBQWxDLEdBQTBDLE9BQXZEO0FBQ0EsVUFBTSxVQUFOLENBQWlCLElBQWpCLEVBQXVCLFVBQXZCO0FBQ0EsTUFBRSxjQUFGO0FBQ0QsR0FMRDtBQU1BLFdBQVMsY0FBVCxDQUF3QixXQUF4QixFQUFxQyxnQkFBckMsQ0FBc0QsT0FBdEQsRUFBK0QsVUFBQyxDQUFELEVBQU87QUFDcEUsUUFBTSxTQUFTLFNBQVMsYUFBVCxDQUF1QixZQUF2QixDQUFmO0FBQ0EsUUFBTSxPQUFRLFVBQVUsT0FBTyxTQUFsQixHQUErQixPQUFPLFNBQXRDLEdBQWtELFNBQS9EO0FBQ0EsVUFBTSxVQUFOLENBQWlCLElBQWpCLEVBQXVCLFNBQVMsSUFBVCxDQUF2QjtBQUNBLE1BQUUsY0FBRjtBQUNELEdBTEQ7QUFNRDs7QUFFRCxTQUFTLFFBQVQsQ0FBa0IsS0FBbEIsRUFBeUI7QUFDdkIsTUFBTSxhQUFhLEVBQW5CO0FBQ0EsV0FBUyxTQUFTLGNBQVQsQ0FBd0IsTUFBeEIsQ0FBVCxFQUEwQyxRQUExQyxFQUFvRCxPQUFwRCxDQUE0RCxVQUFDLEtBQUQsRUFBVztBQUNyRSxRQUFNLE9BQU8sT0FBTyxJQUFQLENBQVksS0FBWixDQUFiO0FBQ0EsUUFBSSxLQUFKLEVBQVcsS0FBSyxJQUFMLENBQVUsTUFBVixHQUFtQixFQUFuQjtBQUNYLGVBQVcsSUFBWCxDQUFnQixJQUFoQjtBQUNELEdBSkQ7QUFLQSxTQUFPLFVBQVA7QUFDRDs7QUFFRCxTQUFTLGNBQVQsR0FBMEI7QUFDeEIsV0FBUyxjQUFULENBQXdCLGNBQXhCLEVBQXdDLGdCQUF4QyxDQUF5RCxRQUF6RCxFQUFtRSxVQUFDLENBQUQsRUFBTztBQUN4RSxVQUFNLGtCQUFOLENBQXlCLEVBQUUsTUFBRixDQUFTLEtBQVQsQ0FBZSxDQUFmLENBQXpCLEVBQTRDLFFBQTVDO0FBQ0EsTUFBRSxjQUFGO0FBQ0QsR0FIRDtBQUlBLE1BQU0sUUFBUSxZQUFZLEtBQVosQ0FBa0IsT0FBTyxRQUFQLENBQWdCLE1BQWxDLENBQWQ7QUFDQSxNQUFJLE1BQU0sT0FBVixFQUFtQixNQUFNLGlCQUFOLENBQXdCLE1BQU0sT0FBOUIsRUFBdUMsUUFBdkM7QUFDcEI7O0FBRUQsU0FBUyxRQUFULENBQWtCLElBQWxCLEVBQXdCO0FBQ3RCLE1BQU0sV0FBVyxTQUFTLHNCQUFULEVBQWpCO0FBQ0EsT0FBSyxPQUFMLENBQWEsVUFBQyxLQUFELEVBQVc7QUFDdEIsYUFBUyxXQUFULENBQXFCLE9BQU8sTUFBUCxDQUFjLE1BQU0sSUFBcEIsRUFBMEIsTUFBTSxJQUFoQyxDQUFyQjtBQUNELEdBRkQ7QUFHQSxXQUFTLGNBQVQsQ0FBd0IsTUFBeEIsRUFBZ0MsV0FBaEMsQ0FBNEMsUUFBNUM7QUFDQTtBQUNBO0FBQ0Q7O0FBRUQsU0FBUyxhQUFULEdBQXlCO0FBQ3ZCLFdBQVMsY0FBVCxDQUF3QixPQUF4QixFQUFpQyxnQkFBakMsQ0FBa0QsT0FBbEQsRUFBMkQsVUFBQyxDQUFELEVBQU87QUFDaEU7QUFDQSxNQUFFLGNBQUY7QUFDRCxHQUhEO0FBSUQ7O0FBRUQsU0FBUyxhQUFULEdBQXlCO0FBQ3ZCLFdBQVMsY0FBVCxDQUF3QixNQUF4QixFQUFnQyxnQkFBaEMsQ0FBaUQsUUFBakQsRUFBMkQsVUFBQyxDQUFELEVBQU87QUFDaEUsTUFBRSxjQUFGO0FBQ0QsR0FGRDtBQUdEOztBQUdELE9BQU8sT0FBUCxHQUFpQixFQUFFLFVBQUYsRUFBakI7Ozs7O0FDak1BLElBQU0sU0FBUyxRQUFRLGlCQUFSLENBQWY7QUFDQSxJQUFNLFNBQVMsUUFBUSxXQUFSLEVBQXFCLE1BQXBDO0FBQ0EsSUFBTSxXQUFXLFFBQVEsVUFBUixDQUFqQjs7QUFFQSxJQUFJLGNBQUo7O0FBRUEsU0FBUyxTQUFULENBQW1CLFFBQW5CLEVBQTZCO0FBQzNCLFNBQU8sR0FBRyxLQUFILENBQVMsSUFBVCxDQUFjLFFBQWQsQ0FBUDtBQUNEOztBQUVELFNBQVMsUUFBVCxDQUFrQixFQUFsQixFQUFzQixLQUF0QixFQUE2QjtBQUMzQixTQUFPLFVBQVUsR0FBRyxnQkFBSCxDQUFvQixLQUFwQixDQUFWLENBQVA7QUFDRDs7QUFFRCxTQUFTLFlBQVQsQ0FBc0IsRUFBdEIsRUFBMEIsU0FBMUIsRUFBcUM7QUFDbkMsTUFBTSxTQUFTLEdBQUcsYUFBbEI7O0FBRUEsTUFBSSxPQUFPLFNBQVAsQ0FBaUIsUUFBakIsQ0FBMEIsU0FBMUIsQ0FBSixFQUEwQyxPQUFPLE1BQVA7QUFDMUMsU0FBTyxhQUFhLE1BQWIsRUFBcUIsU0FBckIsQ0FBUDtBQUNEOztBQUdELElBQU0sa0JBQWtCO0FBQ3RCLGFBQVcsbUJBQUMsSUFBRCxFQUFPLElBQVA7QUFBQSxXQUFnQixLQUFLLEtBQUwsR0FBYSxHQUFiLENBQWlCLElBQWpCLEVBQXVCLE1BQXZCLENBQWhCO0FBQUEsR0FEVztBQUV0QixjQUFZLG9CQUFDLElBQUQsRUFBTyxJQUFQO0FBQUEsV0FBZ0IsS0FBSyxLQUFMLEdBQWEsUUFBYixDQUFzQixJQUF0QixFQUE0QixNQUE1QixDQUFoQjtBQUFBO0FBRlUsQ0FBeEI7O0FBS0EsU0FBUyxVQUFULEdBQXNCO0FBQ3BCLE1BQU0sT0FBTyxTQUFTLGNBQVQsQ0FBd0IsTUFBeEIsQ0FBYjtBQUNBLE1BQU0sWUFBWSxPQUFPLE1BQVAsQ0FBYyxFQUFkLEVBQWtCLGlCQUFpQixJQUFqQixDQUFsQixFQUEwQyxlQUExQyxDQUFsQjtBQUNBLHVCQUFxQixJQUFyQixFQUEyQixTQUEzQjtBQUNBLFdBQVMsTUFBVCxDQUFnQixTQUFTLGFBQVQsQ0FBdUIsVUFBdkIsQ0FBaEI7QUFDRDs7QUFFRCxTQUFTLGdCQUFULEdBQTRCO0FBQzFCLGVBQWEsS0FBYjtBQUNBLFVBQVEsV0FBVyxVQUFYLEVBQXVCLEdBQXZCLENBQVI7QUFDRDs7QUFFRCxTQUFTLG9CQUFULENBQThCLElBQTlCLEVBQW9DLFNBQXBDLEVBQStDO0FBQzdDLFdBQVMsSUFBVCxFQUFlLFVBQWYsRUFBMkIsT0FBM0IsQ0FBbUMsVUFBQyxFQUFELEVBQVE7QUFDekMsUUFBSSxHQUFHLE9BQUgsQ0FBVyxPQUFmLEVBQXdCO0FBQ3RCLGFBQU8sS0FBUCxDQUFhLEVBQWIsRUFBaUIsT0FBTyxRQUFQLENBQWdCLEdBQUcsT0FBSCxDQUFXLE9BQTNCLEVBQW9DLFNBQXBDLENBQWpCO0FBQ0EsVUFBTSxRQUFRLGFBQWEsRUFBYixFQUFpQixPQUFqQixDQUFkO0FBQ0EsWUFBTSxhQUFOLENBQW9CLElBQUksS0FBSixDQUFVLGdCQUFWLENBQXBCO0FBQ0Q7QUFDRixHQU5EO0FBT0Q7O0FBRUQsU0FBUyxnQkFBVCxDQUEwQixJQUExQixFQUFnQztBQUM5QixTQUFPLFNBQVMsSUFBVCxFQUFlLFFBQWYsRUFBeUIsTUFBekIsQ0FBZ0MsVUFBQyxHQUFELEVBQU0sRUFBTixFQUFhO0FBQ2xELFFBQUksR0FBRyxZQUFILENBQWdCLE1BQWhCLENBQUosSUFBK0IsT0FBTyxJQUFQLENBQVksRUFBWixDQUEvQjtBQUNBLFdBQU8sR0FBUDtBQUNELEdBSE0sRUFHSixFQUhJLENBQVA7QUFJRDs7QUFHRCxPQUFPLE9BQVAsR0FBaUI7QUFDZixvQkFEZSxFQUNMLDBCQURLLEVBQ1Msc0JBRFQsRUFDcUI7QUFEckIsQ0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG5cdEF1dG9zaXplIDQuMC4wXG5cdGxpY2Vuc2U6IE1JVFxuXHRodHRwOi8vd3d3LmphY2tsbW9vcmUuY29tL2F1dG9zaXplXG4qL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShbJ2V4cG9ydHMnLCAnbW9kdWxlJ10sIGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuXHRcdGZhY3RvcnkoZXhwb3J0cywgbW9kdWxlKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbW9kID0ge1xuXHRcdFx0ZXhwb3J0czoge31cblx0XHR9O1xuXHRcdGZhY3RvcnkobW9kLmV4cG9ydHMsIG1vZCk7XG5cdFx0Z2xvYmFsLmF1dG9zaXplID0gbW9kLmV4cG9ydHM7XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uIChleHBvcnRzLCBtb2R1bGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtYXAgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciBrZXlzID0gW107XG5cdFx0dmFyIHZhbHVlcyA9IFtdO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGhhczogZnVuY3Rpb24gaGFzKGtleSkge1xuXHRcdFx0XHRyZXR1cm4ga2V5cy5pbmRleE9mKGtleSkgPiAtMTtcblx0XHRcdH0sXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uIGdldChrZXkpIHtcblx0XHRcdFx0cmV0dXJuIHZhbHVlc1trZXlzLmluZGV4T2Yoa2V5KV07XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRpZiAoa2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XG5cdFx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdFx0dmFsdWVzLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J2RlbGV0ZSc6IGZ1bmN0aW9uIF9kZWxldGUoa2V5KSB7XG5cdFx0XHRcdHZhciBpbmRleCA9IGtleXMuaW5kZXhPZihrZXkpO1xuXHRcdFx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0XHRcdGtleXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHR2YWx1ZXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0pKCk7XG5cblx0dmFyIGNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuXHRcdHJldHVybiBuZXcgRXZlbnQobmFtZSwgeyBidWJibGVzOiB0cnVlIH0pO1xuXHR9O1xuXHR0cnkge1xuXHRcdG5ldyBFdmVudCgndGVzdCcpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Ly8gSUUgZG9lcyBub3Qgc3VwcG9ydCBgbmV3IEV2ZW50KClgXG5cdFx0Y3JlYXRlRXZlbnQgPSBmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0dmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuXHRcdFx0ZXZ0LmluaXRFdmVudChuYW1lLCB0cnVlLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gZXZ0O1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBhc3NpZ24odGEpIHtcblx0XHRpZiAoIXRhIHx8ICF0YS5ub2RlTmFtZSB8fCB0YS5ub2RlTmFtZSAhPT0gJ1RFWFRBUkVBJyB8fCBtYXAuaGFzKHRhKSkgcmV0dXJuO1xuXG5cdFx0dmFyIGhlaWdodE9mZnNldCA9IG51bGw7XG5cdFx0dmFyIGNsaWVudFdpZHRoID0gdGEuY2xpZW50V2lkdGg7XG5cdFx0dmFyIGNhY2hlZEhlaWdodCA9IG51bGw7XG5cblx0XHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdFx0dmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpO1xuXG5cdFx0XHRpZiAoc3R5bGUucmVzaXplID09PSAndmVydGljYWwnKSB7XG5cdFx0XHRcdHRhLnN0eWxlLnJlc2l6ZSA9ICdub25lJztcblx0XHRcdH0gZWxzZSBpZiAoc3R5bGUucmVzaXplID09PSAnYm90aCcpIHtcblx0XHRcdFx0dGEuc3R5bGUucmVzaXplID0gJ2hvcml6b250YWwnO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc3R5bGUuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnKSB7XG5cdFx0XHRcdGhlaWdodE9mZnNldCA9IC0ocGFyc2VGbG9hdChzdHlsZS5wYWRkaW5nVG9wKSArIHBhcnNlRmxvYXQoc3R5bGUucGFkZGluZ0JvdHRvbSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVpZ2h0T2Zmc2V0ID0gcGFyc2VGbG9hdChzdHlsZS5ib3JkZXJUb3BXaWR0aCkgKyBwYXJzZUZsb2F0KHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpeCB3aGVuIGEgdGV4dGFyZWEgaXMgbm90IG9uIGRvY3VtZW50IGJvZHkgYW5kIGhlaWdodE9mZnNldCBpcyBOb3QgYSBOdW1iZXJcblx0XHRcdGlmIChpc05hTihoZWlnaHRPZmZzZXQpKSB7XG5cdFx0XHRcdGhlaWdodE9mZnNldCA9IDA7XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNoYW5nZU92ZXJmbG93KHZhbHVlKSB7XG5cdFx0XHR7XG5cdFx0XHRcdC8vIENocm9tZS9TYWZhcmktc3BlY2lmaWMgZml4OlxuXHRcdFx0XHQvLyBXaGVuIHRoZSB0ZXh0YXJlYSB5LW92ZXJmbG93IGlzIGhpZGRlbiwgQ2hyb21lL1NhZmFyaSBkbyBub3QgcmVmbG93IHRoZSB0ZXh0IHRvIGFjY291bnQgZm9yIHRoZSBzcGFjZVxuXHRcdFx0XHQvLyBtYWRlIGF2YWlsYWJsZSBieSByZW1vdmluZyB0aGUgc2Nyb2xsYmFyLiBUaGUgZm9sbG93aW5nIGZvcmNlcyB0aGUgbmVjZXNzYXJ5IHRleHQgcmVmbG93LlxuXHRcdFx0XHR2YXIgd2lkdGggPSB0YS5zdHlsZS53aWR0aDtcblx0XHRcdFx0dGEuc3R5bGUud2lkdGggPSAnMHB4Jztcblx0XHRcdFx0Ly8gRm9yY2UgcmVmbG93OlxuXHRcdFx0XHQvKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG5cdFx0XHRcdHRhLm9mZnNldFdpZHRoO1xuXHRcdFx0XHQvKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuXHRcdFx0XHR0YS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0fVxuXG5cdFx0XHR0YS5zdHlsZS5vdmVyZmxvd1kgPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRQYXJlbnRPdmVyZmxvd3MoZWwpIHtcblx0XHRcdHZhciBhcnIgPSBbXTtcblxuXHRcdFx0d2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcblx0XHRcdFx0aWYgKGVsLnBhcmVudE5vZGUuc2Nyb2xsVG9wKSB7XG5cdFx0XHRcdFx0YXJyLnB1c2goe1xuXHRcdFx0XHRcdFx0bm9kZTogZWwucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdHNjcm9sbFRvcDogZWwucGFyZW50Tm9kZS5zY3JvbGxUb3Bcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbCA9IGVsLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhcnI7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzaXplKCkge1xuXHRcdFx0dmFyIG9yaWdpbmFsSGVpZ2h0ID0gdGEuc3R5bGUuaGVpZ2h0O1xuXHRcdFx0dmFyIG92ZXJmbG93cyA9IGdldFBhcmVudE92ZXJmbG93cyh0YSk7XG5cdFx0XHR2YXIgZG9jVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7IC8vIE5lZWRlZCBmb3IgTW9iaWxlIElFICh0aWNrZXQgIzI0MClcblxuXHRcdFx0dGEuc3R5bGUuaGVpZ2h0ID0gJyc7XG5cblx0XHRcdHZhciBlbmRIZWlnaHQgPSB0YS5zY3JvbGxIZWlnaHQgKyBoZWlnaHRPZmZzZXQ7XG5cblx0XHRcdGlmICh0YS5zY3JvbGxIZWlnaHQgPT09IDApIHtcblx0XHRcdFx0Ly8gSWYgdGhlIHNjcm9sbEhlaWdodCBpcyAwLCB0aGVuIHRoZSBlbGVtZW50IHByb2JhYmx5IGhhcyBkaXNwbGF5Om5vbmUgb3IgaXMgZGV0YWNoZWQgZnJvbSB0aGUgRE9NLlxuXHRcdFx0XHR0YS5zdHlsZS5oZWlnaHQgPSBvcmlnaW5hbEhlaWdodDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0YS5zdHlsZS5oZWlnaHQgPSBlbmRIZWlnaHQgKyAncHgnO1xuXG5cdFx0XHQvLyB1c2VkIHRvIGNoZWNrIGlmIGFuIHVwZGF0ZSBpcyBhY3R1YWxseSBuZWNlc3Nhcnkgb24gd2luZG93LnJlc2l6ZVxuXHRcdFx0Y2xpZW50V2lkdGggPSB0YS5jbGllbnRXaWR0aDtcblxuXHRcdFx0Ly8gcHJldmVudHMgc2Nyb2xsLXBvc2l0aW9uIGp1bXBpbmdcblx0XHRcdG92ZXJmbG93cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuXHRcdFx0XHRlbC5ub2RlLnNjcm9sbFRvcCA9IGVsLnNjcm9sbFRvcDtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoZG9jVG9wKSB7XG5cdFx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBkb2NUb3A7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCkge1xuXHRcdFx0cmVzaXplKCk7XG5cblx0XHRcdHZhciBzdHlsZUhlaWdodCA9IE1hdGgucm91bmQocGFyc2VGbG9hdCh0YS5zdHlsZS5oZWlnaHQpKTtcblx0XHRcdHZhciBjb21wdXRlZCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhLCBudWxsKTtcblxuXHRcdFx0Ly8gVXNpbmcgb2Zmc2V0SGVpZ2h0IGFzIGEgcmVwbGFjZW1lbnQgZm9yIGNvbXB1dGVkLmhlaWdodCBpbiBJRSwgYmVjYXVzZSBJRSBkb2VzIG5vdCBhY2NvdW50IHVzZSBvZiBib3JkZXItYm94XG5cdFx0XHR2YXIgYWN0dWFsSGVpZ2h0ID0gY29tcHV0ZWQuYm94U2l6aW5nID09PSAnY29udGVudC1ib3gnID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGNvbXB1dGVkLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0XHQvLyBUaGUgYWN0dWFsIGhlaWdodCBub3QgbWF0Y2hpbmcgdGhlIHN0eWxlIGhlaWdodCAoc2V0IHZpYSB0aGUgcmVzaXplIG1ldGhvZCkgaW5kaWNhdGVzIHRoYXRcblx0XHRcdC8vIHRoZSBtYXgtaGVpZ2h0IGhhcyBiZWVuIGV4Y2VlZGVkLCBpbiB3aGljaCBjYXNlIHRoZSBvdmVyZmxvdyBzaG91bGQgYmUgYWxsb3dlZC5cblx0XHRcdGlmIChhY3R1YWxIZWlnaHQgIT09IHN0eWxlSGVpZ2h0KSB7XG5cdFx0XHRcdGlmIChjb21wdXRlZC5vdmVyZmxvd1kgPT09ICdoaWRkZW4nKSB7XG5cdFx0XHRcdFx0Y2hhbmdlT3ZlcmZsb3coJ3Njcm9sbCcpO1xuXHRcdFx0XHRcdHJlc2l6ZSgpO1xuXHRcdFx0XHRcdGFjdHVhbEhlaWdodCA9IGNvbXB1dGVkLmJveFNpemluZyA9PT0gJ2NvbnRlbnQtYm94JyA/IE1hdGgucm91bmQocGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YSwgbnVsbCkuaGVpZ2h0KSkgOiB0YS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIE5vcm1hbGx5IGtlZXAgb3ZlcmZsb3cgc2V0IHRvIGhpZGRlbiwgdG8gYXZvaWQgZmxhc2ggb2Ygc2Nyb2xsYmFyIGFzIHRoZSB0ZXh0YXJlYSBleHBhbmRzLlxuXHRcdFx0XHRpZiAoY29tcHV0ZWQub3ZlcmZsb3dZICE9PSAnaGlkZGVuJykge1xuXHRcdFx0XHRcdGNoYW5nZU92ZXJmbG93KCdoaWRkZW4nKTtcblx0XHRcdFx0XHRyZXNpemUoKTtcblx0XHRcdFx0XHRhY3R1YWxIZWlnaHQgPSBjb21wdXRlZC5ib3hTaXppbmcgPT09ICdjb250ZW50LWJveCcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGEsIG51bGwpLmhlaWdodCkpIDogdGEub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChjYWNoZWRIZWlnaHQgIT09IGFjdHVhbEhlaWdodCkge1xuXHRcdFx0XHRjYWNoZWRIZWlnaHQgPSBhY3R1YWxIZWlnaHQ7XG5cdFx0XHRcdHZhciBldnQgPSBjcmVhdGVFdmVudCgnYXV0b3NpemU6cmVzaXplZCcpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRhLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0Ly8gRmlyZWZveCB3aWxsIHRocm93IGFuIGVycm9yIG9uIGRpc3BhdGNoRXZlbnQgZm9yIGEgZGV0YWNoZWQgZWxlbWVudFxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTg4OTM3NlxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dmFyIHBhZ2VSZXNpemUgPSBmdW5jdGlvbiBwYWdlUmVzaXplKCkge1xuXHRcdFx0aWYgKHRhLmNsaWVudFdpZHRoICE9PSBjbGllbnRXaWR0aCkge1xuXHRcdFx0XHR1cGRhdGUoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dmFyIGRlc3Ryb3kgPSAoZnVuY3Rpb24gKHN0eWxlKSB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcGFnZVJlc2l6ZSwgZmFsc2UpO1xuXHRcdFx0dGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGUsIGZhbHNlKTtcblx0XHRcdHRhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7XG5cdFx0XHR0YS5yZW1vdmVFdmVudExpc3RlbmVyKCdhdXRvc2l6ZTpkZXN0cm95JywgZGVzdHJveSwgZmFsc2UpO1xuXHRcdFx0dGEucmVtb3ZlRXZlbnRMaXN0ZW5lcignYXV0b3NpemU6dXBkYXRlJywgdXBkYXRlLCBmYWxzZSk7XG5cblx0XHRcdE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0dGEuc3R5bGVba2V5XSA9IHN0eWxlW2tleV07XG5cdFx0XHR9KTtcblxuXHRcdFx0bWFwWydkZWxldGUnXSh0YSk7XG5cdFx0fSkuYmluZCh0YSwge1xuXHRcdFx0aGVpZ2h0OiB0YS5zdHlsZS5oZWlnaHQsXG5cdFx0XHRyZXNpemU6IHRhLnN0eWxlLnJlc2l6ZSxcblx0XHRcdG92ZXJmbG93WTogdGEuc3R5bGUub3ZlcmZsb3dZLFxuXHRcdFx0b3ZlcmZsb3dYOiB0YS5zdHlsZS5vdmVyZmxvd1gsXG5cdFx0XHR3b3JkV3JhcDogdGEuc3R5bGUud29yZFdyYXBcblx0XHR9KTtcblxuXHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOmRlc3Ryb3knLCBkZXN0cm95LCBmYWxzZSk7XG5cblx0XHQvLyBJRTkgZG9lcyBub3QgZmlyZSBvbnByb3BlcnR5Y2hhbmdlIG9yIG9uaW5wdXQgZm9yIGRlbGV0aW9ucyxcblx0XHQvLyBzbyBiaW5kaW5nIHRvIG9ua2V5dXAgdG8gY2F0Y2ggbW9zdCBvZiB0aG9zZSBldmVudHMuXG5cdFx0Ly8gVGhlcmUgaXMgbm8gd2F5IHRoYXQgSSBrbm93IG9mIHRvIGRldGVjdCBzb21ldGhpbmcgbGlrZSAnY3V0JyBpbiBJRTkuXG5cdFx0aWYgKCdvbnByb3BlcnR5Y2hhbmdlJyBpbiB0YSAmJiAnb25pbnB1dCcgaW4gdGEpIHtcblx0XHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlLCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHBhZ2VSZXNpemUsIGZhbHNlKTtcblx0XHR0YS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZSwgZmFsc2UpO1xuXHRcdHRhLmFkZEV2ZW50TGlzdGVuZXIoJ2F1dG9zaXplOnVwZGF0ZScsIHVwZGF0ZSwgZmFsc2UpO1xuXHRcdHRhLnN0eWxlLm92ZXJmbG93WCA9ICdoaWRkZW4nO1xuXHRcdHRhLnN0eWxlLndvcmRXcmFwID0gJ2JyZWFrLXdvcmQnO1xuXG5cdFx0bWFwLnNldCh0YSwge1xuXHRcdFx0ZGVzdHJveTogZGVzdHJveSxcblx0XHRcdHVwZGF0ZTogdXBkYXRlXG5cdFx0fSk7XG5cblx0XHRpbml0KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZXN0cm95KHRhKSB7XG5cdFx0dmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTtcblx0XHRpZiAobWV0aG9kcykge1xuXHRcdFx0bWV0aG9kcy5kZXN0cm95KCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlKHRhKSB7XG5cdFx0dmFyIG1ldGhvZHMgPSBtYXAuZ2V0KHRhKTtcblx0XHRpZiAobWV0aG9kcykge1xuXHRcdFx0bWV0aG9kcy51cGRhdGUoKTtcblx0XHR9XG5cdH1cblxuXHR2YXIgYXV0b3NpemUgPSBudWxsO1xuXG5cdC8vIERvIG5vdGhpbmcgaW4gTm9kZS5qcyBlbnZpcm9ubWVudCBhbmQgSUU4IChvciBsb3dlcilcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdGF1dG9zaXplID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS51cGRhdGUgPSBmdW5jdGlvbiAoZWwpIHtcblx0XHRcdHJldHVybiBlbDtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGF1dG9zaXplID0gZnVuY3Rpb24gKGVsLCBvcHRpb25zKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGZ1bmN0aW9uICh4KSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFzc2lnbih4LCBvcHRpb25zKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0XHRhdXRvc2l6ZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIGRlc3Ryb3kpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGVsO1xuXHRcdH07XG5cdFx0YXV0b3NpemUudXBkYXRlID0gZnVuY3Rpb24gKGVsKSB7XG5cdFx0XHRpZiAoZWwpIHtcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbC5sZW5ndGggPyBlbCA6IFtlbF0sIHVwZGF0ZSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZWw7XG5cdFx0fTtcblx0fVxuXG5cdG1vZHVsZS5leHBvcnRzID0gYXV0b3NpemU7XG59KTsiLCIndXNlIHN0cmljdCc7XG52YXIgdG9rZW4gPSAnJVthLWYwLTldezJ9JztcbnZhciBzaW5nbGVNYXRjaGVyID0gbmV3IFJlZ0V4cCh0b2tlbiwgJ2dpJyk7XG52YXIgbXVsdGlNYXRjaGVyID0gbmV3IFJlZ0V4cCgnKCcgKyB0b2tlbiArICcpKycsICdnaScpO1xuXG5mdW5jdGlvbiBkZWNvZGVDb21wb25lbnRzKGNvbXBvbmVudHMsIHNwbGl0KSB7XG5cdHRyeSB7XG5cdFx0Ly8gVHJ5IHRvIGRlY29kZSB0aGUgZW50aXJlIHN0cmluZyBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29tcG9uZW50cy5qb2luKCcnKSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIERvIG5vdGhpbmdcblx0fVxuXG5cdGlmIChjb21wb25lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdHJldHVybiBjb21wb25lbnRzO1xuXHR9XG5cblx0c3BsaXQgPSBzcGxpdCB8fCAxO1xuXG5cdC8vIFNwbGl0IHRoZSBhcnJheSBpbiAyIHBhcnRzXG5cdHZhciBsZWZ0ID0gY29tcG9uZW50cy5zbGljZSgwLCBzcGxpdCk7XG5cdHZhciByaWdodCA9IGNvbXBvbmVudHMuc2xpY2Uoc3BsaXQpO1xuXG5cdHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmNhbGwoW10sIGRlY29kZUNvbXBvbmVudHMobGVmdCksIGRlY29kZUNvbXBvbmVudHMocmlnaHQpKTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKGlucHV0KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChpbnB1dCk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdHZhciB0b2tlbnMgPSBpbnB1dC5tYXRjaChzaW5nbGVNYXRjaGVyKTtcblxuXHRcdGZvciAodmFyIGkgPSAxOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpbnB1dCA9IGRlY29kZUNvbXBvbmVudHModG9rZW5zLCBpKS5qb2luKCcnKTtcblxuXHRcdFx0dG9rZW5zID0gaW5wdXQubWF0Y2goc2luZ2xlTWF0Y2hlcik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGlucHV0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChpbnB1dCkge1xuXHQvLyBLZWVwIHRyYWNrIG9mIGFsbCB0aGUgcmVwbGFjZW1lbnRzIGFuZCBwcmVmaWxsIHRoZSBtYXAgd2l0aCB0aGUgYEJPTWBcblx0dmFyIHJlcGxhY2VNYXAgPSB7XG5cdFx0JyVGRSVGRic6ICdcXHVGRkZEXFx1RkZGRCcsXG5cdFx0JyVGRiVGRSc6ICdcXHVGRkZEXFx1RkZGRCdcblx0fTtcblxuXHR2YXIgbWF0Y2ggPSBtdWx0aU1hdGNoZXIuZXhlYyhpbnB1dCk7XG5cdHdoaWxlIChtYXRjaCkge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBEZWNvZGUgYXMgYmlnIGNodW5rcyBhcyBwb3NzaWJsZVxuXHRcdFx0cmVwbGFjZU1hcFttYXRjaFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMF0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0dmFyIHJlc3VsdCA9IGRlY29kZShtYXRjaFswXSk7XG5cblx0XHRcdGlmIChyZXN1bHQgIT09IG1hdGNoWzBdKSB7XG5cdFx0XHRcdHJlcGxhY2VNYXBbbWF0Y2hbMF1dID0gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG1hdGNoID0gbXVsdGlNYXRjaGVyLmV4ZWMoaW5wdXQpO1xuXHR9XG5cblx0Ly8gQWRkIGAlQzJgIGF0IHRoZSBlbmQgb2YgdGhlIG1hcCB0byBtYWtlIHN1cmUgaXQgZG9lcyBub3QgcmVwbGFjZSB0aGUgY29tYmluYXRvciBiZWZvcmUgZXZlcnl0aGluZyBlbHNlXG5cdHJlcGxhY2VNYXBbJyVDMiddID0gJ1xcdUZGRkQnO1xuXG5cdHZhciBlbnRyaWVzID0gT2JqZWN0LmtleXMocmVwbGFjZU1hcCk7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gUmVwbGFjZSBhbGwgZGVjb2RlZCBjb21wb25lbnRzXG5cdFx0dmFyIGtleSA9IGVudHJpZXNbaV07XG5cdFx0aW5wdXQgPSBpbnB1dC5yZXBsYWNlKG5ldyBSZWdFeHAoa2V5LCAnZycpLCByZXBsYWNlTWFwW2tleV0pO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbmNvZGVkVVJJKSB7XG5cdGlmICh0eXBlb2YgZW5jb2RlZFVSSSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBgZW5jb2RlZFVSSWAgdG8gYmUgb2YgdHlwZSBgc3RyaW5nYCwgZ290IGAnICsgdHlwZW9mIGVuY29kZWRVUkkgKyAnYCcpO1xuXHR9XG5cblx0dHJ5IHtcblx0XHRlbmNvZGVkVVJJID0gZW5jb2RlZFVSSS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcblxuXHRcdC8vIFRyeSB0aGUgYnVpbHQgaW4gZGVjb2RlciBmaXJzdFxuXHRcdHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVSSSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdC8vIEZhbGxiYWNrIHRvIGEgbW9yZSBhZHZhbmNlZCBkZWNvZGVyXG5cdFx0cmV0dXJuIGN1c3RvbURlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkVVJJKTtcblx0fVxufTtcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5leHByRXZhbCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxudmFyIElOVU1CRVIgPSAnSU5VTUJFUic7XG52YXIgSU9QMSA9ICdJT1AxJztcbnZhciBJT1AyID0gJ0lPUDInO1xudmFyIElPUDMgPSAnSU9QMyc7XG52YXIgSVZBUiA9ICdJVkFSJztcbnZhciBJRlVOQ0FMTCA9ICdJRlVOQ0FMTCc7XG52YXIgSUVYUFIgPSAnSUVYUFInO1xudmFyIElNRU1CRVIgPSAnSU1FTUJFUic7XG5cbmZ1bmN0aW9uIEluc3RydWN0aW9uKHR5cGUsIHZhbHVlKSB7XG4gIHRoaXMudHlwZSA9IHR5cGU7XG4gIHRoaXMudmFsdWUgPSAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCkgPyB2YWx1ZSA6IDA7XG59XG5cbkluc3RydWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICBjYXNlIElOVU1CRVI6XG4gICAgY2FzZSBJT1AxOlxuICAgIGNhc2UgSU9QMjpcbiAgICBjYXNlIElPUDM6XG4gICAgY2FzZSBJVkFSOlxuICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgY2FzZSBJRlVOQ0FMTDpcbiAgICAgIHJldHVybiAnQ0FMTCAnICsgdGhpcy52YWx1ZTtcbiAgICBjYXNlIElNRU1CRVI6XG4gICAgICByZXR1cm4gJy4nICsgdGhpcy52YWx1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdJbnZhbGlkIEluc3RydWN0aW9uJztcbiAgfVxufTtcblxuZnVuY3Rpb24gdW5hcnlJbnN0cnVjdGlvbih2YWx1ZSkge1xuICByZXR1cm4gbmV3IEluc3RydWN0aW9uKElPUDEsIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gYmluYXJ5SW5zdHJ1Y3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBJbnN0cnVjdGlvbihJT1AyLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHRlcm5hcnlJbnN0cnVjdGlvbih2YWx1ZSkge1xuICByZXR1cm4gbmV3IEluc3RydWN0aW9uKElPUDMsIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gc2ltcGxpZnkodG9rZW5zLCB1bmFyeU9wcywgYmluYXJ5T3BzLCB0ZXJuYXJ5T3BzLCB2YWx1ZXMpIHtcbiAgdmFyIG5zdGFjayA9IFtdO1xuICB2YXIgbmV3ZXhwcmVzc2lvbiA9IFtdO1xuICB2YXIgbjEsIG4yLCBuMztcbiAgdmFyIGY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgdmFyIHR5cGUgPSBpdGVtLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IElOVU1CRVIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVZBUiAmJiB2YWx1ZXMuaGFzT3duUHJvcGVydHkoaXRlbS52YWx1ZSkpIHtcbiAgICAgIGl0ZW0gPSBuZXcgSW5zdHJ1Y3Rpb24oSU5VTUJFUiwgdmFsdWVzW2l0ZW0udmFsdWVdKTtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMiAmJiBuc3RhY2subGVuZ3RoID4gMSkge1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBiaW5hcnlPcHNbaXRlbS52YWx1ZV07XG4gICAgICBpdGVtID0gbmV3IEluc3RydWN0aW9uKElOVU1CRVIsIGYobjEudmFsdWUsIG4yLnZhbHVlKSk7XG4gICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDMgJiYgbnN0YWNrLmxlbmd0aCA+IDIpIHtcbiAgICAgIG4zID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSAnPycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2gobjEudmFsdWUgPyBuMi52YWx1ZSA6IG4zLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGYgPSB0ZXJuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgICBpdGVtID0gbmV3IEluc3RydWN0aW9uKElOVU1CRVIsIGYobjEudmFsdWUsIG4yLnZhbHVlLCBuMy52YWx1ZSkpO1xuICAgICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDEgJiYgbnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIG4xID0gbnN0YWNrLnBvcCgpO1xuICAgICAgZiA9IHVuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgaXRlbSA9IG5ldyBJbnN0cnVjdGlvbihJTlVNQkVSLCBmKG4xLnZhbHVlKSk7XG4gICAgICBuc3RhY2sucHVzaChpdGVtKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElFWFBSKSB7XG4gICAgICB3aGlsZSAobnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKG5zdGFjay5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICAgIG5ld2V4cHJlc3Npb24ucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUVYUFIsIHNpbXBsaWZ5KGl0ZW0udmFsdWUsIHVuYXJ5T3BzLCBiaW5hcnlPcHMsIHRlcm5hcnlPcHMsIHZhbHVlcykpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElNRU1CRVIgJiYgbnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgIG4xID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbnN0YWNrLnB1c2gobmV3IEluc3RydWN0aW9uKElOVU1CRVIsIG4xLnZhbHVlW2l0ZW0udmFsdWVdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChuc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBuZXdleHByZXNzaW9uLnB1c2gobnN0YWNrLnNoaWZ0KCkpO1xuICAgICAgfVxuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICB3aGlsZSAobnN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICBuZXdleHByZXNzaW9uLnB1c2gobnN0YWNrLnNoaWZ0KCkpO1xuICB9XG4gIHJldHVybiBuZXdleHByZXNzaW9uO1xufVxuXG5mdW5jdGlvbiBzdWJzdGl0dXRlKHRva2VucywgdmFyaWFibGUsIGV4cHIpIHtcbiAgdmFyIG5ld2V4cHJlc3Npb24gPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRva2Vuc1tpXTtcbiAgICB2YXIgdHlwZSA9IGl0ZW0udHlwZTtcbiAgICBpZiAodHlwZSA9PT0gSVZBUiAmJiBpdGVtLnZhbHVlID09PSB2YXJpYWJsZSkge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBleHByLnRva2Vucy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZXhwcml0ZW0gPSBleHByLnRva2Vuc1tqXTtcbiAgICAgICAgdmFyIHJlcGxpdGVtO1xuICAgICAgICBpZiAoZXhwcml0ZW0udHlwZSA9PT0gSU9QMSkge1xuICAgICAgICAgIHJlcGxpdGVtID0gdW5hcnlJbnN0cnVjdGlvbihleHByaXRlbS52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXhwcml0ZW0udHlwZSA9PT0gSU9QMikge1xuICAgICAgICAgIHJlcGxpdGVtID0gYmluYXJ5SW5zdHJ1Y3Rpb24oZXhwcml0ZW0udmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGV4cHJpdGVtLnR5cGUgPT09IElPUDMpIHtcbiAgICAgICAgICByZXBsaXRlbSA9IHRlcm5hcnlJbnN0cnVjdGlvbihleHByaXRlbS52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVwbGl0ZW0gPSBuZXcgSW5zdHJ1Y3Rpb24oZXhwcml0ZW0udHlwZSwgZXhwcml0ZW0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG5ld2V4cHJlc3Npb24ucHVzaChyZXBsaXRlbSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJRVhQUikge1xuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKG5ldyBJbnN0cnVjdGlvbihJRVhQUiwgc3Vic3RpdHV0ZShpdGVtLnZhbHVlLCB2YXJpYWJsZSwgZXhwcikpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3ZXhwcmVzc2lvbi5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3ZXhwcmVzc2lvbjtcbn1cblxuZnVuY3Rpb24gZXZhbHVhdGUodG9rZW5zLCBleHByLCB2YWx1ZXMpIHtcbiAgdmFyIG5zdGFjayA9IFtdO1xuICB2YXIgbjEsIG4yLCBuMztcbiAgdmFyIGY7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgdmFyIHR5cGUgPSBpdGVtLnR5cGU7XG4gICAgaWYgKHR5cGUgPT09IElOVU1CRVIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMikge1xuICAgICAgbjIgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBleHByLmJpbmFyeU9wc1tpdGVtLnZhbHVlXTtcbiAgICAgIG5zdGFjay5wdXNoKGYobjEsIG4yKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AzKSB7XG4gICAgICBuMyA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gJz8nKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGV2YWx1YXRlKG4xID8gbjIgOiBuMywgZXhwciwgdmFsdWVzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmID0gZXhwci50ZXJuYXJ5T3BzW2l0ZW0udmFsdWVdO1xuICAgICAgICBuc3RhY2sucHVzaChmKG4xLCBuMiwgbjMpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElWQVIpIHtcbiAgICAgIGlmIChpdGVtLnZhbHVlIGluIGV4cHIuZnVuY3Rpb25zKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGV4cHIuZnVuY3Rpb25zW2l0ZW0udmFsdWVdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2ID0gdmFsdWVzW2l0ZW0udmFsdWVdO1xuICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2godik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmRlZmluZWQgdmFyaWFibGU6ICcgKyBpdGVtLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU9QMSkge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gZXhwci51bmFyeU9wc1tpdGVtLnZhbHVlXTtcbiAgICAgIG5zdGFjay5wdXNoKGYobjEpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElGVU5DQUxMKSB7XG4gICAgICB2YXIgYXJnQ291bnQgPSBpdGVtLnZhbHVlO1xuICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgIHdoaWxlIChhcmdDb3VudC0tID4gMCkge1xuICAgICAgICBhcmdzLnVuc2hpZnQobnN0YWNrLnBvcCgpKTtcbiAgICAgIH1cbiAgICAgIGYgPSBuc3RhY2sucG9wKCk7XG4gICAgICBpZiAoZi5hcHBseSAmJiBmLmNhbGwpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goZi5hcHBseSh1bmRlZmluZWQsIGFyZ3MpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihmICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUVYUFIpIHtcbiAgICAgIG5zdGFjay5wdXNoKGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU1FTUJFUikge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuc3RhY2sucHVzaChuMVtpdGVtLnZhbHVlXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uJyk7XG4gICAgfVxuICB9XG4gIGlmIChuc3RhY2subGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uIChwYXJpdHkpJyk7XG4gIH1cbiAgcmV0dXJuIG5zdGFja1swXTtcbn1cblxuZnVuY3Rpb24gZXhwcmVzc2lvblRvU3RyaW5nKHRva2VucywgdG9KUykge1xuICB2YXIgbnN0YWNrID0gW107XG4gIHZhciBuMSwgbjIsIG4zO1xuICB2YXIgZjtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRva2Vuc1tpXTtcbiAgICB2YXIgdHlwZSA9IGl0ZW0udHlwZTtcbiAgICBpZiAodHlwZSA9PT0gSU5VTUJFUikge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnZhbHVlID09PSAnbnVtYmVyJyAmJiBpdGVtLnZhbHVlIDwgMCkge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBpdGVtLnZhbHVlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5zdGFjay5wdXNoKGVzY2FwZVZhbHVlKGl0ZW0udmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IElPUDIpIHtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gaXRlbS52YWx1ZTtcbiAgICAgIGlmICh0b0pTKSB7XG4gICAgICAgIGlmIChmID09PSAnXicpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnTWF0aC5wb3coJyArIG4xICsgJywgJyArIG4yICsgJyknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnYW5kJykge1xuICAgICAgICAgIG5zdGFjay5wdXNoKCcoISEnICsgbjEgKyAnICYmICEhJyArIG4yICsgJyknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnb3InKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJyghIScgKyBuMSArICcgfHwgISEnICsgbjIgKyAnKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGYgPT09ICd8fCcpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKFN0cmluZygnICsgbjEgKyAnKSArIFN0cmluZygnICsgbjIgKyAnKSknKTtcbiAgICAgICAgfSBlbHNlIGlmIChmID09PSAnPT0nKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnID09PSAnICsgbjIgKyAnKScpO1xuICAgICAgICB9IGVsc2UgaWYgKGYgPT09ICchPScpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBuMSArICcgIT09ICcgKyBuMiArICcpJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnICcgKyBmICsgJyAnICsgbjIgKyAnKScpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBuMSArICcgJyArIGYgKyAnICcgKyBuMiArICcpJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AzKSB7XG4gICAgICBuMyA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG4yID0gbnN0YWNrLnBvcCgpO1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBmID0gaXRlbS52YWx1ZTtcbiAgICAgIGlmIChmID09PSAnPycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goJygnICsgbjEgKyAnID8gJyArIG4yICsgJyA6ICcgKyBuMyArICcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgRXhwcmVzc2lvbicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSVZBUikge1xuICAgICAgbnN0YWNrLnB1c2goaXRlbS52YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBJT1AxKSB7XG4gICAgICBuMSA9IG5zdGFjay5wb3AoKTtcbiAgICAgIGYgPSBpdGVtLnZhbHVlO1xuICAgICAgaWYgKGYgPT09ICctJyB8fCBmID09PSAnKycpIHtcbiAgICAgICAgbnN0YWNrLnB1c2goJygnICsgZiArIG4xICsgJyknKTtcbiAgICAgIH0gZWxzZSBpZiAodG9KUykge1xuICAgICAgICBpZiAoZiA9PT0gJ25vdCcpIHtcbiAgICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyAnIScgKyBuMSArICcpJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZiA9PT0gJyEnKSB7XG4gICAgICAgICAgbnN0YWNrLnB1c2goJ2ZhYygnICsgbjEgKyAnKScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5zdGFjay5wdXNoKGYgKyAnKCcgKyBuMSArICcpJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZiA9PT0gJyEnKSB7XG4gICAgICAgIG5zdGFjay5wdXNoKCcoJyArIG4xICsgJyEpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuc3RhY2sucHVzaCgnKCcgKyBmICsgJyAnICsgbjEgKyAnKScpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUZVTkNBTEwpIHtcbiAgICAgIHZhciBhcmdDb3VudCA9IGl0ZW0udmFsdWU7XG4gICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgd2hpbGUgKGFyZ0NvdW50LS0gPiAwKSB7XG4gICAgICAgIGFyZ3MudW5zaGlmdChuc3RhY2sucG9wKCkpO1xuICAgICAgfVxuICAgICAgZiA9IG5zdGFjay5wb3AoKTtcbiAgICAgIG5zdGFjay5wdXNoKGYgKyAnKCcgKyBhcmdzLmpvaW4oJywgJykgKyAnKScpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSU1FTUJFUikge1xuICAgICAgbjEgPSBuc3RhY2sucG9wKCk7XG4gICAgICBuc3RhY2sucHVzaChuMSArICcuJyArIGl0ZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gSUVYUFIpIHtcbiAgICAgIG5zdGFjay5wdXNoKCcoJyArIGV4cHJlc3Npb25Ub1N0cmluZyhpdGVtLnZhbHVlLCB0b0pTKSArICcpJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uJyk7XG4gICAgfVxuICB9XG4gIGlmIChuc3RhY2subGVuZ3RoID4gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBFeHByZXNzaW9uIChwYXJpdHkpJyk7XG4gIH1cbiAgcmV0dXJuIG5zdGFja1swXTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlVmFsdWUodikge1xuICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHYpLnJlcGxhY2UoL1xcdTIwMjgvZywgJ1xcXFx1MjAyOCcpLnJlcGxhY2UoL1xcdTIwMjkvZywgJ1xcXFx1MjAyOScpO1xuICB9XG4gIHJldHVybiB2O1xufVxuXG5mdW5jdGlvbiBjb250YWlucyhhcnJheSwgb2JqKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gPT09IG9iaikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0U3ltYm9scyh0b2tlbnMsIHN5bWJvbHMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB3aXRoTWVtYmVycyA9ICEhb3B0aW9ucy53aXRoTWVtYmVycztcbiAgdmFyIHByZXZWYXIgPSBudWxsO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSB0b2tlbnNbaV07XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gSVZBUiAmJiAhY29udGFpbnMoc3ltYm9scywgaXRlbS52YWx1ZSkpIHtcbiAgICAgIGlmIChwcmV2VmFyICE9PSBudWxsIHx8ICF3aXRoTWVtYmVycykge1xuICAgICAgICBzeW1ib2xzLnB1c2goaXRlbS52YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2VmFyID0gaXRlbS52YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gSU1FTUJFUiAmJiB3aXRoTWVtYmVycyAmJiBwcmV2VmFyICE9PSBudWxsKSB7XG4gICAgICBwcmV2VmFyICs9ICcuJyArIGl0ZW0udmFsdWU7XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09IElFWFBSKSB7XG4gICAgICBnZXRTeW1ib2xzKGl0ZW0udmFsdWUsIHN5bWJvbHMsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAocHJldlZhciAhPT0gbnVsbCkge1xuICAgICAgaWYgKCFjb250YWlucyhzeW1ib2xzLCBwcmV2VmFyKSkge1xuICAgICAgICBzeW1ib2xzLnB1c2gocHJldlZhcik7XG4gICAgICB9XG4gICAgICBwcmV2VmFyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBpZiAocHJldlZhciAhPT0gbnVsbCAmJiAhY29udGFpbnMoc3ltYm9scywgcHJldlZhcikpIHtcbiAgICBzeW1ib2xzLnB1c2gocHJldlZhcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gRXhwcmVzc2lvbih0b2tlbnMsIHBhcnNlcikge1xuICB0aGlzLnRva2VucyA9IHRva2VucztcbiAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gIHRoaXMudW5hcnlPcHMgPSBwYXJzZXIudW5hcnlPcHM7XG4gIHRoaXMuYmluYXJ5T3BzID0gcGFyc2VyLmJpbmFyeU9wcztcbiAgdGhpcy50ZXJuYXJ5T3BzID0gcGFyc2VyLnRlcm5hcnlPcHM7XG4gIHRoaXMuZnVuY3Rpb25zID0gcGFyc2VyLmZ1bmN0aW9ucztcbn1cblxuRXhwcmVzc2lvbi5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHZhbHVlcyA9IHZhbHVlcyB8fCB7fTtcbiAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHNpbXBsaWZ5KHRoaXMudG9rZW5zLCB0aGlzLnVuYXJ5T3BzLCB0aGlzLmJpbmFyeU9wcywgdGhpcy50ZXJuYXJ5T3BzLCB2YWx1ZXMpLCB0aGlzLnBhcnNlcik7XG59O1xuXG5FeHByZXNzaW9uLnByb3RvdHlwZS5zdWJzdGl0dXRlID0gZnVuY3Rpb24gKHZhcmlhYmxlLCBleHByKSB7XG4gIGlmICghKGV4cHIgaW5zdGFuY2VvZiBFeHByZXNzaW9uKSkge1xuICAgIGV4cHIgPSB0aGlzLnBhcnNlci5wYXJzZShTdHJpbmcoZXhwcikpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBFeHByZXNzaW9uKHN1YnN0aXR1dGUodGhpcy50b2tlbnMsIHZhcmlhYmxlLCBleHByKSwgdGhpcy5wYXJzZXIpO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gIHZhbHVlcyA9IHZhbHVlcyB8fCB7fTtcbiAgcmV0dXJuIGV2YWx1YXRlKHRoaXMudG9rZW5zLCB0aGlzLCB2YWx1ZXMpO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBleHByZXNzaW9uVG9TdHJpbmcodGhpcy50b2tlbnMsIGZhbHNlKTtcbn07XG5cbkV4cHJlc3Npb24ucHJvdG90eXBlLnN5bWJvbHMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHZhcnMgPSBbXTtcbiAgZ2V0U3ltYm9scyh0aGlzLnRva2VucywgdmFycywgb3B0aW9ucyk7XG4gIHJldHVybiB2YXJzO1xufTtcblxuRXhwcmVzc2lvbi5wcm90b3R5cGUudmFyaWFibGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciB2YXJzID0gW107XG4gIGdldFN5bWJvbHModGhpcy50b2tlbnMsIHZhcnMsIG9wdGlvbnMpO1xuICB2YXIgZnVuY3Rpb25zID0gdGhpcy5mdW5jdGlvbnM7XG4gIHJldHVybiB2YXJzLmZpbHRlcihmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAhKG5hbWUgaW4gZnVuY3Rpb25zKTtcbiAgfSk7XG59O1xuXG5FeHByZXNzaW9uLnByb3RvdHlwZS50b0pTRnVuY3Rpb24gPSBmdW5jdGlvbiAocGFyYW0sIHZhcmlhYmxlcykge1xuICB2YXIgZXhwciA9IHRoaXM7XG4gIHZhciBmID0gbmV3IEZ1bmN0aW9uKHBhcmFtLCAnd2l0aCh0aGlzLmZ1bmN0aW9ucykgd2l0aCAodGhpcy50ZXJuYXJ5T3BzKSB3aXRoICh0aGlzLmJpbmFyeU9wcykgd2l0aCAodGhpcy51bmFyeU9wcykgeyByZXR1cm4gJyArIGV4cHJlc3Npb25Ub1N0cmluZyh0aGlzLnNpbXBsaWZ5KHZhcmlhYmxlcykudG9rZW5zLCB0cnVlKSArICc7IH0nKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctZnVuY1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmLmFwcGx5KGV4cHIsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG52YXIgVEVPRiA9ICdURU9GJztcbnZhciBUT1AgPSAnVE9QJztcbnZhciBUTlVNQkVSID0gJ1ROVU1CRVInO1xudmFyIFRTVFJJTkcgPSAnVFNUUklORyc7XG52YXIgVFBBUkVOID0gJ1RQQVJFTic7XG52YXIgVENPTU1BID0gJ1RDT01NQSc7XG52YXIgVE5BTUUgPSAnVE5BTUUnO1xuXG5mdW5jdGlvbiBUb2tlbih0eXBlLCB2YWx1ZSwgaW5kZXgpIHtcbiAgdGhpcy50eXBlID0gdHlwZTtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmluZGV4ID0gaW5kZXg7XG59XG5cblRva2VuLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMudHlwZSArICc6ICcgKyB0aGlzLnZhbHVlO1xufTtcblxuZnVuY3Rpb24gVG9rZW5TdHJlYW0ocGFyc2VyLCBleHByZXNzaW9uKSB7XG4gIHRoaXMucG9zID0gMDtcbiAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgdGhpcy51bmFyeU9wcyA9IHBhcnNlci51bmFyeU9wcztcbiAgdGhpcy5iaW5hcnlPcHMgPSBwYXJzZXIuYmluYXJ5T3BzO1xuICB0aGlzLnRlcm5hcnlPcHMgPSBwYXJzZXIudGVybmFyeU9wcztcbiAgdGhpcy5jb25zdHMgPSBwYXJzZXIuY29uc3RzO1xuICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICB0aGlzLnNhdmVkUG9zaXRpb24gPSAwO1xuICB0aGlzLnNhdmVkQ3VycmVudCA9IG51bGw7XG4gIHRoaXMub3B0aW9ucyA9IHBhcnNlci5vcHRpb25zO1xufVxuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUubmV3VG9rZW4gPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUsIHBvcykge1xuICByZXR1cm4gbmV3IFRva2VuKHR5cGUsIHZhbHVlLCBwb3MgIT0gbnVsbCA/IHBvcyA6IHRoaXMucG9zKTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnNhdmVkUG9zaXRpb24gPSB0aGlzLnBvcztcbiAgdGhpcy5zYXZlZEN1cnJlbnQgPSB0aGlzLmN1cnJlbnQ7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wb3MgPSB0aGlzLnNhdmVkUG9zaXRpb247XG4gIHRoaXMuY3VycmVudCA9IHRoaXMuc2F2ZWRDdXJyZW50O1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBvcyA+PSB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV3VG9rZW4oVEVPRiwgJ0VPRicpO1xuICB9XG5cbiAgaWYgKHRoaXMuaXNXaGl0ZXNwYWNlKCkgfHwgdGhpcy5pc0NvbW1lbnQoKSkge1xuICAgIHJldHVybiB0aGlzLm5leHQoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmlzUmFkaXhJbnRlZ2VyKCkgfHxcbiAgICAgIHRoaXMuaXNOdW1iZXIoKSB8fFxuICAgICAgdGhpcy5pc09wZXJhdG9yKCkgfHxcbiAgICAgIHRoaXMuaXNTdHJpbmcoKSB8fFxuICAgICAgdGhpcy5pc1BhcmVuKCkgfHxcbiAgICAgIHRoaXMuaXNDb21tYSgpIHx8XG4gICAgICB0aGlzLmlzTmFtZWRPcCgpIHx8XG4gICAgICB0aGlzLmlzQ29uc3QoKSB8fFxuICAgICAgdGhpcy5pc05hbWUoKSkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZUVycm9yKCdVbmtub3duIGNoYXJhY3RlciBcIicgKyB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKSArICdcIicpO1xuICB9XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByID0gZmFsc2U7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgcXVvdGUgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHN0YXJ0UG9zKTtcblxuICBpZiAocXVvdGUgPT09ICdcXCcnIHx8IHF1b3RlID09PSAnXCInKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5leHByZXNzaW9uLmluZGV4T2YocXVvdGUsIHN0YXJ0UG9zICsgMSk7XG4gICAgd2hpbGUgKGluZGV4ID49IDAgJiYgdGhpcy5wb3MgPCB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBvcyA9IGluZGV4ICsgMTtcbiAgICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KGluZGV4IC0gMSkgIT09ICdcXFxcJykge1xuICAgICAgICB2YXIgcmF3U3RyaW5nID0gdGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcyArIDEsIGluZGV4KTtcbiAgICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUU1RSSU5HLCB0aGlzLnVuZXNjYXBlKHJhd1N0cmluZyksIHN0YXJ0UG9zKTtcbiAgICAgICAgciA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaW5kZXggPSB0aGlzLmV4cHJlc3Npb24uaW5kZXhPZihxdW90ZSwgaW5kZXggKyAxKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNQYXJlbiA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcoJyB8fCBjID09PSAnKScpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRQQVJFTiwgYyk7XG4gICAgdGhpcy5wb3MrKztcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5Ub2tlblN0cmVhbS5wcm90b3R5cGUuaXNDb21tYSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcsJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVENPTU1BLCAnLCcpO1xuICAgIHRoaXMucG9zKys7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzQ29uc3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgaSA9IHN0YXJ0UG9zO1xuICBmb3IgKDsgaSA8IHRoaXMuZXhwcmVzc2lvbi5sZW5ndGg7IGkrKykge1xuICAgIHZhciBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChpKTtcbiAgICBpZiAoYy50b1VwcGVyQ2FzZSgpID09PSBjLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGlmIChpID09PSB0aGlzLnBvcyB8fCAoYyAhPT0gJ18nICYmIGMgIT09ICcuJyAmJiAoYyA8ICcwJyB8fCBjID4gJzknKSkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChpID4gc3RhcnRQb3MpIHtcbiAgICB2YXIgc3RyID0gdGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcywgaSk7XG4gICAgaWYgKHN0ciBpbiB0aGlzLmNvbnN0cykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUTlVNQkVSLCB0aGlzLmNvbnN0c1tzdHJdKTtcbiAgICAgIHRoaXMucG9zICs9IHN0ci5sZW5ndGg7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzTmFtZWRPcCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG4gIHZhciBpID0gc3RhcnRQb3M7XG4gIGZvciAoOyBpIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KGkpO1xuICAgIGlmIChjLnRvVXBwZXJDYXNlKCkgPT09IGMudG9Mb3dlckNhc2UoKSkge1xuICAgICAgaWYgKGkgPT09IHRoaXMucG9zIHx8IChjICE9PSAnXycgJiYgKGMgPCAnMCcgfHwgYyA+ICc5JykpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoaSA+IHN0YXJ0UG9zKSB7XG4gICAgdmFyIHN0ciA9IHRoaXMuZXhwcmVzc2lvbi5zdWJzdHJpbmcoc3RhcnRQb3MsIGkpO1xuICAgIGlmICh0aGlzLmlzT3BlcmF0b3JFbmFibGVkKHN0cikgJiYgKHN0ciBpbiB0aGlzLmJpbmFyeU9wcyB8fCBzdHIgaW4gdGhpcy51bmFyeU9wcyB8fCBzdHIgaW4gdGhpcy50ZXJuYXJ5T3BzKSkge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsIHN0cik7XG4gICAgICB0aGlzLnBvcyArPSBzdHIubGVuZ3RoO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5pc05hbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgaSA9IHN0YXJ0UG9zO1xuICB2YXIgaGFzTGV0dGVyID0gZmFsc2U7XG4gIGZvciAoOyBpIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KGkpO1xuICAgIGlmIChjLnRvVXBwZXJDYXNlKCkgPT09IGMudG9Mb3dlckNhc2UoKSkge1xuICAgICAgaWYgKGkgPT09IHRoaXMucG9zICYmIGMgPT09ICckJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoaSA9PT0gdGhpcy5wb3MgfHwgIWhhc0xldHRlciB8fCAoYyAhPT0gJ18nICYmIChjIDwgJzAnIHx8IGMgPiAnOScpKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaGFzTGV0dGVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGhhc0xldHRlcikge1xuICAgIHZhciBzdHIgPSB0aGlzLmV4cHJlc3Npb24uc3Vic3RyaW5nKHN0YXJ0UG9zLCBpKTtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROQU1FLCBzdHIpO1xuICAgIHRoaXMucG9zICs9IHN0ci5sZW5ndGg7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzV2hpdGVzcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHIgPSBmYWxzZTtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgd2hpbGUgKGMgPT09ICcgJyB8fCBjID09PSAnXFx0JyB8fCBjID09PSAnXFxuJyB8fCBjID09PSAnXFxyJykge1xuICAgIHIgPSB0cnVlO1xuICAgIHRoaXMucG9zKys7XG4gICAgaWYgKHRoaXMucG9zID49IHRoaXMuZXhwcmVzc2lvbi5sZW5ndGgpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdCh0aGlzLnBvcyk7XG4gIH1cbiAgcmV0dXJuIHI7XG59O1xuXG52YXIgY29kZVBvaW50UGF0dGVybiA9IC9eWzAtOWEtZl17NH0kL2k7XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS51bmVzY2FwZSA9IGZ1bmN0aW9uICh2KSB7XG4gIHZhciBpbmRleCA9IHYuaW5kZXhPZignXFxcXCcpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIHY7XG4gIH1cblxuICB2YXIgYnVmZmVyID0gdi5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICB3aGlsZSAoaW5kZXggPj0gMCkge1xuICAgIHZhciBjID0gdi5jaGFyQXQoKytpbmRleCk7XG4gICAgc3dpdGNoIChjKSB7XG4gICAgICBjYXNlICdcXCcnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcJyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnXCInOlxuICAgICAgICBidWZmZXIgKz0gJ1wiJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdcXFxcJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXFxcJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvJzpcbiAgICAgICAgYnVmZmVyICs9ICcvJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdiJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXGInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2YnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcZic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbic6XG4gICAgICAgIGJ1ZmZlciArPSAnXFxuJztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdyJzpcbiAgICAgICAgYnVmZmVyICs9ICdcXHInO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3QnOlxuICAgICAgICBidWZmZXIgKz0gJ1xcdCc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndSc6XG4gICAgICAgIC8vIGludGVycHJldCB0aGUgZm9sbG93aW5nIDQgY2hhcmFjdGVycyBhcyB0aGUgaGV4IG9mIHRoZSB1bmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgdmFyIGNvZGVQb2ludCA9IHYuc3Vic3RyaW5nKGluZGV4ICsgMSwgaW5kZXggKyA1KTtcbiAgICAgICAgaWYgKCFjb2RlUG9pbnRQYXR0ZXJuLnRlc3QoY29kZVBvaW50KSkge1xuICAgICAgICAgIHRoaXMucGFyc2VFcnJvcignSWxsZWdhbCBlc2NhcGUgc2VxdWVuY2U6IFxcXFx1JyArIGNvZGVQb2ludCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVmZmVyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoY29kZVBvaW50LCAxNikpO1xuICAgICAgICBpbmRleCArPSA0O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IHRoaXMucGFyc2VFcnJvcignSWxsZWdhbCBlc2NhcGUgc2VxdWVuY2U6IFwiXFxcXCcgKyBjICsgJ1wiJyk7XG4gICAgfVxuICAgICsraW5kZXg7XG4gICAgdmFyIGJhY2tzbGFzaCA9IHYuaW5kZXhPZignXFxcXCcsIGluZGV4KTtcbiAgICBidWZmZXIgKz0gdi5zdWJzdHJpbmcoaW5kZXgsIGJhY2tzbGFzaCA8IDAgPyB2Lmxlbmd0aCA6IGJhY2tzbGFzaCk7XG4gICAgaW5kZXggPSBiYWNrc2xhc2g7XG4gIH1cblxuICByZXR1cm4gYnVmZmVyO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzQ29tbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zKTtcbiAgaWYgKGMgPT09ICcvJyAmJiB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICcqJykge1xuICAgIHRoaXMucG9zID0gdGhpcy5leHByZXNzaW9uLmluZGV4T2YoJyovJywgdGhpcy5wb3MpICsgMjtcbiAgICBpZiAodGhpcy5wb3MgPT09IDEpIHtcbiAgICAgIHRoaXMucG9zID0gdGhpcy5leHByZXNzaW9uLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzUmFkaXhJbnRlZ2VyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcG9zID0gdGhpcy5wb3M7XG5cbiAgaWYgKHBvcyA+PSB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoIC0gMiB8fCB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHBvcykgIT09ICcwJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICArK3BvcztcblxuICB2YXIgcmFkaXg7XG4gIHZhciB2YWxpZERpZ2l0O1xuICBpZiAodGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpID09PSAneCcpIHtcbiAgICByYWRpeCA9IDE2O1xuICAgIHZhbGlkRGlnaXQgPSAvXlswLTlhLWZdJC9pO1xuICAgICsrcG9zO1xuICB9IGVsc2UgaWYgKHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQocG9zKSA9PT0gJ2InKSB7XG4gICAgcmFkaXggPSAyO1xuICAgIHZhbGlkRGlnaXQgPSAvXlswMV0kL2k7XG4gICAgKytwb3M7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHZhbGlkID0gZmFsc2U7XG4gIHZhciBzdGFydFBvcyA9IHBvcztcblxuICB3aGlsZSAocG9zIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aCkge1xuICAgIHZhciBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpO1xuICAgIGlmICh2YWxpZERpZ2l0LnRlc3QoYykpIHtcbiAgICAgIHBvcysrO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAodmFsaWQpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROVU1CRVIsIHBhcnNlSW50KHRoaXMuZXhwcmVzc2lvbi5zdWJzdHJpbmcoc3RhcnRQb3MsIHBvcyksIHJhZGl4KSk7XG4gICAgdGhpcy5wb3MgPSBwb3M7XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzTnVtYmVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdmFsaWQgPSBmYWxzZTtcbiAgdmFyIHBvcyA9IHRoaXMucG9zO1xuICB2YXIgc3RhcnRQb3MgPSBwb3M7XG4gIHZhciByZXNldFBvcyA9IHBvcztcbiAgdmFyIGZvdW5kRG90ID0gZmFsc2U7XG4gIHZhciBmb3VuZERpZ2l0cyA9IGZhbHNlO1xuICB2YXIgYztcblxuICB3aGlsZSAocG9zIDwgdGhpcy5leHByZXNzaW9uLmxlbmd0aCkge1xuICAgIGMgPSB0aGlzLmV4cHJlc3Npb24uY2hhckF0KHBvcyk7XG4gICAgaWYgKChjID49ICcwJyAmJiBjIDw9ICc5JykgfHwgKCFmb3VuZERvdCAmJiBjID09PSAnLicpKSB7XG4gICAgICBpZiAoYyA9PT0gJy4nKSB7XG4gICAgICAgIGZvdW5kRG90ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHBvcysrO1xuICAgICAgdmFsaWQgPSBmb3VuZERpZ2l0cztcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHZhbGlkKSB7XG4gICAgcmVzZXRQb3MgPSBwb3M7XG4gIH1cblxuICBpZiAoYyA9PT0gJ2UnIHx8IGMgPT09ICdFJykge1xuICAgIHBvcysrO1xuICAgIHZhciBhY2NlcHRTaWduID0gdHJ1ZTtcbiAgICB2YXIgdmFsaWRFeHBvbmVudCA9IGZhbHNlO1xuICAgIHdoaWxlIChwb3MgPCB0aGlzLmV4cHJlc3Npb24ubGVuZ3RoKSB7XG4gICAgICBjID0gdGhpcy5leHByZXNzaW9uLmNoYXJBdChwb3MpO1xuICAgICAgaWYgKGFjY2VwdFNpZ24gJiYgKGMgPT09ICcrJyB8fCBjID09PSAnLScpKSB7XG4gICAgICAgIGFjY2VwdFNpZ24gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoYyA+PSAnMCcgJiYgYyA8PSAnOScpIHtcbiAgICAgICAgdmFsaWRFeHBvbmVudCA9IHRydWU7XG4gICAgICAgIGFjY2VwdFNpZ24gPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcG9zKys7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZEV4cG9uZW50KSB7XG4gICAgICBwb3MgPSByZXNldFBvcztcbiAgICB9XG4gIH1cblxuICBpZiAodmFsaWQpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFROVU1CRVIsIHBhcnNlRmxvYXQodGhpcy5leHByZXNzaW9uLnN1YnN0cmluZyhzdGFydFBvcywgcG9zKSkpO1xuICAgIHRoaXMucG9zID0gcG9zO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucG9zID0gcmVzZXRQb3M7XG4gIH1cbiAgcmV0dXJuIHZhbGlkO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmlzT3BlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICB2YXIgYyA9IHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQodGhpcy5wb3MpO1xuXG4gIGlmIChjID09PSAnKycgfHwgYyA9PT0gJy0nIHx8IGMgPT09ICcqJyB8fCBjID09PSAnLycgfHwgYyA9PT0gJyUnIHx8IGMgPT09ICdeJyB8fCBjID09PSAnPycgfHwgYyA9PT0gJzonIHx8IGMgPT09ICcuJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCBjKTtcbiAgfSBlbHNlIGlmIChjID09PSAn4oiZJyB8fCBjID09PSAn4oCiJykge1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCAnKicpO1xuICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICc9Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc+PScpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc+Jyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGMgPT09ICc8Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICc9Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc8PScpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICc8Jyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGMgPT09ICd8Jykge1xuICAgIGlmICh0aGlzLmV4cHJlc3Npb24uY2hhckF0KHRoaXMucG9zICsgMSkgPT09ICd8Jykge1xuICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXdUb2tlbihUT1AsICd8fCcpO1xuICAgICAgdGhpcy5wb3MrKztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjID09PSAnPScpIHtcbiAgICBpZiAodGhpcy5leHByZXNzaW9uLmNoYXJBdCh0aGlzLnBvcyArIDEpID09PSAnPScpIHtcbiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMubmV3VG9rZW4oVE9QLCAnPT0nKTtcbiAgICAgIHRoaXMucG9zKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYyA9PT0gJyEnKSB7XG4gICAgaWYgKHRoaXMuZXhwcmVzc2lvbi5jaGFyQXQodGhpcy5wb3MgKyAxKSA9PT0gJz0nKSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRPUCwgJyE9Jyk7XG4gICAgICB0aGlzLnBvcysrO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB0aGlzLm5ld1Rva2VuKFRPUCwgYyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0aGlzLnBvcysrO1xuXG4gIGlmICh0aGlzLmlzT3BlcmF0b3JFbmFibGVkKHRoaXMuY3VycmVudC52YWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIG9wdGlvbk5hbWVNYXAgPSB7XG4gICcrJzogJ2FkZCcsXG4gICctJzogJ3N1YnRyYWN0JyxcbiAgJyonOiAnbXVsdGlwbHknLFxuICAnLyc6ICdkaXZpZGUnLFxuICAnJSc6ICdyZW1haW5kZXInLFxuICAnXic6ICdwb3dlcicsXG4gICchJzogJ2ZhY3RvcmlhbCcsXG4gICc8JzogJ2NvbXBhcmlzb24nLFxuICAnPic6ICdjb21wYXJpc29uJyxcbiAgJzw9JzogJ2NvbXBhcmlzb24nLFxuICAnPj0nOiAnY29tcGFyaXNvbicsXG4gICc9PSc6ICdjb21wYXJpc29uJyxcbiAgJyE9JzogJ2NvbXBhcmlzb24nLFxuICAnfHwnOiAnY29uY2F0ZW5hdGUnLFxuICAnYW5kJzogJ2xvZ2ljYWwnLFxuICAnb3InOiAnbG9naWNhbCcsXG4gICdub3QnOiAnbG9naWNhbCcsXG4gICc/JzogJ2NvbmRpdGlvbmFsJyxcbiAgJzonOiAnY29uZGl0aW9uYWwnXG59O1xuXG5mdW5jdGlvbiBnZXRPcHRpb25OYW1lKG9wKSB7XG4gIHJldHVybiBvcHRpb25OYW1lTWFwLmhhc093blByb3BlcnR5KG9wKSA/IG9wdGlvbk5hbWVNYXBbb3BdIDogb3A7XG59XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5pc09wZXJhdG9yRW5hYmxlZCA9IGZ1bmN0aW9uIChvcCkge1xuICB2YXIgb3B0aW9uTmFtZSA9IGdldE9wdGlvbk5hbWUob3ApO1xuICB2YXIgb3BlcmF0b3JzID0gdGhpcy5vcHRpb25zLm9wZXJhdG9ycyB8fCB7fTtcblxuICAvLyBpbiBpcyBhIHNwZWNpYWwgY2FzZSBmb3Igbm93IGJlY2F1c2UgaXQncyBkaXNhYmxlZCBieSBkZWZhdWx0XG4gIGlmIChvcHRpb25OYW1lID09PSAnaW4nKSB7XG4gICAgcmV0dXJuICEhb3BlcmF0b3JzWydpbiddO1xuICB9XG5cbiAgcmV0dXJuICEob3B0aW9uTmFtZSBpbiBvcGVyYXRvcnMpIHx8ICEhb3BlcmF0b3JzW29wdGlvbk5hbWVdO1xufTtcblxuVG9rZW5TdHJlYW0ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGluZSA9IDA7XG4gIHZhciBjb2x1bW47XG4gIHZhciBuZXdsaW5lID0gLTE7XG4gIGRvIHtcbiAgICBsaW5lKys7XG4gICAgY29sdW1uID0gdGhpcy5wb3MgLSBuZXdsaW5lO1xuICAgIG5ld2xpbmUgPSB0aGlzLmV4cHJlc3Npb24uaW5kZXhPZignXFxuJywgbmV3bGluZSArIDEpO1xuICB9IHdoaWxlIChuZXdsaW5lID49IDAgJiYgbmV3bGluZSA8IHRoaXMucG9zKTtcblxuICByZXR1cm4ge1xuICAgIGxpbmU6IGxpbmUsXG4gICAgY29sdW1uOiBjb2x1bW5cbiAgfTtcbn07XG5cblRva2VuU3RyZWFtLnByb3RvdHlwZS5wYXJzZUVycm9yID0gZnVuY3Rpb24gKG1zZykge1xuICB2YXIgY29vcmRzID0gdGhpcy5nZXRDb29yZGluYXRlcygpO1xuICB0aHJvdyBuZXcgRXJyb3IoJ3BhcnNlIGVycm9yIFsnICsgY29vcmRzLmxpbmUgKyAnOicgKyBjb29yZHMuY29sdW1uICsgJ106ICcgKyBtc2cpO1xufTtcblxuZnVuY3Rpb24gUGFyc2VyU3RhdGUocGFyc2VyLCB0b2tlblN0cmVhbSwgb3B0aW9ucykge1xuICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgdGhpcy50b2tlbnMgPSB0b2tlblN0cmVhbTtcbiAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgdGhpcy5uZXh0VG9rZW4gPSBudWxsO1xuICB0aGlzLm5leHQoKTtcbiAgdGhpcy5zYXZlZEN1cnJlbnQgPSBudWxsO1xuICB0aGlzLnNhdmVkTmV4dFRva2VuID0gbnVsbDtcbiAgdGhpcy5hbGxvd01lbWJlckFjY2VzcyA9IG9wdGlvbnMuYWxsb3dNZW1iZXJBY2Nlc3MgIT09IGZhbHNlO1xufVxuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5jdXJyZW50ID0gdGhpcy5uZXh0VG9rZW47XG4gIHJldHVybiAodGhpcy5uZXh0VG9rZW4gPSB0aGlzLnRva2Vucy5uZXh0KCkpO1xufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnRva2VuTWF0Y2hlcyA9IGZ1bmN0aW9uICh0b2tlbiwgdmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBjb250YWlucyh2YWx1ZSwgdG9rZW4udmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB2YWx1ZSh0b2tlbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRva2VuLnZhbHVlID09PSB2YWx1ZTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuc2F2ZWRDdXJyZW50ID0gdGhpcy5jdXJyZW50O1xuICB0aGlzLnNhdmVkTmV4dFRva2VuID0gdGhpcy5uZXh0VG9rZW47XG4gIHRoaXMudG9rZW5zLnNhdmUoKTtcbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnRva2Vucy5yZXN0b3JlKCk7XG4gIHRoaXMuY3VycmVudCA9IHRoaXMuc2F2ZWRDdXJyZW50O1xuICB0aGlzLm5leHRUb2tlbiA9IHRoaXMuc2F2ZWROZXh0VG9rZW47XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XG4gIGlmICh0aGlzLm5leHRUb2tlbi50eXBlID09PSB0eXBlICYmIHRoaXMudG9rZW5NYXRjaGVzKHRoaXMubmV4dFRva2VuLCB2YWx1ZSkpIHtcbiAgICB0aGlzLm5leHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUuZXhwZWN0ID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XG4gIGlmICghdGhpcy5hY2NlcHQodHlwZSwgdmFsdWUpKSB7XG4gICAgdmFyIGNvb3JkcyA9IHRoaXMudG9rZW5zLmdldENvb3JkaW5hdGVzKCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwYXJzZSBlcnJvciBbJyArIGNvb3Jkcy5saW5lICsgJzonICsgY29vcmRzLmNvbHVtbiArICddOiBFeHBlY3RlZCAnICsgKHZhbHVlIHx8IHR5cGUpKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQXRvbSA9IGZ1bmN0aW9uIChpbnN0cikge1xuICBpZiAodGhpcy5hY2NlcHQoVE5BTUUpKSB7XG4gICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSVZBUiwgdGhpcy5jdXJyZW50LnZhbHVlKSk7XG4gIH0gZWxzZSBpZiAodGhpcy5hY2NlcHQoVE5VTUJFUikpIHtcbiAgICBpbnN0ci5wdXNoKG5ldyBJbnN0cnVjdGlvbihJTlVNQkVSLCB0aGlzLmN1cnJlbnQudmFsdWUpKTtcbiAgfSBlbHNlIGlmICh0aGlzLmFjY2VwdChUU1RSSU5HKSkge1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElOVU1CRVIsIHRoaXMuY3VycmVudC52YWx1ZSkpO1xuICB9IGVsc2UgaWYgKHRoaXMuYWNjZXB0KFRQQVJFTiwgJygnKSkge1xuICAgIHRoaXMucGFyc2VFeHByZXNzaW9uKGluc3RyKTtcbiAgICB0aGlzLmV4cGVjdChUUEFSRU4sICcpJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkICcgKyB0aGlzLm5leHRUb2tlbik7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZUV4cHJlc3Npb24gPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZUNvbmRpdGlvbmFsRXhwcmVzc2lvbihpbnN0cik7XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24gPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZU9yRXhwcmVzc2lvbihpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICc/JykpIHtcbiAgICB2YXIgdHJ1ZUJyYW5jaCA9IFtdO1xuICAgIHZhciBmYWxzZUJyYW5jaCA9IFtdO1xuICAgIHRoaXMucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24odHJ1ZUJyYW5jaCk7XG4gICAgdGhpcy5leHBlY3QoVE9QLCAnOicpO1xuICAgIHRoaXMucGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb24oZmFsc2VCcmFuY2gpO1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElFWFBSLCB0cnVlQnJhbmNoKSk7XG4gICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUVYUFIsIGZhbHNlQnJhbmNoKSk7XG4gICAgaW5zdHIucHVzaCh0ZXJuYXJ5SW5zdHJ1Y3Rpb24oJz8nKSk7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZU9yRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQW5kRXhwcmVzc2lvbihpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICdvcicpKSB7XG4gICAgdGhpcy5wYXJzZUFuZEV4cHJlc3Npb24oaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ29yJykpO1xuICB9XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VBbmRFeHByZXNzaW9uID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VDb21wYXJpc29uKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgJ2FuZCcpKSB7XG4gICAgdGhpcy5wYXJzZUNvbXBhcmlzb24oaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ2FuZCcpKTtcbiAgfVxufTtcblxudmFyIENPTVBBUklTT05fT1BFUkFUT1JTID0gWyc9PScsICchPScsICc8JywgJzw9JywgJz49JywgJz4nLCAnaW4nXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQ29tcGFyaXNvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQWRkU3ViKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgQ09NUEFSSVNPTl9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VBZGRTdWIoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgfVxufTtcblxudmFyIEFERF9TVUJfT1BFUkFUT1JTID0gWycrJywgJy0nLCAnfHwnXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlQWRkU3ViID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VUZXJtKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgQUREX1NVQl9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VUZXJtKGluc3RyKTtcbiAgICBpbnN0ci5wdXNoKGJpbmFyeUluc3RydWN0aW9uKG9wLnZhbHVlKSk7XG4gIH1cbn07XG5cbnZhciBURVJNX09QRVJBVE9SUyA9IFsnKicsICcvJywgJyUnXTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlVGVybSA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlRmFjdG9yKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgVEVSTV9PUEVSQVRPUlMpKSB7XG4gICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMucGFyc2VGYWN0b3IoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlRmFjdG9yID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHZhciB1bmFyeU9wcyA9IHRoaXMudG9rZW5zLnVuYXJ5T3BzO1xuICBmdW5jdGlvbiBpc1ByZWZpeE9wZXJhdG9yKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuLnZhbHVlIGluIHVuYXJ5T3BzO1xuICB9XG5cbiAgdGhpcy5zYXZlKCk7XG4gIGlmICh0aGlzLmFjY2VwdChUT1AsIGlzUHJlZml4T3BlcmF0b3IpKSB7XG4gICAgaWYgKCh0aGlzLmN1cnJlbnQudmFsdWUgIT09ICctJyAmJiB0aGlzLmN1cnJlbnQudmFsdWUgIT09ICcrJyAmJiB0aGlzLm5leHRUb2tlbi50eXBlID09PSBUUEFSRU4gJiYgdGhpcy5uZXh0VG9rZW4udmFsdWUgPT09ICcoJykpIHtcbiAgICAgIHRoaXMucmVzdG9yZSgpO1xuICAgICAgdGhpcy5wYXJzZUV4cG9uZW50aWFsKGluc3RyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG9wID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5wYXJzZUZhY3RvcihpbnN0cik7XG4gICAgICBpbnN0ci5wdXNoKHVuYXJ5SW5zdHJ1Y3Rpb24ob3AudmFsdWUpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZUV4cG9uZW50aWFsKGluc3RyKTtcbiAgfVxufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlRXhwb25lbnRpYWwgPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdGhpcy5wYXJzZVBvc3RmaXhFeHByZXNzaW9uKGluc3RyKTtcbiAgd2hpbGUgKHRoaXMuYWNjZXB0KFRPUCwgJ14nKSkge1xuICAgIHRoaXMucGFyc2VGYWN0b3IoaW5zdHIpO1xuICAgIGluc3RyLnB1c2goYmluYXJ5SW5zdHJ1Y3Rpb24oJ14nKSk7XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZVBvc3RmaXhFeHByZXNzaW9uID0gZnVuY3Rpb24gKGluc3RyKSB7XG4gIHRoaXMucGFyc2VGdW5jdGlvbkNhbGwoaW5zdHIpO1xuICB3aGlsZSAodGhpcy5hY2NlcHQoVE9QLCAnIScpKSB7XG4gICAgaW5zdHIucHVzaCh1bmFyeUluc3RydWN0aW9uKCchJykpO1xuICB9XG59O1xuXG5QYXJzZXJTdGF0ZS5wcm90b3R5cGUucGFyc2VGdW5jdGlvbkNhbGwgPSBmdW5jdGlvbiAoaW5zdHIpIHtcbiAgdmFyIHVuYXJ5T3BzID0gdGhpcy50b2tlbnMudW5hcnlPcHM7XG4gIGZ1bmN0aW9uIGlzUHJlZml4T3BlcmF0b3IodG9rZW4pIHtcbiAgICByZXR1cm4gdG9rZW4udmFsdWUgaW4gdW5hcnlPcHM7XG4gIH1cblxuICBpZiAodGhpcy5hY2NlcHQoVE9QLCBpc1ByZWZpeE9wZXJhdG9yKSkge1xuICAgIHZhciBvcCA9IHRoaXMuY3VycmVudDtcbiAgICB0aGlzLnBhcnNlQXRvbShpbnN0cik7XG4gICAgaW5zdHIucHVzaCh1bmFyeUluc3RydWN0aW9uKG9wLnZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wYXJzZU1lbWJlckV4cHJlc3Npb24oaW5zdHIpO1xuICAgIHdoaWxlICh0aGlzLmFjY2VwdChUUEFSRU4sICcoJykpIHtcbiAgICAgIGlmICh0aGlzLmFjY2VwdChUUEFSRU4sICcpJykpIHtcbiAgICAgICAgaW5zdHIucHVzaChuZXcgSW5zdHJ1Y3Rpb24oSUZVTkNBTEwsIDApKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhcmdDb3VudCA9IHRoaXMucGFyc2VBcmd1bWVudExpc3QoaW5zdHIpO1xuICAgICAgICBpbnN0ci5wdXNoKG5ldyBJbnN0cnVjdGlvbihJRlVOQ0FMTCwgYXJnQ291bnQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblBhcnNlclN0YXRlLnByb3RvdHlwZS5wYXJzZUFyZ3VtZW50TGlzdCA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB2YXIgYXJnQ291bnQgPSAwO1xuXG4gIHdoaWxlICghdGhpcy5hY2NlcHQoVFBBUkVOLCAnKScpKSB7XG4gICAgdGhpcy5wYXJzZUV4cHJlc3Npb24oaW5zdHIpO1xuICAgICsrYXJnQ291bnQ7XG4gICAgd2hpbGUgKHRoaXMuYWNjZXB0KFRDT01NQSkpIHtcbiAgICAgIHRoaXMucGFyc2VFeHByZXNzaW9uKGluc3RyKTtcbiAgICAgICsrYXJnQ291bnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGFyZ0NvdW50O1xufTtcblxuUGFyc2VyU3RhdGUucHJvdG90eXBlLnBhcnNlTWVtYmVyRXhwcmVzc2lvbiA9IGZ1bmN0aW9uIChpbnN0cikge1xuICB0aGlzLnBhcnNlQXRvbShpbnN0cik7XG4gIHdoaWxlICh0aGlzLmFjY2VwdChUT1AsICcuJykpIHtcbiAgICBpZiAoIXRoaXMuYWxsb3dNZW1iZXJBY2Nlc3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCBcIi5cIiwgbWVtYmVyIGFjY2VzcyBpcyBub3QgcGVybWl0dGVkJyk7XG4gICAgfVxuXG4gICAgdGhpcy5leHBlY3QoVE5BTUUpO1xuICAgIGluc3RyLnB1c2gobmV3IEluc3RydWN0aW9uKElNRU1CRVIsIHRoaXMuY3VycmVudC52YWx1ZSkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBhZGQoYSwgYikge1xuICByZXR1cm4gTnVtYmVyKGEpICsgTnVtYmVyKGIpO1xufVxuXG5mdW5jdGlvbiBzdWIoYSwgYikge1xuICByZXR1cm4gYSAtIGI7XG59XG5cbmZ1bmN0aW9uIG11bChhLCBiKSB7XG4gIHJldHVybiBhICogYjtcbn1cblxuZnVuY3Rpb24gZGl2KGEsIGIpIHtcbiAgcmV0dXJuIGEgLyBiO1xufVxuXG5mdW5jdGlvbiBtb2QoYSwgYikge1xuICByZXR1cm4gYSAlIGI7XG59XG5cbmZ1bmN0aW9uIGNvbmNhdChhLCBiKSB7XG4gIHJldHVybiAnJyArIGEgKyBiO1xufVxuXG5mdW5jdGlvbiBlcXVhbChhLCBiKSB7XG4gIHJldHVybiBhID09PSBiO1xufVxuXG5mdW5jdGlvbiBub3RFcXVhbChhLCBiKSB7XG4gIHJldHVybiBhICE9PSBiO1xufVxuXG5mdW5jdGlvbiBncmVhdGVyVGhhbihhLCBiKSB7XG4gIHJldHVybiBhID4gYjtcbn1cblxuZnVuY3Rpb24gbGVzc1RoYW4oYSwgYikge1xuICByZXR1cm4gYSA8IGI7XG59XG5cbmZ1bmN0aW9uIGdyZWF0ZXJUaGFuRXF1YWwoYSwgYikge1xuICByZXR1cm4gYSA+PSBiO1xufVxuXG5mdW5jdGlvbiBsZXNzVGhhbkVxdWFsKGEsIGIpIHtcbiAgcmV0dXJuIGEgPD0gYjtcbn1cblxuZnVuY3Rpb24gYW5kT3BlcmF0b3IoYSwgYikge1xuICByZXR1cm4gQm9vbGVhbihhICYmIGIpO1xufVxuXG5mdW5jdGlvbiBvck9wZXJhdG9yKGEsIGIpIHtcbiAgcmV0dXJuIEJvb2xlYW4oYSB8fCBiKTtcbn1cblxuZnVuY3Rpb24gaW5PcGVyYXRvcihhLCBiKSB7XG4gIHJldHVybiBjb250YWlucyhiLCBhKTtcbn1cblxuZnVuY3Rpb24gc2luaChhKSB7XG4gIHJldHVybiAoKE1hdGguZXhwKGEpIC0gTWF0aC5leHAoLWEpKSAvIDIpO1xufVxuXG5mdW5jdGlvbiBjb3NoKGEpIHtcbiAgcmV0dXJuICgoTWF0aC5leHAoYSkgKyBNYXRoLmV4cCgtYSkpIC8gMik7XG59XG5cbmZ1bmN0aW9uIHRhbmgoYSkge1xuICBpZiAoYSA9PT0gSW5maW5pdHkpIHJldHVybiAxO1xuICBpZiAoYSA9PT0gLUluZmluaXR5KSByZXR1cm4gLTE7XG4gIHJldHVybiAoTWF0aC5leHAoYSkgLSBNYXRoLmV4cCgtYSkpIC8gKE1hdGguZXhwKGEpICsgTWF0aC5leHAoLWEpKTtcbn1cblxuZnVuY3Rpb24gYXNpbmgoYSkge1xuICBpZiAoYSA9PT0gLUluZmluaXR5KSByZXR1cm4gYTtcbiAgcmV0dXJuIE1hdGgubG9nKGEgKyBNYXRoLnNxcnQoKGEgKiBhKSArIDEpKTtcbn1cblxuZnVuY3Rpb24gYWNvc2goYSkge1xuICByZXR1cm4gTWF0aC5sb2coYSArIE1hdGguc3FydCgoYSAqIGEpIC0gMSkpO1xufVxuXG5mdW5jdGlvbiBhdGFuaChhKSB7XG4gIHJldHVybiAoTWF0aC5sb2coKDEgKyBhKSAvICgxIC0gYSkpIC8gMik7XG59XG5cbmZ1bmN0aW9uIGxvZzEwKGEpIHtcbiAgcmV0dXJuIE1hdGgubG9nKGEpICogTWF0aC5MT0cxMEU7XG59XG5cbmZ1bmN0aW9uIG5lZyhhKSB7XG4gIHJldHVybiAtYTtcbn1cblxuZnVuY3Rpb24gbm90KGEpIHtcbiAgcmV0dXJuICFhO1xufVxuXG5mdW5jdGlvbiB0cnVuYyhhKSB7XG4gIHJldHVybiBhIDwgMCA/IE1hdGguY2VpbChhKSA6IE1hdGguZmxvb3IoYSk7XG59XG5cbmZ1bmN0aW9uIHJhbmRvbShhKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogKGEgfHwgMSk7XG59XG5cbmZ1bmN0aW9uIGZhY3RvcmlhbChhKSB7IC8vIGEhXG4gIHJldHVybiBnYW1tYShhICsgMSk7XG59XG5cbmZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICByZXR1cm4gaXNGaW5pdGUodmFsdWUpICYmICh2YWx1ZSA9PT0gTWF0aC5yb3VuZCh2YWx1ZSkpO1xufVxuXG52YXIgR0FNTUFfRyA9IDQuNzQyMTg3NTtcbnZhciBHQU1NQV9QID0gW1xuICAwLjk5OTk5OTk5OTk5OTk5NzA5MTgyLFxuICA1Ny4xNTYyMzU2NjU4NjI5MjM1MTcsIC01OS41OTc5NjAzNTU0NzU0OTEyNDgsXG4gIDE0LjEzNjA5Nzk3NDc0MTc0NzE3NCwgLTAuNDkxOTEzODE2MDk3NjIwMTk5NzgsXG4gIDAuMzM5OTQ2NDk5ODQ4MTE4ODg2OTllLTQsXG4gIDAuNDY1MjM2Mjg5MjcwNDg1NzU2NjVlLTQsIC0wLjk4Mzc0NDc1MzA0ODc5NTY0Njc3ZS00LFxuICAwLjE1ODA4ODcwMzIyNDkxMjQ4ODg0ZS0zLCAtMC4yMTAyNjQ0NDE3MjQxMDQ4ODMxOWUtMyxcbiAgMC4yMTc0Mzk2MTgxMTUyMTI2NDMyMGUtMywgLTAuMTY0MzE4MTA2NTM2NzYzODkwMjJlLTMsXG4gIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQsIC0wLjI2MTkwODM4NDAxNTgxNDA4NjcwZS00LFxuICAwLjM2ODk5MTgyNjU5NTMxNjIyNzA0ZS01XG5dO1xuXG4vLyBHYW1tYSBmdW5jdGlvbiBmcm9tIG1hdGguanNcbmZ1bmN0aW9uIGdhbW1hKG4pIHtcbiAgdmFyIHQsIHg7XG5cbiAgaWYgKGlzSW50ZWdlcihuKSkge1xuICAgIGlmIChuIDw9IDApIHtcbiAgICAgIHJldHVybiBpc0Zpbml0ZShuKSA/IEluZmluaXR5IDogTmFOO1xuICAgIH1cblxuICAgIGlmIChuID4gMTcxKSB7XG4gICAgICByZXR1cm4gSW5maW5pdHk7IC8vIFdpbGwgb3ZlcmZsb3dcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBuIC0gMjtcbiAgICB2YXIgcmVzID0gbiAtIDE7XG4gICAgd2hpbGUgKHZhbHVlID4gMSkge1xuICAgICAgcmVzICo9IHZhbHVlO1xuICAgICAgdmFsdWUtLTtcbiAgICB9XG5cbiAgICBpZiAocmVzID09PSAwKSB7XG4gICAgICByZXMgPSAxOyAvLyAwISBpcyBwZXIgZGVmaW5pdGlvbiAxXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIGlmIChuIDwgMC41KSB7XG4gICAgcmV0dXJuIE1hdGguUEkgLyAoTWF0aC5zaW4oTWF0aC5QSSAqIG4pICogZ2FtbWEoMSAtIG4pKTtcbiAgfVxuXG4gIGlmIChuID49IDE3MS4zNSkge1xuICAgIHJldHVybiBJbmZpbml0eTsgLy8gd2lsbCBvdmVyZmxvd1xuICB9XG5cbiAgaWYgKG4gPiA4NS4wKSB7IC8vIEV4dGVuZGVkIFN0aXJsaW5nIEFwcHJveFxuICAgIHZhciB0d29OID0gbiAqIG47XG4gICAgdmFyIHRocmVlTiA9IHR3b04gKiBuO1xuICAgIHZhciBmb3VyTiA9IHRocmVlTiAqIG47XG4gICAgdmFyIGZpdmVOID0gZm91ck4gKiBuO1xuICAgIHJldHVybiBNYXRoLnNxcnQoMiAqIE1hdGguUEkgLyBuKSAqIE1hdGgucG93KChuIC8gTWF0aC5FKSwgbikgKlxuICAgICAgKDEgKyAoMSAvICgxMiAqIG4pKSArICgxIC8gKDI4OCAqIHR3b04pKSAtICgxMzkgLyAoNTE4NDAgKiB0aHJlZU4pKSAtXG4gICAgICAoNTcxIC8gKDI0ODgzMjAgKiBmb3VyTikpICsgKDE2Mzg3OSAvICgyMDkwMTg4ODAgKiBmaXZlTikpICtcbiAgICAgICg1MjQ2ODE5IC8gKDc1MjQ2Nzk2ODAwICogZml2ZU4gKiBuKSkpO1xuICB9XG5cbiAgLS1uO1xuICB4ID0gR0FNTUFfUFswXTtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBHQU1NQV9QLmxlbmd0aDsgKytpKSB7XG4gICAgeCArPSBHQU1NQV9QW2ldIC8gKG4gKyBpKTtcbiAgfVxuXG4gIHQgPSBuICsgR0FNTUFfRyArIDAuNTtcbiAgcmV0dXJuIE1hdGguc3FydCgyICogTWF0aC5QSSkgKiBNYXRoLnBvdyh0LCBuICsgMC41KSAqIE1hdGguZXhwKC10KSAqIHg7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ0xlbmd0aChzKSB7XG4gIHJldHVybiBTdHJpbmcocykubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiBoeXBvdCgpIHtcbiAgdmFyIHN1bSA9IDA7XG4gIHZhciBsYXJnID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgYXJnID0gTWF0aC5hYnMoYXJndW1lbnRzW2ldKTtcbiAgICB2YXIgZGl2O1xuICAgIGlmIChsYXJnIDwgYXJnKSB7XG4gICAgICBkaXYgPSBsYXJnIC8gYXJnO1xuICAgICAgc3VtID0gKHN1bSAqIGRpdiAqIGRpdikgKyAxO1xuICAgICAgbGFyZyA9IGFyZztcbiAgICB9IGVsc2UgaWYgKGFyZyA+IDApIHtcbiAgICAgIGRpdiA9IGFyZyAvIGxhcmc7XG4gICAgICBzdW0gKz0gZGl2ICogZGl2O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdW0gKz0gYXJnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbGFyZyA9PT0gSW5maW5pdHkgPyBJbmZpbml0eSA6IGxhcmcgKiBNYXRoLnNxcnQoc3VtKTtcbn1cblxuZnVuY3Rpb24gY29uZGl0aW9uKGNvbmQsIHllcCwgbm9wZSkge1xuICByZXR1cm4gY29uZCA/IHllcCA6IG5vcGU7XG59XG5cbmZ1bmN0aW9uIFBhcnNlcihvcHRpb25zKSB7XG4gIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHRoaXMudW5hcnlPcHMgPSB7XG4gICAgc2luOiBNYXRoLnNpbixcbiAgICBjb3M6IE1hdGguY29zLFxuICAgIHRhbjogTWF0aC50YW4sXG4gICAgYXNpbjogTWF0aC5hc2luLFxuICAgIGFjb3M6IE1hdGguYWNvcyxcbiAgICBhdGFuOiBNYXRoLmF0YW4sXG4gICAgc2luaDogTWF0aC5zaW5oIHx8IHNpbmgsXG4gICAgY29zaDogTWF0aC5jb3NoIHx8IGNvc2gsXG4gICAgdGFuaDogTWF0aC50YW5oIHx8IHRhbmgsXG4gICAgYXNpbmg6IE1hdGguYXNpbmggfHwgYXNpbmgsXG4gICAgYWNvc2g6IE1hdGguYWNvc2ggfHwgYWNvc2gsXG4gICAgYXRhbmg6IE1hdGguYXRhbmggfHwgYXRhbmgsXG4gICAgc3FydDogTWF0aC5zcXJ0LFxuICAgIGxvZzogTWF0aC5sb2csXG4gICAgbG46IE1hdGgubG9nLFxuICAgIGxnOiBNYXRoLmxvZzEwIHx8IGxvZzEwLFxuICAgIGxvZzEwOiBNYXRoLmxvZzEwIHx8IGxvZzEwLFxuICAgIGFiczogTWF0aC5hYnMsXG4gICAgY2VpbDogTWF0aC5jZWlsLFxuICAgIGZsb29yOiBNYXRoLmZsb29yLFxuICAgIHJvdW5kOiBNYXRoLnJvdW5kLFxuICAgIHRydW5jOiBNYXRoLnRydW5jIHx8IHRydW5jLFxuICAgICctJzogbmVnLFxuICAgICcrJzogTnVtYmVyLFxuICAgIGV4cDogTWF0aC5leHAsXG4gICAgbm90OiBub3QsXG4gICAgbGVuZ3RoOiBzdHJpbmdMZW5ndGgsXG4gICAgJyEnOiBmYWN0b3JpYWxcbiAgfTtcblxuICB0aGlzLmJpbmFyeU9wcyA9IHtcbiAgICAnKyc6IGFkZCxcbiAgICAnLSc6IHN1YixcbiAgICAnKic6IG11bCxcbiAgICAnLyc6IGRpdixcbiAgICAnJSc6IG1vZCxcbiAgICAnXic6IE1hdGgucG93LFxuICAgICd8fCc6IGNvbmNhdCxcbiAgICAnPT0nOiBlcXVhbCxcbiAgICAnIT0nOiBub3RFcXVhbCxcbiAgICAnPic6IGdyZWF0ZXJUaGFuLFxuICAgICc8JzogbGVzc1RoYW4sXG4gICAgJz49JzogZ3JlYXRlclRoYW5FcXVhbCxcbiAgICAnPD0nOiBsZXNzVGhhbkVxdWFsLFxuICAgIGFuZDogYW5kT3BlcmF0b3IsXG4gICAgb3I6IG9yT3BlcmF0b3IsXG4gICAgJ2luJzogaW5PcGVyYXRvclxuICB9O1xuXG4gIHRoaXMudGVybmFyeU9wcyA9IHtcbiAgICAnPyc6IGNvbmRpdGlvblxuICB9O1xuXG4gIHRoaXMuZnVuY3Rpb25zID0ge1xuICAgIHJhbmRvbTogcmFuZG9tLFxuICAgIGZhYzogZmFjdG9yaWFsLFxuICAgIG1pbjogTWF0aC5taW4sXG4gICAgbWF4OiBNYXRoLm1heCxcbiAgICBoeXBvdDogTWF0aC5oeXBvdCB8fCBoeXBvdCxcbiAgICBweXQ6IE1hdGguaHlwb3QgfHwgaHlwb3QsIC8vIGJhY2t3YXJkIGNvbXBhdFxuICAgIHBvdzogTWF0aC5wb3csXG4gICAgYXRhbjI6IE1hdGguYXRhbjIsXG4gICAgJ2lmJzogY29uZGl0aW9uLFxuICAgIGdhbW1hOiBnYW1tYVxuICB9O1xuXG4gIHRoaXMuY29uc3RzID0ge1xuICAgIEU6IE1hdGguRSxcbiAgICBQSTogTWF0aC5QSSxcbiAgICAndHJ1ZSc6IHRydWUsXG4gICAgJ2ZhbHNlJzogZmFsc2VcbiAgfTtcbn1cblxuUGFyc2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uIChleHByKSB7XG4gIHZhciBpbnN0ciA9IFtdO1xuICB2YXIgcGFyc2VyU3RhdGUgPSBuZXcgUGFyc2VyU3RhdGUoXG4gICAgdGhpcyxcbiAgICBuZXcgVG9rZW5TdHJlYW0odGhpcywgZXhwciksXG4gICAgeyBhbGxvd01lbWJlckFjY2VzczogdGhpcy5vcHRpb25zLmFsbG93TWVtYmVyQWNjZXNzIH1cbiAgKTtcblxuICBwYXJzZXJTdGF0ZS5wYXJzZUV4cHJlc3Npb24oaW5zdHIpO1xuICBwYXJzZXJTdGF0ZS5leHBlY3QoVEVPRiwgJ0VPRicpO1xuXG4gIHJldHVybiBuZXcgRXhwcmVzc2lvbihpbnN0ciwgdGhpcyk7XG59O1xuXG5QYXJzZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKGV4cHIsIHZhcmlhYmxlcykge1xuICByZXR1cm4gdGhpcy5wYXJzZShleHByKS5ldmFsdWF0ZSh2YXJpYWJsZXMpO1xufTtcblxudmFyIHNoYXJlZFBhcnNlciA9IG5ldyBQYXJzZXIoKTtcblxuUGFyc2VyLnBhcnNlID0gZnVuY3Rpb24gKGV4cHIpIHtcbiAgcmV0dXJuIHNoYXJlZFBhcnNlci5wYXJzZShleHByKTtcbn07XG5cblBhcnNlci5ldmFsdWF0ZSA9IGZ1bmN0aW9uIChleHByLCB2YXJpYWJsZXMpIHtcbiAgcmV0dXJuIHNoYXJlZFBhcnNlci5wYXJzZShleHByKS5ldmFsdWF0ZSh2YXJpYWJsZXMpO1xufTtcblxuLyohXG4gQmFzZWQgb24gbmRlZi5wYXJzZXIsIGJ5IFJhcGhhZWwgR3JhZihyQHVuZGVmaW5lZC5jaClcbiBodHRwOi8vd3d3LnVuZGVmaW5lZC5jaC9tcGFyc2VyL2luZGV4Lmh0bWxcblxuIFBvcnRlZCB0byBKYXZhU2NyaXB0IGFuZCBtb2RpZmllZCBieSBNYXR0aGV3IENydW1sZXkgKGVtYWlsQG1hdHRoZXdjcnVtbGV5LmNvbSwgaHR0cDovL3NpbGVudG1hdHQuY29tLylcblxuIFlvdSBhcmUgZnJlZSB0byB1c2UgYW5kIG1vZGlmeSB0aGlzIGNvZGUgaW4gYW55d2F5IHlvdSBmaW5kIHVzZWZ1bC4gUGxlYXNlIGxlYXZlIHRoaXMgY29tbWVudCBpbiB0aGUgY29kZVxuIHRvIGFja25vd2xlZGdlIGl0cyBvcmlnaW5hbCBzb3VyY2UuIElmIHlvdSBmZWVsIGxpa2UgaXQsIEkgZW5qb3kgaGVhcmluZyBhYm91dCBwcm9qZWN0cyB0aGF0IHVzZSBteSBjb2RlLFxuIGJ1dCBkb24ndCBmZWVsIGxpa2UgeW91IGhhdmUgdG8gbGV0IG1lIGtub3cgb3IgYXNrIHBlcm1pc3Npb24uXG4qL1xuXG52YXIgaW5kZXggPSB7XG4gIFBhcnNlcjogUGFyc2VyLFxuICBFeHByZXNzaW9uOiBFeHByZXNzaW9uXG59O1xuXG5yZXR1cm4gaW5kZXg7XG5cbn0pKSk7XG4iLCIvKiBGaWxlU2F2ZXIuanNcbiAqIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuICogMS4zLjJcbiAqIDIwMTYtMDYtMTYgMTg6MjU6MTlcbiAqXG4gKiBCeSBFbGkgR3JleSwgaHR0cDovL2VsaWdyZXkuY29tXG4gKiBMaWNlbnNlOiBNSVRcbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiAqL1xuLypqc2xpbnQgYml0d2lzZTogdHJ1ZSwgaW5kZW50OiA0LCBsYXhicmVhazogdHJ1ZSwgbGF4Y29tbWE6IHRydWUsIHNtYXJ0dGFiczogdHJ1ZSwgcGx1c3BsdXM6IHRydWUgKi9cblxuLyohIEBzb3VyY2UgaHR0cDovL3B1cmwuZWxpZ3JleS5jb20vZ2l0aHViL0ZpbGVTYXZlci5qcy9ibG9iL21hc3Rlci9GaWxlU2F2ZXIuanMgKi9cblxudmFyIHNhdmVBcyA9IHNhdmVBcyB8fCAoZnVuY3Rpb24odmlldykge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0Ly8gSUUgPDEwIGlzIGV4cGxpY2l0bHkgdW5zdXBwb3J0ZWRcblx0aWYgKHR5cGVvZiB2aWV3ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgWzEtOV1cXC4vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyXG5cdFx0ICBkb2MgPSB2aWV3LmRvY3VtZW50XG5cdFx0ICAvLyBvbmx5IGdldCBVUkwgd2hlbiBuZWNlc3NhcnkgaW4gY2FzZSBCbG9iLmpzIGhhc24ndCBvdmVycmlkZGVuIGl0IHlldFxuXHRcdCwgZ2V0X1VSTCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHZpZXcuVVJMIHx8IHZpZXcud2Via2l0VVJMIHx8IHZpZXc7XG5cdFx0fVxuXHRcdCwgc2F2ZV9saW5rID0gZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIiwgXCJhXCIpXG5cdFx0LCBjYW5fdXNlX3NhdmVfbGluayA9IFwiZG93bmxvYWRcIiBpbiBzYXZlX2xpbmtcblx0XHQsIGNsaWNrID0gZnVuY3Rpb24obm9kZSkge1xuXHRcdFx0dmFyIGV2ZW50ID0gbmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiKTtcblx0XHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0fVxuXHRcdCwgaXNfc2FmYXJpID0gL2NvbnN0cnVjdG9yL2kudGVzdCh2aWV3LkhUTUxFbGVtZW50KSB8fCB2aWV3LnNhZmFyaVxuXHRcdCwgaXNfY2hyb21lX2lvcyA9L0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG5cdFx0LCB0aHJvd19vdXRzaWRlID0gZnVuY3Rpb24oZXgpIHtcblx0XHRcdCh2aWV3LnNldEltbWVkaWF0ZSB8fCB2aWV3LnNldFRpbWVvdXQpKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aHJvdyBleDtcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0XHQsIGZvcmNlX3NhdmVhYmxlX3R5cGUgPSBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG5cdFx0Ly8gdGhlIEJsb2IgQVBJIGlzIGZ1bmRhbWVudGFsbHkgYnJva2VuIGFzIHRoZXJlIGlzIG5vIFwiZG93bmxvYWRmaW5pc2hlZFwiIGV2ZW50IHRvIHN1YnNjcmliZSB0b1xuXHRcdCwgYXJiaXRyYXJ5X3Jldm9rZV90aW1lb3V0ID0gMTAwMCAqIDQwIC8vIGluIG1zXG5cdFx0LCByZXZva2UgPSBmdW5jdGlvbihmaWxlKSB7XG5cdFx0XHR2YXIgcmV2b2tlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGZpbGUgPT09IFwic3RyaW5nXCIpIHsgLy8gZmlsZSBpcyBhbiBvYmplY3QgVVJMXG5cdFx0XHRcdFx0Z2V0X1VSTCgpLnJldm9rZU9iamVjdFVSTChmaWxlKTtcblx0XHRcdFx0fSBlbHNlIHsgLy8gZmlsZSBpcyBhIEZpbGVcblx0XHRcdFx0XHRmaWxlLnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0c2V0VGltZW91dChyZXZva2VyLCBhcmJpdHJhcnlfcmV2b2tlX3RpbWVvdXQpO1xuXHRcdH1cblx0XHQsIGRpc3BhdGNoID0gZnVuY3Rpb24oZmlsZXNhdmVyLCBldmVudF90eXBlcywgZXZlbnQpIHtcblx0XHRcdGV2ZW50X3R5cGVzID0gW10uY29uY2F0KGV2ZW50X3R5cGVzKTtcblx0XHRcdHZhciBpID0gZXZlbnRfdHlwZXMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0XHR2YXIgbGlzdGVuZXIgPSBmaWxlc2F2ZXJbXCJvblwiICsgZXZlbnRfdHlwZXNbaV1dO1xuXHRcdFx0XHRpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0bGlzdGVuZXIuY2FsbChmaWxlc2F2ZXIsIGV2ZW50IHx8IGZpbGVzYXZlcik7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXgpIHtcblx0XHRcdFx0XHRcdHRocm93X291dHNpZGUoZXgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHQsIGF1dG9fYm9tID0gZnVuY3Rpb24oYmxvYikge1xuXHRcdFx0Ly8gcHJlcGVuZCBCT00gZm9yIFVURi04IFhNTCBhbmQgdGV4dC8qIHR5cGVzIChpbmNsdWRpbmcgSFRNTClcblx0XHRcdC8vIG5vdGU6IHlvdXIgYnJvd3NlciB3aWxsIGF1dG9tYXRpY2FsbHkgY29udmVydCBVVEYtMTYgVStGRUZGIHRvIEVGIEJCIEJGXG5cdFx0XHRpZiAoL15cXHMqKD86dGV4dFxcL1xcUyp8YXBwbGljYXRpb25cXC94bWx8XFxTKlxcL1xcUypcXCt4bWwpXFxzKjsuKmNoYXJzZXRcXHMqPVxccyp1dGYtOC9pLnRlc3QoYmxvYi50eXBlKSkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IEJsb2IoW1N0cmluZy5mcm9tQ2hhckNvZGUoMHhGRUZGKSwgYmxvYl0sIHt0eXBlOiBibG9iLnR5cGV9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBibG9iO1xuXHRcdH1cblx0XHQsIEZpbGVTYXZlciA9IGZ1bmN0aW9uKGJsb2IsIG5hbWUsIG5vX2F1dG9fYm9tKSB7XG5cdFx0XHRpZiAoIW5vX2F1dG9fYm9tKSB7XG5cdFx0XHRcdGJsb2IgPSBhdXRvX2JvbShibG9iKTtcblx0XHRcdH1cblx0XHRcdC8vIEZpcnN0IHRyeSBhLmRvd25sb2FkLCB0aGVuIHdlYiBmaWxlc3lzdGVtLCB0aGVuIG9iamVjdCBVUkxzXG5cdFx0XHR2YXJcblx0XHRcdFx0ICBmaWxlc2F2ZXIgPSB0aGlzXG5cdFx0XHRcdCwgdHlwZSA9IGJsb2IudHlwZVxuXHRcdFx0XHQsIGZvcmNlID0gdHlwZSA9PT0gZm9yY2Vfc2F2ZWFibGVfdHlwZVxuXHRcdFx0XHQsIG9iamVjdF91cmxcblx0XHRcdFx0LCBkaXNwYXRjaF9hbGwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkaXNwYXRjaChmaWxlc2F2ZXIsIFwid3JpdGVzdGFydCBwcm9ncmVzcyB3cml0ZSB3cml0ZWVuZFwiLnNwbGl0KFwiIFwiKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gb24gYW55IGZpbGVzeXMgZXJyb3JzIHJldmVydCB0byBzYXZpbmcgd2l0aCBvYmplY3QgVVJMc1xuXHRcdFx0XHQsIGZzX2Vycm9yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKChpc19jaHJvbWVfaW9zIHx8IChmb3JjZSAmJiBpc19zYWZhcmkpKSAmJiB2aWV3LkZpbGVSZWFkZXIpIHtcblx0XHRcdFx0XHRcdC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgdXJsc1xuXHRcdFx0XHRcdFx0dmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdFx0XHRcdFx0XHRyZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB1cmwgPSBpc19jaHJvbWVfaW9zID8gcmVhZGVyLnJlc3VsdCA6IHJlYWRlci5yZXN1bHQucmVwbGFjZSgvXmRhdGE6W147XSo7LywgJ2RhdGE6YXR0YWNobWVudC9maWxlOycpO1xuXHRcdFx0XHRcdFx0XHR2YXIgcG9wdXAgPSB2aWV3Lm9wZW4odXJsLCAnX2JsYW5rJyk7XG5cdFx0XHRcdFx0XHRcdGlmKCFwb3B1cCkgdmlldy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXHRcdFx0XHRcdFx0XHR1cmw9dW5kZWZpbmVkOyAvLyByZWxlYXNlIHJlZmVyZW5jZSBiZWZvcmUgZGlzcGF0Y2hpbmdcblx0XHRcdFx0XHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuRE9ORTtcblx0XHRcdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG5cdFx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5JTklUO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBkb24ndCBjcmVhdGUgbW9yZSBvYmplY3QgVVJMcyB0aGFuIG5lZWRlZFxuXHRcdFx0XHRcdGlmICghb2JqZWN0X3VybCkge1xuXHRcdFx0XHRcdFx0b2JqZWN0X3VybCA9IGdldF9VUkwoKS5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChmb3JjZSkge1xuXHRcdFx0XHRcdFx0dmlldy5sb2NhdGlvbi5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dmFyIG9wZW5lZCA9IHZpZXcub3BlbihvYmplY3RfdXJsLCBcIl9ibGFua1wiKTtcblx0XHRcdFx0XHRcdGlmICghb3BlbmVkKSB7XG5cdFx0XHRcdFx0XHRcdC8vIEFwcGxlIGRvZXMgbm90IGFsbG93IHdpbmRvdy5vcGVuLCBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2xpYnJhcnkvc2FmYXJpL2RvY3VtZW50YXRpb24vVG9vbHMvQ29uY2VwdHVhbC9TYWZhcmlFeHRlbnNpb25HdWlkZS9Xb3JraW5nd2l0aFdpbmRvd3NhbmRUYWJzL1dvcmtpbmd3aXRoV2luZG93c2FuZFRhYnMuaHRtbFxuXHRcdFx0XHRcdFx0XHR2aWV3LmxvY2F0aW9uLmhyZWYgPSBvYmplY3RfdXJsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmaWxlc2F2ZXIucmVhZHlTdGF0ZSA9IGZpbGVzYXZlci5ET05FO1xuXHRcdFx0XHRcdGRpc3BhdGNoX2FsbCgpO1xuXHRcdFx0XHRcdHJldm9rZShvYmplY3RfdXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0O1xuXHRcdFx0ZmlsZXNhdmVyLnJlYWR5U3RhdGUgPSBmaWxlc2F2ZXIuSU5JVDtcblxuXHRcdFx0aWYgKGNhbl91c2Vfc2F2ZV9saW5rKSB7XG5cdFx0XHRcdG9iamVjdF91cmwgPSBnZXRfVVJMKCkuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNhdmVfbGluay5ocmVmID0gb2JqZWN0X3VybDtcblx0XHRcdFx0XHRzYXZlX2xpbmsuZG93bmxvYWQgPSBuYW1lO1xuXHRcdFx0XHRcdGNsaWNrKHNhdmVfbGluayk7XG5cdFx0XHRcdFx0ZGlzcGF0Y2hfYWxsKCk7XG5cdFx0XHRcdFx0cmV2b2tlKG9iamVjdF91cmwpO1xuXHRcdFx0XHRcdGZpbGVzYXZlci5yZWFkeVN0YXRlID0gZmlsZXNhdmVyLkRPTkU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGZzX2Vycm9yKCk7XG5cdFx0fVxuXHRcdCwgRlNfcHJvdG8gPSBGaWxlU2F2ZXIucHJvdG90eXBlXG5cdFx0LCBzYXZlQXMgPSBmdW5jdGlvbihibG9iLCBuYW1lLCBub19hdXRvX2JvbSkge1xuXHRcdFx0cmV0dXJuIG5ldyBGaWxlU2F2ZXIoYmxvYiwgbmFtZSB8fCBibG9iLm5hbWUgfHwgXCJkb3dubG9hZFwiLCBub19hdXRvX2JvbSk7XG5cdFx0fVxuXHQ7XG5cdC8vIElFIDEwKyAobmF0aXZlIHNhdmVBcylcblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09IFwidW5kZWZpbmVkXCIgJiYgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24oYmxvYiwgbmFtZSwgbm9fYXV0b19ib20pIHtcblx0XHRcdG5hbWUgPSBuYW1lIHx8IGJsb2IubmFtZSB8fCBcImRvd25sb2FkXCI7XG5cblx0XHRcdGlmICghbm9fYXV0b19ib20pIHtcblx0XHRcdFx0YmxvYiA9IGF1dG9fYm9tKGJsb2IpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG5hbWUpO1xuXHRcdH07XG5cdH1cblxuXHRGU19wcm90by5hYm9ydCA9IGZ1bmN0aW9uKCl7fTtcblx0RlNfcHJvdG8ucmVhZHlTdGF0ZSA9IEZTX3Byb3RvLklOSVQgPSAwO1xuXHRGU19wcm90by5XUklUSU5HID0gMTtcblx0RlNfcHJvdG8uRE9ORSA9IDI7XG5cblx0RlNfcHJvdG8uZXJyb3IgPVxuXHRGU19wcm90by5vbndyaXRlc3RhcnQgPVxuXHRGU19wcm90by5vbnByb2dyZXNzID1cblx0RlNfcHJvdG8ub253cml0ZSA9XG5cdEZTX3Byb3RvLm9uYWJvcnQgPVxuXHRGU19wcm90by5vbmVycm9yID1cblx0RlNfcHJvdG8ub253cml0ZWVuZCA9XG5cdFx0bnVsbDtcblxuXHRyZXR1cm4gc2F2ZUFzO1xufShcblx0ICAgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZlxuXHR8fCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvd1xuXHR8fCB0aGlzLmNvbnRlbnRcbikpO1xuLy8gYHNlbGZgIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94IGZvciBBbmRyb2lkIGNvbnRlbnQgc2NyaXB0IGNvbnRleHRcbi8vIHdoaWxlIGB0aGlzYCBpcyBuc0lDb250ZW50RnJhbWVNZXNzYWdlTWFuYWdlclxuLy8gd2l0aCBhbiBhdHRyaWJ1dGUgYGNvbnRlbnRgIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHdpbmRvd1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICBtb2R1bGUuZXhwb3J0cy5zYXZlQXMgPSBzYXZlQXM7XG59IGVsc2UgaWYgKCh0eXBlb2YgZGVmaW5lICE9PSBcInVuZGVmaW5lZFwiICYmIGRlZmluZSAhPT0gbnVsbCkgJiYgKGRlZmluZS5hbWQgIT09IG51bGwpKSB7XG4gIGRlZmluZShcIkZpbGVTYXZlci5qc1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gc2F2ZUFzO1xuICB9KTtcbn1cbiIsIi8vISBtb21lbnQuanNcbi8vISB2ZXJzaW9uIDogMi4xOC4xXG4vLyEgYXV0aG9ycyA6IFRpbSBXb29kLCBJc2tyZW4gQ2hlcm5ldiwgTW9tZW50LmpzIGNvbnRyaWJ1dG9yc1xuLy8hIGxpY2Vuc2UgOiBNSVRcbi8vISBtb21lbnRqcy5jb21cblxuOyhmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgZ2xvYmFsLm1vbWVudCA9IGZhY3RvcnkoKVxufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBob29rQ2FsbGJhY2s7XG5cbmZ1bmN0aW9uIGhvb2tzICgpIHtcbiAgICByZXR1cm4gaG9va0NhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59XG5cbi8vIFRoaXMgaXMgZG9uZSB0byByZWdpc3RlciB0aGUgbWV0aG9kIGNhbGxlZCB3aXRoIG1vbWVudCgpXG4vLyB3aXRob3V0IGNyZWF0aW5nIGNpcmN1bGFyIGRlcGVuZGVuY2llcy5cbmZ1bmN0aW9uIHNldEhvb2tDYWxsYmFjayAoY2FsbGJhY2spIHtcbiAgICBob29rQ2FsbGJhY2sgPSBjYWxsYmFjaztcbn1cblxuZnVuY3Rpb24gaXNBcnJheShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIEFycmF5IHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGlucHV0KSB7XG4gICAgLy8gSUU4IHdpbGwgdHJlYXQgdW5kZWZpbmVkIGFuZCBudWxsIGFzIG9iamVjdCBpZiBpdCB3YXNuJ3QgZm9yXG4gICAgLy8gaW5wdXQgIT0gbnVsbFxuICAgIHJldHVybiBpbnB1dCAhPSBudWxsICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdEVtcHR5KG9iaikge1xuICAgIHZhciBrO1xuICAgIGZvciAoayBpbiBvYmopIHtcbiAgICAgICAgLy8gZXZlbiBpZiBpdHMgbm90IG93biBwcm9wZXJ0eSBJJ2Qgc3RpbGwgY2FsbCBpdCBub24tZW1wdHlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT09IHZvaWQgMDtcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoaW5wdXQpIHtcbiAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBOdW1iZXJdJztcbn1cblxuZnVuY3Rpb24gaXNEYXRlKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0IGluc3RhbmNlb2YgRGF0ZSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaW5wdXQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbmZ1bmN0aW9uIG1hcChhcnIsIGZuKSB7XG4gICAgdmFyIHJlcyA9IFtdLCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgcmVzLnB1c2goZm4oYXJyW2ldLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbmZ1bmN0aW9uIGhhc093blByb3AoYSwgYikge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSwgYik7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZChhLCBiKSB7XG4gICAgZm9yICh2YXIgaSBpbiBiKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wKGIsIGkpKSB7XG4gICAgICAgICAgICBhW2ldID0gYltpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYXNPd25Qcm9wKGIsICd0b1N0cmluZycpKSB7XG4gICAgICAgIGEudG9TdHJpbmcgPSBiLnRvU3RyaW5nO1xuICAgIH1cblxuICAgIGlmIChoYXNPd25Qcm9wKGIsICd2YWx1ZU9mJykpIHtcbiAgICAgICAgYS52YWx1ZU9mID0gYi52YWx1ZU9mO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVVEMgKGlucHV0LCBmb3JtYXQsIGxvY2FsZSwgc3RyaWN0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZUxvY2FsT3JVVEMoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIHRydWUpLnV0YygpO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0UGFyc2luZ0ZsYWdzKCkge1xuICAgIC8vIFdlIG5lZWQgdG8gZGVlcCBjbG9uZSB0aGlzIG9iamVjdC5cbiAgICByZXR1cm4ge1xuICAgICAgICBlbXB0eSAgICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgdW51c2VkVG9rZW5zICAgIDogW10sXG4gICAgICAgIHVudXNlZElucHV0ICAgICA6IFtdLFxuICAgICAgICBvdmVyZmxvdyAgICAgICAgOiAtMixcbiAgICAgICAgY2hhcnNMZWZ0T3ZlciAgIDogMCxcbiAgICAgICAgbnVsbElucHV0ICAgICAgIDogZmFsc2UsXG4gICAgICAgIGludmFsaWRNb250aCAgICA6IG51bGwsXG4gICAgICAgIGludmFsaWRGb3JtYXQgICA6IGZhbHNlLFxuICAgICAgICB1c2VySW52YWxpZGF0ZWQgOiBmYWxzZSxcbiAgICAgICAgaXNvICAgICAgICAgICAgIDogZmFsc2UsXG4gICAgICAgIHBhcnNlZERhdGVQYXJ0cyA6IFtdLFxuICAgICAgICBtZXJpZGllbSAgICAgICAgOiBudWxsLFxuICAgICAgICByZmMyODIyICAgICAgICAgOiBmYWxzZSxcbiAgICAgICAgd2Vla2RheU1pc21hdGNoIDogZmFsc2VcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBnZXRQYXJzaW5nRmxhZ3MobSkge1xuICAgIGlmIChtLl9wZiA9PSBudWxsKSB7XG4gICAgICAgIG0uX3BmID0gZGVmYXVsdFBhcnNpbmdGbGFncygpO1xuICAgIH1cbiAgICByZXR1cm4gbS5fcGY7XG59XG5cbnZhciBzb21lO1xuaWYgKEFycmF5LnByb3RvdHlwZS5zb21lKSB7XG4gICAgc29tZSA9IEFycmF5LnByb3RvdHlwZS5zb21lO1xufSBlbHNlIHtcbiAgICBzb21lID0gZnVuY3Rpb24gKGZ1bikge1xuICAgICAgICB2YXIgdCA9IE9iamVjdCh0aGlzKTtcbiAgICAgICAgdmFyIGxlbiA9IHQubGVuZ3RoID4+PiAwO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpIGluIHQgJiYgZnVuLmNhbGwodGhpcywgdFtpXSwgaSwgdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG52YXIgc29tZSQxID0gc29tZTtcblxuZnVuY3Rpb24gaXNWYWxpZChtKSB7XG4gICAgaWYgKG0uX2lzVmFsaWQgPT0gbnVsbCkge1xuICAgICAgICB2YXIgZmxhZ3MgPSBnZXRQYXJzaW5nRmxhZ3MobSk7XG4gICAgICAgIHZhciBwYXJzZWRQYXJ0cyA9IHNvbWUkMS5jYWxsKGZsYWdzLnBhcnNlZERhdGVQYXJ0cywgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBpICE9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaXNOb3dWYWxpZCA9ICFpc05hTihtLl9kLmdldFRpbWUoKSkgJiZcbiAgICAgICAgICAgIGZsYWdzLm92ZXJmbG93IDwgMCAmJlxuICAgICAgICAgICAgIWZsYWdzLmVtcHR5ICYmXG4gICAgICAgICAgICAhZmxhZ3MuaW52YWxpZE1vbnRoICYmXG4gICAgICAgICAgICAhZmxhZ3MuaW52YWxpZFdlZWtkYXkgJiZcbiAgICAgICAgICAgICFmbGFncy5udWxsSW5wdXQgJiZcbiAgICAgICAgICAgICFmbGFncy5pbnZhbGlkRm9ybWF0ICYmXG4gICAgICAgICAgICAhZmxhZ3MudXNlckludmFsaWRhdGVkICYmXG4gICAgICAgICAgICAoIWZsYWdzLm1lcmlkaWVtIHx8IChmbGFncy5tZXJpZGllbSAmJiBwYXJzZWRQYXJ0cykpO1xuXG4gICAgICAgIGlmIChtLl9zdHJpY3QpIHtcbiAgICAgICAgICAgIGlzTm93VmFsaWQgPSBpc05vd1ZhbGlkICYmXG4gICAgICAgICAgICAgICAgZmxhZ3MuY2hhcnNMZWZ0T3ZlciA9PT0gMCAmJlxuICAgICAgICAgICAgICAgIGZsYWdzLnVudXNlZFRva2Vucy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICBmbGFncy5iaWdIb3VyID09PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoT2JqZWN0LmlzRnJvemVuID09IG51bGwgfHwgIU9iamVjdC5pc0Zyb3plbihtKSkge1xuICAgICAgICAgICAgbS5faXNWYWxpZCA9IGlzTm93VmFsaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaXNOb3dWYWxpZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbS5faXNWYWxpZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW52YWxpZCAoZmxhZ3MpIHtcbiAgICB2YXIgbSA9IGNyZWF0ZVVUQyhOYU4pO1xuICAgIGlmIChmbGFncyAhPSBudWxsKSB7XG4gICAgICAgIGV4dGVuZChnZXRQYXJzaW5nRmxhZ3MobSksIGZsYWdzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhtKS51c2VySW52YWxpZGF0ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBtO1xufVxuXG4vLyBQbHVnaW5zIHRoYXQgYWRkIHByb3BlcnRpZXMgc2hvdWxkIGFsc28gYWRkIHRoZSBrZXkgaGVyZSAobnVsbCB2YWx1ZSksXG4vLyBzbyB3ZSBjYW4gcHJvcGVybHkgY2xvbmUgb3Vyc2VsdmVzLlxudmFyIG1vbWVudFByb3BlcnRpZXMgPSBob29rcy5tb21lbnRQcm9wZXJ0aWVzID0gW107XG5cbmZ1bmN0aW9uIGNvcHlDb25maWcodG8sIGZyb20pIHtcbiAgICB2YXIgaSwgcHJvcCwgdmFsO1xuXG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc0FNb21lbnRPYmplY3QpKSB7XG4gICAgICAgIHRvLl9pc0FNb21lbnRPYmplY3QgPSBmcm9tLl9pc0FNb21lbnRPYmplY3Q7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5faSkpIHtcbiAgICAgICAgdG8uX2kgPSBmcm9tLl9pO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX2YpKSB7XG4gICAgICAgIHRvLl9mID0gZnJvbS5fZjtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9sKSkge1xuICAgICAgICB0by5fbCA9IGZyb20uX2w7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fc3RyaWN0KSkge1xuICAgICAgICB0by5fc3RyaWN0ID0gZnJvbS5fc3RyaWN0O1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3R6bSkpIHtcbiAgICAgICAgdG8uX3R6bSA9IGZyb20uX3R6bTtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChmcm9tLl9pc1VUQykpIHtcbiAgICAgICAgdG8uX2lzVVRDID0gZnJvbS5faXNVVEM7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fb2Zmc2V0KSkge1xuICAgICAgICB0by5fb2Zmc2V0ID0gZnJvbS5fb2Zmc2V0O1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKGZyb20uX3BmKSkge1xuICAgICAgICB0by5fcGYgPSBnZXRQYXJzaW5nRmxhZ3MoZnJvbSk7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQoZnJvbS5fbG9jYWxlKSkge1xuICAgICAgICB0by5fbG9jYWxlID0gZnJvbS5fbG9jYWxlO1xuICAgIH1cblxuICAgIGlmIChtb21lbnRQcm9wZXJ0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG1vbWVudFByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHByb3AgPSBtb21lbnRQcm9wZXJ0aWVzW2ldO1xuICAgICAgICAgICAgdmFsID0gZnJvbVtwcm9wXTtcbiAgICAgICAgICAgIGlmICghaXNVbmRlZmluZWQodmFsKSkge1xuICAgICAgICAgICAgICAgIHRvW3Byb3BdID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvO1xufVxuXG52YXIgdXBkYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuXG4vLyBNb21lbnQgcHJvdG90eXBlIG9iamVjdFxuZnVuY3Rpb24gTW9tZW50KGNvbmZpZykge1xuICAgIGNvcHlDb25maWcodGhpcywgY29uZmlnKTtcbiAgICB0aGlzLl9kID0gbmV3IERhdGUoY29uZmlnLl9kICE9IG51bGwgPyBjb25maWcuX2QuZ2V0VGltZSgpIDogTmFOKTtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHRoaXMuX2QgPSBuZXcgRGF0ZShOYU4pO1xuICAgIH1cbiAgICAvLyBQcmV2ZW50IGluZmluaXRlIGxvb3AgaW4gY2FzZSB1cGRhdGVPZmZzZXQgY3JlYXRlcyBuZXcgbW9tZW50XG4gICAgLy8gb2JqZWN0cy5cbiAgICBpZiAodXBkYXRlSW5Qcm9ncmVzcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgdXBkYXRlSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgIGhvb2tzLnVwZGF0ZU9mZnNldCh0aGlzKTtcbiAgICAgICAgdXBkYXRlSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNNb21lbnQgKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBNb21lbnQgfHwgKG9iaiAhPSBudWxsICYmIG9iai5faXNBTW9tZW50T2JqZWN0ICE9IG51bGwpO1xufVxuXG5mdW5jdGlvbiBhYnNGbG9vciAobnVtYmVyKSB7XG4gICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgLy8gLTAgLT4gMFxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcikgfHwgMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdG9JbnQoYXJndW1lbnRGb3JDb2VyY2lvbikge1xuICAgIHZhciBjb2VyY2VkTnVtYmVyID0gK2FyZ3VtZW50Rm9yQ29lcmNpb24sXG4gICAgICAgIHZhbHVlID0gMDtcblxuICAgIGlmIChjb2VyY2VkTnVtYmVyICE9PSAwICYmIGlzRmluaXRlKGNvZXJjZWROdW1iZXIpKSB7XG4gICAgICAgIHZhbHVlID0gYWJzRmxvb3IoY29lcmNlZE51bWJlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBjb21wYXJlIHR3byBhcnJheXMsIHJldHVybiB0aGUgbnVtYmVyIG9mIGRpZmZlcmVuY2VzXG5mdW5jdGlvbiBjb21wYXJlQXJyYXlzKGFycmF5MSwgYXJyYXkyLCBkb250Q29udmVydCkge1xuICAgIHZhciBsZW4gPSBNYXRoLm1pbihhcnJheTEubGVuZ3RoLCBhcnJheTIubGVuZ3RoKSxcbiAgICAgICAgbGVuZ3RoRGlmZiA9IE1hdGguYWJzKGFycmF5MS5sZW5ndGggLSBhcnJheTIubGVuZ3RoKSxcbiAgICAgICAgZGlmZnMgPSAwLFxuICAgICAgICBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoKGRvbnRDb252ZXJ0ICYmIGFycmF5MVtpXSAhPT0gYXJyYXkyW2ldKSB8fFxuICAgICAgICAgICAgKCFkb250Q29udmVydCAmJiB0b0ludChhcnJheTFbaV0pICE9PSB0b0ludChhcnJheTJbaV0pKSkge1xuICAgICAgICAgICAgZGlmZnMrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGlmZnMgKyBsZW5ndGhEaWZmO1xufVxuXG5mdW5jdGlvbiB3YXJuKG1zZykge1xuICAgIGlmIChob29rcy5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3MgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAodHlwZW9mIGNvbnNvbGUgIT09ICAndW5kZWZpbmVkJykgJiYgY29uc29sZS53YXJuKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRGVwcmVjYXRpb24gd2FybmluZzogJyArIG1zZyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXByZWNhdGUobXNnLCBmbikge1xuICAgIHZhciBmaXJzdFRpbWUgPSB0cnVlO1xuXG4gICAgcmV0dXJuIGV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChob29rcy5kZXByZWNhdGlvbkhhbmRsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyKG51bGwsIG1zZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0VGltZSkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcmc7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGFyZyA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBhcmcgKz0gJ1xcblsnICsgaSArICddICc7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhcmd1bWVudHNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyArPSBrZXkgKyAnOiAnICsgYXJndW1lbnRzWzBdW2tleV0gKyAnLCAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy5zbGljZSgwLCAtMik7IC8vIFJlbW92ZSB0cmFpbGluZyBjb21tYSBhbmQgc3BhY2VcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChhcmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2Fybihtc2cgKyAnXFxuQXJndW1lbnRzOiAnICsgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncykuam9pbignJykgKyAnXFxuJyArIChuZXcgRXJyb3IoKSkuc3RhY2spO1xuICAgICAgICAgICAgZmlyc3RUaW1lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSwgZm4pO1xufVxuXG52YXIgZGVwcmVjYXRpb25zID0ge307XG5cbmZ1bmN0aW9uIGRlcHJlY2F0ZVNpbXBsZShuYW1lLCBtc2cpIHtcbiAgICBpZiAoaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyICE9IG51bGwpIHtcbiAgICAgICAgaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyKG5hbWUsIG1zZyk7XG4gICAgfVxuICAgIGlmICghZGVwcmVjYXRpb25zW25hbWVdKSB7XG4gICAgICAgIHdhcm4obXNnKTtcbiAgICAgICAgZGVwcmVjYXRpb25zW25hbWVdID0gdHJ1ZTtcbiAgICB9XG59XG5cbmhvb2tzLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncyA9IGZhbHNlO1xuaG9va3MuZGVwcmVjYXRpb25IYW5kbGVyID0gbnVsbDtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCBpbnN0YW5jZW9mIEZ1bmN0aW9uIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbnB1dCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbmZ1bmN0aW9uIHNldCAoY29uZmlnKSB7XG4gICAgdmFyIHByb3AsIGk7XG4gICAgZm9yIChpIGluIGNvbmZpZykge1xuICAgICAgICBwcm9wID0gY29uZmlnW2ldO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihwcm9wKSkge1xuICAgICAgICAgICAgdGhpc1tpXSA9IHByb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzWydfJyArIGldID0gcHJvcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgLy8gTGVuaWVudCBvcmRpbmFsIHBhcnNpbmcgYWNjZXB0cyBqdXN0IGEgbnVtYmVyIGluIGFkZGl0aW9uIHRvXG4gICAgLy8gbnVtYmVyICsgKHBvc3NpYmx5KSBzdHVmZiBjb21pbmcgZnJvbSBfZGF5T2ZNb250aE9yZGluYWxQYXJzZS5cbiAgICAvLyBUT0RPOiBSZW1vdmUgXCJvcmRpbmFsUGFyc2VcIiBmYWxsYmFjayBpbiBuZXh0IG1ham9yIHJlbGVhc2UuXG4gICAgdGhpcy5fZGF5T2ZNb250aE9yZGluYWxQYXJzZUxlbmllbnQgPSBuZXcgUmVnRXhwKFxuICAgICAgICAodGhpcy5fZGF5T2ZNb250aE9yZGluYWxQYXJzZS5zb3VyY2UgfHwgdGhpcy5fb3JkaW5hbFBhcnNlLnNvdXJjZSkgK1xuICAgICAgICAgICAgJ3wnICsgKC9cXGR7MSwyfS8pLnNvdXJjZSk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNoaWxkQ29uZmlnKSB7XG4gICAgdmFyIHJlcyA9IGV4dGVuZCh7fSwgcGFyZW50Q29uZmlnKSwgcHJvcDtcbiAgICBmb3IgKHByb3AgaW4gY2hpbGRDb25maWcpIHtcbiAgICAgICAgaWYgKGhhc093blByb3AoY2hpbGRDb25maWcsIHByb3ApKSB7XG4gICAgICAgICAgICBpZiAoaXNPYmplY3QocGFyZW50Q29uZmlnW3Byb3BdKSAmJiBpc09iamVjdChjaGlsZENvbmZpZ1twcm9wXSkpIHtcbiAgICAgICAgICAgICAgICByZXNbcHJvcF0gPSB7fTtcbiAgICAgICAgICAgICAgICBleHRlbmQocmVzW3Byb3BdLCBwYXJlbnRDb25maWdbcHJvcF0pO1xuICAgICAgICAgICAgICAgIGV4dGVuZChyZXNbcHJvcF0sIGNoaWxkQ29uZmlnW3Byb3BdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGRDb25maWdbcHJvcF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc1twcm9wXSA9IGNoaWxkQ29uZmlnW3Byb3BdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAocHJvcCBpbiBwYXJlbnRDb25maWcpIHtcbiAgICAgICAgaWYgKGhhc093blByb3AocGFyZW50Q29uZmlnLCBwcm9wKSAmJlxuICAgICAgICAgICAgICAgICFoYXNPd25Qcm9wKGNoaWxkQ29uZmlnLCBwcm9wKSAmJlxuICAgICAgICAgICAgICAgIGlzT2JqZWN0KHBhcmVudENvbmZpZ1twcm9wXSkpIHtcbiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBjaGFuZ2VzIHRvIHByb3BlcnRpZXMgZG9uJ3QgbW9kaWZ5IHBhcmVudCBjb25maWdcbiAgICAgICAgICAgIHJlc1twcm9wXSA9IGV4dGVuZCh7fSwgcmVzW3Byb3BdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBMb2NhbGUoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0KGNvbmZpZyk7XG4gICAgfVxufVxuXG52YXIga2V5cztcblxuaWYgKE9iamVjdC5rZXlzKSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzO1xufSBlbHNlIHtcbiAgICBrZXlzID0gZnVuY3Rpb24gKG9iaikge1xuICAgICAgICB2YXIgaSwgcmVzID0gW107XG4gICAgICAgIGZvciAoaSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wKG9iaiwgaSkpIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG59XG5cbnZhciBrZXlzJDEgPSBrZXlzO1xuXG52YXIgZGVmYXVsdENhbGVuZGFyID0ge1xuICAgIHNhbWVEYXkgOiAnW1RvZGF5IGF0XSBMVCcsXG4gICAgbmV4dERheSA6ICdbVG9tb3Jyb3cgYXRdIExUJyxcbiAgICBuZXh0V2VlayA6ICdkZGRkIFthdF0gTFQnLFxuICAgIGxhc3REYXkgOiAnW1llc3RlcmRheSBhdF0gTFQnLFxuICAgIGxhc3RXZWVrIDogJ1tMYXN0XSBkZGRkIFthdF0gTFQnLFxuICAgIHNhbWVFbHNlIDogJ0wnXG59O1xuXG5mdW5jdGlvbiBjYWxlbmRhciAoa2V5LCBtb20sIG5vdykge1xuICAgIHZhciBvdXRwdXQgPSB0aGlzLl9jYWxlbmRhcltrZXldIHx8IHRoaXMuX2NhbGVuZGFyWydzYW1lRWxzZSddO1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKG91dHB1dCkgPyBvdXRwdXQuY2FsbChtb20sIG5vdykgOiBvdXRwdXQ7XG59XG5cbnZhciBkZWZhdWx0TG9uZ0RhdGVGb3JtYXQgPSB7XG4gICAgTFRTICA6ICdoOm1tOnNzIEEnLFxuICAgIExUICAgOiAnaDptbSBBJyxcbiAgICBMICAgIDogJ01NL0REL1lZWVknLFxuICAgIExMICAgOiAnTU1NTSBELCBZWVlZJyxcbiAgICBMTEwgIDogJ01NTU0gRCwgWVlZWSBoOm1tIEEnLFxuICAgIExMTEwgOiAnZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSdcbn07XG5cbmZ1bmN0aW9uIGxvbmdEYXRlRm9ybWF0IChrZXkpIHtcbiAgICB2YXIgZm9ybWF0ID0gdGhpcy5fbG9uZ0RhdGVGb3JtYXRba2V5XSxcbiAgICAgICAgZm9ybWF0VXBwZXIgPSB0aGlzLl9sb25nRGF0ZUZvcm1hdFtrZXkudG9VcHBlckNhc2UoKV07XG5cbiAgICBpZiAoZm9ybWF0IHx8ICFmb3JtYXRVcHBlcikge1xuICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgIH1cblxuICAgIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV0gPSBmb3JtYXRVcHBlci5yZXBsYWNlKC9NTU1NfE1NfEREfGRkZGQvZywgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsLnNsaWNlKDEpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2xvbmdEYXRlRm9ybWF0W2tleV07XG59XG5cbnZhciBkZWZhdWx0SW52YWxpZERhdGUgPSAnSW52YWxpZCBkYXRlJztcblxuZnVuY3Rpb24gaW52YWxpZERhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnZhbGlkRGF0ZTtcbn1cblxudmFyIGRlZmF1bHRPcmRpbmFsID0gJyVkJztcbnZhciBkZWZhdWx0RGF5T2ZNb250aE9yZGluYWxQYXJzZSA9IC9cXGR7MSwyfS87XG5cbmZ1bmN0aW9uIG9yZGluYWwgKG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLl9vcmRpbmFsLnJlcGxhY2UoJyVkJywgbnVtYmVyKTtcbn1cblxudmFyIGRlZmF1bHRSZWxhdGl2ZVRpbWUgPSB7XG4gICAgZnV0dXJlIDogJ2luICVzJyxcbiAgICBwYXN0ICAgOiAnJXMgYWdvJyxcbiAgICBzICA6ICdhIGZldyBzZWNvbmRzJyxcbiAgICBzcyA6ICclZCBzZWNvbmRzJyxcbiAgICBtICA6ICdhIG1pbnV0ZScsXG4gICAgbW0gOiAnJWQgbWludXRlcycsXG4gICAgaCAgOiAnYW4gaG91cicsXG4gICAgaGggOiAnJWQgaG91cnMnLFxuICAgIGQgIDogJ2EgZGF5JyxcbiAgICBkZCA6ICclZCBkYXlzJyxcbiAgICBNICA6ICdhIG1vbnRoJyxcbiAgICBNTSA6ICclZCBtb250aHMnLFxuICAgIHkgIDogJ2EgeWVhcicsXG4gICAgeXkgOiAnJWQgeWVhcnMnXG59O1xuXG5mdW5jdGlvbiByZWxhdGl2ZVRpbWUgKG51bWJlciwgd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSkge1xuICAgIHZhciBvdXRwdXQgPSB0aGlzLl9yZWxhdGl2ZVRpbWVbc3RyaW5nXTtcbiAgICByZXR1cm4gKGlzRnVuY3Rpb24ob3V0cHV0KSkgP1xuICAgICAgICBvdXRwdXQobnVtYmVyLCB3aXRob3V0U3VmZml4LCBzdHJpbmcsIGlzRnV0dXJlKSA6XG4gICAgICAgIG91dHB1dC5yZXBsYWNlKC8lZC9pLCBudW1iZXIpO1xufVxuXG5mdW5jdGlvbiBwYXN0RnV0dXJlIChkaWZmLCBvdXRwdXQpIHtcbiAgICB2YXIgZm9ybWF0ID0gdGhpcy5fcmVsYXRpdmVUaW1lW2RpZmYgPiAwID8gJ2Z1dHVyZScgOiAncGFzdCddO1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGZvcm1hdCkgPyBmb3JtYXQob3V0cHV0KSA6IGZvcm1hdC5yZXBsYWNlKC8lcy9pLCBvdXRwdXQpO1xufVxuXG52YXIgYWxpYXNlcyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRVbml0QWxpYXMgKHVuaXQsIHNob3J0aGFuZCkge1xuICAgIHZhciBsb3dlckNhc2UgPSB1bml0LnRvTG93ZXJDYXNlKCk7XG4gICAgYWxpYXNlc1tsb3dlckNhc2VdID0gYWxpYXNlc1tsb3dlckNhc2UgKyAncyddID0gYWxpYXNlc1tzaG9ydGhhbmRdID0gdW5pdDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVW5pdHModW5pdHMpIHtcbiAgICByZXR1cm4gdHlwZW9mIHVuaXRzID09PSAnc3RyaW5nJyA/IGFsaWFzZXNbdW5pdHNdIHx8IGFsaWFzZXNbdW5pdHMudG9Mb3dlckNhc2UoKV0gOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9iamVjdFVuaXRzKGlucHV0T2JqZWN0KSB7XG4gICAgdmFyIG5vcm1hbGl6ZWRJbnB1dCA9IHt9LFxuICAgICAgICBub3JtYWxpemVkUHJvcCxcbiAgICAgICAgcHJvcDtcblxuICAgIGZvciAocHJvcCBpbiBpbnB1dE9iamVjdCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcChpbnB1dE9iamVjdCwgcHJvcCkpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRQcm9wID0gbm9ybWFsaXplVW5pdHMocHJvcCk7XG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZFByb3ApIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkSW5wdXRbbm9ybWFsaXplZFByb3BdID0gaW5wdXRPYmplY3RbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9ybWFsaXplZElucHV0O1xufVxuXG52YXIgcHJpb3JpdGllcyA9IHt9O1xuXG5mdW5jdGlvbiBhZGRVbml0UHJpb3JpdHkodW5pdCwgcHJpb3JpdHkpIHtcbiAgICBwcmlvcml0aWVzW3VuaXRdID0gcHJpb3JpdHk7XG59XG5cbmZ1bmN0aW9uIGdldFByaW9yaXRpemVkVW5pdHModW5pdHNPYmopIHtcbiAgICB2YXIgdW5pdHMgPSBbXTtcbiAgICBmb3IgKHZhciB1IGluIHVuaXRzT2JqKSB7XG4gICAgICAgIHVuaXRzLnB1c2goe3VuaXQ6IHUsIHByaW9yaXR5OiBwcmlvcml0aWVzW3VdfSk7XG4gICAgfVxuICAgIHVuaXRzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5O1xuICAgIH0pO1xuICAgIHJldHVybiB1bml0cztcbn1cblxuZnVuY3Rpb24gbWFrZUdldFNldCAodW5pdCwga2VlcFRpbWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXQkMSh0aGlzLCB1bml0LCB2YWx1ZSk7XG4gICAgICAgICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcywga2VlcFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0KHRoaXMsIHVuaXQpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0IChtb20sIHVuaXQpIHtcbiAgICByZXR1cm4gbW9tLmlzVmFsaWQoKSA/XG4gICAgICAgIG1vbS5fZFsnZ2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSgpIDogTmFOO1xufVxuXG5mdW5jdGlvbiBzZXQkMSAobW9tLCB1bml0LCB2YWx1ZSkge1xuICAgIGlmIChtb20uaXNWYWxpZCgpKSB7XG4gICAgICAgIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyB1bml0XSh2YWx1ZSk7XG4gICAgfVxufVxuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIHN0cmluZ0dldCAodW5pdHMpIHtcbiAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgICBpZiAoaXNGdW5jdGlvbih0aGlzW3VuaXRzXSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbdW5pdHNdKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufVxuXG5cbmZ1bmN0aW9uIHN0cmluZ1NldCAodW5pdHMsIHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB1bml0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdW5pdHMgPSBub3JtYWxpemVPYmplY3RVbml0cyh1bml0cyk7XG4gICAgICAgIHZhciBwcmlvcml0aXplZCA9IGdldFByaW9yaXRpemVkVW5pdHModW5pdHMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByaW9yaXRpemVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzW3ByaW9yaXRpemVkW2ldLnVuaXRdKHVuaXRzW3ByaW9yaXRpemVkW2ldLnVuaXRdKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXRzID0gbm9ybWFsaXplVW5pdHModW5pdHMpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzW3VuaXRzXSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzW3VuaXRzXSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHplcm9GaWxsKG51bWJlciwgdGFyZ2V0TGVuZ3RoLCBmb3JjZVNpZ24pIHtcbiAgICB2YXIgYWJzTnVtYmVyID0gJycgKyBNYXRoLmFicyhudW1iZXIpLFxuICAgICAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG4gICAgICAgIHNpZ24gPSBudW1iZXIgPj0gMDtcbiAgICByZXR1cm4gKHNpZ24gPyAoZm9yY2VTaWduID8gJysnIDogJycpIDogJy0nKSArXG4gICAgICAgIE1hdGgucG93KDEwLCBNYXRoLm1heCgwLCB6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgYWJzTnVtYmVyO1xufVxuXG52YXIgZm9ybWF0dGluZ1Rva2VucyA9IC8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhbSGhdbW0oc3MpP3xNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRbz98WVlZWVlZfFlZWVlZfFlZWVl8WVl8Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98a2s/fG1tP3xzcz98U3sxLDl9fHh8WHx6ej98Wlo/fC4pL2c7XG5cbnZhciBsb2NhbEZvcm1hdHRpbmdUb2tlbnMgPSAvKFxcW1teXFxbXSpcXF0pfChcXFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nO1xuXG52YXIgZm9ybWF0RnVuY3Rpb25zID0ge307XG5cbnZhciBmb3JtYXRUb2tlbkZ1bmN0aW9ucyA9IHt9O1xuXG4vLyB0b2tlbjogICAgJ00nXG4vLyBwYWRkZWQ6ICAgWydNTScsIDJdXG4vLyBvcmRpbmFsOiAgJ01vJ1xuLy8gY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHsgdGhpcy5tb250aCgpICsgMSB9XG5mdW5jdGlvbiBhZGRGb3JtYXRUb2tlbiAodG9rZW4sIHBhZGRlZCwgb3JkaW5hbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZnVuYyA9IGNhbGxiYWNrO1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1tjYWxsYmFja10oKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGZvcm1hdFRva2VuRnVuY3Rpb25zW3Rva2VuXSA9IGZ1bmM7XG4gICAgfVxuICAgIGlmIChwYWRkZWQpIHtcbiAgICAgICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbcGFkZGVkWzBdXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB6ZXJvRmlsbChmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHBhZGRlZFsxXSwgcGFkZGVkWzJdKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKG9yZGluYWwpIHtcbiAgICAgICAgZm9ybWF0VG9rZW5GdW5jdGlvbnNbb3JkaW5hbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkub3JkaW5hbChmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRva2VuKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQubWF0Y2goL1xcW1tcXHNcXFNdLykpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL15cXFt8XFxdJC9nLCAnJyk7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC9cXFxcL2csICcnKTtcbn1cblxuZnVuY3Rpb24gbWFrZUZvcm1hdEZ1bmN0aW9uKGZvcm1hdCkge1xuICAgIHZhciBhcnJheSA9IGZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSwgaSwgbGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMCwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGZvcm1hdFRva2VuRnVuY3Rpb25zW2FycmF5W2ldXSkge1xuICAgICAgICAgICAgYXJyYXlbaV0gPSBmb3JtYXRUb2tlbkZ1bmN0aW9uc1thcnJheVtpXV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcnJheVtpXSA9IHJlbW92ZUZvcm1hdHRpbmdUb2tlbnMoYXJyYXlbaV0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtb20pIHtcbiAgICAgICAgdmFyIG91dHB1dCA9ICcnLCBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dHB1dCArPSBpc0Z1bmN0aW9uKGFycmF5W2ldKSA/IGFycmF5W2ldLmNhbGwobW9tLCBmb3JtYXQpIDogYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xufVxuXG4vLyBmb3JtYXQgZGF0ZSB1c2luZyBuYXRpdmUgZGF0ZSBvYmplY3RcbmZ1bmN0aW9uIGZvcm1hdE1vbWVudChtLCBmb3JtYXQpIHtcbiAgICBpZiAoIW0uaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBtLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgIH1cblxuICAgIGZvcm1hdCA9IGV4cGFuZEZvcm1hdChmb3JtYXQsIG0ubG9jYWxlRGF0YSgpKTtcbiAgICBmb3JtYXRGdW5jdGlvbnNbZm9ybWF0XSA9IGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdIHx8IG1ha2VGb3JtYXRGdW5jdGlvbihmb3JtYXQpO1xuXG4gICAgcmV0dXJuIGZvcm1hdEZ1bmN0aW9uc1tmb3JtYXRdKG0pO1xufVxuXG5mdW5jdGlvbiBleHBhbmRGb3JtYXQoZm9ybWF0LCBsb2NhbGUpIHtcbiAgICB2YXIgaSA9IDU7XG5cbiAgICBmdW5jdGlvbiByZXBsYWNlTG9uZ0RhdGVGb3JtYXRUb2tlbnMoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5sb25nRGF0ZUZvcm1hdChpbnB1dCkgfHwgaW5wdXQ7XG4gICAgfVxuXG4gICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG4gICAgd2hpbGUgKGkgPj0gMCAmJiBsb2NhbEZvcm1hdHRpbmdUb2tlbnMudGVzdChmb3JtYXQpKSB7XG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKGxvY2FsRm9ybWF0dGluZ1Rva2VucywgcmVwbGFjZUxvbmdEYXRlRm9ybWF0VG9rZW5zKTtcbiAgICAgICAgbG9jYWxGb3JtYXR0aW5nVG9rZW5zLmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGkgLT0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0O1xufVxuXG52YXIgbWF0Y2gxICAgICAgICAgPSAvXFxkLzsgICAgICAgICAgICAvLyAgICAgICAwIC0gOVxudmFyIG1hdGNoMiAgICAgICAgID0gL1xcZFxcZC87ICAgICAgICAgIC8vICAgICAgMDAgLSA5OVxudmFyIG1hdGNoMyAgICAgICAgID0gL1xcZHszfS87ICAgICAgICAgLy8gICAgIDAwMCAtIDk5OVxudmFyIG1hdGNoNCAgICAgICAgID0gL1xcZHs0fS87ICAgICAgICAgLy8gICAgMDAwMCAtIDk5OTlcbnZhciBtYXRjaDYgICAgICAgICA9IC9bKy1dP1xcZHs2fS87ICAgIC8vIC05OTk5OTkgLSA5OTk5OTlcbnZhciBtYXRjaDF0bzIgICAgICA9IC9cXGRcXGQ/LzsgICAgICAgICAvLyAgICAgICAwIC0gOTlcbnZhciBtYXRjaDN0bzQgICAgICA9IC9cXGRcXGRcXGRcXGQ/LzsgICAgIC8vICAgICA5OTkgLSA5OTk5XG52YXIgbWF0Y2g1dG82ICAgICAgPSAvXFxkXFxkXFxkXFxkXFxkXFxkPy87IC8vICAgOTk5OTkgLSA5OTk5OTlcbnZhciBtYXRjaDF0bzMgICAgICA9IC9cXGR7MSwzfS87ICAgICAgIC8vICAgICAgIDAgLSA5OTlcbnZhciBtYXRjaDF0bzQgICAgICA9IC9cXGR7MSw0fS87ICAgICAgIC8vICAgICAgIDAgLSA5OTk5XG52YXIgbWF0Y2gxdG82ICAgICAgPSAvWystXT9cXGR7MSw2fS87ICAvLyAtOTk5OTk5IC0gOTk5OTk5XG5cbnZhciBtYXRjaFVuc2lnbmVkICA9IC9cXGQrLzsgICAgICAgICAgIC8vICAgICAgIDAgLSBpbmZcbnZhciBtYXRjaFNpZ25lZCAgICA9IC9bKy1dP1xcZCsvOyAgICAgIC8vICAgIC1pbmYgLSBpbmZcblxudmFyIG1hdGNoT2Zmc2V0ICAgID0gL1p8WystXVxcZFxcZDo/XFxkXFxkL2dpOyAvLyArMDA6MDAgLTAwOjAwICswMDAwIC0wMDAwIG9yIFpcbnZhciBtYXRjaFNob3J0T2Zmc2V0ID0gL1p8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8vZ2k7IC8vICswMCAtMDAgKzAwOjAwIC0wMDowMCArMDAwMCAtMDAwMCBvciBaXG5cbnZhciBtYXRjaFRpbWVzdGFtcCA9IC9bKy1dP1xcZCsoXFwuXFxkezEsM30pPy87IC8vIDEyMzQ1Njc4OSAxMjM0NTY3ODkuMTIzXG5cbi8vIGFueSB3b3JkIChvciB0d28pIGNoYXJhY3RlcnMgb3IgbnVtYmVycyBpbmNsdWRpbmcgdHdvL3RocmVlIHdvcmQgbW9udGggaW4gYXJhYmljLlxuLy8gaW5jbHVkZXMgc2NvdHRpc2ggZ2FlbGljIHR3byB3b3JkIGFuZCBoeXBoZW5hdGVkIG1vbnRoc1xudmFyIG1hdGNoV29yZCA9IC9bMC05XSpbJ2EtelxcdTAwQTAtXFx1MDVGRlxcdTA3MDAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0rfFtcXHUwNjAwLVxcdTA2RkZcXC9dKyhcXHMqP1tcXHUwNjAwLVxcdTA2RkZdKyl7MSwyfS9pO1xuXG5cbnZhciByZWdleGVzID0ge307XG5cbmZ1bmN0aW9uIGFkZFJlZ2V4VG9rZW4gKHRva2VuLCByZWdleCwgc3RyaWN0UmVnZXgpIHtcbiAgICByZWdleGVzW3Rva2VuXSA9IGlzRnVuY3Rpb24ocmVnZXgpID8gcmVnZXggOiBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIChpc1N0cmljdCAmJiBzdHJpY3RSZWdleCkgPyBzdHJpY3RSZWdleCA6IHJlZ2V4O1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGdldFBhcnNlUmVnZXhGb3JUb2tlbiAodG9rZW4sIGNvbmZpZykge1xuICAgIGlmICghaGFzT3duUHJvcChyZWdleGVzLCB0b2tlbikpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAodW5lc2NhcGVGb3JtYXQodG9rZW4pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVnZXhlc1t0b2tlbl0oY29uZmlnLl9zdHJpY3QsIGNvbmZpZy5fbG9jYWxlKTtcbn1cblxuLy8gQ29kZSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzU2MTQ5My9pcy10aGVyZS1hLXJlZ2V4cC1lc2NhcGUtZnVuY3Rpb24taW4tamF2YXNjcmlwdFxuZnVuY3Rpb24gdW5lc2NhcGVGb3JtYXQocykge1xuICAgIHJldHVybiByZWdleEVzY2FwZShzLnJlcGxhY2UoJ1xcXFwnLCAnJykucmVwbGFjZSgvXFxcXChcXFspfFxcXFwoXFxdKXxcXFsoW15cXF1cXFtdKilcXF18XFxcXCguKS9nLCBmdW5jdGlvbiAobWF0Y2hlZCwgcDEsIHAyLCBwMywgcDQpIHtcbiAgICAgICAgcmV0dXJuIHAxIHx8IHAyIHx8IHAzIHx8IHA0O1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gcmVnZXhFc2NhcGUocykge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpO1xufVxuXG52YXIgdG9rZW5zID0ge307XG5cbmZ1bmN0aW9uIGFkZFBhcnNlVG9rZW4gKHRva2VuLCBjYWxsYmFjaykge1xuICAgIHZhciBpLCBmdW5jID0gY2FsbGJhY2s7XG4gICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdG9rZW4gPSBbdG9rZW5dO1xuICAgIH1cbiAgICBpZiAoaXNOdW1iZXIoY2FsbGJhY2spKSB7XG4gICAgICAgIGZ1bmMgPSBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgICAgICAgICBhcnJheVtjYWxsYmFja10gPSB0b0ludChpbnB1dCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCB0b2tlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB0b2tlbnNbdG9rZW5baV1dID0gZnVuYztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZFdlZWtQYXJzZVRva2VuICh0b2tlbiwgY2FsbGJhY2spIHtcbiAgICBhZGRQYXJzZVRva2VuKHRva2VuLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcsIHRva2VuKSB7XG4gICAgICAgIGNvbmZpZy5fdyA9IGNvbmZpZy5fdyB8fCB7fTtcbiAgICAgICAgY2FsbGJhY2soaW5wdXQsIGNvbmZpZy5fdywgY29uZmlnLCB0b2tlbik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRpbWVUb0FycmF5RnJvbVRva2VuKHRva2VuLCBpbnB1dCwgY29uZmlnKSB7XG4gICAgaWYgKGlucHV0ICE9IG51bGwgJiYgaGFzT3duUHJvcCh0b2tlbnMsIHRva2VuKSkge1xuICAgICAgICB0b2tlbnNbdG9rZW5dKGlucHV0LCBjb25maWcuX2EsIGNvbmZpZywgdG9rZW4pO1xuICAgIH1cbn1cblxudmFyIFlFQVIgPSAwO1xudmFyIE1PTlRIID0gMTtcbnZhciBEQVRFID0gMjtcbnZhciBIT1VSID0gMztcbnZhciBNSU5VVEUgPSA0O1xudmFyIFNFQ09ORCA9IDU7XG52YXIgTUlMTElTRUNPTkQgPSA2O1xudmFyIFdFRUsgPSA3O1xudmFyIFdFRUtEQVkgPSA4O1xuXG52YXIgaW5kZXhPZjtcblxuaWYgKEFycmF5LnByb3RvdHlwZS5pbmRleE9mKSB7XG4gICAgaW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mO1xufSBlbHNlIHtcbiAgICBpbmRleE9mID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgLy8gSSBrbm93XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXNbaV0gPT09IG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn1cblxudmFyIGluZGV4T2YkMSA9IGluZGV4T2Y7XG5cbmZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoICsgMSwgMCkpLmdldFVUQ0RhdGUoKTtcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignTScsIFsnTU0nLCAyXSwgJ01vJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLm1vbnRoKCkgKyAxO1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKCdNTU0nLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRoc1Nob3J0KHRoaXMsIGZvcm1hdCk7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oJ01NTU0nLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1vbnRocyh0aGlzLCBmb3JtYXQpO1xufSk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdtb250aCcsICdNJyk7XG5cbi8vIFBSSU9SSVRZXG5cbmFkZFVuaXRQcmlvcml0eSgnbW9udGgnLCA4KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdNJywgICAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ01NJywgICBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdNTU0nLCAgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1Nob3J0UmVnZXgoaXNTdHJpY3QpO1xufSk7XG5hZGRSZWdleFRva2VuKCdNTU1NJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1JlZ2V4KGlzU3RyaWN0KTtcbn0pO1xuXG5hZGRQYXJzZVRva2VuKFsnTScsICdNTSddLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5KSB7XG4gICAgYXJyYXlbTU9OVEhdID0gdG9JbnQoaW5wdXQpIC0gMTtcbn0pO1xuXG5hZGRQYXJzZVRva2VuKFsnTU1NJywgJ01NTU0nXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnLCB0b2tlbikge1xuICAgIHZhciBtb250aCA9IGNvbmZpZy5fbG9jYWxlLm1vbnRoc1BhcnNlKGlucHV0LCB0b2tlbiwgY29uZmlnLl9zdHJpY3QpO1xuICAgIC8vIGlmIHdlIGRpZG4ndCBmaW5kIGEgbW9udGggbmFtZSwgbWFyayB0aGUgZGF0ZSBhcyBpbnZhbGlkLlxuICAgIGlmIChtb250aCAhPSBudWxsKSB7XG4gICAgICAgIGFycmF5W01PTlRIXSA9IG1vbnRoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRNb250aCA9IGlucHV0O1xuICAgIH1cbn0pO1xuXG4vLyBMT0NBTEVTXG5cbnZhciBNT05USFNfSU5fRk9STUFUID0gL0Rbb0RdPyhcXFtbXlxcW1xcXV0qXFxdfFxccykrTU1NTT8vO1xudmFyIGRlZmF1bHRMb2NhbGVNb250aHMgPSAnSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlcicuc3BsaXQoJ18nKTtcbmZ1bmN0aW9uIGxvY2FsZU1vbnRocyAobSwgZm9ybWF0KSB7XG4gICAgaWYgKCFtKSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHMgOlxuICAgICAgICAgICAgdGhpcy5fbW9udGhzWydzdGFuZGFsb25lJ107XG4gICAgfVxuICAgIHJldHVybiBpc0FycmF5KHRoaXMuX21vbnRocykgPyB0aGlzLl9tb250aHNbbS5tb250aCgpXSA6XG4gICAgICAgIHRoaXMuX21vbnRoc1sodGhpcy5fbW9udGhzLmlzRm9ybWF0IHx8IE1PTlRIU19JTl9GT1JNQVQpLnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXVttLm1vbnRoKCldO1xufVxuXG52YXIgZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0ID0gJ0phbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjJy5zcGxpdCgnXycpO1xuZnVuY3Rpb24gbG9jYWxlTW9udGhzU2hvcnQgKG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydCA6XG4gICAgICAgICAgICB0aGlzLl9tb250aHNTaG9ydFsnc3RhbmRhbG9uZSddO1xuICAgIH1cbiAgICByZXR1cm4gaXNBcnJheSh0aGlzLl9tb250aHNTaG9ydCkgPyB0aGlzLl9tb250aHNTaG9ydFttLm1vbnRoKCldIDpcbiAgICAgICAgdGhpcy5fbW9udGhzU2hvcnRbTU9OVEhTX0lOX0ZPUk1BVC50ZXN0KGZvcm1hdCkgPyAnZm9ybWF0JyA6ICdzdGFuZGFsb25lJ11bbS5tb250aCgpXTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU3RyaWN0UGFyc2UobW9udGhOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICAgIHZhciBpLCBpaSwgbW9tLCBsbGMgPSBtb250aE5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICBpZiAoIXRoaXMuX21vbnRoc1BhcnNlKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgbm90IHVzZWRcbiAgICAgICAgdGhpcy5fbW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fbG9uZ01vbnRoc1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX3Nob3J0TW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyArK2kpIHtcbiAgICAgICAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgaV0pO1xuICAgICAgICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZVtpXSA9IHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXSA9IHRoaXMubW9udGhzKG1vbSwgJycpLnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgIGlmIChmb3JtYXQgPT09ICdNTU0nKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0TW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9sb25nTW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ01NTScpIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX2xvbmdNb250aHNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0TW9udGhzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsb2NhbGVNb250aHNQYXJzZSAobW9udGhOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICAgIHZhciBpLCBtb20sIHJlZ2V4O1xuXG4gICAgaWYgKHRoaXMuX21vbnRoc1BhcnNlRXhhY3QpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVN0cmljdFBhcnNlLmNhbGwodGhpcywgbW9udGhOYW1lLCBmb3JtYXQsIHN0cmljdCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9tb250aHNQYXJzZSkge1xuICAgICAgICB0aGlzLl9tb250aHNQYXJzZSA9IFtdO1xuICAgICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fc2hvcnRNb250aHNQYXJzZSA9IFtdO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGFkZCBzb3J0aW5nXG4gICAgLy8gU29ydGluZyBtYWtlcyBzdXJlIGlmIG9uZSBtb250aCAob3IgYWJicikgaXMgYSBwcmVmaXggb2YgYW5vdGhlclxuICAgIC8vIHNlZSBzb3J0aW5nIGluIGNvbXB1dGVNb250aHNQYXJzZVxuICAgIGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgIC8vIG1ha2UgdGhlIHJlZ2V4IGlmIHdlIGRvbid0IGhhdmUgaXQgYWxyZWFkeVxuICAgICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIGldKTtcbiAgICAgICAgaWYgKHN0cmljdCAmJiAhdGhpcy5fbG9uZ01vbnRoc1BhcnNlW2ldKSB7XG4gICAgICAgICAgICB0aGlzLl9sb25nTW9udGhzUGFyc2VbaV0gPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMubW9udGhzKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnJykgKyAnJCcsICdpJyk7XG4gICAgICAgICAgICB0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLm1vbnRoc1Nob3J0KG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnJykgKyAnJCcsICdpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdHJpY3QgJiYgIXRoaXMuX21vbnRoc1BhcnNlW2ldKSB7XG4gICAgICAgICAgICByZWdleCA9ICdeJyArIHRoaXMubW9udGhzKG1vbSwgJycpICsgJ3xeJyArIHRoaXMubW9udGhzU2hvcnQobW9tLCAnJyk7XG4gICAgICAgICAgICB0aGlzLl9tb250aHNQYXJzZVtpXSA9IG5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsICcnKSwgJ2knKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0ZXN0IHRoZSByZWdleFxuICAgICAgICBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ01NTU0nICYmIHRoaXMuX2xvbmdNb250aHNQYXJzZVtpXS50ZXN0KG1vbnRoTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdNTU0nICYmIHRoaXMuX3Nob3J0TW9udGhzUGFyc2VbaV0udGVzdChtb250aE5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIGlmICghc3RyaWN0ICYmIHRoaXMuX21vbnRoc1BhcnNlW2ldLnRlc3QobW9udGhOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIE1PTUVOVFNcblxuZnVuY3Rpb24gc2V0TW9udGggKG1vbSwgdmFsdWUpIHtcbiAgICB2YXIgZGF5T2ZNb250aDtcblxuICAgIGlmICghbW9tLmlzVmFsaWQoKSkge1xuICAgICAgICAvLyBObyBvcFxuICAgICAgICByZXR1cm4gbW9tO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICgvXlxcZCskLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0b0ludCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1vbS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgLy8gVE9ETzogQW5vdGhlciBzaWxlbnQgZmFpbHVyZT9cbiAgICAgICAgICAgIGlmICghaXNOdW1iZXIodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRheU9mTW9udGggPSBNYXRoLm1pbihtb20uZGF0ZSgpLCBkYXlzSW5Nb250aChtb20ueWVhcigpLCB2YWx1ZSkpO1xuICAgIG1vbS5fZFsnc2V0JyArIChtb20uX2lzVVRDID8gJ1VUQycgOiAnJykgKyAnTW9udGgnXSh2YWx1ZSwgZGF5T2ZNb250aCk7XG4gICAgcmV0dXJuIG1vbTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0TW9udGggKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgc2V0TW9udGgodGhpcywgdmFsdWUpO1xuICAgICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcywgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZXQodGhpcywgJ01vbnRoJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXREYXlzSW5Nb250aCAoKSB7XG4gICAgcmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhcigpLCB0aGlzLm1vbnRoKCkpO1xufVxuXG52YXIgZGVmYXVsdE1vbnRoc1Nob3J0UmVnZXggPSBtYXRjaFdvcmQ7XG5mdW5jdGlvbiBtb250aHNTaG9ydFJlZ2V4IChpc1N0cmljdCkge1xuICAgIGlmICh0aGlzLl9tb250aHNQYXJzZUV4YWN0KSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgICAgICAgIGNvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRSZWdleDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1Nob3J0UmVnZXgnKSkge1xuICAgICAgICAgICAgdGhpcy5fbW9udGhzU2hvcnRSZWdleCA9IGRlZmF1bHRNb250aHNTaG9ydFJlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID9cbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl9tb250aHNTaG9ydFJlZ2V4O1xuICAgIH1cbn1cblxudmFyIGRlZmF1bHRNb250aHNSZWdleCA9IG1hdGNoV29yZDtcbmZ1bmN0aW9uIG1vbnRoc1JlZ2V4IChpc1N0cmljdCkge1xuICAgIGlmICh0aGlzLl9tb250aHNQYXJzZUV4YWN0KSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX21vbnRoc1JlZ2V4JykpIHtcbiAgICAgICAgICAgIGNvbXB1dGVNb250aHNQYXJzZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1JlZ2V4O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfbW9udGhzUmVnZXgnKSkge1xuICAgICAgICAgICAgdGhpcy5fbW9udGhzUmVnZXggPSBkZWZhdWx0TW9udGhzUmVnZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID9cbiAgICAgICAgICAgIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4IDogdGhpcy5fbW9udGhzUmVnZXg7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb21wdXRlTW9udGhzUGFyc2UgKCkge1xuICAgIGZ1bmN0aW9uIGNtcExlblJldihhLCBiKSB7XG4gICAgICAgIHJldHVybiBiLmxlbmd0aCAtIGEubGVuZ3RoO1xuICAgIH1cblxuICAgIHZhciBzaG9ydFBpZWNlcyA9IFtdLCBsb25nUGllY2VzID0gW10sIG1peGVkUGllY2VzID0gW10sXG4gICAgICAgIGksIG1vbTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAvLyBtYWtlIHRoZSByZWdleCBpZiB3ZSBkb24ndCBoYXZlIGl0IGFscmVhZHlcbiAgICAgICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCBpXSk7XG4gICAgICAgIHNob3J0UGllY2VzLnB1c2godGhpcy5tb250aHNTaG9ydChtb20sICcnKSk7XG4gICAgICAgIGxvbmdQaWVjZXMucHVzaCh0aGlzLm1vbnRocyhtb20sICcnKSk7XG4gICAgICAgIG1peGVkUGllY2VzLnB1c2godGhpcy5tb250aHMobW9tLCAnJykpO1xuICAgICAgICBtaXhlZFBpZWNlcy5wdXNoKHRoaXMubW9udGhzU2hvcnQobW9tLCAnJykpO1xuICAgIH1cbiAgICAvLyBTb3J0aW5nIG1ha2VzIHN1cmUgaWYgb25lIG1vbnRoIChvciBhYmJyKSBpcyBhIHByZWZpeCBvZiBhbm90aGVyIGl0XG4gICAgLy8gd2lsbCBtYXRjaCB0aGUgbG9uZ2VyIHBpZWNlLlxuICAgIHNob3J0UGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgICBsb25nUGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgICBtaXhlZFBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgc2hvcnRQaWVjZXNbaV0gPSByZWdleEVzY2FwZShzaG9ydFBpZWNlc1tpXSk7XG4gICAgICAgIGxvbmdQaWVjZXNbaV0gPSByZWdleEVzY2FwZShsb25nUGllY2VzW2ldKTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IDI0OyBpKyspIHtcbiAgICAgICAgbWl4ZWRQaWVjZXNbaV0gPSByZWdleEVzY2FwZShtaXhlZFBpZWNlc1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbW9udGhzUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaXhlZFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gICAgdGhpcy5fbW9udGhzU2hvcnRSZWdleCA9IHRoaXMuX21vbnRoc1JlZ2V4O1xuICAgIHRoaXMuX21vbnRoc1N0cmljdFJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgbG9uZ1BpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gICAgdGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIHNob3J0UGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignWScsIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgeSA9IHRoaXMueWVhcigpO1xuICAgIHJldHVybiB5IDw9IDk5OTkgPyAnJyArIHkgOiAnKycgKyB5O1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKDAsIFsnWVknLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnllYXIoKSAlIDEwMDtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbigwLCBbJ1lZWVknLCAgIDRdLCAgICAgICAwLCAneWVhcicpO1xuYWRkRm9ybWF0VG9rZW4oMCwgWydZWVlZWScsICA1XSwgICAgICAgMCwgJ3llYXInKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnWVlZWVlZJywgNiwgdHJ1ZV0sIDAsICd5ZWFyJyk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCd5ZWFyJywgJ3knKTtcblxuLy8gUFJJT1JJVElFU1xuXG5hZGRVbml0UHJpb3JpdHkoJ3llYXInLCAxKTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdZJywgICAgICBtYXRjaFNpZ25lZCk7XG5hZGRSZWdleFRva2VuKCdZWScsICAgICBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdZWVlZJywgICBtYXRjaDF0bzQsIG1hdGNoNCk7XG5hZGRSZWdleFRva2VuKCdZWVlZWScsICBtYXRjaDF0bzYsIG1hdGNoNik7XG5hZGRSZWdleFRva2VuKCdZWVlZWVknLCBtYXRjaDF0bzYsIG1hdGNoNik7XG5cbmFkZFBhcnNlVG9rZW4oWydZWVlZWScsICdZWVlZWVknXSwgWUVBUik7XG5hZGRQYXJzZVRva2VuKCdZWVlZJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSkge1xuICAgIGFycmF5W1lFQVJdID0gaW5wdXQubGVuZ3RoID09PSAyID8gaG9va3MucGFyc2VUd29EaWdpdFllYXIoaW5wdXQpIDogdG9JbnQoaW5wdXQpO1xufSk7XG5hZGRQYXJzZVRva2VuKCdZWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtZRUFSXSA9IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbn0pO1xuYWRkUGFyc2VUb2tlbignWScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtZRUFSXSA9IHBhcnNlSW50KGlucHV0LCAxMCk7XG59KTtcblxuLy8gSEVMUEVSU1xuXG5mdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcih5ZWFyKSA/IDM2NiA6IDM2NTtcbn1cblxuZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7XG4gICAgcmV0dXJuICh5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwKSB8fCB5ZWFyICUgNDAwID09PSAwO1xufVxuXG4vLyBIT09LU1xuXG5ob29rcy5wYXJzZVR3b0RpZ2l0WWVhciA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHJldHVybiB0b0ludChpbnB1dCkgKyAodG9JbnQoaW5wdXQpID4gNjggPyAxOTAwIDogMjAwMCk7XG59O1xuXG4vLyBNT01FTlRTXG5cbnZhciBnZXRTZXRZZWFyID0gbWFrZUdldFNldCgnRnVsbFllYXInLCB0cnVlKTtcblxuZnVuY3Rpb24gZ2V0SXNMZWFwWWVhciAoKSB7XG4gICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKCkpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEYXRlICh5LCBtLCBkLCBoLCBNLCBzLCBtcykge1xuICAgIC8vIGNhbid0IGp1c3QgYXBwbHkoKSB0byBjcmVhdGUgYSBkYXRlOlxuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xODEzNDhcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHksIG0sIGQsIGgsIE0sIHMsIG1zKTtcblxuICAgIC8vIHRoZSBkYXRlIGNvbnN0cnVjdG9yIHJlbWFwcyB5ZWFycyAwLTk5IHRvIDE5MDAtMTk5OVxuICAgIGlmICh5IDwgMTAwICYmIHkgPj0gMCAmJiBpc0Zpbml0ZShkYXRlLmdldEZ1bGxZZWFyKCkpKSB7XG4gICAgICAgIGRhdGUuc2V0RnVsbFllYXIoeSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVVENEYXRlICh5KSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcblxuICAgIC8vIHRoZSBEYXRlLlVUQyBmdW5jdGlvbiByZW1hcHMgeWVhcnMgMC05OSB0byAxOTAwLTE5OTlcbiAgICBpZiAoeSA8IDEwMCAmJiB5ID49IDAgJiYgaXNGaW5pdGUoZGF0ZS5nZXRVVENGdWxsWWVhcigpKSkge1xuICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHkpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZTtcbn1cblxuLy8gc3RhcnQtb2YtZmlyc3Qtd2VlayAtIHN0YXJ0LW9mLXllYXJcbmZ1bmN0aW9uIGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSkge1xuICAgIHZhciAvLyBmaXJzdC13ZWVrIGRheSAtLSB3aGljaCBqYW51YXJ5IGlzIGFsd2F5cyBpbiB0aGUgZmlyc3Qgd2VlayAoNCBmb3IgaXNvLCAxIGZvciBvdGhlcilcbiAgICAgICAgZndkID0gNyArIGRvdyAtIGRveSxcbiAgICAgICAgLy8gZmlyc3Qtd2VlayBkYXkgbG9jYWwgd2Vla2RheSAtLSB3aGljaCBsb2NhbCB3ZWVrZGF5IGlzIGZ3ZFxuICAgICAgICBmd2RsdyA9ICg3ICsgY3JlYXRlVVRDRGF0ZSh5ZWFyLCAwLCBmd2QpLmdldFVUQ0RheSgpIC0gZG93KSAlIDc7XG5cbiAgICByZXR1cm4gLWZ3ZGx3ICsgZndkIC0gMTtcbn1cblxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZSNDYWxjdWxhdGluZ19hX2RhdGVfZ2l2ZW5fdGhlX3llYXIuMkNfd2Vla19udW1iZXJfYW5kX3dlZWtkYXlcbmZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrcyh5ZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICAgIHZhciBsb2NhbFdlZWtkYXkgPSAoNyArIHdlZWtkYXkgLSBkb3cpICUgNyxcbiAgICAgICAgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh5ZWFyLCBkb3csIGRveSksXG4gICAgICAgIGRheU9mWWVhciA9IDEgKyA3ICogKHdlZWsgLSAxKSArIGxvY2FsV2Vla2RheSArIHdlZWtPZmZzZXQsXG4gICAgICAgIHJlc1llYXIsIHJlc0RheU9mWWVhcjtcblxuICAgIGlmIChkYXlPZlllYXIgPD0gMCkge1xuICAgICAgICByZXNZZWFyID0geWVhciAtIDE7XG4gICAgICAgIHJlc0RheU9mWWVhciA9IGRheXNJblllYXIocmVzWWVhcikgKyBkYXlPZlllYXI7XG4gICAgfSBlbHNlIGlmIChkYXlPZlllYXIgPiBkYXlzSW5ZZWFyKHllYXIpKSB7XG4gICAgICAgIHJlc1llYXIgPSB5ZWFyICsgMTtcbiAgICAgICAgcmVzRGF5T2ZZZWFyID0gZGF5T2ZZZWFyIC0gZGF5c0luWWVhcih5ZWFyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXNZZWFyID0geWVhcjtcbiAgICAgICAgcmVzRGF5T2ZZZWFyID0gZGF5T2ZZZWFyO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHllYXI6IHJlc1llYXIsXG4gICAgICAgIGRheU9mWWVhcjogcmVzRGF5T2ZZZWFyXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gd2Vla09mWWVhcihtb20sIGRvdywgZG95KSB7XG4gICAgdmFyIHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQobW9tLnllYXIoKSwgZG93LCBkb3kpLFxuICAgICAgICB3ZWVrID0gTWF0aC5mbG9vcigobW9tLmRheU9mWWVhcigpIC0gd2Vla09mZnNldCAtIDEpIC8gNykgKyAxLFxuICAgICAgICByZXNXZWVrLCByZXNZZWFyO1xuXG4gICAgaWYgKHdlZWsgPCAxKSB7XG4gICAgICAgIHJlc1llYXIgPSBtb20ueWVhcigpIC0gMTtcbiAgICAgICAgcmVzV2VlayA9IHdlZWsgKyB3ZWVrc0luWWVhcihyZXNZZWFyLCBkb3csIGRveSk7XG4gICAgfSBlbHNlIGlmICh3ZWVrID4gd2Vla3NJblllYXIobW9tLnllYXIoKSwgZG93LCBkb3kpKSB7XG4gICAgICAgIHJlc1dlZWsgPSB3ZWVrIC0gd2Vla3NJblllYXIobW9tLnllYXIoKSwgZG93LCBkb3kpO1xuICAgICAgICByZXNZZWFyID0gbW9tLnllYXIoKSArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzWWVhciA9IG1vbS55ZWFyKCk7XG4gICAgICAgIHJlc1dlZWsgPSB3ZWVrO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHdlZWs6IHJlc1dlZWssXG4gICAgICAgIHllYXI6IHJlc1llYXJcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB3ZWVrc0luWWVhcih5ZWFyLCBkb3csIGRveSkge1xuICAgIHZhciB3ZWVrT2Zmc2V0ID0gZmlyc3RXZWVrT2Zmc2V0KHllYXIsIGRvdywgZG95KSxcbiAgICAgICAgd2Vla09mZnNldE5leHQgPSBmaXJzdFdlZWtPZmZzZXQoeWVhciArIDEsIGRvdywgZG95KTtcbiAgICByZXR1cm4gKGRheXNJblllYXIoeWVhcikgLSB3ZWVrT2Zmc2V0ICsgd2Vla09mZnNldE5leHQpIC8gNztcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbigndycsIFsnd3cnLCAyXSwgJ3dvJywgJ3dlZWsnKTtcbmFkZEZvcm1hdFRva2VuKCdXJywgWydXVycsIDJdLCAnV28nLCAnaXNvV2VlaycpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnd2VlaycsICd3Jyk7XG5hZGRVbml0QWxpYXMoJ2lzb1dlZWsnLCAnVycpO1xuXG4vLyBQUklPUklUSUVTXG5cbmFkZFVuaXRQcmlvcml0eSgnd2VlaycsIDUpO1xuYWRkVW5pdFByaW9yaXR5KCdpc29XZWVrJywgNSk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbigndycsICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignd3cnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdXJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdXVycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcblxuYWRkV2Vla1BhcnNlVG9rZW4oWyd3JywgJ3d3JywgJ1cnLCAnV1cnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgd2Vla1t0b2tlbi5zdWJzdHIoMCwgMSldID0gdG9JbnQoaW5wdXQpO1xufSk7XG5cbi8vIEhFTFBFUlNcblxuLy8gTE9DQUxFU1xuXG5mdW5jdGlvbiBsb2NhbGVXZWVrIChtb20pIHtcbiAgICByZXR1cm4gd2Vla09mWWVhcihtb20sIHRoaXMuX3dlZWsuZG93LCB0aGlzLl93ZWVrLmRveSkud2Vlaztcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVXZWVrID0ge1xuICAgIGRvdyA6IDAsIC8vIFN1bmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICAgIGRveSA6IDYgIC8vIFRoZSB3ZWVrIHRoYXQgY29udGFpbnMgSmFuIDFzdCBpcyB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhci5cbn07XG5cbmZ1bmN0aW9uIGxvY2FsZUZpcnN0RGF5T2ZXZWVrICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd2Vlay5kb3c7XG59XG5cbmZ1bmN0aW9uIGxvY2FsZUZpcnN0RGF5T2ZZZWFyICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd2Vlay5kb3k7XG59XG5cbi8vIE1PTUVOVFNcblxuZnVuY3Rpb24gZ2V0U2V0V2VlayAoaW5wdXQpIHtcbiAgICB2YXIgd2VlayA9IHRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7XG4gICAgcmV0dXJuIGlucHV0ID09IG51bGwgPyB3ZWVrIDogdGhpcy5hZGQoKGlucHV0IC0gd2VlaykgKiA3LCAnZCcpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXRJU09XZWVrIChpbnB1dCkge1xuICAgIHZhciB3ZWVrID0gd2Vla09mWWVhcih0aGlzLCAxLCA0KS53ZWVrO1xuICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2VlayA6IHRoaXMuYWRkKChpbnB1dCAtIHdlZWspICogNywgJ2QnKTtcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignZCcsIDAsICdkbycsICdkYXknKTtcblxuYWRkRm9ybWF0VG9rZW4oJ2RkJywgMCwgMCwgZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLCBmb3JtYXQpO1xufSk7XG5cbmFkZEZvcm1hdFRva2VuKCdkZGQnLCAwLCAwLCBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzU2hvcnQodGhpcywgZm9ybWF0KTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignZGRkZCcsIDAsIDAsIGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcywgZm9ybWF0KTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignZScsIDAsIDAsICd3ZWVrZGF5Jyk7XG5hZGRGb3JtYXRUb2tlbignRScsIDAsIDAsICdpc29XZWVrZGF5Jyk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdkYXknLCAnZCcpO1xuYWRkVW5pdEFsaWFzKCd3ZWVrZGF5JywgJ2UnKTtcbmFkZFVuaXRBbGlhcygnaXNvV2Vla2RheScsICdFJyk7XG5cbi8vIFBSSU9SSVRZXG5hZGRVbml0UHJpb3JpdHkoJ2RheScsIDExKTtcbmFkZFVuaXRQcmlvcml0eSgnd2Vla2RheScsIDExKTtcbmFkZFVuaXRQcmlvcml0eSgnaXNvV2Vla2RheScsIDExKTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdkJywgICAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2UnLCAgICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignRScsICAgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdkZCcsICAgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzTWluUmVnZXgoaXNTdHJpY3QpO1xufSk7XG5hZGRSZWdleFRva2VuKCdkZGQnLCAgIGZ1bmN0aW9uIChpc1N0cmljdCwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c1Nob3J0UmVnZXgoaXNTdHJpY3QpO1xufSk7XG5hZGRSZWdleFRva2VuKCdkZGRkJywgICBmdW5jdGlvbiAoaXNTdHJpY3QsIGxvY2FsZSkge1xuICAgIHJldHVybiBsb2NhbGUud2Vla2RheXNSZWdleChpc1N0cmljdCk7XG59KTtcblxuYWRkV2Vla1BhcnNlVG9rZW4oWydkZCcsICdkZGQnLCAnZGRkZCddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICB2YXIgd2Vla2RheSA9IGNvbmZpZy5fbG9jYWxlLndlZWtkYXlzUGFyc2UoaW5wdXQsIHRva2VuLCBjb25maWcuX3N0cmljdCk7XG4gICAgLy8gaWYgd2UgZGlkbid0IGdldCBhIHdlZWtkYXkgbmFtZSwgbWFyayB0aGUgZGF0ZSBhcyBpbnZhbGlkXG4gICAgaWYgKHdlZWtkYXkgIT0gbnVsbCkge1xuICAgICAgICB3ZWVrLmQgPSB3ZWVrZGF5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmludmFsaWRXZWVrZGF5ID0gaW5wdXQ7XG4gICAgfVxufSk7XG5cbmFkZFdlZWtQYXJzZVRva2VuKFsnZCcsICdlJywgJ0UnXSwgZnVuY3Rpb24gKGlucHV0LCB3ZWVrLCBjb25maWcsIHRva2VuKSB7XG4gICAgd2Vla1t0b2tlbl0gPSB0b0ludChpbnB1dCk7XG59KTtcblxuLy8gSEVMUEVSU1xuXG5mdW5jdGlvbiBwYXJzZVdlZWtkYXkoaW5wdXQsIGxvY2FsZSkge1xuICAgIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoIWlzTmFOKGlucHV0KSkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoaW5wdXQsIDEwKTtcbiAgICB9XG5cbiAgICBpbnB1dCA9IGxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KTtcbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSXNvV2Vla2RheShpbnB1dCwgbG9jYWxlKSB7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5c1BhcnNlKGlucHV0KSAlIDcgfHwgNztcbiAgICB9XG4gICAgcmV0dXJuIGlzTmFOKGlucHV0KSA/IG51bGwgOiBpbnB1dDtcbn1cblxuLy8gTE9DQUxFU1xuXG52YXIgZGVmYXVsdExvY2FsZVdlZWtkYXlzID0gJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpO1xuZnVuY3Rpb24gbG9jYWxlV2Vla2RheXMgKG0sIGZvcm1hdCkge1xuICAgIGlmICghbSkge1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0aGlzLl93ZWVrZGF5cykgPyB0aGlzLl93ZWVrZGF5cyA6XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1snc3RhbmRhbG9uZSddO1xuICAgIH1cbiAgICByZXR1cm4gaXNBcnJheSh0aGlzLl93ZWVrZGF5cykgPyB0aGlzLl93ZWVrZGF5c1ttLmRheSgpXSA6XG4gICAgICAgIHRoaXMuX3dlZWtkYXlzW3RoaXMuX3dlZWtkYXlzLmlzRm9ybWF0LnRlc3QoZm9ybWF0KSA/ICdmb3JtYXQnIDogJ3N0YW5kYWxvbmUnXVttLmRheSgpXTtcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVXZWVrZGF5c1Nob3J0ID0gJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKTtcbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzU2hvcnQgKG0pIHtcbiAgICByZXR1cm4gKG0pID8gdGhpcy5fd2Vla2RheXNTaG9ydFttLmRheSgpXSA6IHRoaXMuX3dlZWtkYXlzU2hvcnQ7XG59XG5cbnZhciBkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW4gPSAnU3VfTW9fVHVfV2VfVGhfRnJfU2EnLnNwbGl0KCdfJyk7XG5mdW5jdGlvbiBsb2NhbGVXZWVrZGF5c01pbiAobSkge1xuICAgIHJldHVybiAobSkgPyB0aGlzLl93ZWVrZGF5c01pblttLmRheSgpXSA6IHRoaXMuX3dlZWtkYXlzTWluO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVTdHJpY3RQYXJzZSQxKHdlZWtkYXlOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICAgIHZhciBpLCBpaSwgbW9tLCBsbGMgPSB3ZWVrZGF5TmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZSkge1xuICAgICAgICB0aGlzLl93ZWVrZGF5c1BhcnNlID0gW107XG4gICAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSA9IFtdO1xuICAgICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlID0gW107XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDc7ICsraSkge1xuICAgICAgICAgICAgbW9tID0gY3JlYXRlVVRDKFsyMDAwLCAxXSkuZGF5KGkpO1xuICAgICAgICAgICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXSA9IHRoaXMud2Vla2RheXNNaW4obW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtpXSA9IHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNQYXJzZVtpXSA9IHRoaXMud2Vla2RheXMobW9tLCAnJykudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gJ2RkZGQnKSB7XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3dlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gJ2RkZCcpIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgcmV0dXJuIGlpICE9PSAtMSA/IGlpIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fbWluV2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm9ybWF0ID09PSAnZGRkZCcpIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gJ2RkZCcpIHtcbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX21pbldlZWtkYXlzUGFyc2UsIGxsYyk7XG4gICAgICAgICAgICByZXR1cm4gaWkgIT09IC0xID8gaWkgOiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWkgPSBpbmRleE9mJDEuY2FsbCh0aGlzLl9taW5XZWVrZGF5c1BhcnNlLCBsbGMpO1xuICAgICAgICAgICAgaWYgKGlpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlpID0gaW5kZXhPZiQxLmNhbGwodGhpcy5fd2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIGlmIChpaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpaSA9IGluZGV4T2YkMS5jYWxsKHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZSwgbGxjKTtcbiAgICAgICAgICAgIHJldHVybiBpaSAhPT0gLTEgPyBpaSA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvY2FsZVdlZWtkYXlzUGFyc2UgKHdlZWtkYXlOYW1lLCBmb3JtYXQsIHN0cmljdCkge1xuICAgIHZhciBpLCBtb20sIHJlZ2V4O1xuXG4gICAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlU3RyaWN0UGFyc2UkMS5jYWxsKHRoaXMsIHdlZWtkYXlOYW1lLCBmb3JtYXQsIHN0cmljdCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl93ZWVrZGF5c1BhcnNlKSB7XG4gICAgICAgIHRoaXMuX3dlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fbWluV2Vla2RheXNQYXJzZSA9IFtdO1xuICAgICAgICB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICAgICAgdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2UgPSBbXTtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIC8vIG1ha2UgdGhlIHJlZ2V4IGlmIHdlIGRvbid0IGhhdmUgaXQgYWxyZWFkeVxuXG4gICAgICAgIG1vbSA9IGNyZWF0ZVVUQyhbMjAwMCwgMV0pLmRheShpKTtcbiAgICAgICAgaWYgKHN0cmljdCAmJiAhdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2VbaV0pIHtcbiAgICAgICAgICAgIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICAgICAgdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJykucmVwbGFjZSgnLicsICdcXC4/JykgKyAnJCcsICdpJyk7XG4gICAgICAgICAgICB0aGlzLl9taW5XZWVrZGF5c1BhcnNlW2ldID0gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpLnJlcGxhY2UoJy4nLCAnXFwuPycpICsgJyQnLCAnaScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fd2Vla2RheXNQYXJzZVtpXSkge1xuICAgICAgICAgICAgcmVnZXggPSAnXicgKyB0aGlzLndlZWtkYXlzKG1vbSwgJycpICsgJ3xeJyArIHRoaXMud2Vla2RheXNTaG9ydChtb20sICcnKSArICd8XicgKyB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpO1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNQYXJzZVtpXSA9IG5ldyBSZWdFeHAocmVnZXgucmVwbGFjZSgnLicsICcnKSwgJ2knKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0ZXN0IHRoZSByZWdleFxuICAgICAgICBpZiAoc3RyaWN0ICYmIGZvcm1hdCA9PT0gJ2RkZGQnICYmIHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIGlmIChzdHJpY3QgJiYgZm9ybWF0ID09PSAnZGRkJyAmJiB0aGlzLl9zaG9ydFdlZWtkYXlzUGFyc2VbaV0udGVzdCh3ZWVrZGF5TmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0cmljdCAmJiBmb3JtYXQgPT09ICdkZCcgJiYgdGhpcy5fbWluV2Vla2RheXNQYXJzZVtpXS50ZXN0KHdlZWtkYXlOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCAmJiB0aGlzLl93ZWVrZGF5c1BhcnNlW2ldLnRlc3Qod2Vla2RheU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gTU9NRU5UU1xuXG5mdW5jdGlvbiBnZXRTZXREYXlPZldlZWsgKGlucHV0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gaW5wdXQgIT0gbnVsbCA/IHRoaXMgOiBOYU47XG4gICAgfVxuICAgIHZhciBkYXkgPSB0aGlzLl9pc1VUQyA/IHRoaXMuX2QuZ2V0VVRDRGF5KCkgOiB0aGlzLl9kLmdldERheSgpO1xuICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgIGlucHV0ID0gcGFyc2VXZWVrZGF5KGlucHV0LCB0aGlzLmxvY2FsZURhdGEoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZChpbnB1dCAtIGRheSwgJ2QnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF5O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrIChpbnB1dCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICAgIH1cbiAgICB2YXIgd2Vla2RheSA9ICh0aGlzLmRheSgpICsgNyAtIHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdykgJSA3O1xuICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gd2Vla2RheSA6IHRoaXMuYWRkKGlucHV0IC0gd2Vla2RheSwgJ2QnKTtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0SVNPRGF5T2ZXZWVrIChpbnB1dCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0ICE9IG51bGwgPyB0aGlzIDogTmFOO1xuICAgIH1cblxuICAgIC8vIGJlaGF2ZXMgdGhlIHNhbWUgYXMgbW9tZW50I2RheSBleGNlcHRcbiAgICAvLyBhcyBhIGdldHRlciwgcmV0dXJucyA3IGluc3RlYWQgb2YgMCAoMS03IHJhbmdlIGluc3RlYWQgb2YgMC02KVxuICAgIC8vIGFzIGEgc2V0dGVyLCBzdW5kYXkgc2hvdWxkIGJlbG9uZyB0byB0aGUgcHJldmlvdXMgd2Vlay5cblxuICAgIGlmIChpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgIHZhciB3ZWVrZGF5ID0gcGFyc2VJc29XZWVrZGF5KGlucHV0LCB0aGlzLmxvY2FsZURhdGEoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRheSh0aGlzLmRheSgpICUgNyA/IHdlZWtkYXkgOiB3ZWVrZGF5IC0gNyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF5KCkgfHwgNztcbiAgICB9XG59XG5cbnZhciBkZWZhdWx0V2Vla2RheXNSZWdleCA9IG1hdGNoV29yZDtcbmZ1bmN0aW9uIHdlZWtkYXlzUmVnZXggKGlzU3RyaWN0KSB7XG4gICAgaWYgKHRoaXMuX3dlZWtkYXlzUGFyc2VFeGFjdCkge1xuICAgICAgICBpZiAoIWhhc093blByb3AodGhpcywgJ193ZWVrZGF5c1JlZ2V4JykpIHtcbiAgICAgICAgICAgIGNvbXB1dGVXZWVrZGF5c1BhcnNlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU3RyaWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1JlZ2V4O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNSZWdleCcpKSB7XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1JlZ2V4ID0gZGVmYXVsdFdlZWtkYXlzUmVnZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggJiYgaXNTdHJpY3QgP1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNTdHJpY3RSZWdleCA6IHRoaXMuX3dlZWtkYXlzUmVnZXg7XG4gICAgfVxufVxuXG52YXIgZGVmYXVsdFdlZWtkYXlzU2hvcnRSZWdleCA9IG1hdGNoV29yZDtcbmZ1bmN0aW9uIHdlZWtkYXlzU2hvcnRSZWdleCAoaXNTdHJpY3QpIHtcbiAgICBpZiAodGhpcy5fd2Vla2RheXNQYXJzZUV4YWN0KSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzUmVnZXgnKSkge1xuICAgICAgICAgICAgY29tcHV0ZVdlZWtkYXlzUGFyc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTdHJpY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4O1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNTaG9ydFJlZ2V4JykpIHtcbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzU2hvcnRSZWdleCA9IGRlZmF1bHRXZWVrZGF5c1Nob3J0UmVnZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRTdHJpY3RSZWdleCAmJiBpc1N0cmljdCA/XG4gICAgICAgICAgICB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c1Nob3J0UmVnZXg7XG4gICAgfVxufVxuXG52YXIgZGVmYXVsdFdlZWtkYXlzTWluUmVnZXggPSBtYXRjaFdvcmQ7XG5mdW5jdGlvbiB3ZWVrZGF5c01pblJlZ2V4IChpc1N0cmljdCkge1xuICAgIGlmICh0aGlzLl93ZWVrZGF5c1BhcnNlRXhhY3QpIHtcbiAgICAgICAgaWYgKCFoYXNPd25Qcm9wKHRoaXMsICdfd2Vla2RheXNSZWdleCcpKSB7XG4gICAgICAgICAgICBjb21wdXRlV2Vla2RheXNQYXJzZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0cmljdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2Vla2RheXNNaW5SZWdleDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcCh0aGlzLCAnX3dlZWtkYXlzTWluUmVnZXgnKSkge1xuICAgICAgICAgICAgdGhpcy5fd2Vla2RheXNNaW5SZWdleCA9IGRlZmF1bHRXZWVrZGF5c01pblJlZ2V4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWVrZGF5c01pblN0cmljdFJlZ2V4ICYmIGlzU3RyaWN0ID9cbiAgICAgICAgICAgIHRoaXMuX3dlZWtkYXlzTWluU3RyaWN0UmVnZXggOiB0aGlzLl93ZWVrZGF5c01pblJlZ2V4O1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBjb21wdXRlV2Vla2RheXNQYXJzZSAoKSB7XG4gICAgZnVuY3Rpb24gY21wTGVuUmV2KGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7XG4gICAgfVxuXG4gICAgdmFyIG1pblBpZWNlcyA9IFtdLCBzaG9ydFBpZWNlcyA9IFtdLCBsb25nUGllY2VzID0gW10sIG1peGVkUGllY2VzID0gW10sXG4gICAgICAgIGksIG1vbSwgbWlucCwgc2hvcnRwLCBsb25ncDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIC8vIG1ha2UgdGhlIHJlZ2V4IGlmIHdlIGRvbid0IGhhdmUgaXQgYWxyZWFkeVxuICAgICAgICBtb20gPSBjcmVhdGVVVEMoWzIwMDAsIDFdKS5kYXkoaSk7XG4gICAgICAgIG1pbnAgPSB0aGlzLndlZWtkYXlzTWluKG1vbSwgJycpO1xuICAgICAgICBzaG9ydHAgPSB0aGlzLndlZWtkYXlzU2hvcnQobW9tLCAnJyk7XG4gICAgICAgIGxvbmdwID0gdGhpcy53ZWVrZGF5cyhtb20sICcnKTtcbiAgICAgICAgbWluUGllY2VzLnB1c2gobWlucCk7XG4gICAgICAgIHNob3J0UGllY2VzLnB1c2goc2hvcnRwKTtcbiAgICAgICAgbG9uZ1BpZWNlcy5wdXNoKGxvbmdwKTtcbiAgICAgICAgbWl4ZWRQaWVjZXMucHVzaChtaW5wKTtcbiAgICAgICAgbWl4ZWRQaWVjZXMucHVzaChzaG9ydHApO1xuICAgICAgICBtaXhlZFBpZWNlcy5wdXNoKGxvbmdwKTtcbiAgICB9XG4gICAgLy8gU29ydGluZyBtYWtlcyBzdXJlIGlmIG9uZSB3ZWVrZGF5IChvciBhYmJyKSBpcyBhIHByZWZpeCBvZiBhbm90aGVyIGl0XG4gICAgLy8gd2lsbCBtYXRjaCB0aGUgbG9uZ2VyIHBpZWNlLlxuICAgIG1pblBpZWNlcy5zb3J0KGNtcExlblJldik7XG4gICAgc2hvcnRQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICAgIGxvbmdQaWVjZXMuc29ydChjbXBMZW5SZXYpO1xuICAgIG1peGVkUGllY2VzLnNvcnQoY21wTGVuUmV2KTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIHNob3J0UGllY2VzW2ldID0gcmVnZXhFc2NhcGUoc2hvcnRQaWVjZXNbaV0pO1xuICAgICAgICBsb25nUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobG9uZ1BpZWNlc1tpXSk7XG4gICAgICAgIG1peGVkUGllY2VzW2ldID0gcmVnZXhFc2NhcGUobWl4ZWRQaWVjZXNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuX3dlZWtkYXlzUmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBtaXhlZFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gICAgdGhpcy5fd2Vla2RheXNTaG9ydFJlZ2V4ID0gdGhpcy5fd2Vla2RheXNSZWdleDtcbiAgICB0aGlzLl93ZWVrZGF5c01pblJlZ2V4ID0gdGhpcy5fd2Vla2RheXNSZWdleDtcblxuICAgIHRoaXMuX3dlZWtkYXlzU3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBsb25nUGllY2VzLmpvaW4oJ3wnKSArICcpJywgJ2knKTtcbiAgICB0aGlzLl93ZWVrZGF5c1Nob3J0U3RyaWN0UmVnZXggPSBuZXcgUmVnRXhwKCdeKCcgKyBzaG9ydFBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG4gICAgdGhpcy5fd2Vla2RheXNNaW5TdHJpY3RSZWdleCA9IG5ldyBSZWdFeHAoJ14oJyArIG1pblBpZWNlcy5qb2luKCd8JykgKyAnKScsICdpJyk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuZnVuY3Rpb24gaEZvcm1hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5ob3VycygpICUgMTIgfHwgMTI7XG59XG5cbmZ1bmN0aW9uIGtGb3JtYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaG91cnMoKSB8fCAyNDtcbn1cblxuYWRkRm9ybWF0VG9rZW4oJ0gnLCBbJ0hIJywgMl0sIDAsICdob3VyJyk7XG5hZGRGb3JtYXRUb2tlbignaCcsIFsnaGgnLCAyXSwgMCwgaEZvcm1hdCk7XG5hZGRGb3JtYXRUb2tlbignaycsIFsna2snLCAyXSwgMCwga0Zvcm1hdCk7XG5cbmFkZEZvcm1hdFRva2VuKCdobW0nLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICcnICsgaEZvcm1hdC5hcHBseSh0aGlzKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignaG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICcnICsgaEZvcm1hdC5hcHBseSh0aGlzKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKSArXG4gICAgICAgIHplcm9GaWxsKHRoaXMuc2Vjb25kcygpLCAyKTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignSG1tJywgMCwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAnJyArIHRoaXMuaG91cnMoKSArIHplcm9GaWxsKHRoaXMubWludXRlcygpLCAyKTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbignSG1tc3MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5ob3VycygpICsgemVyb0ZpbGwodGhpcy5taW51dGVzKCksIDIpICtcbiAgICAgICAgemVyb0ZpbGwodGhpcy5zZWNvbmRzKCksIDIpO1xufSk7XG5cbmZ1bmN0aW9uIG1lcmlkaWVtICh0b2tlbiwgbG93ZXJjYXNlKSB7XG4gICAgYWRkRm9ybWF0VG9rZW4odG9rZW4sIDAsIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSwgdGhpcy5taW51dGVzKCksIGxvd2VyY2FzZSk7XG4gICAgfSk7XG59XG5cbm1lcmlkaWVtKCdhJywgdHJ1ZSk7XG5tZXJpZGllbSgnQScsIGZhbHNlKTtcblxuLy8gQUxJQVNFU1xuXG5hZGRVbml0QWxpYXMoJ2hvdXInLCAnaCcpO1xuXG4vLyBQUklPUklUWVxuYWRkVW5pdFByaW9yaXR5KCdob3VyJywgMTMpO1xuXG4vLyBQQVJTSU5HXG5cbmZ1bmN0aW9uIG1hdGNoTWVyaWRpZW0gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICByZXR1cm4gbG9jYWxlLl9tZXJpZGllbVBhcnNlO1xufVxuXG5hZGRSZWdleFRva2VuKCdhJywgIG1hdGNoTWVyaWRpZW0pO1xuYWRkUmVnZXhUb2tlbignQScsICBtYXRjaE1lcmlkaWVtKTtcbmFkZFJlZ2V4VG9rZW4oJ0gnLCAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2gnLCAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ2snLCAgbWF0Y2gxdG8yKTtcbmFkZFJlZ2V4VG9rZW4oJ0hIJywgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignaGgnLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRSZWdleFRva2VuKCdraycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcblxuYWRkUmVnZXhUb2tlbignaG1tJywgbWF0Y2gzdG80KTtcbmFkZFJlZ2V4VG9rZW4oJ2htbXNzJywgbWF0Y2g1dG82KTtcbmFkZFJlZ2V4VG9rZW4oJ0htbScsIG1hdGNoM3RvNCk7XG5hZGRSZWdleFRva2VuKCdIbW1zcycsIG1hdGNoNXRvNik7XG5cbmFkZFBhcnNlVG9rZW4oWydIJywgJ0hIJ10sIEhPVVIpO1xuYWRkUGFyc2VUb2tlbihbJ2snLCAna2snXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgdmFyIGtJbnB1dCA9IHRvSW50KGlucHV0KTtcbiAgICBhcnJheVtIT1VSXSA9IGtJbnB1dCA9PT0gMjQgPyAwIDoga0lucHV0O1xufSk7XG5hZGRQYXJzZVRva2VuKFsnYScsICdBJ10sIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIGNvbmZpZy5faXNQbSA9IGNvbmZpZy5fbG9jYWxlLmlzUE0oaW5wdXQpO1xuICAgIGNvbmZpZy5fbWVyaWRpZW0gPSBpbnB1dDtcbn0pO1xuYWRkUGFyc2VUb2tlbihbJ2gnLCAnaGgnXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgYXJyYXlbSE9VUl0gPSB0b0ludChpbnB1dCk7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ2htbScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvcykpO1xuICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zKSk7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ2htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgdmFyIHBvczEgPSBpbnB1dC5sZW5ndGggLSA0O1xuICAgIHZhciBwb3MyID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gICAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MxLCAyKSk7XG4gICAgYXJyYXlbU0VDT05EXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MyKSk7XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9IHRydWU7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ0htbScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIHZhciBwb3MgPSBpbnB1dC5sZW5ndGggLSAyO1xuICAgIGFycmF5W0hPVVJdID0gdG9JbnQoaW5wdXQuc3Vic3RyKDAsIHBvcykpO1xuICAgIGFycmF5W01JTlVURV0gPSB0b0ludChpbnB1dC5zdWJzdHIocG9zKSk7XG59KTtcbmFkZFBhcnNlVG9rZW4oJ0htbXNzJywgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgdmFyIHBvczEgPSBpbnB1dC5sZW5ndGggLSA0O1xuICAgIHZhciBwb3MyID0gaW5wdXQubGVuZ3RoIC0gMjtcbiAgICBhcnJheVtIT1VSXSA9IHRvSW50KGlucHV0LnN1YnN0cigwLCBwb3MxKSk7XG4gICAgYXJyYXlbTUlOVVRFXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MxLCAyKSk7XG4gICAgYXJyYXlbU0VDT05EXSA9IHRvSW50KGlucHV0LnN1YnN0cihwb3MyKSk7XG59KTtcblxuLy8gTE9DQUxFU1xuXG5mdW5jdGlvbiBsb2NhbGVJc1BNIChpbnB1dCkge1xuICAgIC8vIElFOCBRdWlya3MgTW9kZSAmIElFNyBTdGFuZGFyZHMgTW9kZSBkbyBub3QgYWxsb3cgYWNjZXNzaW5nIHN0cmluZ3MgbGlrZSBhcnJheXNcbiAgICAvLyBVc2luZyBjaGFyQXQgc2hvdWxkIGJlIG1vcmUgY29tcGF0aWJsZS5cbiAgICByZXR1cm4gKChpbnB1dCArICcnKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKSA9PT0gJ3AnKTtcbn1cblxudmFyIGRlZmF1bHRMb2NhbGVNZXJpZGllbVBhcnNlID0gL1thcF1cXC4/bT9cXC4/L2k7XG5mdW5jdGlvbiBsb2NhbGVNZXJpZGllbSAoaG91cnMsIG1pbnV0ZXMsIGlzTG93ZXIpIHtcbiAgICBpZiAoaG91cnMgPiAxMSkge1xuICAgICAgICByZXR1cm4gaXNMb3dlciA/ICdwbScgOiAnUE0nO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpc0xvd2VyID8gJ2FtJyA6ICdBTSc7XG4gICAgfVxufVxuXG5cbi8vIE1PTUVOVFNcblxuLy8gU2V0dGluZyB0aGUgaG91ciBzaG91bGQga2VlcCB0aGUgdGltZSwgYmVjYXVzZSB0aGUgdXNlciBleHBsaWNpdGx5XG4vLyBzcGVjaWZpZWQgd2hpY2ggaG91ciBoZSB3YW50cy4gU28gdHJ5aW5nIHRvIG1haW50YWluIHRoZSBzYW1lIGhvdXIgKGluXG4vLyBhIG5ldyB0aW1lem9uZSkgbWFrZXMgc2Vuc2UuIEFkZGluZy9zdWJ0cmFjdGluZyBob3VycyBkb2VzIG5vdCBmb2xsb3dcbi8vIHRoaXMgcnVsZS5cbnZhciBnZXRTZXRIb3VyID0gbWFrZUdldFNldCgnSG91cnMnLCB0cnVlKTtcblxuLy8gbW9udGhzXG4vLyB3ZWVrXG4vLyB3ZWVrZGF5c1xuLy8gbWVyaWRpZW1cbnZhciBiYXNlQ29uZmlnID0ge1xuICAgIGNhbGVuZGFyOiBkZWZhdWx0Q2FsZW5kYXIsXG4gICAgbG9uZ0RhdGVGb3JtYXQ6IGRlZmF1bHRMb25nRGF0ZUZvcm1hdCxcbiAgICBpbnZhbGlkRGF0ZTogZGVmYXVsdEludmFsaWREYXRlLFxuICAgIG9yZGluYWw6IGRlZmF1bHRPcmRpbmFsLFxuICAgIGRheU9mTW9udGhPcmRpbmFsUGFyc2U6IGRlZmF1bHREYXlPZk1vbnRoT3JkaW5hbFBhcnNlLFxuICAgIHJlbGF0aXZlVGltZTogZGVmYXVsdFJlbGF0aXZlVGltZSxcblxuICAgIG1vbnRoczogZGVmYXVsdExvY2FsZU1vbnRocyxcbiAgICBtb250aHNTaG9ydDogZGVmYXVsdExvY2FsZU1vbnRoc1Nob3J0LFxuXG4gICAgd2VlazogZGVmYXVsdExvY2FsZVdlZWssXG5cbiAgICB3ZWVrZGF5czogZGVmYXVsdExvY2FsZVdlZWtkYXlzLFxuICAgIHdlZWtkYXlzTWluOiBkZWZhdWx0TG9jYWxlV2Vla2RheXNNaW4sXG4gICAgd2Vla2RheXNTaG9ydDogZGVmYXVsdExvY2FsZVdlZWtkYXlzU2hvcnQsXG5cbiAgICBtZXJpZGllbVBhcnNlOiBkZWZhdWx0TG9jYWxlTWVyaWRpZW1QYXJzZVxufTtcblxuLy8gaW50ZXJuYWwgc3RvcmFnZSBmb3IgbG9jYWxlIGNvbmZpZyBmaWxlc1xudmFyIGxvY2FsZXMgPSB7fTtcbnZhciBsb2NhbGVGYW1pbGllcyA9IHt9O1xudmFyIGdsb2JhbExvY2FsZTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTG9jYWxlKGtleSkge1xuICAgIHJldHVybiBrZXkgPyBrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCdfJywgJy0nKSA6IGtleTtcbn1cblxuLy8gcGljayB0aGUgbG9jYWxlIGZyb20gdGhlIGFycmF5XG4vLyB0cnkgWydlbi1hdScsICdlbi1nYiddIGFzICdlbi1hdScsICdlbi1nYicsICdlbicsIGFzIGluIG1vdmUgdGhyb3VnaCB0aGUgbGlzdCB0cnlpbmcgZWFjaFxuLy8gc3Vic3RyaW5nIGZyb20gbW9zdCBzcGVjaWZpYyB0byBsZWFzdCwgYnV0IG1vdmUgdG8gdGhlIG5leHQgYXJyYXkgaXRlbSBpZiBpdCdzIGEgbW9yZSBzcGVjaWZpYyB2YXJpYW50IHRoYW4gdGhlIGN1cnJlbnQgcm9vdFxuZnVuY3Rpb24gY2hvb3NlTG9jYWxlKG5hbWVzKSB7XG4gICAgdmFyIGkgPSAwLCBqLCBuZXh0LCBsb2NhbGUsIHNwbGl0O1xuXG4gICAgd2hpbGUgKGkgPCBuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgc3BsaXQgPSBub3JtYWxpemVMb2NhbGUobmFtZXNbaV0pLnNwbGl0KCctJyk7XG4gICAgICAgIGogPSBzcGxpdC5sZW5ndGg7XG4gICAgICAgIG5leHQgPSBub3JtYWxpemVMb2NhbGUobmFtZXNbaSArIDFdKTtcbiAgICAgICAgbmV4dCA9IG5leHQgPyBuZXh0LnNwbGl0KCctJykgOiBudWxsO1xuICAgICAgICB3aGlsZSAoaiA+IDApIHtcbiAgICAgICAgICAgIGxvY2FsZSA9IGxvYWRMb2NhbGUoc3BsaXQuc2xpY2UoMCwgaikuam9pbignLScpKTtcbiAgICAgICAgICAgIGlmIChsb2NhbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgJiYgbmV4dC5sZW5ndGggPj0gaiAmJiBjb21wYXJlQXJyYXlzKHNwbGl0LCBuZXh0LCB0cnVlKSA+PSBqIC0gMSkge1xuICAgICAgICAgICAgICAgIC8vdGhlIG5leHQgYXJyYXkgaXRlbSBpcyBiZXR0ZXIgdGhhbiBhIHNoYWxsb3dlciBzdWJzdHJpbmcgb2YgdGhpcyBvbmVcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBsb2FkTG9jYWxlKG5hbWUpIHtcbiAgICB2YXIgb2xkTG9jYWxlID0gbnVsbDtcbiAgICAvLyBUT0RPOiBGaW5kIGEgYmV0dGVyIHdheSB0byByZWdpc3RlciBhbmQgbG9hZCBhbGwgdGhlIGxvY2FsZXMgaW4gTm9kZVxuICAgIGlmICghbG9jYWxlc1tuYW1lXSAmJiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpICYmXG4gICAgICAgICAgICBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG9sZExvY2FsZSA9IGdsb2JhbExvY2FsZS5fYWJicjtcbiAgICAgICAgICAgIHJlcXVpcmUoJy4vbG9jYWxlLycgKyBuYW1lKTtcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgZGVmaW5lTG9jYWxlIGN1cnJlbnRseSBhbHNvIHNldHMgdGhlIGdsb2JhbCBsb2NhbGUsIHdlXG4gICAgICAgICAgICAvLyB3YW50IHRvIHVuZG8gdGhhdCBmb3IgbGF6eSBsb2FkZWQgbG9jYWxlc1xuICAgICAgICAgICAgZ2V0U2V0R2xvYmFsTG9jYWxlKG9sZExvY2FsZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYWxlc1tuYW1lXTtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGxvYWQgbG9jYWxlIGFuZCB0aGVuIHNldCB0aGUgZ2xvYmFsIGxvY2FsZS4gIElmXG4vLyBubyBhcmd1bWVudHMgYXJlIHBhc3NlZCBpbiwgaXQgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IGdsb2JhbFxuLy8gbG9jYWxlIGtleS5cbmZ1bmN0aW9uIGdldFNldEdsb2JhbExvY2FsZSAoa2V5LCB2YWx1ZXMpIHtcbiAgICB2YXIgZGF0YTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZXMpKSB7XG4gICAgICAgICAgICBkYXRhID0gZ2V0TG9jYWxlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0gZGVmaW5lTG9jYWxlKGtleSwgdmFsdWVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAvLyBtb21lbnQuZHVyYXRpb24uX2xvY2FsZSA9IG1vbWVudC5fbG9jYWxlID0gZGF0YTtcbiAgICAgICAgICAgIGdsb2JhbExvY2FsZSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ2xvYmFsTG9jYWxlLl9hYmJyO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVMb2NhbGUgKG5hbWUsIGNvbmZpZykge1xuICAgIGlmIChjb25maWcgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIHBhcmVudENvbmZpZyA9IGJhc2VDb25maWc7XG4gICAgICAgIGNvbmZpZy5hYmJyID0gbmFtZTtcbiAgICAgICAgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgZGVwcmVjYXRlU2ltcGxlKCdkZWZpbmVMb2NhbGVPdmVycmlkZScsXG4gICAgICAgICAgICAgICAgICAgICd1c2UgbW9tZW50LnVwZGF0ZUxvY2FsZShsb2NhbGVOYW1lLCBjb25maWcpIHRvIGNoYW5nZSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2FuIGV4aXN0aW5nIGxvY2FsZS4gbW9tZW50LmRlZmluZUxvY2FsZShsb2NhbGVOYW1lLCAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2NvbmZpZykgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgY3JlYXRpbmcgYSBuZXcgbG9jYWxlICcgK1xuICAgICAgICAgICAgICAgICAgICAnU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZGVmaW5lLWxvY2FsZS8gZm9yIG1vcmUgaW5mby4nKTtcbiAgICAgICAgICAgIHBhcmVudENvbmZpZyA9IGxvY2FsZXNbbmFtZV0uX2NvbmZpZztcbiAgICAgICAgfSBlbHNlIGlmIChjb25maWcucGFyZW50TG9jYWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2NhbGVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRDb25maWcgPSBsb2NhbGVzW2NvbmZpZy5wYXJlbnRMb2NhbGVdLl9jb25maWc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYWxlRmFtaWxpZXNbY29uZmlnLnBhcmVudExvY2FsZV0ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZzogY29uZmlnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbG9jYWxlc1tuYW1lXSA9IG5ldyBMb2NhbGUobWVyZ2VDb25maWdzKHBhcmVudENvbmZpZywgY29uZmlnKSk7XG5cbiAgICAgICAgaWYgKGxvY2FsZUZhbWlsaWVzW25hbWVdKSB7XG4gICAgICAgICAgICBsb2NhbGVGYW1pbGllc1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgZGVmaW5lTG9jYWxlKHgubmFtZSwgeC5jb25maWcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBiYWNrd2FyZHMgY29tcGF0IGZvciBub3c6IGFsc28gc2V0IHRoZSBsb2NhbGVcbiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIHNldCB0aGUgbG9jYWxlIEFGVEVSIGFsbCBjaGlsZCBsb2NhbGVzIGhhdmUgYmVlblxuICAgICAgICAvLyBjcmVhdGVkLCBzbyB3ZSB3b24ndCBlbmQgdXAgd2l0aCB0aGUgY2hpbGQgbG9jYWxlIHNldC5cbiAgICAgICAgZ2V0U2V0R2xvYmFsTG9jYWxlKG5hbWUpO1xuXG5cbiAgICAgICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXNlZnVsIGZvciB0ZXN0aW5nXG4gICAgICAgIGRlbGV0ZSBsb2NhbGVzW25hbWVdO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxvY2FsZShuYW1lLCBjb25maWcpIHtcbiAgICBpZiAoY29uZmlnICE9IG51bGwpIHtcbiAgICAgICAgdmFyIGxvY2FsZSwgcGFyZW50Q29uZmlnID0gYmFzZUNvbmZpZztcbiAgICAgICAgLy8gTUVSR0VcbiAgICAgICAgaWYgKGxvY2FsZXNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcGFyZW50Q29uZmlnID0gbG9jYWxlc1tuYW1lXS5fY29uZmlnO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlncyhwYXJlbnRDb25maWcsIGNvbmZpZyk7XG4gICAgICAgIGxvY2FsZSA9IG5ldyBMb2NhbGUoY29uZmlnKTtcbiAgICAgICAgbG9jYWxlLnBhcmVudExvY2FsZSA9IGxvY2FsZXNbbmFtZV07XG4gICAgICAgIGxvY2FsZXNbbmFtZV0gPSBsb2NhbGU7XG5cbiAgICAgICAgLy8gYmFja3dhcmRzIGNvbXBhdCBmb3Igbm93OiBhbHNvIHNldCB0aGUgbG9jYWxlXG4gICAgICAgIGdldFNldEdsb2JhbExvY2FsZShuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBwYXNzIG51bGwgZm9yIGNvbmZpZyB0byB1bnVwZGF0ZSwgdXNlZnVsIGZvciB0ZXN0c1xuICAgICAgICBpZiAobG9jYWxlc1tuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxlc1tuYW1lXS5wYXJlbnRMb2NhbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvY2FsZXNbbmFtZV0gPSBsb2NhbGVzW25hbWVdLnBhcmVudExvY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobG9jYWxlc1tuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGxvY2FsZXNbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsZXNbbmFtZV07XG59XG5cbi8vIHJldHVybnMgbG9jYWxlIGRhdGFcbmZ1bmN0aW9uIGdldExvY2FsZSAoa2V5KSB7XG4gICAgdmFyIGxvY2FsZTtcblxuICAgIGlmIChrZXkgJiYga2V5Ll9sb2NhbGUgJiYga2V5Ll9sb2NhbGUuX2FiYnIpIHtcbiAgICAgICAga2V5ID0ga2V5Ll9sb2NhbGUuX2FiYnI7XG4gICAgfVxuXG4gICAgaWYgKCFrZXkpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbExvY2FsZTtcbiAgICB9XG5cbiAgICBpZiAoIWlzQXJyYXkoa2V5KSkge1xuICAgICAgICAvL3Nob3J0LWNpcmN1aXQgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIGxvY2FsZSA9IGxvYWRMb2NhbGUoa2V5KTtcbiAgICAgICAgaWYgKGxvY2FsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBrZXkgPSBba2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hvb3NlTG9jYWxlKGtleSk7XG59XG5cbmZ1bmN0aW9uIGxpc3RMb2NhbGVzKCkge1xuICAgIHJldHVybiBrZXlzJDEobG9jYWxlcyk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrT3ZlcmZsb3cgKG0pIHtcbiAgICB2YXIgb3ZlcmZsb3c7XG4gICAgdmFyIGEgPSBtLl9hO1xuXG4gICAgaWYgKGEgJiYgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID09PSAtMikge1xuICAgICAgICBvdmVyZmxvdyA9XG4gICAgICAgICAgICBhW01PTlRIXSAgICAgICA8IDAgfHwgYVtNT05USF0gICAgICAgPiAxMSAgPyBNT05USCA6XG4gICAgICAgICAgICBhW0RBVEVdICAgICAgICA8IDEgfHwgYVtEQVRFXSAgICAgICAgPiBkYXlzSW5Nb250aChhW1lFQVJdLCBhW01PTlRIXSkgPyBEQVRFIDpcbiAgICAgICAgICAgIGFbSE9VUl0gICAgICAgIDwgMCB8fCBhW0hPVVJdICAgICAgICA+IDI0IHx8IChhW0hPVVJdID09PSAyNCAmJiAoYVtNSU5VVEVdICE9PSAwIHx8IGFbU0VDT05EXSAhPT0gMCB8fCBhW01JTExJU0VDT05EXSAhPT0gMCkpID8gSE9VUiA6XG4gICAgICAgICAgICBhW01JTlVURV0gICAgICA8IDAgfHwgYVtNSU5VVEVdICAgICAgPiA1OSAgPyBNSU5VVEUgOlxuICAgICAgICAgICAgYVtTRUNPTkRdICAgICAgPCAwIHx8IGFbU0VDT05EXSAgICAgID4gNTkgID8gU0VDT05EIDpcbiAgICAgICAgICAgIGFbTUlMTElTRUNPTkRdIDwgMCB8fCBhW01JTExJU0VDT05EXSA+IDk5OSA/IE1JTExJU0VDT05EIDpcbiAgICAgICAgICAgIC0xO1xuXG4gICAgICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93RGF5T2ZZZWFyICYmIChvdmVyZmxvdyA8IFlFQVIgfHwgb3ZlcmZsb3cgPiBEQVRFKSkge1xuICAgICAgICAgICAgb3ZlcmZsb3cgPSBEQVRFO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRQYXJzaW5nRmxhZ3MobSkuX292ZXJmbG93V2Vla3MgJiYgb3ZlcmZsb3cgPT09IC0xKSB7XG4gICAgICAgICAgICBvdmVyZmxvdyA9IFdFRUs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdldFBhcnNpbmdGbGFncyhtKS5fb3ZlcmZsb3dXZWVrZGF5ICYmIG92ZXJmbG93ID09PSAtMSkge1xuICAgICAgICAgICAgb3ZlcmZsb3cgPSBXRUVLREFZO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKG0pLm92ZXJmbG93ID0gb3ZlcmZsb3c7XG4gICAgfVxuXG4gICAgcmV0dXJuIG07XG59XG5cbi8vIGlzbyA4NjAxIHJlZ2V4XG4vLyAwMDAwLTAwLTAwIDAwMDAtVzAwIG9yIDAwMDAtVzAwLTAgKyBUICsgMDAgb3IgMDA6MDAgb3IgMDA6MDA6MDAgb3IgMDA6MDA6MDAuMDAwICsgKzAwOjAwIG9yICswMDAwIG9yICswMClcbnZhciBleHRlbmRlZElzb1JlZ2V4ID0gL15cXHMqKCg/OlsrLV1cXGR7Nn18XFxkezR9KS0oPzpcXGRcXGQtXFxkXFxkfFdcXGRcXGQtXFxkfFdcXGRcXGR8XFxkXFxkXFxkfFxcZFxcZCkpKD86KFR8ICkoXFxkXFxkKD86OlxcZFxcZCg/OjpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPyQvO1xudmFyIGJhc2ljSXNvUmVnZXggPSAvXlxccyooKD86WystXVxcZHs2fXxcXGR7NH0pKD86XFxkXFxkXFxkXFxkfFdcXGRcXGRcXGR8V1xcZFxcZHxcXGRcXGRcXGR8XFxkXFxkKSkoPzooVHwgKShcXGRcXGQoPzpcXGRcXGQoPzpcXGRcXGQoPzpbLixdXFxkKyk/KT8pPykoW1xcK1xcLV1cXGRcXGQoPzo6P1xcZFxcZCk/fFxccypaKT8pPyQvO1xuXG52YXIgdHpSZWdleCA9IC9afFsrLV1cXGRcXGQoPzo6P1xcZFxcZCk/LztcblxudmFyIGlzb0RhdGVzID0gW1xuICAgIFsnWVlZWVlZLU1NLUREJywgL1srLV1cXGR7Nn0tXFxkXFxkLVxcZFxcZC9dLFxuICAgIFsnWVlZWS1NTS1ERCcsIC9cXGR7NH0tXFxkXFxkLVxcZFxcZC9dLFxuICAgIFsnR0dHRy1bV11XVy1FJywgL1xcZHs0fS1XXFxkXFxkLVxcZC9dLFxuICAgIFsnR0dHRy1bV11XVycsIC9cXGR7NH0tV1xcZFxcZC8sIGZhbHNlXSxcbiAgICBbJ1lZWVktREREJywgL1xcZHs0fS1cXGR7M30vXSxcbiAgICBbJ1lZWVktTU0nLCAvXFxkezR9LVxcZFxcZC8sIGZhbHNlXSxcbiAgICBbJ1lZWVlZWU1NREQnLCAvWystXVxcZHsxMH0vXSxcbiAgICBbJ1lZWVlNTUREJywgL1xcZHs4fS9dLFxuICAgIC8vIFlZWVlNTSBpcyBOT1QgYWxsb3dlZCBieSB0aGUgc3RhbmRhcmRcbiAgICBbJ0dHR0dbV11XV0UnLCAvXFxkezR9V1xcZHszfS9dLFxuICAgIFsnR0dHR1tXXVdXJywgL1xcZHs0fVdcXGR7Mn0vLCBmYWxzZV0sXG4gICAgWydZWVlZREREJywgL1xcZHs3fS9dXG5dO1xuXG4vLyBpc28gdGltZSBmb3JtYXRzIGFuZCByZWdleGVzXG52YXIgaXNvVGltZXMgPSBbXG4gICAgWydISDptbTpzcy5TU1NTJywgL1xcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLFxuICAgIFsnSEg6bW06c3MsU1NTUycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZCxcXGQrL10sXG4gICAgWydISDptbTpzcycsIC9cXGRcXGQ6XFxkXFxkOlxcZFxcZC9dLFxuICAgIFsnSEg6bW0nLCAvXFxkXFxkOlxcZFxcZC9dLFxuICAgIFsnSEhtbXNzLlNTU1MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkXFwuXFxkKy9dLFxuICAgIFsnSEhtbXNzLFNTU1MnLCAvXFxkXFxkXFxkXFxkXFxkXFxkLFxcZCsvXSxcbiAgICBbJ0hIbW1zcycsIC9cXGRcXGRcXGRcXGRcXGRcXGQvXSxcbiAgICBbJ0hIbW0nLCAvXFxkXFxkXFxkXFxkL10sXG4gICAgWydISCcsIC9cXGRcXGQvXVxuXTtcblxudmFyIGFzcE5ldEpzb25SZWdleCA9IC9eXFwvP0RhdGVcXCgoXFwtP1xcZCspL2k7XG5cbi8vIGRhdGUgZnJvbSBpc28gZm9ybWF0XG5mdW5jdGlvbiBjb25maWdGcm9tSVNPKGNvbmZpZykge1xuICAgIHZhciBpLCBsLFxuICAgICAgICBzdHJpbmcgPSBjb25maWcuX2ksXG4gICAgICAgIG1hdGNoID0gZXh0ZW5kZWRJc29SZWdleC5leGVjKHN0cmluZykgfHwgYmFzaWNJc29SZWdleC5leGVjKHN0cmluZyksXG4gICAgICAgIGFsbG93VGltZSwgZGF0ZUZvcm1hdCwgdGltZUZvcm1hdCwgdHpGb3JtYXQ7XG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaXNvID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGkgPSAwLCBsID0gaXNvRGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaXNvRGF0ZXNbaV1bMV0uZXhlYyhtYXRjaFsxXSkpIHtcbiAgICAgICAgICAgICAgICBkYXRlRm9ybWF0ID0gaXNvRGF0ZXNbaV1bMF07XG4gICAgICAgICAgICAgICAgYWxsb3dUaW1lID0gaXNvRGF0ZXNbaV1bMl0gIT09IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlRm9ybWF0ID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaFszXSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IGlzb1RpbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChpc29UaW1lc1tpXVsxXS5leGVjKG1hdGNoWzNdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaFsyXSBzaG91bGQgYmUgJ1QnIG9yIHNwYWNlXG4gICAgICAgICAgICAgICAgICAgIHRpbWVGb3JtYXQgPSAobWF0Y2hbMl0gfHwgJyAnKSArIGlzb1RpbWVzW2ldWzBdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGltZUZvcm1hdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghYWxsb3dUaW1lICYmIHRpbWVGb3JtYXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgY29uZmlnLl9pc1ZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoWzRdKSB7XG4gICAgICAgICAgICBpZiAodHpSZWdleC5leGVjKG1hdGNoWzRdKSkge1xuICAgICAgICAgICAgICAgIHR6Rm9ybWF0ID0gJ1onO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLl9mID0gZGF0ZUZvcm1hdCArICh0aW1lRm9ybWF0IHx8ICcnKSArICh0ekZvcm1hdCB8fCAnJyk7XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmdBbmRGb3JtYXQoY29uZmlnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbi8vIFJGQyAyODIyIHJlZ2V4OiBGb3IgZGV0YWlscyBzZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzI4MjIjc2VjdGlvbi0zLjNcbnZhciBiYXNpY1JmY1JlZ2V4ID0gL14oKD86TW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSw/XFxzKT8oXFxkP1xcZFxccyg/OkphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxccyg/OlxcZFxcZCk/XFxkXFxkXFxzKShcXGRcXGQ6XFxkXFxkKShcXDpcXGRcXGQpPyhcXHMoPzpVVHxHTVR8W0VDTVBdW1NEXVR8W0EtSUstWmEtaWstel18WystXVxcZHs0fSkpJC87XG5cbi8vIGRhdGUgYW5kIHRpbWUgZnJvbSByZWYgMjgyMiBmb3JtYXRcbmZ1bmN0aW9uIGNvbmZpZ0Zyb21SRkMyODIyKGNvbmZpZykge1xuICAgIHZhciBzdHJpbmcsIG1hdGNoLCBkYXlGb3JtYXQsXG4gICAgICAgIGRhdGVGb3JtYXQsIHRpbWVGb3JtYXQsIHR6Rm9ybWF0O1xuICAgIHZhciB0aW1lem9uZXMgPSB7XG4gICAgICAgICcgR01UJzogJyArMDAwMCcsXG4gICAgICAgICcgRURUJzogJyAtMDQwMCcsXG4gICAgICAgICcgRVNUJzogJyAtMDUwMCcsXG4gICAgICAgICcgQ0RUJzogJyAtMDUwMCcsXG4gICAgICAgICcgQ1NUJzogJyAtMDYwMCcsXG4gICAgICAgICcgTURUJzogJyAtMDYwMCcsXG4gICAgICAgICcgTVNUJzogJyAtMDcwMCcsXG4gICAgICAgICcgUERUJzogJyAtMDcwMCcsXG4gICAgICAgICcgUFNUJzogJyAtMDgwMCdcbiAgICB9O1xuICAgIHZhciBtaWxpdGFyeSA9ICdZWFdWVVRTUlFQT05aQUJDREVGR0hJS0xNJztcbiAgICB2YXIgdGltZXpvbmUsIHRpbWV6b25lSW5kZXg7XG5cbiAgICBzdHJpbmcgPSBjb25maWcuX2lcbiAgICAgICAgLnJlcGxhY2UoL1xcKFteXFwpXSpcXCl8W1xcblxcdF0vZywgJyAnKSAvLyBSZW1vdmUgY29tbWVudHMgYW5kIGZvbGRpbmcgd2hpdGVzcGFjZVxuICAgICAgICAucmVwbGFjZSgvKFxcc1xccyspL2csICcgJykgLy8gUmVwbGFjZSBtdWx0aXBsZS1zcGFjZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuICAgICAgICAucmVwbGFjZSgvXlxcc3xcXHMkL2csICcnKTsgLy8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlc1xuICAgIG1hdGNoID0gYmFzaWNSZmNSZWdleC5leGVjKHN0cmluZyk7XG5cbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgZGF5Rm9ybWF0ID0gbWF0Y2hbMV0gPyAnZGRkJyArICgobWF0Y2hbMV0ubGVuZ3RoID09PSA1KSA/ICcsICcgOiAnICcpIDogJyc7XG4gICAgICAgIGRhdGVGb3JtYXQgPSAnRCBNTU0gJyArICgobWF0Y2hbMl0ubGVuZ3RoID4gMTApID8gJ1lZWVkgJyA6ICdZWSAnKTtcbiAgICAgICAgdGltZUZvcm1hdCA9ICdISDptbScgKyAobWF0Y2hbNF0gPyAnOnNzJyA6ICcnKTtcblxuICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIHRoZSB2YW5pbGxhIEpTIERhdGUgb2JqZWN0IHdpdGggYW4gaW5kZXBlbnRlbnQgZGF5LW9mLXdlZWsgY2hlY2suXG4gICAgICAgIGlmIChtYXRjaFsxXSkgeyAvLyBkYXkgb2Ygd2VlayBnaXZlblxuICAgICAgICAgICAgdmFyIG1vbWVudERhdGUgPSBuZXcgRGF0ZShtYXRjaFsyXSk7XG4gICAgICAgICAgICB2YXIgbW9tZW50RGF5ID0gWydTdW4nLCdNb24nLCdUdWUnLCdXZWQnLCdUaHUnLCdGcmknLCdTYXQnXVttb21lbnREYXRlLmdldERheSgpXTtcblxuICAgICAgICAgICAgaWYgKG1hdGNoWzFdLnN1YnN0cigwLDMpICE9PSBtb21lbnREYXkpIHtcbiAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS53ZWVrZGF5TWlzbWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbmZpZy5faXNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAobWF0Y2hbNV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDI6IC8vIG1pbGl0YXJ5XG4gICAgICAgICAgICAgICAgaWYgKHRpbWV6b25lSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXpvbmUgPSAnICswMDAwJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aW1lem9uZUluZGV4ID0gbWlsaXRhcnkuaW5kZXhPZihtYXRjaFs1XVsxXS50b1VwcGVyQ2FzZSgpKSAtIDEyO1xuICAgICAgICAgICAgICAgICAgICB0aW1lem9uZSA9ICgodGltZXpvbmVJbmRleCA8IDApID8gJyAtJyA6ICcgKycpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICgoJycgKyB0aW1lem9uZUluZGV4KS5yZXBsYWNlKC9eLT8vLCAnMCcpKS5tYXRjaCgvLi4kLylbMF0gKyAnMDAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDogLy8gWm9uZVxuICAgICAgICAgICAgICAgIHRpbWV6b25lID0gdGltZXpvbmVzW21hdGNoWzVdXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IC8vIFVUIG9yICsvLTk5OTlcbiAgICAgICAgICAgICAgICB0aW1lem9uZSA9IHRpbWV6b25lc1snIEdNVCddO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoWzVdID0gdGltZXpvbmU7XG4gICAgICAgIGNvbmZpZy5faSA9IG1hdGNoLnNwbGljZSgxKS5qb2luKCcnKTtcbiAgICAgICAgdHpGb3JtYXQgPSAnIFpaJztcbiAgICAgICAgY29uZmlnLl9mID0gZGF5Rm9ybWF0ICsgZGF0ZUZvcm1hdCArIHRpbWVGb3JtYXQgKyB0ekZvcm1hdDtcbiAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpO1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5yZmMyODIyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25maWcuX2lzVmFsaWQgPSBmYWxzZTtcbiAgICB9XG59XG5cbi8vIGRhdGUgZnJvbSBpc28gZm9ybWF0IG9yIGZhbGxiYWNrXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nKGNvbmZpZykge1xuICAgIHZhciBtYXRjaGVkID0gYXNwTmV0SnNvblJlZ2V4LmV4ZWMoY29uZmlnLl9pKTtcblxuICAgIGlmIChtYXRjaGVkICE9PSBudWxsKSB7XG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKCttYXRjaGVkWzFdKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbmZpZ0Zyb21JU08oY29uZmlnKTtcbiAgICBpZiAoY29uZmlnLl9pc1ZhbGlkID09PSBmYWxzZSkge1xuICAgICAgICBkZWxldGUgY29uZmlnLl9pc1ZhbGlkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25maWdGcm9tUkZDMjgyMihjb25maWcpO1xuICAgIGlmIChjb25maWcuX2lzVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgIGRlbGV0ZSBjb25maWcuX2lzVmFsaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZpbmFsIGF0dGVtcHQsIHVzZSBJbnB1dCBGYWxsYmFja1xuICAgIGhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGNvbmZpZyk7XG59XG5cbmhvb2tzLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrID0gZGVwcmVjYXRlKFxuICAgICd2YWx1ZSBwcm92aWRlZCBpcyBub3QgaW4gYSByZWNvZ25pemVkIFJGQzI4MjIgb3IgSVNPIGZvcm1hdC4gbW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUoKSwgJyArXG4gICAgJ3doaWNoIGlzIG5vdCByZWxpYWJsZSBhY3Jvc3MgYWxsIGJyb3dzZXJzIGFuZCB2ZXJzaW9ucy4gTm9uIFJGQzI4MjIvSVNPIGRhdGUgZm9ybWF0cyBhcmUgJyArXG4gICAgJ2Rpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvICcgK1xuICAgICdodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2pzLWRhdGUvIGZvciBtb3JlIGluZm8uJyxcbiAgICBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGNvbmZpZy5faSArIChjb25maWcuX3VzZVVUQyA/ICcgVVRDJyA6ICcnKSk7XG4gICAgfVxuKTtcblxuLy8gUGljayB0aGUgZmlyc3QgZGVmaW5lZCBvZiB0d28gb3IgdGhyZWUgYXJndW1lbnRzLlxuZnVuY3Rpb24gZGVmYXVsdHMoYSwgYiwgYykge1xuICAgIGlmIChhICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIGlmIChiICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfVxuICAgIHJldHVybiBjO1xufVxuXG5mdW5jdGlvbiBjdXJyZW50RGF0ZUFycmF5KGNvbmZpZykge1xuICAgIC8vIGhvb2tzIGlzIGFjdHVhbGx5IHRoZSBleHBvcnRlZCBtb21lbnQgb2JqZWN0XG4gICAgdmFyIG5vd1ZhbHVlID0gbmV3IERhdGUoaG9va3Mubm93KCkpO1xuICAgIGlmIChjb25maWcuX3VzZVVUQykge1xuICAgICAgICByZXR1cm4gW25vd1ZhbHVlLmdldFVUQ0Z1bGxZZWFyKCksIG5vd1ZhbHVlLmdldFVUQ01vbnRoKCksIG5vd1ZhbHVlLmdldFVUQ0RhdGUoKV07XG4gICAgfVxuICAgIHJldHVybiBbbm93VmFsdWUuZ2V0RnVsbFllYXIoKSwgbm93VmFsdWUuZ2V0TW9udGgoKSwgbm93VmFsdWUuZ2V0RGF0ZSgpXTtcbn1cblxuLy8gY29udmVydCBhbiBhcnJheSB0byBhIGRhdGUuXG4vLyB0aGUgYXJyYXkgc2hvdWxkIG1pcnJvciB0aGUgcGFyYW1ldGVycyBiZWxvd1xuLy8gbm90ZTogYWxsIHZhbHVlcyBwYXN0IHRoZSB5ZWFyIGFyZSBvcHRpb25hbCBhbmQgd2lsbCBkZWZhdWx0IHRvIHRoZSBsb3dlc3QgcG9zc2libGUgdmFsdWUuXG4vLyBbeWVhciwgbW9udGgsIGRheSAsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF1cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21BcnJheSAoY29uZmlnKSB7XG4gICAgdmFyIGksIGRhdGUsIGlucHV0ID0gW10sIGN1cnJlbnREYXRlLCB5ZWFyVG9Vc2U7XG5cbiAgICBpZiAoY29uZmlnLl9kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjdXJyZW50RGF0ZSA9IGN1cnJlbnREYXRlQXJyYXkoY29uZmlnKTtcblxuICAgIC8vY29tcHV0ZSBkYXkgb2YgdGhlIHllYXIgZnJvbSB3ZWVrcyBhbmQgd2Vla2RheXNcbiAgICBpZiAoY29uZmlnLl93ICYmIGNvbmZpZy5fYVtEQVRFXSA9PSBudWxsICYmIGNvbmZpZy5fYVtNT05USF0gPT0gbnVsbCkge1xuICAgICAgICBkYXlPZlllYXJGcm9tV2Vla0luZm8oY29uZmlnKTtcbiAgICB9XG5cbiAgICAvL2lmIHRoZSBkYXkgb2YgdGhlIHllYXIgaXMgc2V0LCBmaWd1cmUgb3V0IHdoYXQgaXQgaXNcbiAgICBpZiAoY29uZmlnLl9kYXlPZlllYXIgIT0gbnVsbCkge1xuICAgICAgICB5ZWFyVG9Vc2UgPSBkZWZhdWx0cyhjb25maWcuX2FbWUVBUl0sIGN1cnJlbnREYXRlW1lFQVJdKTtcblxuICAgICAgICBpZiAoY29uZmlnLl9kYXlPZlllYXIgPiBkYXlzSW5ZZWFyKHllYXJUb1VzZSkgfHwgY29uZmlnLl9kYXlPZlllYXIgPT09IDApIHtcbiAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLl9vdmVyZmxvd0RheU9mWWVhciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBkYXRlID0gY3JlYXRlVVRDRGF0ZSh5ZWFyVG9Vc2UsIDAsIGNvbmZpZy5fZGF5T2ZZZWFyKTtcbiAgICAgICAgY29uZmlnLl9hW01PTlRIXSA9IGRhdGUuZ2V0VVRDTW9udGgoKTtcbiAgICAgICAgY29uZmlnLl9hW0RBVEVdID0gZGF0ZS5nZXRVVENEYXRlKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCB0byBjdXJyZW50IGRhdGUuXG4gICAgLy8gKiBpZiBubyB5ZWFyLCBtb250aCwgZGF5IG9mIG1vbnRoIGFyZSBnaXZlbiwgZGVmYXVsdCB0byB0b2RheVxuICAgIC8vICogaWYgZGF5IG9mIG1vbnRoIGlzIGdpdmVuLCBkZWZhdWx0IG1vbnRoIGFuZCB5ZWFyXG4gICAgLy8gKiBpZiBtb250aCBpcyBnaXZlbiwgZGVmYXVsdCBvbmx5IHllYXJcbiAgICAvLyAqIGlmIHllYXIgaXMgZ2l2ZW4sIGRvbid0IGRlZmF1bHQgYW55dGhpbmdcbiAgICBmb3IgKGkgPSAwOyBpIDwgMyAmJiBjb25maWcuX2FbaV0gPT0gbnVsbDsgKytpKSB7XG4gICAgICAgIGNvbmZpZy5fYVtpXSA9IGlucHV0W2ldID0gY3VycmVudERhdGVbaV07XG4gICAgfVxuXG4gICAgLy8gWmVybyBvdXQgd2hhdGV2ZXIgd2FzIG5vdCBkZWZhdWx0ZWQsIGluY2x1ZGluZyB0aW1lXG4gICAgZm9yICg7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgY29uZmlnLl9hW2ldID0gaW5wdXRbaV0gPSAoY29uZmlnLl9hW2ldID09IG51bGwpID8gKGkgPT09IDIgPyAxIDogMCkgOiBjb25maWcuX2FbaV07XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIDI0OjAwOjAwLjAwMFxuICAgIGlmIChjb25maWcuX2FbSE9VUl0gPT09IDI0ICYmXG4gICAgICAgICAgICBjb25maWcuX2FbTUlOVVRFXSA9PT0gMCAmJlxuICAgICAgICAgICAgY29uZmlnLl9hW1NFQ09ORF0gPT09IDAgJiZcbiAgICAgICAgICAgIGNvbmZpZy5fYVtNSUxMSVNFQ09ORF0gPT09IDApIHtcbiAgICAgICAgY29uZmlnLl9uZXh0RGF5ID0gdHJ1ZTtcbiAgICAgICAgY29uZmlnLl9hW0hPVVJdID0gMDtcbiAgICB9XG5cbiAgICBjb25maWcuX2QgPSAoY29uZmlnLl91c2VVVEMgPyBjcmVhdGVVVENEYXRlIDogY3JlYXRlRGF0ZSkuYXBwbHkobnVsbCwgaW5wdXQpO1xuICAgIC8vIEFwcGx5IHRpbWV6b25lIG9mZnNldCBmcm9tIGlucHV0LiBUaGUgYWN0dWFsIHV0Y09mZnNldCBjYW4gYmUgY2hhbmdlZFxuICAgIC8vIHdpdGggcGFyc2Vab25lLlxuICAgIGlmIChjb25maWcuX3R6bSAhPSBudWxsKSB7XG4gICAgICAgIGNvbmZpZy5fZC5zZXRVVENNaW51dGVzKGNvbmZpZy5fZC5nZXRVVENNaW51dGVzKCkgLSBjb25maWcuX3R6bSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5fbmV4dERheSkge1xuICAgICAgICBjb25maWcuX2FbSE9VUl0gPSAyNDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRheU9mWWVhckZyb21XZWVrSW5mbyhjb25maWcpIHtcbiAgICB2YXIgdywgd2Vla1llYXIsIHdlZWssIHdlZWtkYXksIGRvdywgZG95LCB0ZW1wLCB3ZWVrZGF5T3ZlcmZsb3c7XG5cbiAgICB3ID0gY29uZmlnLl93O1xuICAgIGlmICh3LkdHICE9IG51bGwgfHwgdy5XICE9IG51bGwgfHwgdy5FICE9IG51bGwpIHtcbiAgICAgICAgZG93ID0gMTtcbiAgICAgICAgZG95ID0gNDtcblxuICAgICAgICAvLyBUT0RPOiBXZSBuZWVkIHRvIHRha2UgdGhlIGN1cnJlbnQgaXNvV2Vla1llYXIsIGJ1dCB0aGF0IGRlcGVuZHMgb25cbiAgICAgICAgLy8gaG93IHdlIGludGVycHJldCBub3cgKGxvY2FsLCB1dGMsIGZpeGVkIG9mZnNldCkuIFNvIGNyZWF0ZVxuICAgICAgICAvLyBhIG5vdyB2ZXJzaW9uIG9mIGN1cnJlbnQgY29uZmlnICh0YWtlIGxvY2FsL3V0Yy9vZmZzZXQgZmxhZ3MsIGFuZFxuICAgICAgICAvLyBjcmVhdGUgbm93KS5cbiAgICAgICAgd2Vla1llYXIgPSBkZWZhdWx0cyh3LkdHLCBjb25maWcuX2FbWUVBUl0sIHdlZWtPZlllYXIoY3JlYXRlTG9jYWwoKSwgMSwgNCkueWVhcik7XG4gICAgICAgIHdlZWsgPSBkZWZhdWx0cyh3LlcsIDEpO1xuICAgICAgICB3ZWVrZGF5ID0gZGVmYXVsdHMody5FLCAxKTtcbiAgICAgICAgaWYgKHdlZWtkYXkgPCAxIHx8IHdlZWtkYXkgPiA3KSB7XG4gICAgICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG93ID0gY29uZmlnLl9sb2NhbGUuX3dlZWsuZG93O1xuICAgICAgICBkb3kgPSBjb25maWcuX2xvY2FsZS5fd2Vlay5kb3k7XG5cbiAgICAgICAgdmFyIGN1cldlZWsgPSB3ZWVrT2ZZZWFyKGNyZWF0ZUxvY2FsKCksIGRvdywgZG95KTtcblxuICAgICAgICB3ZWVrWWVhciA9IGRlZmF1bHRzKHcuZ2csIGNvbmZpZy5fYVtZRUFSXSwgY3VyV2Vlay55ZWFyKTtcblxuICAgICAgICAvLyBEZWZhdWx0IHRvIGN1cnJlbnQgd2Vlay5cbiAgICAgICAgd2VlayA9IGRlZmF1bHRzKHcudywgY3VyV2Vlay53ZWVrKTtcblxuICAgICAgICBpZiAody5kICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHdlZWtkYXkgLS0gbG93IGRheSBudW1iZXJzIGFyZSBjb25zaWRlcmVkIG5leHQgd2Vla1xuICAgICAgICAgICAgd2Vla2RheSA9IHcuZDtcbiAgICAgICAgICAgIGlmICh3ZWVrZGF5IDwgMCB8fCB3ZWVrZGF5ID4gNikge1xuICAgICAgICAgICAgICAgIHdlZWtkYXlPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAody5lICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGxvY2FsIHdlZWtkYXkgLS0gY291bnRpbmcgc3RhcnRzIGZyb20gYmVnaW5pbmcgb2Ygd2Vla1xuICAgICAgICAgICAgd2Vla2RheSA9IHcuZSArIGRvdztcbiAgICAgICAgICAgIGlmICh3LmUgPCAwIHx8IHcuZSA+IDYpIHtcbiAgICAgICAgICAgICAgICB3ZWVrZGF5T3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBiZWdpbmluZyBvZiB3ZWVrXG4gICAgICAgICAgICB3ZWVrZGF5ID0gZG93O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh3ZWVrIDwgMSB8fCB3ZWVrID4gd2Vla3NJblllYXIod2Vla1llYXIsIGRvdywgZG95KSkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrcyA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh3ZWVrZGF5T3ZlcmZsb3cgIT0gbnVsbCkge1xuICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS5fb3ZlcmZsb3dXZWVrZGF5ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0ZW1wID0gZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gICAgICAgIGNvbmZpZy5fYVtZRUFSXSA9IHRlbXAueWVhcjtcbiAgICAgICAgY29uZmlnLl9kYXlPZlllYXIgPSB0ZW1wLmRheU9mWWVhcjtcbiAgICB9XG59XG5cbi8vIGNvbnN0YW50IHRoYXQgcmVmZXJzIHRvIHRoZSBJU08gc3RhbmRhcmRcbmhvb2tzLklTT184NjAxID0gZnVuY3Rpb24gKCkge307XG5cbi8vIGNvbnN0YW50IHRoYXQgcmVmZXJzIHRvIHRoZSBSRkMgMjgyMiBmb3JtXG5ob29rcy5SRkNfMjgyMiA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vLyBkYXRlIGZyb20gc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nXG5mdW5jdGlvbiBjb25maWdGcm9tU3RyaW5nQW5kRm9ybWF0KGNvbmZpZykge1xuICAgIC8vIFRPRE86IE1vdmUgdGhpcyB0byBhbm90aGVyIHBhcnQgb2YgdGhlIGNyZWF0aW9uIGZsb3cgdG8gcHJldmVudCBjaXJjdWxhciBkZXBzXG4gICAgaWYgKGNvbmZpZy5fZiA9PT0gaG9va3MuSVNPXzg2MDEpIHtcbiAgICAgICAgY29uZmlnRnJvbUlTTyhjb25maWcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb25maWcuX2YgPT09IGhvb2tzLlJGQ18yODIyKSB7XG4gICAgICAgIGNvbmZpZ0Zyb21SRkMyODIyKGNvbmZpZyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uZmlnLl9hID0gW107XG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuZW1wdHkgPSB0cnVlO1xuXG4gICAgLy8gVGhpcyBhcnJheSBpcyB1c2VkIHRvIG1ha2UgYSBEYXRlLCBlaXRoZXIgd2l0aCBgbmV3IERhdGVgIG9yIGBEYXRlLlVUQ2BcbiAgICB2YXIgc3RyaW5nID0gJycgKyBjb25maWcuX2ksXG4gICAgICAgIGksIHBhcnNlZElucHV0LCB0b2tlbnMsIHRva2VuLCBza2lwcGVkLFxuICAgICAgICBzdHJpbmdMZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuICAgICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoID0gMDtcblxuICAgIHRva2VucyA9IGV4cGFuZEZvcm1hdChjb25maWcuX2YsIGNvbmZpZy5fbG9jYWxlKS5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKSB8fCBbXTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgIHBhcnNlZElucHV0ID0gKHN0cmluZy5tYXRjaChnZXRQYXJzZVJlZ2V4Rm9yVG9rZW4odG9rZW4sIGNvbmZpZykpIHx8IFtdKVswXTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Rva2VuJywgdG9rZW4sICdwYXJzZWRJbnB1dCcsIHBhcnNlZElucHV0LFxuICAgICAgICAvLyAgICAgICAgICdyZWdleCcsIGdldFBhcnNlUmVnZXhGb3JUb2tlbih0b2tlbiwgY29uZmlnKSk7XG4gICAgICAgIGlmIChwYXJzZWRJbnB1dCkge1xuICAgICAgICAgICAgc2tpcHBlZCA9IHN0cmluZy5zdWJzdHIoMCwgc3RyaW5nLmluZGV4T2YocGFyc2VkSW5wdXQpKTtcbiAgICAgICAgICAgIGlmIChza2lwcGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRJbnB1dC5wdXNoKHNraXBwZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyaW5nID0gc3RyaW5nLnNsaWNlKHN0cmluZy5pbmRleE9mKHBhcnNlZElucHV0KSArIHBhcnNlZElucHV0Lmxlbmd0aCk7XG4gICAgICAgICAgICB0b3RhbFBhcnNlZElucHV0TGVuZ3RoICs9IHBhcnNlZElucHV0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICAvLyBkb24ndCBwYXJzZSBpZiBpdCdzIG5vdCBhIGtub3duIHRva2VuXG4gICAgICAgIGlmIChmb3JtYXRUb2tlbkZ1bmN0aW9uc1t0b2tlbl0pIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWRJbnB1dCkge1xuICAgICAgICAgICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmVtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRUb2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRUaW1lVG9BcnJheUZyb21Ub2tlbih0b2tlbiwgcGFyc2VkSW5wdXQsIGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnLl9zdHJpY3QgJiYgIXBhcnNlZElucHV0KSB7XG4gICAgICAgICAgICBnZXRQYXJzaW5nRmxhZ3MoY29uZmlnKS51bnVzZWRUb2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhZGQgcmVtYWluaW5nIHVucGFyc2VkIGlucHV0IGxlbmd0aCB0byB0aGUgc3RyaW5nXG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuY2hhcnNMZWZ0T3ZlciA9IHN0cmluZ0xlbmd0aCAtIHRvdGFsUGFyc2VkSW5wdXRMZW5ndGg7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLnVudXNlZElucHV0LnB1c2goc3RyaW5nKTtcbiAgICB9XG5cbiAgICAvLyBjbGVhciBfMTJoIGZsYWcgaWYgaG91ciBpcyA8PSAxMlxuICAgIGlmIChjb25maWcuX2FbSE9VUl0gPD0gMTIgJiZcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuYmlnSG91ciA9PT0gdHJ1ZSAmJlxuICAgICAgICBjb25maWcuX2FbSE9VUl0gPiAwKSB7XG4gICAgICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLmJpZ0hvdXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykucGFyc2VkRGF0ZVBhcnRzID0gY29uZmlnLl9hLnNsaWNlKDApO1xuICAgIGdldFBhcnNpbmdGbGFncyhjb25maWcpLm1lcmlkaWVtID0gY29uZmlnLl9tZXJpZGllbTtcbiAgICAvLyBoYW5kbGUgbWVyaWRpZW1cbiAgICBjb25maWcuX2FbSE9VUl0gPSBtZXJpZGllbUZpeFdyYXAoY29uZmlnLl9sb2NhbGUsIGNvbmZpZy5fYVtIT1VSXSwgY29uZmlnLl9tZXJpZGllbSk7XG5cbiAgICBjb25maWdGcm9tQXJyYXkoY29uZmlnKTtcbiAgICBjaGVja092ZXJmbG93KGNvbmZpZyk7XG59XG5cblxuZnVuY3Rpb24gbWVyaWRpZW1GaXhXcmFwIChsb2NhbGUsIGhvdXIsIG1lcmlkaWVtKSB7XG4gICAgdmFyIGlzUG07XG5cbiAgICBpZiAobWVyaWRpZW0gPT0gbnVsbCkge1xuICAgICAgICAvLyBub3RoaW5nIHRvIGRvXG4gICAgICAgIHJldHVybiBob3VyO1xuICAgIH1cbiAgICBpZiAobG9jYWxlLm1lcmlkaWVtSG91ciAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUubWVyaWRpZW1Ib3VyKGhvdXIsIG1lcmlkaWVtKTtcbiAgICB9IGVsc2UgaWYgKGxvY2FsZS5pc1BNICE9IG51bGwpIHtcbiAgICAgICAgLy8gRmFsbGJhY2tcbiAgICAgICAgaXNQbSA9IGxvY2FsZS5pc1BNKG1lcmlkaWVtKTtcbiAgICAgICAgaWYgKGlzUG0gJiYgaG91ciA8IDEyKSB7XG4gICAgICAgICAgICBob3VyICs9IDEyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNQbSAmJiBob3VyID09PSAxMikge1xuICAgICAgICAgICAgaG91ciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhvdXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdGhpcyBpcyBub3Qgc3VwcG9zZWQgdG8gaGFwcGVuXG4gICAgICAgIHJldHVybiBob3VyO1xuICAgIH1cbn1cblxuLy8gZGF0ZSBmcm9tIHN0cmluZyBhbmQgYXJyYXkgb2YgZm9ybWF0IHN0cmluZ3NcbmZ1bmN0aW9uIGNvbmZpZ0Zyb21TdHJpbmdBbmRBcnJheShjb25maWcpIHtcbiAgICB2YXIgdGVtcENvbmZpZyxcbiAgICAgICAgYmVzdE1vbWVudCxcblxuICAgICAgICBzY29yZVRvQmVhdCxcbiAgICAgICAgaSxcbiAgICAgICAgY3VycmVudFNjb3JlO1xuXG4gICAgaWYgKGNvbmZpZy5fZi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZ2V0UGFyc2luZ0ZsYWdzKGNvbmZpZykuaW52YWxpZEZvcm1hdCA9IHRydWU7XG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKE5hTik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgY29uZmlnLl9mLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRTY29yZSA9IDA7XG4gICAgICAgIHRlbXBDb25maWcgPSBjb3B5Q29uZmlnKHt9LCBjb25maWcpO1xuICAgICAgICBpZiAoY29uZmlnLl91c2VVVEMgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGVtcENvbmZpZy5fdXNlVVRDID0gY29uZmlnLl91c2VVVEM7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcENvbmZpZy5fZiA9IGNvbmZpZy5fZltpXTtcbiAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdCh0ZW1wQ29uZmlnKTtcblxuICAgICAgICBpZiAoIWlzVmFsaWQodGVtcENvbmZpZykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW55IGlucHV0IHRoYXQgd2FzIG5vdCBwYXJzZWQgYWRkIGEgcGVuYWx0eSBmb3IgdGhhdCBmb3JtYXRcbiAgICAgICAgY3VycmVudFNjb3JlICs9IGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5jaGFyc0xlZnRPdmVyO1xuXG4gICAgICAgIC8vb3IgdG9rZW5zXG4gICAgICAgIGN1cnJlbnRTY29yZSArPSBnZXRQYXJzaW5nRmxhZ3ModGVtcENvbmZpZykudW51c2VkVG9rZW5zLmxlbmd0aCAqIDEwO1xuXG4gICAgICAgIGdldFBhcnNpbmdGbGFncyh0ZW1wQ29uZmlnKS5zY29yZSA9IGN1cnJlbnRTY29yZTtcblxuICAgICAgICBpZiAoc2NvcmVUb0JlYXQgPT0gbnVsbCB8fCBjdXJyZW50U2NvcmUgPCBzY29yZVRvQmVhdCkge1xuICAgICAgICAgICAgc2NvcmVUb0JlYXQgPSBjdXJyZW50U2NvcmU7XG4gICAgICAgICAgICBiZXN0TW9tZW50ID0gdGVtcENvbmZpZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4dGVuZChjb25maWcsIGJlc3RNb21lbnQgfHwgdGVtcENvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21PYmplY3QoY29uZmlnKSB7XG4gICAgaWYgKGNvbmZpZy5fZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGkgPSBub3JtYWxpemVPYmplY3RVbml0cyhjb25maWcuX2kpO1xuICAgIGNvbmZpZy5fYSA9IG1hcChbaS55ZWFyLCBpLm1vbnRoLCBpLmRheSB8fCBpLmRhdGUsIGkuaG91ciwgaS5taW51dGUsIGkuc2Vjb25kLCBpLm1pbGxpc2Vjb25kXSwgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIHBhcnNlSW50KG9iaiwgMTApO1xuICAgIH0pO1xuXG4gICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21Db25maWcgKGNvbmZpZykge1xuICAgIHZhciByZXMgPSBuZXcgTW9tZW50KGNoZWNrT3ZlcmZsb3cocHJlcGFyZUNvbmZpZyhjb25maWcpKSk7XG4gICAgaWYgKHJlcy5fbmV4dERheSkge1xuICAgICAgICAvLyBBZGRpbmcgaXMgc21hcnQgZW5vdWdoIGFyb3VuZCBEU1RcbiAgICAgICAgcmVzLmFkZCgxLCAnZCcpO1xuICAgICAgICByZXMuX25leHREYXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gcHJlcGFyZUNvbmZpZyAoY29uZmlnKSB7XG4gICAgdmFyIGlucHV0ID0gY29uZmlnLl9pLFxuICAgICAgICBmb3JtYXQgPSBjb25maWcuX2Y7XG5cbiAgICBjb25maWcuX2xvY2FsZSA9IGNvbmZpZy5fbG9jYWxlIHx8IGdldExvY2FsZShjb25maWcuX2wpO1xuXG4gICAgaWYgKGlucHV0ID09PSBudWxsIHx8IChmb3JtYXQgPT09IHVuZGVmaW5lZCAmJiBpbnB1dCA9PT0gJycpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVJbnZhbGlkKHtudWxsSW5wdXQ6IHRydWV9KTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25maWcuX2kgPSBpbnB1dCA9IGNvbmZpZy5fbG9jYWxlLnByZXBhcnNlKGlucHV0KTtcbiAgICB9XG5cbiAgICBpZiAoaXNNb21lbnQoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW9tZW50KGNoZWNrT3ZlcmZsb3coaW5wdXQpKTtcbiAgICB9IGVsc2UgaWYgKGlzRGF0ZShpbnB1dCkpIHtcbiAgICAgICAgY29uZmlnLl9kID0gaW5wdXQ7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGZvcm1hdCkpIHtcbiAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEFycmF5KGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChmb3JtYXQpIHtcbiAgICAgICAgY29uZmlnRnJvbVN0cmluZ0FuZEZvcm1hdChjb25maWcpO1xuICAgIH0gIGVsc2Uge1xuICAgICAgICBjb25maWdGcm9tSW5wdXQoY29uZmlnKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzVmFsaWQoY29uZmlnKSkge1xuICAgICAgICBjb25maWcuX2QgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBjb25maWc7XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0Zyb21JbnB1dChjb25maWcpIHtcbiAgICB2YXIgaW5wdXQgPSBjb25maWcuX2k7XG4gICAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSkge1xuICAgICAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShob29rcy5ub3coKSk7XG4gICAgfSBlbHNlIGlmIChpc0RhdGUoaW5wdXQpKSB7XG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGlucHV0LnZhbHVlT2YoKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbmZpZ0Zyb21TdHJpbmcoY29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIGNvbmZpZy5fYSA9IG1hcChpbnB1dC5zbGljZSgwKSwgZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KG9iaiwgMTApO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlnRnJvbUFycmF5KGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdChpbnB1dCkpIHtcbiAgICAgICAgY29uZmlnRnJvbU9iamVjdChjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIoaW5wdXQpKSB7XG4gICAgICAgIC8vIGZyb20gbWlsbGlzZWNvbmRzXG4gICAgICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBob29rcy5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhjb25maWcpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9jYWxPclVUQyAoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QsIGlzVVRDKSB7XG4gICAgdmFyIGMgPSB7fTtcblxuICAgIGlmIChsb2NhbGUgPT09IHRydWUgfHwgbG9jYWxlID09PSBmYWxzZSkge1xuICAgICAgICBzdHJpY3QgPSBsb2NhbGU7XG4gICAgICAgIGxvY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoKGlzT2JqZWN0KGlucHV0KSAmJiBpc09iamVjdEVtcHR5KGlucHV0KSkgfHxcbiAgICAgICAgICAgIChpc0FycmF5KGlucHV0KSAmJiBpbnB1dC5sZW5ndGggPT09IDApKSB7XG4gICAgICAgIGlucHV0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBvYmplY3QgY29uc3RydWN0aW9uIG11c3QgYmUgZG9uZSB0aGlzIHdheS5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTQyM1xuICAgIGMuX2lzQU1vbWVudE9iamVjdCA9IHRydWU7XG4gICAgYy5fdXNlVVRDID0gYy5faXNVVEMgPSBpc1VUQztcbiAgICBjLl9sID0gbG9jYWxlO1xuICAgIGMuX2kgPSBpbnB1dDtcbiAgICBjLl9mID0gZm9ybWF0O1xuICAgIGMuX3N0cmljdCA9IHN0cmljdDtcblxuICAgIHJldHVybiBjcmVhdGVGcm9tQ29uZmlnKGMpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2NhbCAoaW5wdXQsIGZvcm1hdCwgbG9jYWxlLCBzdHJpY3QpIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWxPclVUQyhpbnB1dCwgZm9ybWF0LCBsb2NhbGUsIHN0cmljdCwgZmFsc2UpO1xufVxuXG52YXIgcHJvdG90eXBlTWluID0gZGVwcmVjYXRlKFxuICAgICdtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5tYXggaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy9taW4tbWF4LycsXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3RoZXIgPSBjcmVhdGVMb2NhbC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiYgb3RoZXIuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gb3RoZXIgPCB0aGlzID8gdGhpcyA6IG90aGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUludmFsaWQoKTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbnZhciBwcm90b3R5cGVNYXggPSBkZXByZWNhdGUoXG4gICAgJ21vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1pbiBpbnN0ZWFkLiBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL21pbi1tYXgvJyxcbiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvdGhlciA9IGNyZWF0ZUxvY2FsLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWQoKSAmJiBvdGhlci5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBvdGhlciA+IHRoaXMgPyB0aGlzIDogb3RoZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlSW52YWxpZCgpO1xuICAgICAgICB9XG4gICAgfVxuKTtcblxuLy8gUGljayBhIG1vbWVudCBtIGZyb20gbW9tZW50cyBzbyB0aGF0IG1bZm5dKG90aGVyKSBpcyB0cnVlIGZvciBhbGxcbi8vIG90aGVyLiBUaGlzIHJlbGllcyBvbiB0aGUgZnVuY3Rpb24gZm4gdG8gYmUgdHJhbnNpdGl2ZS5cbi8vXG4vLyBtb21lbnRzIHNob3VsZCBlaXRoZXIgYmUgYW4gYXJyYXkgb2YgbW9tZW50IG9iamVjdHMgb3IgYW4gYXJyYXksIHdob3NlXG4vLyBmaXJzdCBlbGVtZW50IGlzIGFuIGFycmF5IG9mIG1vbWVudCBvYmplY3RzLlxuZnVuY3Rpb24gcGlja0J5KGZuLCBtb21lbnRzKSB7XG4gICAgdmFyIHJlcywgaTtcbiAgICBpZiAobW9tZW50cy5sZW5ndGggPT09IDEgJiYgaXNBcnJheShtb21lbnRzWzBdKSkge1xuICAgICAgICBtb21lbnRzID0gbW9tZW50c1swXTtcbiAgICB9XG4gICAgaWYgKCFtb21lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlTG9jYWwoKTtcbiAgICB9XG4gICAgcmVzID0gbW9tZW50c1swXTtcbiAgICBmb3IgKGkgPSAxOyBpIDwgbW9tZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoIW1vbWVudHNbaV0uaXNWYWxpZCgpIHx8IG1vbWVudHNbaV1bZm5dKHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IG1vbWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuLy8gVE9ETzogVXNlIFtdLnNvcnQgaW5zdGVhZD9cbmZ1bmN0aW9uIG1pbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cbiAgICByZXR1cm4gcGlja0J5KCdpc0JlZm9yZScsIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBtYXggKCkge1xuICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gICAgcmV0dXJuIHBpY2tCeSgnaXNBZnRlcicsIGFyZ3MpO1xufVxuXG52YXIgbm93ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBEYXRlLm5vdyA/IERhdGUubm93KCkgOiArKG5ldyBEYXRlKCkpO1xufTtcblxudmFyIG9yZGVyaW5nID0gWyd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgJ21pbGxpc2Vjb25kJ107XG5cbmZ1bmN0aW9uIGlzRHVyYXRpb25WYWxpZChtKSB7XG4gICAgZm9yICh2YXIga2V5IGluIG0pIHtcbiAgICAgICAgaWYgKCEob3JkZXJpbmcuaW5kZXhPZihrZXkpICE9PSAtMSAmJiAobVtrZXldID09IG51bGwgfHwgIWlzTmFOKG1ba2V5XSkpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHVuaXRIYXNEZWNpbWFsID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcmRlcmluZy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAobVtvcmRlcmluZ1tpXV0pIHtcbiAgICAgICAgICAgIGlmICh1bml0SGFzRGVjaW1hbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gb25seSBhbGxvdyBub24taW50ZWdlcnMgZm9yIHNtYWxsZXN0IHVuaXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KG1bb3JkZXJpbmdbaV1dKSAhPT0gdG9JbnQobVtvcmRlcmluZ1tpXV0pKSB7XG4gICAgICAgICAgICAgICAgdW5pdEhhc0RlY2ltYWwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWQkMSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNWYWxpZDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW52YWxpZCQxKCkge1xuICAgIHJldHVybiBjcmVhdGVEdXJhdGlvbihOYU4pO1xufVxuXG5mdW5jdGlvbiBEdXJhdGlvbiAoZHVyYXRpb24pIHtcbiAgICB2YXIgbm9ybWFsaXplZElucHV0ID0gbm9ybWFsaXplT2JqZWN0VW5pdHMoZHVyYXRpb24pLFxuICAgICAgICB5ZWFycyA9IG5vcm1hbGl6ZWRJbnB1dC55ZWFyIHx8IDAsXG4gICAgICAgIHF1YXJ0ZXJzID0gbm9ybWFsaXplZElucHV0LnF1YXJ0ZXIgfHwgMCxcbiAgICAgICAgbW9udGhzID0gbm9ybWFsaXplZElucHV0Lm1vbnRoIHx8IDAsXG4gICAgICAgIHdlZWtzID0gbm9ybWFsaXplZElucHV0LndlZWsgfHwgMCxcbiAgICAgICAgZGF5cyA9IG5vcm1hbGl6ZWRJbnB1dC5kYXkgfHwgMCxcbiAgICAgICAgaG91cnMgPSBub3JtYWxpemVkSW5wdXQuaG91ciB8fCAwLFxuICAgICAgICBtaW51dGVzID0gbm9ybWFsaXplZElucHV0Lm1pbnV0ZSB8fCAwLFxuICAgICAgICBzZWNvbmRzID0gbm9ybWFsaXplZElucHV0LnNlY29uZCB8fCAwLFxuICAgICAgICBtaWxsaXNlY29uZHMgPSBub3JtYWxpemVkSW5wdXQubWlsbGlzZWNvbmQgfHwgMDtcblxuICAgIHRoaXMuX2lzVmFsaWQgPSBpc0R1cmF0aW9uVmFsaWQobm9ybWFsaXplZElucHV0KTtcblxuICAgIC8vIHJlcHJlc2VudGF0aW9uIGZvciBkYXRlQWRkUmVtb3ZlXG4gICAgdGhpcy5fbWlsbGlzZWNvbmRzID0gK21pbGxpc2Vjb25kcyArXG4gICAgICAgIHNlY29uZHMgKiAxZTMgKyAvLyAxMDAwXG4gICAgICAgIG1pbnV0ZXMgKiA2ZTQgKyAvLyAxMDAwICogNjBcbiAgICAgICAgaG91cnMgKiAxMDAwICogNjAgKiA2MDsgLy91c2luZyAxMDAwICogNjAgKiA2MCBpbnN0ZWFkIG9mIDM2ZTUgdG8gYXZvaWQgZmxvYXRpbmcgcG9pbnQgcm91bmRpbmcgZXJyb3JzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8yOTc4XG4gICAgLy8gQmVjYXVzZSBvZiBkYXRlQWRkUmVtb3ZlIHRyZWF0cyAyNCBob3VycyBhcyBkaWZmZXJlbnQgZnJvbSBhXG4gICAgLy8gZGF5IHdoZW4gd29ya2luZyBhcm91bmQgRFNULCB3ZSBuZWVkIHRvIHN0b3JlIHRoZW0gc2VwYXJhdGVseVxuICAgIHRoaXMuX2RheXMgPSArZGF5cyArXG4gICAgICAgIHdlZWtzICogNztcbiAgICAvLyBJdCBpcyBpbXBvc3NpYmxlIHRyYW5zbGF0ZSBtb250aHMgaW50byBkYXlzIHdpdGhvdXQga25vd2luZ1xuICAgIC8vIHdoaWNoIG1vbnRocyB5b3UgYXJlIGFyZSB0YWxraW5nIGFib3V0LCBzbyB3ZSBoYXZlIHRvIHN0b3JlXG4gICAgLy8gaXQgc2VwYXJhdGVseS5cbiAgICB0aGlzLl9tb250aHMgPSArbW9udGhzICtcbiAgICAgICAgcXVhcnRlcnMgKiAzICtcbiAgICAgICAgeWVhcnMgKiAxMjtcblxuICAgIHRoaXMuX2RhdGEgPSB7fTtcblxuICAgIHRoaXMuX2xvY2FsZSA9IGdldExvY2FsZSgpO1xuXG4gICAgdGhpcy5fYnViYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGlzRHVyYXRpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBEdXJhdGlvbjtcbn1cblxuZnVuY3Rpb24gYWJzUm91bmQgKG51bWJlcikge1xuICAgIGlmIChudW1iZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKC0xICogbnVtYmVyKSAqIC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlcik7XG4gICAgfVxufVxuXG4vLyBGT1JNQVRUSU5HXG5cbmZ1bmN0aW9uIG9mZnNldCAodG9rZW4sIHNlcGFyYXRvcikge1xuICAgIGFkZEZvcm1hdFRva2VuKHRva2VuLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLnV0Y09mZnNldCgpO1xuICAgICAgICB2YXIgc2lnbiA9ICcrJztcbiAgICAgICAgaWYgKG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgIG9mZnNldCA9IC1vZmZzZXQ7XG4gICAgICAgICAgICBzaWduID0gJy0nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaWduICsgemVyb0ZpbGwofn4ob2Zmc2V0IC8gNjApLCAyKSArIHNlcGFyYXRvciArIHplcm9GaWxsKH5+KG9mZnNldCkgJSA2MCwgMik7XG4gICAgfSk7XG59XG5cbm9mZnNldCgnWicsICc6Jyk7XG5vZmZzZXQoJ1paJywgJycpO1xuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ1onLCAgbWF0Y2hTaG9ydE9mZnNldCk7XG5hZGRSZWdleFRva2VuKCdaWicsIG1hdGNoU2hvcnRPZmZzZXQpO1xuYWRkUGFyc2VUb2tlbihbJ1onLCAnWlonXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgY29uZmlnLl91c2VVVEMgPSB0cnVlO1xuICAgIGNvbmZpZy5fdHptID0gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LCBpbnB1dCk7XG59KTtcblxuLy8gSEVMUEVSU1xuXG4vLyB0aW1lem9uZSBjaHVua2VyXG4vLyAnKzEwOjAwJyA+IFsnMTAnLCAgJzAwJ11cbi8vICctMTUzMCcgID4gWyctMTUnLCAnMzAnXVxudmFyIGNodW5rT2Zmc2V0ID0gLyhbXFwrXFwtXXxcXGRcXGQpL2dpO1xuXG5mdW5jdGlvbiBvZmZzZXRGcm9tU3RyaW5nKG1hdGNoZXIsIHN0cmluZykge1xuICAgIHZhciBtYXRjaGVzID0gKHN0cmluZyB8fCAnJykubWF0Y2gobWF0Y2hlcik7XG5cbiAgICBpZiAobWF0Y2hlcyA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY2h1bmsgICA9IG1hdGNoZXNbbWF0Y2hlcy5sZW5ndGggLSAxXSB8fCBbXTtcbiAgICB2YXIgcGFydHMgICA9IChjaHVuayArICcnKS5tYXRjaChjaHVua09mZnNldCkgfHwgWyctJywgMCwgMF07XG4gICAgdmFyIG1pbnV0ZXMgPSArKHBhcnRzWzFdICogNjApICsgdG9JbnQocGFydHNbMl0pO1xuXG4gICAgcmV0dXJuIG1pbnV0ZXMgPT09IDAgP1xuICAgICAgMCA6XG4gICAgICBwYXJ0c1swXSA9PT0gJysnID8gbWludXRlcyA6IC1taW51dGVzO1xufVxuXG4vLyBSZXR1cm4gYSBtb21lbnQgZnJvbSBpbnB1dCwgdGhhdCBpcyBsb2NhbC91dGMvem9uZSBlcXVpdmFsZW50IHRvIG1vZGVsLlxuZnVuY3Rpb24gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCBtb2RlbCkge1xuICAgIHZhciByZXMsIGRpZmY7XG4gICAgaWYgKG1vZGVsLl9pc1VUQykge1xuICAgICAgICByZXMgPSBtb2RlbC5jbG9uZSgpO1xuICAgICAgICBkaWZmID0gKGlzTW9tZW50KGlucHV0KSB8fCBpc0RhdGUoaW5wdXQpID8gaW5wdXQudmFsdWVPZigpIDogY3JlYXRlTG9jYWwoaW5wdXQpLnZhbHVlT2YoKSkgLSByZXMudmFsdWVPZigpO1xuICAgICAgICAvLyBVc2UgbG93LWxldmVsIGFwaSwgYmVjYXVzZSB0aGlzIGZuIGlzIGxvdy1sZXZlbCBhcGkuXG4gICAgICAgIHJlcy5fZC5zZXRUaW1lKHJlcy5fZC52YWx1ZU9mKCkgKyBkaWZmKTtcbiAgICAgICAgaG9va3MudXBkYXRlT2Zmc2V0KHJlcywgZmFsc2UpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVMb2NhbChpbnB1dCkubG9jYWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldERhdGVPZmZzZXQgKG0pIHtcbiAgICAvLyBPbiBGaXJlZm94LjI0IERhdGUjZ2V0VGltZXpvbmVPZmZzZXQgcmV0dXJucyBhIGZsb2F0aW5nIHBvaW50LlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L3B1bGwvMTg3MVxuICAgIHJldHVybiAtTWF0aC5yb3VuZChtLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkgLyAxNSkgKiAxNTtcbn1cblxuLy8gSE9PS1NcblxuLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCB3aGVuZXZlciBhIG1vbWVudCBpcyBtdXRhdGVkLlxuLy8gSXQgaXMgaW50ZW5kZWQgdG8ga2VlcCB0aGUgb2Zmc2V0IGluIHN5bmMgd2l0aCB0aGUgdGltZXpvbmUuXG5ob29rcy51cGRhdGVPZmZzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuLy8gTU9NRU5UU1xuXG4vLyBrZWVwTG9jYWxUaW1lID0gdHJ1ZSBtZWFucyBvbmx5IGNoYW5nZSB0aGUgdGltZXpvbmUsIHdpdGhvdXRcbi8vIGFmZmVjdGluZyB0aGUgbG9jYWwgaG91ci4gU28gNTozMToyNiArMDMwMCAtLVt1dGNPZmZzZXQoMiwgdHJ1ZSldLS0+XG4vLyA1OjMxOjI2ICswMjAwIEl0IGlzIHBvc3NpYmxlIHRoYXQgNTozMToyNiBkb2Vzbid0IGV4aXN0IHdpdGggb2Zmc2V0XG4vLyArMDIwMCwgc28gd2UgYWRqdXN0IHRoZSB0aW1lIGFzIG5lZWRlZCwgdG8gYmUgdmFsaWQuXG4vL1xuLy8gS2VlcGluZyB0aGUgdGltZSBhY3R1YWxseSBhZGRzL3N1YnRyYWN0cyAob25lIGhvdXIpXG4vLyBmcm9tIHRoZSBhY3R1YWwgcmVwcmVzZW50ZWQgdGltZS4gVGhhdCBpcyB3aHkgd2UgY2FsbCB1cGRhdGVPZmZzZXRcbi8vIGEgc2Vjb25kIHRpbWUuIEluIGNhc2UgaXQgd2FudHMgdXMgdG8gY2hhbmdlIHRoZSBvZmZzZXQgYWdhaW5cbi8vIF9jaGFuZ2VJblByb2dyZXNzID09IHRydWUgY2FzZSwgdGhlbiB3ZSBoYXZlIHRvIGFkanVzdCwgYmVjYXVzZVxuLy8gdGhlcmUgaXMgbm8gc3VjaCB0aW1lIGluIHRoZSBnaXZlbiB0aW1lem9uZS5cbmZ1bmN0aW9uIGdldFNldE9mZnNldCAoaW5wdXQsIGtlZXBMb2NhbFRpbWUsIGtlZXBNaW51dGVzKSB7XG4gICAgdmFyIG9mZnNldCA9IHRoaXMuX29mZnNldCB8fCAwLFxuICAgICAgICBsb2NhbEFkanVzdDtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBpbnB1dCAhPSBudWxsID8gdGhpcyA6IE5hTjtcbiAgICB9XG4gICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlucHV0ID0gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaFNob3J0T2Zmc2V0LCBpbnB1dCk7XG4gICAgICAgICAgICBpZiAoaW5wdXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChNYXRoLmFicyhpbnB1dCkgPCAxNiAmJiAha2VlcE1pbnV0ZXMpIHtcbiAgICAgICAgICAgIGlucHV0ID0gaW5wdXQgKiA2MDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2lzVVRDICYmIGtlZXBMb2NhbFRpbWUpIHtcbiAgICAgICAgICAgIGxvY2FsQWRqdXN0ID0gZ2V0RGF0ZU9mZnNldCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vZmZzZXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5faXNVVEMgPSB0cnVlO1xuICAgICAgICBpZiAobG9jYWxBZGp1c3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hZGQobG9jYWxBZGp1c3QsICdtJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldCAhPT0gaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICgha2VlcExvY2FsVGltZSB8fCB0aGlzLl9jaGFuZ2VJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgYWRkU3VidHJhY3QodGhpcywgY3JlYXRlRHVyYXRpb24oaW5wdXQgLSBvZmZzZXQsICdtJyksIDEsIGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2NoYW5nZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGFuZ2VJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBob29rcy51cGRhdGVPZmZzZXQodGhpcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVVRDID8gb2Zmc2V0IDogZ2V0RGF0ZU9mZnNldCh0aGlzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFNldFpvbmUgKGlucHV0LCBrZWVwTG9jYWxUaW1lKSB7XG4gICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlucHV0ID0gLWlucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51dGNPZmZzZXQoaW5wdXQsIGtlZXBMb2NhbFRpbWUpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAtdGhpcy51dGNPZmZzZXQoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldE9mZnNldFRvVVRDIChrZWVwTG9jYWxUaW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xufVxuXG5mdW5jdGlvbiBzZXRPZmZzZXRUb0xvY2FsIChrZWVwTG9jYWxUaW1lKSB7XG4gICAgaWYgKHRoaXMuX2lzVVRDKSB7XG4gICAgICAgIHRoaXMudXRjT2Zmc2V0KDAsIGtlZXBMb2NhbFRpbWUpO1xuICAgICAgICB0aGlzLl9pc1VUQyA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChrZWVwTG9jYWxUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnRyYWN0KGdldERhdGVPZmZzZXQodGhpcyksICdtJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0ICgpIHtcbiAgICBpZiAodGhpcy5fdHptICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy51dGNPZmZzZXQodGhpcy5fdHptLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5faSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIHRab25lID0gb2Zmc2V0RnJvbVN0cmluZyhtYXRjaE9mZnNldCwgdGhpcy5faSk7XG4gICAgICAgIGlmICh0Wm9uZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCh0Wm9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnV0Y09mZnNldCgwLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gaGFzQWxpZ25lZEhvdXJPZmZzZXQgKGlucHV0KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlucHV0ID0gaW5wdXQgPyBjcmVhdGVMb2NhbChpbnB1dCkudXRjT2Zmc2V0KCkgOiAwO1xuXG4gICAgcmV0dXJuICh0aGlzLnV0Y09mZnNldCgpIC0gaW5wdXQpICUgNjAgPT09IDA7XG59XG5cbmZ1bmN0aW9uIGlzRGF5bGlnaHRTYXZpbmdUaW1lICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnV0Y09mZnNldCgpID4gdGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpIHx8XG4gICAgICAgIHRoaXMudXRjT2Zmc2V0KCkgPiB0aGlzLmNsb25lKCkubW9udGgoNSkudXRjT2Zmc2V0KClcbiAgICApO1xufVxuXG5mdW5jdGlvbiBpc0RheWxpZ2h0U2F2aW5nVGltZVNoaWZ0ZWQgKCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5faXNEU1RTaGlmdGVkKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNEU1RTaGlmdGVkO1xuICAgIH1cblxuICAgIHZhciBjID0ge307XG5cbiAgICBjb3B5Q29uZmlnKGMsIHRoaXMpO1xuICAgIGMgPSBwcmVwYXJlQ29uZmlnKGMpO1xuXG4gICAgaWYgKGMuX2EpIHtcbiAgICAgICAgdmFyIG90aGVyID0gYy5faXNVVEMgPyBjcmVhdGVVVEMoYy5fYSkgOiBjcmVhdGVMb2NhbChjLl9hKTtcbiAgICAgICAgdGhpcy5faXNEU1RTaGlmdGVkID0gdGhpcy5pc1ZhbGlkKCkgJiZcbiAgICAgICAgICAgIGNvbXBhcmVBcnJheXMoYy5fYSwgb3RoZXIudG9BcnJheSgpKSA+IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faXNEU1RTaGlmdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDtcbn1cblxuZnVuY3Rpb24gaXNMb2NhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gIXRoaXMuX2lzVVRDIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzVXRjT2Zmc2V0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLl9pc1VUQyA6IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1V0YyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5faXNVVEMgJiYgdGhpcy5fb2Zmc2V0ID09PSAwIDogZmFsc2U7XG59XG5cbi8vIEFTUC5ORVQganNvbiBkYXRlIGZvcm1hdCByZWdleFxudmFyIGFzcE5ldFJlZ2V4ID0gL14oXFwtKT8oPzooXFxkKilbLiBdKT8oXFxkKylcXDooXFxkKykoPzpcXDooXFxkKykoXFwuXFxkKik/KT8kLztcblxuLy8gZnJvbSBodHRwOi8vZG9jcy5jbG9zdXJlLWxpYnJhcnkuZ29vZ2xlY29kZS5jb20vZ2l0L2Nsb3N1cmVfZ29vZ19kYXRlX2RhdGUuanMuc291cmNlLmh0bWxcbi8vIHNvbWV3aGF0IG1vcmUgaW4gbGluZSB3aXRoIDQuNC4zLjIgMjAwNCBzcGVjLCBidXQgYWxsb3dzIGRlY2ltYWwgYW55d2hlcmVcbi8vIGFuZCBmdXJ0aGVyIG1vZGlmaWVkIHRvIGFsbG93IGZvciBzdHJpbmdzIGNvbnRhaW5pbmcgYm90aCB3ZWVrIGFuZCBkYXlcbnZhciBpc29SZWdleCA9IC9eKC0pP1AoPzooLT9bMC05LC5dKilZKT8oPzooLT9bMC05LC5dKilNKT8oPzooLT9bMC05LC5dKilXKT8oPzooLT9bMC05LC5dKilEKT8oPzpUKD86KC0/WzAtOSwuXSopSCk/KD86KC0/WzAtOSwuXSopTSk/KD86KC0/WzAtOSwuXSopUyk/KT8kLztcblxuZnVuY3Rpb24gY3JlYXRlRHVyYXRpb24gKGlucHV0LCBrZXkpIHtcbiAgICB2YXIgZHVyYXRpb24gPSBpbnB1dCxcbiAgICAgICAgLy8gbWF0Y2hpbmcgYWdhaW5zdCByZWdleHAgaXMgZXhwZW5zaXZlLCBkbyBpdCBvbiBkZW1hbmRcbiAgICAgICAgbWF0Y2ggPSBudWxsLFxuICAgICAgICBzaWduLFxuICAgICAgICByZXQsXG4gICAgICAgIGRpZmZSZXM7XG5cbiAgICBpZiAoaXNEdXJhdGlvbihpbnB1dCkpIHtcbiAgICAgICAgZHVyYXRpb24gPSB7XG4gICAgICAgICAgICBtcyA6IGlucHV0Ll9taWxsaXNlY29uZHMsXG4gICAgICAgICAgICBkICA6IGlucHV0Ll9kYXlzLFxuICAgICAgICAgICAgTSAgOiBpbnB1dC5fbW9udGhzXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkpIHtcbiAgICAgICAgZHVyYXRpb24gPSB7fTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgZHVyYXRpb25ba2V5XSA9IGlucHV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHVyYXRpb24ubWlsbGlzZWNvbmRzID0gaW5wdXQ7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEhKG1hdGNoID0gYXNwTmV0UmVnZXguZXhlYyhpbnB1dCkpKSB7XG4gICAgICAgIHNpZ24gPSAobWF0Y2hbMV0gPT09ICctJykgPyAtMSA6IDE7XG4gICAgICAgIGR1cmF0aW9uID0ge1xuICAgICAgICAgICAgeSAgOiAwLFxuICAgICAgICAgICAgZCAgOiB0b0ludChtYXRjaFtEQVRFXSkgICAgICAgICAgICAgICAgICAgICAgICAgKiBzaWduLFxuICAgICAgICAgICAgaCAgOiB0b0ludChtYXRjaFtIT1VSXSkgICAgICAgICAgICAgICAgICAgICAgICAgKiBzaWduLFxuICAgICAgICAgICAgbSAgOiB0b0ludChtYXRjaFtNSU5VVEVdKSAgICAgICAgICAgICAgICAgICAgICAgKiBzaWduLFxuICAgICAgICAgICAgcyAgOiB0b0ludChtYXRjaFtTRUNPTkRdKSAgICAgICAgICAgICAgICAgICAgICAgKiBzaWduLFxuICAgICAgICAgICAgbXMgOiB0b0ludChhYnNSb3VuZChtYXRjaFtNSUxMSVNFQ09ORF0gKiAxMDAwKSkgKiBzaWduIC8vIHRoZSBtaWxsaXNlY29uZCBkZWNpbWFsIHBvaW50IGlzIGluY2x1ZGVkIGluIHRoZSBtYXRjaFxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAoISEobWF0Y2ggPSBpc29SZWdleC5leGVjKGlucHV0KSkpIHtcbiAgICAgICAgc2lnbiA9IChtYXRjaFsxXSA9PT0gJy0nKSA/IC0xIDogMTtcbiAgICAgICAgZHVyYXRpb24gPSB7XG4gICAgICAgICAgICB5IDogcGFyc2VJc28obWF0Y2hbMl0sIHNpZ24pLFxuICAgICAgICAgICAgTSA6IHBhcnNlSXNvKG1hdGNoWzNdLCBzaWduKSxcbiAgICAgICAgICAgIHcgOiBwYXJzZUlzbyhtYXRjaFs0XSwgc2lnbiksXG4gICAgICAgICAgICBkIDogcGFyc2VJc28obWF0Y2hbNV0sIHNpZ24pLFxuICAgICAgICAgICAgaCA6IHBhcnNlSXNvKG1hdGNoWzZdLCBzaWduKSxcbiAgICAgICAgICAgIG0gOiBwYXJzZUlzbyhtYXRjaFs3XSwgc2lnbiksXG4gICAgICAgICAgICBzIDogcGFyc2VJc28obWF0Y2hbOF0sIHNpZ24pXG4gICAgICAgIH07XG4gICAgfSBlbHNlIGlmIChkdXJhdGlvbiA9PSBudWxsKSB7Ly8gY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICBkdXJhdGlvbiA9IHt9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGR1cmF0aW9uID09PSAnb2JqZWN0JyAmJiAoJ2Zyb20nIGluIGR1cmF0aW9uIHx8ICd0bycgaW4gZHVyYXRpb24pKSB7XG4gICAgICAgIGRpZmZSZXMgPSBtb21lbnRzRGlmZmVyZW5jZShjcmVhdGVMb2NhbChkdXJhdGlvbi5mcm9tKSwgY3JlYXRlTG9jYWwoZHVyYXRpb24udG8pKTtcblxuICAgICAgICBkdXJhdGlvbiA9IHt9O1xuICAgICAgICBkdXJhdGlvbi5tcyA9IGRpZmZSZXMubWlsbGlzZWNvbmRzO1xuICAgICAgICBkdXJhdGlvbi5NID0gZGlmZlJlcy5tb250aHM7XG4gICAgfVxuXG4gICAgcmV0ID0gbmV3IER1cmF0aW9uKGR1cmF0aW9uKTtcblxuICAgIGlmIChpc0R1cmF0aW9uKGlucHV0KSAmJiBoYXNPd25Qcm9wKGlucHV0LCAnX2xvY2FsZScpKSB7XG4gICAgICAgIHJldC5fbG9jYWxlID0gaW5wdXQuX2xvY2FsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xufVxuXG5jcmVhdGVEdXJhdGlvbi5mbiA9IER1cmF0aW9uLnByb3RvdHlwZTtcbmNyZWF0ZUR1cmF0aW9uLmludmFsaWQgPSBjcmVhdGVJbnZhbGlkJDE7XG5cbmZ1bmN0aW9uIHBhcnNlSXNvIChpbnAsIHNpZ24pIHtcbiAgICAvLyBXZSdkIG5vcm1hbGx5IHVzZSB+fmlucCBmb3IgdGhpcywgYnV0IHVuZm9ydHVuYXRlbHkgaXQgYWxzb1xuICAgIC8vIGNvbnZlcnRzIGZsb2F0cyB0byBpbnRzLlxuICAgIC8vIGlucCBtYXkgYmUgdW5kZWZpbmVkLCBzbyBjYXJlZnVsIGNhbGxpbmcgcmVwbGFjZSBvbiBpdC5cbiAgICB2YXIgcmVzID0gaW5wICYmIHBhcnNlRmxvYXQoaW5wLnJlcGxhY2UoJywnLCAnLicpKTtcbiAgICAvLyBhcHBseSBzaWduIHdoaWxlIHdlJ3JlIGF0IGl0XG4gICAgcmV0dXJuIChpc05hTihyZXMpID8gMCA6IHJlcykgKiBzaWduO1xufVxuXG5mdW5jdGlvbiBwb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKSB7XG4gICAgdmFyIHJlcyA9IHttaWxsaXNlY29uZHM6IDAsIG1vbnRoczogMH07XG5cbiAgICByZXMubW9udGhzID0gb3RoZXIubW9udGgoKSAtIGJhc2UubW9udGgoKSArXG4gICAgICAgIChvdGhlci55ZWFyKCkgLSBiYXNlLnllYXIoKSkgKiAxMjtcbiAgICBpZiAoYmFzZS5jbG9uZSgpLmFkZChyZXMubW9udGhzLCAnTScpLmlzQWZ0ZXIob3RoZXIpKSB7XG4gICAgICAgIC0tcmVzLm1vbnRocztcbiAgICB9XG5cbiAgICByZXMubWlsbGlzZWNvbmRzID0gK290aGVyIC0gKyhiYXNlLmNsb25lKCkuYWRkKHJlcy5tb250aHMsICdNJykpO1xuXG4gICAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gbW9tZW50c0RpZmZlcmVuY2UoYmFzZSwgb3RoZXIpIHtcbiAgICB2YXIgcmVzO1xuICAgIGlmICghKGJhc2UuaXNWYWxpZCgpICYmIG90aGVyLmlzVmFsaWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIHttaWxsaXNlY29uZHM6IDAsIG1vbnRoczogMH07XG4gICAgfVxuXG4gICAgb3RoZXIgPSBjbG9uZVdpdGhPZmZzZXQob3RoZXIsIGJhc2UpO1xuICAgIGlmIChiYXNlLmlzQmVmb3JlKG90aGVyKSkge1xuICAgICAgICByZXMgPSBwb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKGJhc2UsIG90aGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMgPSBwb3NpdGl2ZU1vbWVudHNEaWZmZXJlbmNlKG90aGVyLCBiYXNlKTtcbiAgICAgICAgcmVzLm1pbGxpc2Vjb25kcyA9IC1yZXMubWlsbGlzZWNvbmRzO1xuICAgICAgICByZXMubW9udGhzID0gLXJlcy5tb250aHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbn1cblxuLy8gVE9ETzogcmVtb3ZlICduYW1lJyBhcmcgYWZ0ZXIgZGVwcmVjYXRpb24gaXMgcmVtb3ZlZFxuZnVuY3Rpb24gY3JlYXRlQWRkZXIoZGlyZWN0aW9uLCBuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwsIHBlcmlvZCkge1xuICAgICAgICB2YXIgZHVyLCB0bXA7XG4gICAgICAgIC8vaW52ZXJ0IHRoZSBhcmd1bWVudHMsIGJ1dCBjb21wbGFpbiBhYm91dCBpdFxuICAgICAgICBpZiAocGVyaW9kICE9PSBudWxsICYmICFpc05hTigrcGVyaW9kKSkge1xuICAgICAgICAgICAgZGVwcmVjYXRlU2ltcGxlKG5hbWUsICdtb21lbnQoKS4nICsgbmFtZSAgKyAnKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLicgKyBuYW1lICsgJyhudW1iZXIsIHBlcmlvZCkuICcgK1xuICAgICAgICAgICAgJ1NlZSBodHRwOi8vbW9tZW50anMuY29tL2d1aWRlcy8jL3dhcm5pbmdzL2FkZC1pbnZlcnRlZC1wYXJhbS8gZm9yIG1vcmUgaW5mby4nKTtcbiAgICAgICAgICAgIHRtcCA9IHZhbDsgdmFsID0gcGVyaW9kOyBwZXJpb2QgPSB0bXA7XG4gICAgICAgIH1cblxuICAgICAgICB2YWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/ICt2YWwgOiB2YWw7XG4gICAgICAgIGR1ciA9IGNyZWF0ZUR1cmF0aW9uKHZhbCwgcGVyaW9kKTtcbiAgICAgICAgYWRkU3VidHJhY3QodGhpcywgZHVyLCBkaXJlY3Rpb24pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBhZGRTdWJ0cmFjdCAobW9tLCBkdXJhdGlvbiwgaXNBZGRpbmcsIHVwZGF0ZU9mZnNldCkge1xuICAgIHZhciBtaWxsaXNlY29uZHMgPSBkdXJhdGlvbi5fbWlsbGlzZWNvbmRzLFxuICAgICAgICBkYXlzID0gYWJzUm91bmQoZHVyYXRpb24uX2RheXMpLFxuICAgICAgICBtb250aHMgPSBhYnNSb3VuZChkdXJhdGlvbi5fbW9udGhzKTtcblxuICAgIGlmICghbW9tLmlzVmFsaWQoKSkge1xuICAgICAgICAvLyBObyBvcFxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdXBkYXRlT2Zmc2V0ID0gdXBkYXRlT2Zmc2V0ID09IG51bGwgPyB0cnVlIDogdXBkYXRlT2Zmc2V0O1xuXG4gICAgaWYgKG1pbGxpc2Vjb25kcykge1xuICAgICAgICBtb20uX2Quc2V0VGltZShtb20uX2QudmFsdWVPZigpICsgbWlsbGlzZWNvbmRzICogaXNBZGRpbmcpO1xuICAgIH1cbiAgICBpZiAoZGF5cykge1xuICAgICAgICBzZXQkMShtb20sICdEYXRlJywgZ2V0KG1vbSwgJ0RhdGUnKSArIGRheXMgKiBpc0FkZGluZyk7XG4gICAgfVxuICAgIGlmIChtb250aHMpIHtcbiAgICAgICAgc2V0TW9udGgobW9tLCBnZXQobW9tLCAnTW9udGgnKSArIG1vbnRocyAqIGlzQWRkaW5nKTtcbiAgICB9XG4gICAgaWYgKHVwZGF0ZU9mZnNldCkge1xuICAgICAgICBob29rcy51cGRhdGVPZmZzZXQobW9tLCBkYXlzIHx8IG1vbnRocyk7XG4gICAgfVxufVxuXG52YXIgYWRkICAgICAgPSBjcmVhdGVBZGRlcigxLCAnYWRkJyk7XG52YXIgc3VidHJhY3QgPSBjcmVhdGVBZGRlcigtMSwgJ3N1YnRyYWN0Jyk7XG5cbmZ1bmN0aW9uIGdldENhbGVuZGFyRm9ybWF0KG15TW9tZW50LCBub3cpIHtcbiAgICB2YXIgZGlmZiA9IG15TW9tZW50LmRpZmYobm93LCAnZGF5cycsIHRydWUpO1xuICAgIHJldHVybiBkaWZmIDwgLTYgPyAnc2FtZUVsc2UnIDpcbiAgICAgICAgICAgIGRpZmYgPCAtMSA/ICdsYXN0V2VlaycgOlxuICAgICAgICAgICAgZGlmZiA8IDAgPyAnbGFzdERheScgOlxuICAgICAgICAgICAgZGlmZiA8IDEgPyAnc2FtZURheScgOlxuICAgICAgICAgICAgZGlmZiA8IDIgPyAnbmV4dERheScgOlxuICAgICAgICAgICAgZGlmZiA8IDcgPyAnbmV4dFdlZWsnIDogJ3NhbWVFbHNlJztcbn1cblxuZnVuY3Rpb24gY2FsZW5kYXIkMSAodGltZSwgZm9ybWF0cykge1xuICAgIC8vIFdlIHdhbnQgdG8gY29tcGFyZSB0aGUgc3RhcnQgb2YgdG9kYXksIHZzIHRoaXMuXG4gICAgLy8gR2V0dGluZyBzdGFydC1vZi10b2RheSBkZXBlbmRzIG9uIHdoZXRoZXIgd2UncmUgbG9jYWwvdXRjL29mZnNldCBvciBub3QuXG4gICAgdmFyIG5vdyA9IHRpbWUgfHwgY3JlYXRlTG9jYWwoKSxcbiAgICAgICAgc29kID0gY2xvbmVXaXRoT2Zmc2V0KG5vdywgdGhpcykuc3RhcnRPZignZGF5JyksXG4gICAgICAgIGZvcm1hdCA9IGhvb2tzLmNhbGVuZGFyRm9ybWF0KHRoaXMsIHNvZCkgfHwgJ3NhbWVFbHNlJztcblxuICAgIHZhciBvdXRwdXQgPSBmb3JtYXRzICYmIChpc0Z1bmN0aW9uKGZvcm1hdHNbZm9ybWF0XSkgPyBmb3JtYXRzW2Zvcm1hdF0uY2FsbCh0aGlzLCBub3cpIDogZm9ybWF0c1tmb3JtYXRdKTtcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdChvdXRwdXQgfHwgdGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIoZm9ybWF0LCB0aGlzLCBjcmVhdGVMb2NhbChub3cpKSk7XG59XG5cbmZ1bmN0aW9uIGNsb25lICgpIHtcbiAgICByZXR1cm4gbmV3IE1vbWVudCh0aGlzKTtcbn1cblxuZnVuY3Rpb24gaXNBZnRlciAoaW5wdXQsIHVuaXRzKSB7XG4gICAgdmFyIGxvY2FsSW5wdXQgPSBpc01vbWVudChpbnB1dCkgPyBpbnB1dCA6IGNyZWF0ZUxvY2FsKGlucHV0KTtcbiAgICBpZiAoISh0aGlzLmlzVmFsaWQoKSAmJiBsb2NhbElucHV0LmlzVmFsaWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKCFpc1VuZGVmaW5lZCh1bml0cykgPyB1bml0cyA6ICdtaWxsaXNlY29uZCcpO1xuICAgIGlmICh1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZU9mKCkgPiBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9jYWxJbnB1dC52YWx1ZU9mKCkgPCB0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNCZWZvcmUgKGlucHV0LCB1bml0cykge1xuICAgIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCk7XG4gICAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyghaXNVbmRlZmluZWQodW5pdHMpID8gdW5pdHMgOiAnbWlsbGlzZWNvbmQnKTtcbiAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVPZigpIDwgbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmUoKS5lbmRPZih1bml0cykudmFsdWVPZigpIDwgbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0JldHdlZW4gKGZyb20sIHRvLCB1bml0cywgaW5jbHVzaXZpdHkpIHtcbiAgICBpbmNsdXNpdml0eSA9IGluY2x1c2l2aXR5IHx8ICcoKSc7XG4gICAgcmV0dXJuIChpbmNsdXNpdml0eVswXSA9PT0gJygnID8gdGhpcy5pc0FmdGVyKGZyb20sIHVuaXRzKSA6ICF0aGlzLmlzQmVmb3JlKGZyb20sIHVuaXRzKSkgJiZcbiAgICAgICAgKGluY2x1c2l2aXR5WzFdID09PSAnKScgPyB0aGlzLmlzQmVmb3JlKHRvLCB1bml0cykgOiAhdGhpcy5pc0FmdGVyKHRvLCB1bml0cykpO1xufVxuXG5mdW5jdGlvbiBpc1NhbWUgKGlucHV0LCB1bml0cykge1xuICAgIHZhciBsb2NhbElucHV0ID0gaXNNb21lbnQoaW5wdXQpID8gaW5wdXQgOiBjcmVhdGVMb2NhbChpbnB1dCksXG4gICAgICAgIGlucHV0TXM7XG4gICAgaWYgKCEodGhpcy5pc1ZhbGlkKCkgJiYgbG9jYWxJbnB1dC5pc1ZhbGlkKCkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyB8fCAnbWlsbGlzZWNvbmQnKTtcbiAgICBpZiAodW5pdHMgPT09ICdtaWxsaXNlY29uZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVPZigpID09PSBsb2NhbElucHV0LnZhbHVlT2YoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dE1zID0gbG9jYWxJbnB1dC52YWx1ZU9mKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb25lKCkuc3RhcnRPZih1bml0cykudmFsdWVPZigpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSB0aGlzLmNsb25lKCkuZW5kT2YodW5pdHMpLnZhbHVlT2YoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzU2FtZU9yQWZ0ZXIgKGlucHV0LCB1bml0cykge1xuICAgIHJldHVybiB0aGlzLmlzU2FtZShpbnB1dCwgdW5pdHMpIHx8IHRoaXMuaXNBZnRlcihpbnB1dCx1bml0cyk7XG59XG5cbmZ1bmN0aW9uIGlzU2FtZU9yQmVmb3JlIChpbnB1dCwgdW5pdHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1NhbWUoaW5wdXQsIHVuaXRzKSB8fCB0aGlzLmlzQmVmb3JlKGlucHV0LHVuaXRzKTtcbn1cblxuZnVuY3Rpb24gZGlmZiAoaW5wdXQsIHVuaXRzLCBhc0Zsb2F0KSB7XG4gICAgdmFyIHRoYXQsXG4gICAgICAgIHpvbmVEZWx0YSxcbiAgICAgICAgZGVsdGEsIG91dHB1dDtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIE5hTjtcbiAgICB9XG5cbiAgICB0aGF0ID0gY2xvbmVXaXRoT2Zmc2V0KGlucHV0LCB0aGlzKTtcblxuICAgIGlmICghdGhhdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIE5hTjtcbiAgICB9XG5cbiAgICB6b25lRGVsdGEgPSAodGhhdC51dGNPZmZzZXQoKSAtIHRoaXMudXRjT2Zmc2V0KCkpICogNmU0O1xuXG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG5cbiAgICBpZiAodW5pdHMgPT09ICd5ZWFyJyB8fCB1bml0cyA9PT0gJ21vbnRoJyB8fCB1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgIG91dHB1dCA9IG1vbnRoRGlmZih0aGlzLCB0aGF0KTtcbiAgICAgICAgaWYgKHVuaXRzID09PSAncXVhcnRlcicpIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCAvIDM7XG4gICAgICAgIH0gZWxzZSBpZiAodW5pdHMgPT09ICd5ZWFyJykge1xuICAgICAgICAgICAgb3V0cHV0ID0gb3V0cHV0IC8gMTI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBkZWx0YSA9IHRoaXMgLSB0aGF0O1xuICAgICAgICBvdXRwdXQgPSB1bml0cyA9PT0gJ3NlY29uZCcgPyBkZWx0YSAvIDFlMyA6IC8vIDEwMDBcbiAgICAgICAgICAgIHVuaXRzID09PSAnbWludXRlJyA/IGRlbHRhIC8gNmU0IDogLy8gMTAwMCAqIDYwXG4gICAgICAgICAgICB1bml0cyA9PT0gJ2hvdXInID8gZGVsdGEgLyAzNmU1IDogLy8gMTAwMCAqIDYwICogNjBcbiAgICAgICAgICAgIHVuaXRzID09PSAnZGF5JyA/IChkZWx0YSAtIHpvbmVEZWx0YSkgLyA4NjRlNSA6IC8vIDEwMDAgKiA2MCAqIDYwICogMjQsIG5lZ2F0ZSBkc3RcbiAgICAgICAgICAgIHVuaXRzID09PSAnd2VlaycgPyAoZGVsdGEgLSB6b25lRGVsdGEpIC8gNjA0OGU1IDogLy8gMTAwMCAqIDYwICogNjAgKiAyNCAqIDcsIG5lZ2F0ZSBkc3RcbiAgICAgICAgICAgIGRlbHRhO1xuICAgIH1cbiAgICByZXR1cm4gYXNGbG9hdCA/IG91dHB1dCA6IGFic0Zsb29yKG91dHB1dCk7XG59XG5cbmZ1bmN0aW9uIG1vbnRoRGlmZiAoYSwgYikge1xuICAgIC8vIGRpZmZlcmVuY2UgaW4gbW9udGhzXG4gICAgdmFyIHdob2xlTW9udGhEaWZmID0gKChiLnllYXIoKSAtIGEueWVhcigpKSAqIDEyKSArIChiLm1vbnRoKCkgLSBhLm1vbnRoKCkpLFxuICAgICAgICAvLyBiIGlzIGluIChhbmNob3IgLSAxIG1vbnRoLCBhbmNob3IgKyAxIG1vbnRoKVxuICAgICAgICBhbmNob3IgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLCAnbW9udGhzJyksXG4gICAgICAgIGFuY2hvcjIsIGFkanVzdDtcblxuICAgIGlmIChiIC0gYW5jaG9yIDwgMCkge1xuICAgICAgICBhbmNob3IyID0gYS5jbG9uZSgpLmFkZCh3aG9sZU1vbnRoRGlmZiAtIDEsICdtb250aHMnKTtcbiAgICAgICAgLy8gbGluZWFyIGFjcm9zcyB0aGUgbW9udGhcbiAgICAgICAgYWRqdXN0ID0gKGIgLSBhbmNob3IpIC8gKGFuY2hvciAtIGFuY2hvcjIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGFuY2hvcjIgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmICsgMSwgJ21vbnRocycpO1xuICAgICAgICAvLyBsaW5lYXIgYWNyb3NzIHRoZSBtb250aFxuICAgICAgICBhZGp1c3QgPSAoYiAtIGFuY2hvcikgLyAoYW5jaG9yMiAtIGFuY2hvcik7XG4gICAgfVxuXG4gICAgLy9jaGVjayBmb3IgbmVnYXRpdmUgemVybywgcmV0dXJuIHplcm8gaWYgbmVnYXRpdmUgemVyb1xuICAgIHJldHVybiAtKHdob2xlTW9udGhEaWZmICsgYWRqdXN0KSB8fCAwO1xufVxuXG5ob29rcy5kZWZhdWx0Rm9ybWF0ID0gJ1lZWVktTU0tRERUSEg6bW06c3NaJztcbmhvb2tzLmRlZmF1bHRGb3JtYXRVdGMgPSAnWVlZWS1NTS1ERFRISDptbTpzc1taXSc7XG5cbmZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgnZW4nKS5mb3JtYXQoJ2RkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaJyk7XG59XG5cbmZ1bmN0aW9uIHRvSVNPU3RyaW5nKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBtID0gdGhpcy5jbG9uZSgpLnV0YygpO1xuICAgIGlmIChtLnllYXIoKSA8IDAgfHwgbS55ZWFyKCkgPiA5OTk5KSB7XG4gICAgICAgIHJldHVybiBmb3JtYXRNb21lbnQobSwgJ1lZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScpO1xuICAgIH1cbiAgICBpZiAoaXNGdW5jdGlvbihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZykpIHtcbiAgICAgICAgLy8gbmF0aXZlIGltcGxlbWVudGF0aW9uIGlzIH41MHggZmFzdGVyLCB1c2UgaXQgd2hlbiB3ZSBjYW5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9EYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdE1vbWVudChtLCAnWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXScpO1xufVxuXG4vKipcbiAqIFJldHVybiBhIGh1bWFuIHJlYWRhYmxlIHJlcHJlc2VudGF0aW9uIG9mIGEgbW9tZW50IHRoYXQgY2FuXG4gKiBhbHNvIGJlIGV2YWx1YXRlZCB0byBnZXQgYSBuZXcgbW9tZW50IHdoaWNoIGlzIHRoZSBzYW1lXG4gKlxuICogQGxpbmsgaHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0L2RvY3MvYXBpL3V0aWwuaHRtbCN1dGlsX2N1c3RvbV9pbnNwZWN0X2Z1bmN0aW9uX29uX29iamVjdHNcbiAqL1xuZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gJ21vbWVudC5pbnZhbGlkKC8qICcgKyB0aGlzLl9pICsgJyAqLyknO1xuICAgIH1cbiAgICB2YXIgZnVuYyA9ICdtb21lbnQnO1xuICAgIHZhciB6b25lID0gJyc7XG4gICAgaWYgKCF0aGlzLmlzTG9jYWwoKSkge1xuICAgICAgICBmdW5jID0gdGhpcy51dGNPZmZzZXQoKSA9PT0gMCA/ICdtb21lbnQudXRjJyA6ICdtb21lbnQucGFyc2Vab25lJztcbiAgICAgICAgem9uZSA9ICdaJztcbiAgICB9XG4gICAgdmFyIHByZWZpeCA9ICdbJyArIGZ1bmMgKyAnKFwiXSc7XG4gICAgdmFyIHllYXIgPSAoMCA8PSB0aGlzLnllYXIoKSAmJiB0aGlzLnllYXIoKSA8PSA5OTk5KSA/ICdZWVlZJyA6ICdZWVlZWVknO1xuICAgIHZhciBkYXRldGltZSA9ICctTU0tRERbVF1ISDptbTpzcy5TU1MnO1xuICAgIHZhciBzdWZmaXggPSB6b25lICsgJ1tcIildJztcblxuICAgIHJldHVybiB0aGlzLmZvcm1hdChwcmVmaXggKyB5ZWFyICsgZGF0ZXRpbWUgKyBzdWZmaXgpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXQgKGlucHV0U3RyaW5nKSB7XG4gICAgaWYgKCFpbnB1dFN0cmluZykge1xuICAgICAgICBpbnB1dFN0cmluZyA9IHRoaXMuaXNVdGMoKSA/IGhvb2tzLmRlZmF1bHRGb3JtYXRVdGMgOiBob29rcy5kZWZhdWx0Rm9ybWF0O1xuICAgIH1cbiAgICB2YXIgb3V0cHV0ID0gZm9ybWF0TW9tZW50KHRoaXMsIGlucHV0U3RyaW5nKTtcbiAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkucG9zdGZvcm1hdChvdXRwdXQpO1xufVxuXG5mdW5jdGlvbiBmcm9tICh0aW1lLCB3aXRob3V0U3VmZml4KSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCgpICYmXG4gICAgICAgICAgICAoKGlzTW9tZW50KHRpbWUpICYmIHRpbWUuaXNWYWxpZCgpKSB8fFxuICAgICAgICAgICAgIGNyZWF0ZUxvY2FsKHRpbWUpLmlzVmFsaWQoKSkpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUR1cmF0aW9uKHt0bzogdGhpcywgZnJvbTogdGltZX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghd2l0aG91dFN1ZmZpeCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmcm9tTm93ICh3aXRob3V0U3VmZml4KSB7XG4gICAgcmV0dXJuIHRoaXMuZnJvbShjcmVhdGVMb2NhbCgpLCB3aXRob3V0U3VmZml4KTtcbn1cblxuZnVuY3Rpb24gdG8gKHRpbWUsIHdpdGhvdXRTdWZmaXgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKCkgJiZcbiAgICAgICAgICAgICgoaXNNb21lbnQodGltZSkgJiYgdGltZS5pc1ZhbGlkKCkpIHx8XG4gICAgICAgICAgICAgY3JlYXRlTG9jYWwodGltZSkuaXNWYWxpZCgpKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRHVyYXRpb24oe2Zyb206IHRoaXMsIHRvOiB0aW1lfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF3aXRob3V0U3VmZml4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvTm93ICh3aXRob3V0U3VmZml4KSB7XG4gICAgcmV0dXJuIHRoaXMudG8oY3JlYXRlTG9jYWwoKSwgd2l0aG91dFN1ZmZpeCk7XG59XG5cbi8vIElmIHBhc3NlZCBhIGxvY2FsZSBrZXksIGl0IHdpbGwgc2V0IHRoZSBsb2NhbGUgZm9yIHRoaXNcbi8vIGluc3RhbmNlLiAgT3RoZXJ3aXNlLCBpdCB3aWxsIHJldHVybiB0aGUgbG9jYWxlIGNvbmZpZ3VyYXRpb25cbi8vIHZhcmlhYmxlcyBmb3IgdGhpcyBpbnN0YW5jZS5cbmZ1bmN0aW9uIGxvY2FsZSAoa2V5KSB7XG4gICAgdmFyIG5ld0xvY2FsZURhdGE7XG5cbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsZS5fYWJicjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXdMb2NhbGVEYXRhID0gZ2V0TG9jYWxlKGtleSk7XG4gICAgICAgIGlmIChuZXdMb2NhbGVEYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsZSA9IG5ld0xvY2FsZURhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG52YXIgbGFuZyA9IGRlcHJlY2F0ZShcbiAgICAnbW9tZW50KCkubGFuZygpIGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHVzZSBtb21lbnQoKS5sb2NhbGVEYXRhKCkgdG8gZ2V0IHRoZSBsYW5ndWFnZSBjb25maWd1cmF0aW9uLiBVc2UgbW9tZW50KCkubG9jYWxlKCkgdG8gY2hhbmdlIGxhbmd1YWdlcy4nLFxuICAgIGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbik7XG5cbmZ1bmN0aW9uIGxvY2FsZURhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLl9sb2NhbGU7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0T2YgKHVuaXRzKSB7XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgLy8gdGhlIGZvbGxvd2luZyBzd2l0Y2ggaW50ZW50aW9uYWxseSBvbWl0cyBicmVhayBrZXl3b3Jkc1xuICAgIC8vIHRvIHV0aWxpemUgZmFsbGluZyB0aHJvdWdoIHRoZSBjYXNlcy5cbiAgICBzd2l0Y2ggKHVuaXRzKSB7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgdGhpcy5tb250aCgwKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAncXVhcnRlcic6XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIHRoaXMuZGF0ZSgxKTtcbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgIGNhc2UgJ2lzb1dlZWsnOlxuICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgIHRoaXMuaG91cnMoMCk7XG4gICAgICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGNhc2UgJ2hvdXInOlxuICAgICAgICAgICAgdGhpcy5taW51dGVzKDApO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICdtaW51dGUnOlxuICAgICAgICAgICAgdGhpcy5zZWNvbmRzKDApO1xuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICBjYXNlICdzZWNvbmQnOlxuICAgICAgICAgICAgdGhpcy5taWxsaXNlY29uZHMoMCk7XG4gICAgfVxuXG4gICAgLy8gd2Vla3MgYXJlIGEgc3BlY2lhbCBjYXNlXG4gICAgaWYgKHVuaXRzID09PSAnd2VlaycpIHtcbiAgICAgICAgdGhpcy53ZWVrZGF5KDApO1xuICAgIH1cbiAgICBpZiAodW5pdHMgPT09ICdpc29XZWVrJykge1xuICAgICAgICB0aGlzLmlzb1dlZWtkYXkoMSk7XG4gICAgfVxuXG4gICAgLy8gcXVhcnRlcnMgYXJlIGFsc28gc3BlY2lhbFxuICAgIGlmICh1bml0cyA9PT0gJ3F1YXJ0ZXInKSB7XG4gICAgICAgIHRoaXMubW9udGgoTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkgLyAzKSAqIDMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBlbmRPZiAodW5pdHMpIHtcbiAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcbiAgICBpZiAodW5pdHMgPT09IHVuZGVmaW5lZCB8fCB1bml0cyA9PT0gJ21pbGxpc2Vjb25kJykge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyAnZGF0ZScgaXMgYW4gYWxpYXMgZm9yICdkYXknLCBzbyBpdCBzaG91bGQgYmUgY29uc2lkZXJlZCBhcyBzdWNoLlxuICAgIGlmICh1bml0cyA9PT0gJ2RhdGUnKSB7XG4gICAgICAgIHVuaXRzID0gJ2RheSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3RhcnRPZih1bml0cykuYWRkKDEsICh1bml0cyA9PT0gJ2lzb1dlZWsnID8gJ3dlZWsnIDogdW5pdHMpKS5zdWJ0cmFjdCgxLCAnbXMnKTtcbn1cblxuZnVuY3Rpb24gdmFsdWVPZiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2QudmFsdWVPZigpIC0gKCh0aGlzLl9vZmZzZXQgfHwgMCkgKiA2MDAwMCk7XG59XG5cbmZ1bmN0aW9uIHVuaXggKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMudmFsdWVPZigpIC8gMTAwMCk7XG59XG5cbmZ1bmN0aW9uIHRvRGF0ZSAoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKTtcbn1cblxuZnVuY3Rpb24gdG9BcnJheSAoKSB7XG4gICAgdmFyIG0gPSB0aGlzO1xuICAgIHJldHVybiBbbS55ZWFyKCksIG0ubW9udGgoKSwgbS5kYXRlKCksIG0uaG91cigpLCBtLm1pbnV0ZSgpLCBtLnNlY29uZCgpLCBtLm1pbGxpc2Vjb25kKCldO1xufVxuXG5mdW5jdGlvbiB0b09iamVjdCAoKSB7XG4gICAgdmFyIG0gPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICAgIHllYXJzOiBtLnllYXIoKSxcbiAgICAgICAgbW9udGhzOiBtLm1vbnRoKCksXG4gICAgICAgIGRhdGU6IG0uZGF0ZSgpLFxuICAgICAgICBob3VyczogbS5ob3VycygpLFxuICAgICAgICBtaW51dGVzOiBtLm1pbnV0ZXMoKSxcbiAgICAgICAgc2Vjb25kczogbS5zZWNvbmRzKCksXG4gICAgICAgIG1pbGxpc2Vjb25kczogbS5taWxsaXNlY29uZHMoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gICAgLy8gbmV3IERhdGUoTmFOKS50b0pTT04oKSA9PT0gbnVsbFxuICAgIHJldHVybiB0aGlzLmlzVmFsaWQoKSA/IHRoaXMudG9JU09TdHJpbmcoKSA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWQkMiAoKSB7XG4gICAgcmV0dXJuIGlzVmFsaWQodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNpbmdGbGFncyAoKSB7XG4gICAgcmV0dXJuIGV4dGVuZCh7fSwgZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpKTtcbn1cblxuZnVuY3Rpb24gaW52YWxpZEF0ICgpIHtcbiAgICByZXR1cm4gZ2V0UGFyc2luZ0ZsYWdzKHRoaXMpLm92ZXJmbG93O1xufVxuXG5mdW5jdGlvbiBjcmVhdGlvbkRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5wdXQ6IHRoaXMuX2ksXG4gICAgICAgIGZvcm1hdDogdGhpcy5fZixcbiAgICAgICAgbG9jYWxlOiB0aGlzLl9sb2NhbGUsXG4gICAgICAgIGlzVVRDOiB0aGlzLl9pc1VUQyxcbiAgICAgICAgc3RyaWN0OiB0aGlzLl9zdHJpY3RcbiAgICB9O1xufVxuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKDAsIFsnZ2cnLCAyXSwgMCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLndlZWtZZWFyKCkgJSAxMDA7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oMCwgWydHRycsIDJdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSAlIDEwMDtcbn0pO1xuXG5mdW5jdGlvbiBhZGRXZWVrWWVhckZvcm1hdFRva2VuICh0b2tlbiwgZ2V0dGVyKSB7XG4gICAgYWRkRm9ybWF0VG9rZW4oMCwgW3Rva2VuLCB0b2tlbi5sZW5ndGhdLCAwLCBnZXR0ZXIpO1xufVxuXG5hZGRXZWVrWWVhckZvcm1hdFRva2VuKCdnZ2dnJywgICAgICd3ZWVrWWVhcicpO1xuYWRkV2Vla1llYXJGb3JtYXRUb2tlbignZ2dnZ2cnLCAgICAnd2Vla1llYXInKTtcbmFkZFdlZWtZZWFyRm9ybWF0VG9rZW4oJ0dHR0cnLCAgJ2lzb1dlZWtZZWFyJyk7XG5hZGRXZWVrWWVhckZvcm1hdFRva2VuKCdHR0dHRycsICdpc29XZWVrWWVhcicpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnd2Vla1llYXInLCAnZ2cnKTtcbmFkZFVuaXRBbGlhcygnaXNvV2Vla1llYXInLCAnR0cnKTtcblxuLy8gUFJJT1JJVFlcblxuYWRkVW5pdFByaW9yaXR5KCd3ZWVrWWVhcicsIDEpO1xuYWRkVW5pdFByaW9yaXR5KCdpc29XZWVrWWVhcicsIDEpO1xuXG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignRycsICAgICAgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignZycsICAgICAgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignR0cnLCAgICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignZ2cnLCAgICAgbWF0Y2gxdG8yLCBtYXRjaDIpO1xuYWRkUmVnZXhUb2tlbignR0dHRycsICAgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignZ2dnZycsICAgbWF0Y2gxdG80LCBtYXRjaDQpO1xuYWRkUmVnZXhUb2tlbignR0dHR0cnLCAgbWF0Y2gxdG82LCBtYXRjaDYpO1xuYWRkUmVnZXhUb2tlbignZ2dnZ2cnLCAgbWF0Y2gxdG82LCBtYXRjaDYpO1xuXG5hZGRXZWVrUGFyc2VUb2tlbihbJ2dnZ2cnLCAnZ2dnZ2cnLCAnR0dHRycsICdHR0dHRyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICB3ZWVrW3Rva2VuLnN1YnN0cigwLCAyKV0gPSB0b0ludChpbnB1dCk7XG59KTtcblxuYWRkV2Vla1BhcnNlVG9rZW4oWydnZycsICdHRyddLCBmdW5jdGlvbiAoaW5wdXQsIHdlZWssIGNvbmZpZywgdG9rZW4pIHtcbiAgICB3ZWVrW3Rva2VuXSA9IGhvb2tzLnBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KTtcbn0pO1xuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIGdldFNldFdlZWtZZWFyIChpbnB1dCkge1xuICAgIHJldHVybiBnZXRTZXRXZWVrWWVhckhlbHBlci5jYWxsKHRoaXMsXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIHRoaXMud2VlaygpLFxuICAgICAgICAgICAgdGhpcy53ZWVrZGF5KCksXG4gICAgICAgICAgICB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3csXG4gICAgICAgICAgICB0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpO1xufVxuXG5mdW5jdGlvbiBnZXRTZXRJU09XZWVrWWVhciAoaW5wdXQpIHtcbiAgICByZXR1cm4gZ2V0U2V0V2Vla1llYXJIZWxwZXIuY2FsbCh0aGlzLFxuICAgICAgICAgICAgaW5wdXQsIHRoaXMuaXNvV2VlaygpLCB0aGlzLmlzb1dlZWtkYXkoKSwgMSwgNCk7XG59XG5cbmZ1bmN0aW9uIGdldElTT1dlZWtzSW5ZZWFyICgpIHtcbiAgICByZXR1cm4gd2Vla3NJblllYXIodGhpcy55ZWFyKCksIDEsIDQpO1xufVxuXG5mdW5jdGlvbiBnZXRXZWVrc0luWWVhciAoKSB7XG4gICAgdmFyIHdlZWtJbmZvID0gdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7XG4gICAgcmV0dXJuIHdlZWtzSW5ZZWFyKHRoaXMueWVhcigpLCB3ZWVrSW5mby5kb3csIHdlZWtJbmZvLmRveSk7XG59XG5cbmZ1bmN0aW9uIGdldFNldFdlZWtZZWFySGVscGVyKGlucHV0LCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICAgIHZhciB3ZWVrc1RhcmdldDtcbiAgICBpZiAoaW5wdXQgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gd2Vla09mWWVhcih0aGlzLCBkb3csIGRveSkueWVhcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB3ZWVrc1RhcmdldCA9IHdlZWtzSW5ZZWFyKGlucHV0LCBkb3csIGRveSk7XG4gICAgICAgIGlmICh3ZWVrID4gd2Vla3NUYXJnZXQpIHtcbiAgICAgICAgICAgIHdlZWsgPSB3ZWVrc1RhcmdldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2V0V2Vla0FsbC5jYWxsKHRoaXMsIGlucHV0LCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRXZWVrQWxsKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSkge1xuICAgIHZhciBkYXlPZlllYXJEYXRhID0gZGF5T2ZZZWFyRnJvbVdlZWtzKHdlZWtZZWFyLCB3ZWVrLCB3ZWVrZGF5LCBkb3csIGRveSksXG4gICAgICAgIGRhdGUgPSBjcmVhdGVVVENEYXRlKGRheU9mWWVhckRhdGEueWVhciwgMCwgZGF5T2ZZZWFyRGF0YS5kYXlPZlllYXIpO1xuXG4gICAgdGhpcy55ZWFyKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSk7XG4gICAgdGhpcy5tb250aChkYXRlLmdldFVUQ01vbnRoKCkpO1xuICAgIHRoaXMuZGF0ZShkYXRlLmdldFVUQ0RhdGUoKSk7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ1EnLCAwLCAnUW8nLCAncXVhcnRlcicpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygncXVhcnRlcicsICdRJyk7XG5cbi8vIFBSSU9SSVRZXG5cbmFkZFVuaXRQcmlvcml0eSgncXVhcnRlcicsIDcpO1xuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ1EnLCBtYXRjaDEpO1xuYWRkUGFyc2VUb2tlbignUScsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtNT05USF0gPSAodG9JbnQoaW5wdXQpIC0gMSkgKiAzO1xufSk7XG5cbi8vIE1PTUVOVFNcblxuZnVuY3Rpb24gZ2V0U2V0UXVhcnRlciAoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQgPT0gbnVsbCA/IE1hdGguY2VpbCgodGhpcy5tb250aCgpICsgMSkgLyAzKSA6IHRoaXMubW9udGgoKGlucHV0IC0gMSkgKiAzICsgdGhpcy5tb250aCgpICUgMyk7XG59XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ0QnLCBbJ0REJywgMl0sICdEbycsICdkYXRlJyk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdkYXRlJywgJ0QnKTtcblxuLy8gUFJJT1JPSVRZXG5hZGRVbml0UHJpb3JpdHkoJ2RhdGUnLCA5KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdEJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdERCcsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ0RvJywgZnVuY3Rpb24gKGlzU3RyaWN0LCBsb2NhbGUpIHtcbiAgICAvLyBUT0RPOiBSZW1vdmUgXCJvcmRpbmFsUGFyc2VcIiBmYWxsYmFjayBpbiBuZXh0IG1ham9yIHJlbGVhc2UuXG4gICAgcmV0dXJuIGlzU3RyaWN0ID9cbiAgICAgIChsb2NhbGUuX2RheU9mTW9udGhPcmRpbmFsUGFyc2UgfHwgbG9jYWxlLl9vcmRpbmFsUGFyc2UpIDpcbiAgICAgIGxvY2FsZS5fZGF5T2ZNb250aE9yZGluYWxQYXJzZUxlbmllbnQ7XG59KTtcblxuYWRkUGFyc2VUb2tlbihbJ0QnLCAnREQnXSwgREFURSk7XG5hZGRQYXJzZVRva2VuKCdEbycsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtEQVRFXSA9IHRvSW50KGlucHV0Lm1hdGNoKG1hdGNoMXRvMilbMF0sIDEwKTtcbn0pO1xuXG4vLyBNT01FTlRTXG5cbnZhciBnZXRTZXREYXlPZk1vbnRoID0gbWFrZUdldFNldCgnRGF0ZScsIHRydWUpO1xuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdEREQnLCBbJ0REREQnLCAzXSwgJ0RERG8nLCAnZGF5T2ZZZWFyJyk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdkYXlPZlllYXInLCAnREREJyk7XG5cbi8vIFBSSU9SSVRZXG5hZGRVbml0UHJpb3JpdHkoJ2RheU9mWWVhcicsIDQpO1xuXG4vLyBQQVJTSU5HXG5cbmFkZFJlZ2V4VG9rZW4oJ0RERCcsICBtYXRjaDF0bzMpO1xuYWRkUmVnZXhUb2tlbignRERERCcsIG1hdGNoMyk7XG5hZGRQYXJzZVRva2VuKFsnREREJywgJ0REREQnXSwgZnVuY3Rpb24gKGlucHV0LCBhcnJheSwgY29uZmlnKSB7XG4gICAgY29uZmlnLl9kYXlPZlllYXIgPSB0b0ludChpbnB1dCk7XG59KTtcblxuLy8gSEVMUEVSU1xuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIGdldFNldERheU9mWWVhciAoaW5wdXQpIHtcbiAgICB2YXIgZGF5T2ZZZWFyID0gTWF0aC5yb3VuZCgodGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ2RheScpIC0gdGhpcy5jbG9uZSgpLnN0YXJ0T2YoJ3llYXInKSkgLyA4NjRlNSkgKyAxO1xuICAgIHJldHVybiBpbnB1dCA9PSBudWxsID8gZGF5T2ZZZWFyIDogdGhpcy5hZGQoKGlucHV0IC0gZGF5T2ZZZWFyKSwgJ2QnKTtcbn1cblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbignbScsIFsnbW0nLCAyXSwgMCwgJ21pbnV0ZScpO1xuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnbWludXRlJywgJ20nKTtcblxuLy8gUFJJT1JJVFlcblxuYWRkVW5pdFByaW9yaXR5KCdtaW51dGUnLCAxNCk7XG5cbi8vIFBBUlNJTkdcblxuYWRkUmVnZXhUb2tlbignbScsICBtYXRjaDF0bzIpO1xuYWRkUmVnZXhUb2tlbignbW0nLCBtYXRjaDF0bzIsIG1hdGNoMik7XG5hZGRQYXJzZVRva2VuKFsnbScsICdtbSddLCBNSU5VVEUpO1xuXG4vLyBNT01FTlRTXG5cbnZhciBnZXRTZXRNaW51dGUgPSBtYWtlR2V0U2V0KCdNaW51dGVzJywgZmFsc2UpO1xuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdzJywgWydzcycsIDJdLCAwLCAnc2Vjb25kJyk7XG5cbi8vIEFMSUFTRVNcblxuYWRkVW5pdEFsaWFzKCdzZWNvbmQnLCAncycpO1xuXG4vLyBQUklPUklUWVxuXG5hZGRVbml0UHJpb3JpdHkoJ3NlY29uZCcsIDE1KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdzJywgIG1hdGNoMXRvMik7XG5hZGRSZWdleFRva2VuKCdzcycsIG1hdGNoMXRvMiwgbWF0Y2gyKTtcbmFkZFBhcnNlVG9rZW4oWydzJywgJ3NzJ10sIFNFQ09ORCk7XG5cbi8vIE1PTUVOVFNcblxudmFyIGdldFNldFNlY29uZCA9IG1ha2VHZXRTZXQoJ1NlY29uZHMnLCBmYWxzZSk7XG5cbi8vIEZPUk1BVFRJTkdcblxuYWRkRm9ybWF0VG9rZW4oJ1MnLCAwLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwMCk7XG59KTtcblxuYWRkRm9ybWF0VG9rZW4oMCwgWydTUycsIDJdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIH5+KHRoaXMubWlsbGlzZWNvbmQoKSAvIDEwKTtcbn0pO1xuXG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTUycsIDNdLCAwLCAnbWlsbGlzZWNvbmQnKTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTUycsIDRdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTJywgNV0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTUycsIDZdLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDA7XG59KTtcbmFkZEZvcm1hdFRva2VuKDAsIFsnU1NTU1NTUycsIDddLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1NTJywgOF0sIDAsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5taWxsaXNlY29uZCgpICogMTAwMDAwO1xufSk7XG5hZGRGb3JtYXRUb2tlbigwLCBbJ1NTU1NTU1NTUycsIDldLCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWlsbGlzZWNvbmQoKSAqIDEwMDAwMDA7XG59KTtcblxuXG4vLyBBTElBU0VTXG5cbmFkZFVuaXRBbGlhcygnbWlsbGlzZWNvbmQnLCAnbXMnKTtcblxuLy8gUFJJT1JJVFlcblxuYWRkVW5pdFByaW9yaXR5KCdtaWxsaXNlY29uZCcsIDE2KTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCdTJywgICAgbWF0Y2gxdG8zLCBtYXRjaDEpO1xuYWRkUmVnZXhUb2tlbignU1MnLCAgIG1hdGNoMXRvMywgbWF0Y2gyKTtcbmFkZFJlZ2V4VG9rZW4oJ1NTUycsICBtYXRjaDF0bzMsIG1hdGNoMyk7XG5cbnZhciB0b2tlbjtcbmZvciAodG9rZW4gPSAnU1NTUyc7IHRva2VuLmxlbmd0aCA8PSA5OyB0b2tlbiArPSAnUycpIHtcbiAgICBhZGRSZWdleFRva2VuKHRva2VuLCBtYXRjaFVuc2lnbmVkKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VNcyhpbnB1dCwgYXJyYXkpIHtcbiAgICBhcnJheVtNSUxMSVNFQ09ORF0gPSB0b0ludCgoJzAuJyArIGlucHV0KSAqIDEwMDApO1xufVxuXG5mb3IgKHRva2VuID0gJ1MnOyB0b2tlbi5sZW5ndGggPD0gOTsgdG9rZW4gKz0gJ1MnKSB7XG4gICAgYWRkUGFyc2VUb2tlbih0b2tlbiwgcGFyc2VNcyk7XG59XG4vLyBNT01FTlRTXG5cbnZhciBnZXRTZXRNaWxsaXNlY29uZCA9IG1ha2VHZXRTZXQoJ01pbGxpc2Vjb25kcycsIGZhbHNlKTtcblxuLy8gRk9STUFUVElOR1xuXG5hZGRGb3JtYXRUb2tlbigneicsICAwLCAwLCAnem9uZUFiYnInKTtcbmFkZEZvcm1hdFRva2VuKCd6eicsIDAsIDAsICd6b25lTmFtZScpO1xuXG4vLyBNT01FTlRTXG5cbmZ1bmN0aW9uIGdldFpvbmVBYmJyICgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNVVEMgPyAnVVRDJyA6ICcnO1xufVxuXG5mdW5jdGlvbiBnZXRab25lTmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVVRDID8gJ0Nvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lJyA6ICcnO1xufVxuXG52YXIgcHJvdG8gPSBNb21lbnQucHJvdG90eXBlO1xuXG5wcm90by5hZGQgICAgICAgICAgICAgICA9IGFkZDtcbnByb3RvLmNhbGVuZGFyICAgICAgICAgID0gY2FsZW5kYXIkMTtcbnByb3RvLmNsb25lICAgICAgICAgICAgID0gY2xvbmU7XG5wcm90by5kaWZmICAgICAgICAgICAgICA9IGRpZmY7XG5wcm90by5lbmRPZiAgICAgICAgICAgICA9IGVuZE9mO1xucHJvdG8uZm9ybWF0ICAgICAgICAgICAgPSBmb3JtYXQ7XG5wcm90by5mcm9tICAgICAgICAgICAgICA9IGZyb207XG5wcm90by5mcm9tTm93ICAgICAgICAgICA9IGZyb21Ob3c7XG5wcm90by50byAgICAgICAgICAgICAgICA9IHRvO1xucHJvdG8udG9Ob3cgICAgICAgICAgICAgPSB0b05vdztcbnByb3RvLmdldCAgICAgICAgICAgICAgID0gc3RyaW5nR2V0O1xucHJvdG8uaW52YWxpZEF0ICAgICAgICAgPSBpbnZhbGlkQXQ7XG5wcm90by5pc0FmdGVyICAgICAgICAgICA9IGlzQWZ0ZXI7XG5wcm90by5pc0JlZm9yZSAgICAgICAgICA9IGlzQmVmb3JlO1xucHJvdG8uaXNCZXR3ZWVuICAgICAgICAgPSBpc0JldHdlZW47XG5wcm90by5pc1NhbWUgICAgICAgICAgICA9IGlzU2FtZTtcbnByb3RvLmlzU2FtZU9yQWZ0ZXIgICAgID0gaXNTYW1lT3JBZnRlcjtcbnByb3RvLmlzU2FtZU9yQmVmb3JlICAgID0gaXNTYW1lT3JCZWZvcmU7XG5wcm90by5pc1ZhbGlkICAgICAgICAgICA9IGlzVmFsaWQkMjtcbnByb3RvLmxhbmcgICAgICAgICAgICAgID0gbGFuZztcbnByb3RvLmxvY2FsZSAgICAgICAgICAgID0gbG9jYWxlO1xucHJvdG8ubG9jYWxlRGF0YSAgICAgICAgPSBsb2NhbGVEYXRhO1xucHJvdG8ubWF4ICAgICAgICAgICAgICAgPSBwcm90b3R5cGVNYXg7XG5wcm90by5taW4gICAgICAgICAgICAgICA9IHByb3RvdHlwZU1pbjtcbnByb3RvLnBhcnNpbmdGbGFncyAgICAgID0gcGFyc2luZ0ZsYWdzO1xucHJvdG8uc2V0ICAgICAgICAgICAgICAgPSBzdHJpbmdTZXQ7XG5wcm90by5zdGFydE9mICAgICAgICAgICA9IHN0YXJ0T2Y7XG5wcm90by5zdWJ0cmFjdCAgICAgICAgICA9IHN1YnRyYWN0O1xucHJvdG8udG9BcnJheSAgICAgICAgICAgPSB0b0FycmF5O1xucHJvdG8udG9PYmplY3QgICAgICAgICAgPSB0b09iamVjdDtcbnByb3RvLnRvRGF0ZSAgICAgICAgICAgID0gdG9EYXRlO1xucHJvdG8udG9JU09TdHJpbmcgICAgICAgPSB0b0lTT1N0cmluZztcbnByb3RvLmluc3BlY3QgICAgICAgICAgID0gaW5zcGVjdDtcbnByb3RvLnRvSlNPTiAgICAgICAgICAgID0gdG9KU09OO1xucHJvdG8udG9TdHJpbmcgICAgICAgICAgPSB0b1N0cmluZztcbnByb3RvLnVuaXggICAgICAgICAgICAgID0gdW5peDtcbnByb3RvLnZhbHVlT2YgICAgICAgICAgID0gdmFsdWVPZjtcbnByb3RvLmNyZWF0aW9uRGF0YSAgICAgID0gY3JlYXRpb25EYXRhO1xuXG4vLyBZZWFyXG5wcm90by55ZWFyICAgICAgID0gZ2V0U2V0WWVhcjtcbnByb3RvLmlzTGVhcFllYXIgPSBnZXRJc0xlYXBZZWFyO1xuXG4vLyBXZWVrIFllYXJcbnByb3RvLndlZWtZZWFyICAgID0gZ2V0U2V0V2Vla1llYXI7XG5wcm90by5pc29XZWVrWWVhciA9IGdldFNldElTT1dlZWtZZWFyO1xuXG4vLyBRdWFydGVyXG5wcm90by5xdWFydGVyID0gcHJvdG8ucXVhcnRlcnMgPSBnZXRTZXRRdWFydGVyO1xuXG4vLyBNb250aFxucHJvdG8ubW9udGggICAgICAgPSBnZXRTZXRNb250aDtcbnByb3RvLmRheXNJbk1vbnRoID0gZ2V0RGF5c0luTW9udGg7XG5cbi8vIFdlZWtcbnByb3RvLndlZWsgICAgICAgICAgID0gcHJvdG8ud2Vla3MgICAgICAgID0gZ2V0U2V0V2VlaztcbnByb3RvLmlzb1dlZWsgICAgICAgID0gcHJvdG8uaXNvV2Vla3MgICAgID0gZ2V0U2V0SVNPV2VlaztcbnByb3RvLndlZWtzSW5ZZWFyICAgID0gZ2V0V2Vla3NJblllYXI7XG5wcm90by5pc29XZWVrc0luWWVhciA9IGdldElTT1dlZWtzSW5ZZWFyO1xuXG4vLyBEYXlcbnByb3RvLmRhdGUgICAgICAgPSBnZXRTZXREYXlPZk1vbnRoO1xucHJvdG8uZGF5ICAgICAgICA9IHByb3RvLmRheXMgICAgICAgICAgICAgPSBnZXRTZXREYXlPZldlZWs7XG5wcm90by53ZWVrZGF5ICAgID0gZ2V0U2V0TG9jYWxlRGF5T2ZXZWVrO1xucHJvdG8uaXNvV2Vla2RheSA9IGdldFNldElTT0RheU9mV2VlaztcbnByb3RvLmRheU9mWWVhciAgPSBnZXRTZXREYXlPZlllYXI7XG5cbi8vIEhvdXJcbnByb3RvLmhvdXIgPSBwcm90by5ob3VycyA9IGdldFNldEhvdXI7XG5cbi8vIE1pbnV0ZVxucHJvdG8ubWludXRlID0gcHJvdG8ubWludXRlcyA9IGdldFNldE1pbnV0ZTtcblxuLy8gU2Vjb25kXG5wcm90by5zZWNvbmQgPSBwcm90by5zZWNvbmRzID0gZ2V0U2V0U2Vjb25kO1xuXG4vLyBNaWxsaXNlY29uZFxucHJvdG8ubWlsbGlzZWNvbmQgPSBwcm90by5taWxsaXNlY29uZHMgPSBnZXRTZXRNaWxsaXNlY29uZDtcblxuLy8gT2Zmc2V0XG5wcm90by51dGNPZmZzZXQgICAgICAgICAgICA9IGdldFNldE9mZnNldDtcbnByb3RvLnV0YyAgICAgICAgICAgICAgICAgID0gc2V0T2Zmc2V0VG9VVEM7XG5wcm90by5sb2NhbCAgICAgICAgICAgICAgICA9IHNldE9mZnNldFRvTG9jYWw7XG5wcm90by5wYXJzZVpvbmUgICAgICAgICAgICA9IHNldE9mZnNldFRvUGFyc2VkT2Zmc2V0O1xucHJvdG8uaGFzQWxpZ25lZEhvdXJPZmZzZXQgPSBoYXNBbGlnbmVkSG91ck9mZnNldDtcbnByb3RvLmlzRFNUICAgICAgICAgICAgICAgID0gaXNEYXlsaWdodFNhdmluZ1RpbWU7XG5wcm90by5pc0xvY2FsICAgICAgICAgICAgICA9IGlzTG9jYWw7XG5wcm90by5pc1V0Y09mZnNldCAgICAgICAgICA9IGlzVXRjT2Zmc2V0O1xucHJvdG8uaXNVdGMgICAgICAgICAgICAgICAgPSBpc1V0YztcbnByb3RvLmlzVVRDICAgICAgICAgICAgICAgID0gaXNVdGM7XG5cbi8vIFRpbWV6b25lXG5wcm90by56b25lQWJiciA9IGdldFpvbmVBYmJyO1xucHJvdG8uem9uZU5hbWUgPSBnZXRab25lTmFtZTtcblxuLy8gRGVwcmVjYXRpb25zXG5wcm90by5kYXRlcyAgPSBkZXByZWNhdGUoJ2RhdGVzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBkYXRlIGluc3RlYWQuJywgZ2V0U2V0RGF5T2ZNb250aCk7XG5wcm90by5tb250aHMgPSBkZXByZWNhdGUoJ21vbnRocyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgbW9udGggaW5zdGVhZCcsIGdldFNldE1vbnRoKTtcbnByb3RvLnllYXJzICA9IGRlcHJlY2F0ZSgneWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZCcsIGdldFNldFllYXIpO1xucHJvdG8uem9uZSAgID0gZGVwcmVjYXRlKCdtb21lbnQoKS56b25lIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQoKS51dGNPZmZzZXQgaW5zdGVhZC4gaHR0cDovL21vbWVudGpzLmNvbS9ndWlkZXMvIy93YXJuaW5ncy96b25lLycsIGdldFNldFpvbmUpO1xucHJvdG8uaXNEU1RTaGlmdGVkID0gZGVwcmVjYXRlKCdpc0RTVFNoaWZ0ZWQgaXMgZGVwcmVjYXRlZC4gU2VlIGh0dHA6Ly9tb21lbnRqcy5jb20vZ3VpZGVzLyMvd2FybmluZ3MvZHN0LXNoaWZ0ZWQvIGZvciBtb3JlIGluZm9ybWF0aW9uJywgaXNEYXlsaWdodFNhdmluZ1RpbWVTaGlmdGVkKTtcblxuZnVuY3Rpb24gY3JlYXRlVW5peCAoaW5wdXQpIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWwoaW5wdXQgKiAxMDAwKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlSW5ab25lICgpIHtcbiAgICByZXR1cm4gY3JlYXRlTG9jYWwuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5wYXJzZVpvbmUoKTtcbn1cblxuZnVuY3Rpb24gcHJlUGFyc2VQb3N0Rm9ybWF0IChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nO1xufVxuXG52YXIgcHJvdG8kMSA9IExvY2FsZS5wcm90b3R5cGU7XG5cbnByb3RvJDEuY2FsZW5kYXIgICAgICAgID0gY2FsZW5kYXI7XG5wcm90byQxLmxvbmdEYXRlRm9ybWF0ICA9IGxvbmdEYXRlRm9ybWF0O1xucHJvdG8kMS5pbnZhbGlkRGF0ZSAgICAgPSBpbnZhbGlkRGF0ZTtcbnByb3RvJDEub3JkaW5hbCAgICAgICAgID0gb3JkaW5hbDtcbnByb3RvJDEucHJlcGFyc2UgICAgICAgID0gcHJlUGFyc2VQb3N0Rm9ybWF0O1xucHJvdG8kMS5wb3N0Zm9ybWF0ICAgICAgPSBwcmVQYXJzZVBvc3RGb3JtYXQ7XG5wcm90byQxLnJlbGF0aXZlVGltZSAgICA9IHJlbGF0aXZlVGltZTtcbnByb3RvJDEucGFzdEZ1dHVyZSAgICAgID0gcGFzdEZ1dHVyZTtcbnByb3RvJDEuc2V0ICAgICAgICAgICAgID0gc2V0O1xuXG4vLyBNb250aFxucHJvdG8kMS5tb250aHMgICAgICAgICAgICA9ICAgICAgICBsb2NhbGVNb250aHM7XG5wcm90byQxLm1vbnRoc1Nob3J0ICAgICAgID0gICAgICAgIGxvY2FsZU1vbnRoc1Nob3J0O1xucHJvdG8kMS5tb250aHNQYXJzZSAgICAgICA9ICAgICAgICBsb2NhbGVNb250aHNQYXJzZTtcbnByb3RvJDEubW9udGhzUmVnZXggICAgICAgPSBtb250aHNSZWdleDtcbnByb3RvJDEubW9udGhzU2hvcnRSZWdleCAgPSBtb250aHNTaG9ydFJlZ2V4O1xuXG4vLyBXZWVrXG5wcm90byQxLndlZWsgPSBsb2NhbGVXZWVrO1xucHJvdG8kMS5maXJzdERheU9mWWVhciA9IGxvY2FsZUZpcnN0RGF5T2ZZZWFyO1xucHJvdG8kMS5maXJzdERheU9mV2VlayA9IGxvY2FsZUZpcnN0RGF5T2ZXZWVrO1xuXG4vLyBEYXkgb2YgV2Vla1xucHJvdG8kMS53ZWVrZGF5cyAgICAgICA9ICAgICAgICBsb2NhbGVXZWVrZGF5cztcbnByb3RvJDEud2Vla2RheXNNaW4gICAgPSAgICAgICAgbG9jYWxlV2Vla2RheXNNaW47XG5wcm90byQxLndlZWtkYXlzU2hvcnQgID0gICAgICAgIGxvY2FsZVdlZWtkYXlzU2hvcnQ7XG5wcm90byQxLndlZWtkYXlzUGFyc2UgID0gICAgICAgIGxvY2FsZVdlZWtkYXlzUGFyc2U7XG5cbnByb3RvJDEud2Vla2RheXNSZWdleCAgICAgICA9ICAgICAgICB3ZWVrZGF5c1JlZ2V4O1xucHJvdG8kMS53ZWVrZGF5c1Nob3J0UmVnZXggID0gICAgICAgIHdlZWtkYXlzU2hvcnRSZWdleDtcbnByb3RvJDEud2Vla2RheXNNaW5SZWdleCAgICA9ICAgICAgICB3ZWVrZGF5c01pblJlZ2V4O1xuXG4vLyBIb3Vyc1xucHJvdG8kMS5pc1BNID0gbG9jYWxlSXNQTTtcbnByb3RvJDEubWVyaWRpZW0gPSBsb2NhbGVNZXJpZGllbTtcblxuZnVuY3Rpb24gZ2V0JDEgKGZvcm1hdCwgaW5kZXgsIGZpZWxkLCBzZXR0ZXIpIHtcbiAgICB2YXIgbG9jYWxlID0gZ2V0TG9jYWxlKCk7XG4gICAgdmFyIHV0YyA9IGNyZWF0ZVVUQygpLnNldChzZXR0ZXIsIGluZGV4KTtcbiAgICByZXR1cm4gbG9jYWxlW2ZpZWxkXSh1dGMsIGZvcm1hdCk7XG59XG5cbmZ1bmN0aW9uIGxpc3RNb250aHNJbXBsIChmb3JtYXQsIGluZGV4LCBmaWVsZCkge1xuICAgIGlmIChpc051bWJlcihmb3JtYXQpKSB7XG4gICAgICAgIGluZGV4ID0gZm9ybWF0O1xuICAgICAgICBmb3JtYXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuXG4gICAgaWYgKGluZGV4ICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGdldCQxKGZvcm1hdCwgaW5kZXgsIGZpZWxkLCAnbW9udGgnKTtcbiAgICB9XG5cbiAgICB2YXIgaTtcbiAgICB2YXIgb3V0ID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgb3V0W2ldID0gZ2V0JDEoZm9ybWF0LCBpLCBmaWVsZCwgJ21vbnRoJyk7XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59XG5cbi8vICgpXG4vLyAoNSlcbi8vIChmbXQsIDUpXG4vLyAoZm10KVxuLy8gKHRydWUpXG4vLyAodHJ1ZSwgNSlcbi8vICh0cnVlLCBmbXQsIDUpXG4vLyAodHJ1ZSwgZm10KVxuZnVuY3Rpb24gbGlzdFdlZWtkYXlzSW1wbCAobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCBmaWVsZCkge1xuICAgIGlmICh0eXBlb2YgbG9jYWxlU29ydGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaWYgKGlzTnVtYmVyKGZvcm1hdCkpIHtcbiAgICAgICAgICAgIGluZGV4ID0gZm9ybWF0O1xuICAgICAgICAgICAgZm9ybWF0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm1hdCA9IGxvY2FsZVNvcnRlZDtcbiAgICAgICAgaW5kZXggPSBmb3JtYXQ7XG4gICAgICAgIGxvY2FsZVNvcnRlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChpc051bWJlcihmb3JtYXQpKSB7XG4gICAgICAgICAgICBpbmRleCA9IGZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnJztcbiAgICB9XG5cbiAgICB2YXIgbG9jYWxlID0gZ2V0TG9jYWxlKCksXG4gICAgICAgIHNoaWZ0ID0gbG9jYWxlU29ydGVkID8gbG9jYWxlLl93ZWVrLmRvdyA6IDA7XG5cbiAgICBpZiAoaW5kZXggIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZ2V0JDEoZm9ybWF0LCAoaW5kZXggKyBzaGlmdCkgJSA3LCBmaWVsZCwgJ2RheScpO1xuICAgIH1cblxuICAgIHZhciBpO1xuICAgIHZhciBvdXQgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgIG91dFtpXSA9IGdldCQxKGZvcm1hdCwgKGkgKyBzaGlmdCkgJSA3LCBmaWVsZCwgJ2RheScpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBsaXN0TW9udGhzIChmb3JtYXQsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCwgaW5kZXgsICdtb250aHMnKTtcbn1cblxuZnVuY3Rpb24gbGlzdE1vbnRoc1Nob3J0IChmb3JtYXQsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxpc3RNb250aHNJbXBsKGZvcm1hdCwgaW5kZXgsICdtb250aHNTaG9ydCcpO1xufVxuXG5mdW5jdGlvbiBsaXN0V2Vla2RheXMgKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCkge1xuICAgIHJldHVybiBsaXN0V2Vla2RheXNJbXBsKGxvY2FsZVNvcnRlZCwgZm9ybWF0LCBpbmRleCwgJ3dlZWtkYXlzJyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c1Nob3J0IChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgpIHtcbiAgICByZXR1cm4gbGlzdFdlZWtkYXlzSW1wbChsb2NhbGVTb3J0ZWQsIGZvcm1hdCwgaW5kZXgsICd3ZWVrZGF5c1Nob3J0Jyk7XG59XG5cbmZ1bmN0aW9uIGxpc3RXZWVrZGF5c01pbiAobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxpc3RXZWVrZGF5c0ltcGwobG9jYWxlU29ydGVkLCBmb3JtYXQsIGluZGV4LCAnd2Vla2RheXNNaW4nKTtcbn1cblxuZ2V0U2V0R2xvYmFsTG9jYWxlKCdlbicsIHtcbiAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0odGh8c3R8bmR8cmQpLyxcbiAgICBvcmRpbmFsIDogZnVuY3Rpb24gKG51bWJlcikge1xuICAgICAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxuICAgICAgICAgICAgb3V0cHV0ID0gKHRvSW50KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAndGgnIDpcbiAgICAgICAgICAgIChiID09PSAxKSA/ICdzdCcgOlxuICAgICAgICAgICAgKGIgPT09IDIpID8gJ25kJyA6XG4gICAgICAgICAgICAoYiA9PT0gMykgPyAncmQnIDogJ3RoJztcbiAgICAgICAgcmV0dXJuIG51bWJlciArIG91dHB1dDtcbiAgICB9XG59KTtcblxuLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuaG9va3MubGFuZyA9IGRlcHJlY2F0ZSgnbW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4nLCBnZXRTZXRHbG9iYWxMb2NhbGUpO1xuaG9va3MubGFuZ0RhdGEgPSBkZXByZWNhdGUoJ21vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4nLCBnZXRMb2NhbGUpO1xuXG52YXIgbWF0aEFicyA9IE1hdGguYWJzO1xuXG5mdW5jdGlvbiBhYnMgKCkge1xuICAgIHZhciBkYXRhICAgICAgICAgICA9IHRoaXMuX2RhdGE7XG5cbiAgICB0aGlzLl9taWxsaXNlY29uZHMgPSBtYXRoQWJzKHRoaXMuX21pbGxpc2Vjb25kcyk7XG4gICAgdGhpcy5fZGF5cyAgICAgICAgID0gbWF0aEFicyh0aGlzLl9kYXlzKTtcbiAgICB0aGlzLl9tb250aHMgICAgICAgPSBtYXRoQWJzKHRoaXMuX21vbnRocyk7XG5cbiAgICBkYXRhLm1pbGxpc2Vjb25kcyAgPSBtYXRoQWJzKGRhdGEubWlsbGlzZWNvbmRzKTtcbiAgICBkYXRhLnNlY29uZHMgICAgICAgPSBtYXRoQWJzKGRhdGEuc2Vjb25kcyk7XG4gICAgZGF0YS5taW51dGVzICAgICAgID0gbWF0aEFicyhkYXRhLm1pbnV0ZXMpO1xuICAgIGRhdGEuaG91cnMgICAgICAgICA9IG1hdGhBYnMoZGF0YS5ob3Vycyk7XG4gICAgZGF0YS5tb250aHMgICAgICAgID0gbWF0aEFicyhkYXRhLm1vbnRocyk7XG4gICAgZGF0YS55ZWFycyAgICAgICAgID0gbWF0aEFicyhkYXRhLnllYXJzKTtcblxuICAgIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiBhZGRTdWJ0cmFjdCQxIChkdXJhdGlvbiwgaW5wdXQsIHZhbHVlLCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgb3RoZXIgPSBjcmVhdGVEdXJhdGlvbihpbnB1dCwgdmFsdWUpO1xuXG4gICAgZHVyYXRpb24uX21pbGxpc2Vjb25kcyArPSBkaXJlY3Rpb24gKiBvdGhlci5fbWlsbGlzZWNvbmRzO1xuICAgIGR1cmF0aW9uLl9kYXlzICAgICAgICAgKz0gZGlyZWN0aW9uICogb3RoZXIuX2RheXM7XG4gICAgZHVyYXRpb24uX21vbnRocyAgICAgICArPSBkaXJlY3Rpb24gKiBvdGhlci5fbW9udGhzO1xuXG4gICAgcmV0dXJuIGR1cmF0aW9uLl9idWJibGUoKTtcbn1cblxuLy8gc3VwcG9ydHMgb25seSAyLjAtc3R5bGUgYWRkKDEsICdzJykgb3IgYWRkKGR1cmF0aW9uKVxuZnVuY3Rpb24gYWRkJDEgKGlucHV0LCB2YWx1ZSkge1xuICAgIHJldHVybiBhZGRTdWJ0cmFjdCQxKHRoaXMsIGlucHV0LCB2YWx1ZSwgMSk7XG59XG5cbi8vIHN1cHBvcnRzIG9ubHkgMi4wLXN0eWxlIHN1YnRyYWN0KDEsICdzJykgb3Igc3VidHJhY3QoZHVyYXRpb24pXG5mdW5jdGlvbiBzdWJ0cmFjdCQxIChpbnB1dCwgdmFsdWUpIHtcbiAgICByZXR1cm4gYWRkU3VidHJhY3QkMSh0aGlzLCBpbnB1dCwgdmFsdWUsIC0xKTtcbn1cblxuZnVuY3Rpb24gYWJzQ2VpbCAobnVtYmVyKSB7XG4gICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobnVtYmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBidWJibGUgKCkge1xuICAgIHZhciBtaWxsaXNlY29uZHMgPSB0aGlzLl9taWxsaXNlY29uZHM7XG4gICAgdmFyIGRheXMgICAgICAgICA9IHRoaXMuX2RheXM7XG4gICAgdmFyIG1vbnRocyAgICAgICA9IHRoaXMuX21vbnRocztcbiAgICB2YXIgZGF0YSAgICAgICAgID0gdGhpcy5fZGF0YTtcbiAgICB2YXIgc2Vjb25kcywgbWludXRlcywgaG91cnMsIHllYXJzLCBtb250aHNGcm9tRGF5cztcblxuICAgIC8vIGlmIHdlIGhhdmUgYSBtaXggb2YgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIHZhbHVlcywgYnViYmxlIGRvd24gZmlyc3RcbiAgICAvLyBjaGVjazogaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzIxNjZcbiAgICBpZiAoISgobWlsbGlzZWNvbmRzID49IDAgJiYgZGF5cyA+PSAwICYmIG1vbnRocyA+PSAwKSB8fFxuICAgICAgICAgICAgKG1pbGxpc2Vjb25kcyA8PSAwICYmIGRheXMgPD0gMCAmJiBtb250aHMgPD0gMCkpKSB7XG4gICAgICAgIG1pbGxpc2Vjb25kcyArPSBhYnNDZWlsKG1vbnRoc1RvRGF5cyhtb250aHMpICsgZGF5cykgKiA4NjRlNTtcbiAgICAgICAgZGF5cyA9IDA7XG4gICAgICAgIG1vbnRocyA9IDA7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIGJ1YmJsZXMgdXAgdmFsdWVzLCBzZWUgdGhlIHRlc3RzIGZvclxuICAgIC8vIGV4YW1wbGVzIG9mIHdoYXQgdGhhdCBtZWFucy5cbiAgICBkYXRhLm1pbGxpc2Vjb25kcyA9IG1pbGxpc2Vjb25kcyAlIDEwMDA7XG5cbiAgICBzZWNvbmRzICAgICAgICAgICA9IGFic0Zsb29yKG1pbGxpc2Vjb25kcyAvIDEwMDApO1xuICAgIGRhdGEuc2Vjb25kcyAgICAgID0gc2Vjb25kcyAlIDYwO1xuXG4gICAgbWludXRlcyAgICAgICAgICAgPSBhYnNGbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGRhdGEubWludXRlcyAgICAgID0gbWludXRlcyAlIDYwO1xuXG4gICAgaG91cnMgICAgICAgICAgICAgPSBhYnNGbG9vcihtaW51dGVzIC8gNjApO1xuICAgIGRhdGEuaG91cnMgICAgICAgID0gaG91cnMgJSAyNDtcblxuICAgIGRheXMgKz0gYWJzRmxvb3IoaG91cnMgLyAyNCk7XG5cbiAgICAvLyBjb252ZXJ0IGRheXMgdG8gbW9udGhzXG4gICAgbW9udGhzRnJvbURheXMgPSBhYnNGbG9vcihkYXlzVG9Nb250aHMoZGF5cykpO1xuICAgIG1vbnRocyArPSBtb250aHNGcm9tRGF5cztcbiAgICBkYXlzIC09IGFic0NlaWwobW9udGhzVG9EYXlzKG1vbnRoc0Zyb21EYXlzKSk7XG5cbiAgICAvLyAxMiBtb250aHMgLT4gMSB5ZWFyXG4gICAgeWVhcnMgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gICAgbW9udGhzICU9IDEyO1xuXG4gICAgZGF0YS5kYXlzICAgPSBkYXlzO1xuICAgIGRhdGEubW9udGhzID0gbW9udGhzO1xuICAgIGRhdGEueWVhcnMgID0geWVhcnM7XG5cbiAgICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gZGF5c1RvTW9udGhzIChkYXlzKSB7XG4gICAgLy8gNDAwIHllYXJzIGhhdmUgMTQ2MDk3IGRheXMgKHRha2luZyBpbnRvIGFjY291bnQgbGVhcCB5ZWFyIHJ1bGVzKVxuICAgIC8vIDQwMCB5ZWFycyBoYXZlIDEyIG1vbnRocyA9PT0gNDgwMFxuICAgIHJldHVybiBkYXlzICogNDgwMCAvIDE0NjA5Nztcbn1cblxuZnVuY3Rpb24gbW9udGhzVG9EYXlzIChtb250aHMpIHtcbiAgICAvLyB0aGUgcmV2ZXJzZSBvZiBkYXlzVG9Nb250aHNcbiAgICByZXR1cm4gbW9udGhzICogMTQ2MDk3IC8gNDgwMDtcbn1cblxuZnVuY3Rpb24gYXMgKHVuaXRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgIH1cbiAgICB2YXIgZGF5cztcbiAgICB2YXIgbW9udGhzO1xuICAgIHZhciBtaWxsaXNlY29uZHMgPSB0aGlzLl9taWxsaXNlY29uZHM7XG5cbiAgICB1bml0cyA9IG5vcm1hbGl6ZVVuaXRzKHVuaXRzKTtcblxuICAgIGlmICh1bml0cyA9PT0gJ21vbnRoJyB8fCB1bml0cyA9PT0gJ3llYXInKSB7XG4gICAgICAgIGRheXMgICA9IHRoaXMuX2RheXMgICArIG1pbGxpc2Vjb25kcyAvIDg2NGU1O1xuICAgICAgICBtb250aHMgPSB0aGlzLl9tb250aHMgKyBkYXlzVG9Nb250aHMoZGF5cyk7XG4gICAgICAgIHJldHVybiB1bml0cyA9PT0gJ21vbnRoJyA/IG1vbnRocyA6IG1vbnRocyAvIDEyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGhhbmRsZSBtaWxsaXNlY29uZHMgc2VwYXJhdGVseSBiZWNhdXNlIG9mIGZsb2F0aW5nIHBvaW50IG1hdGggZXJyb3JzIChpc3N1ZSAjMTg2NylcbiAgICAgICAgZGF5cyA9IHRoaXMuX2RheXMgKyBNYXRoLnJvdW5kKG1vbnRoc1RvRGF5cyh0aGlzLl9tb250aHMpKTtcbiAgICAgICAgc3dpdGNoICh1bml0cykge1xuICAgICAgICAgICAgY2FzZSAnd2VlaycgICA6IHJldHVybiBkYXlzIC8gNyAgICAgKyBtaWxsaXNlY29uZHMgLyA2MDQ4ZTU7XG4gICAgICAgICAgICBjYXNlICdkYXknICAgIDogcmV0dXJuIGRheXMgICAgICAgICArIG1pbGxpc2Vjb25kcyAvIDg2NGU1O1xuICAgICAgICAgICAgY2FzZSAnaG91cicgICA6IHJldHVybiBkYXlzICogMjQgICAgKyBtaWxsaXNlY29uZHMgLyAzNmU1O1xuICAgICAgICAgICAgY2FzZSAnbWludXRlJyA6IHJldHVybiBkYXlzICogMTQ0MCAgKyBtaWxsaXNlY29uZHMgLyA2ZTQ7XG4gICAgICAgICAgICBjYXNlICdzZWNvbmQnIDogcmV0dXJuIGRheXMgKiA4NjQwMCArIG1pbGxpc2Vjb25kcyAvIDEwMDA7XG4gICAgICAgICAgICAvLyBNYXRoLmZsb29yIHByZXZlbnRzIGZsb2F0aW5nIHBvaW50IG1hdGggZXJyb3JzIGhlcmVcbiAgICAgICAgICAgIGNhc2UgJ21pbGxpc2Vjb25kJzogcmV0dXJuIE1hdGguZmxvb3IoZGF5cyAqIDg2NGU1KSArIG1pbGxpc2Vjb25kcztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcignVW5rbm93biB1bml0ICcgKyB1bml0cyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIFRPRE86IFVzZSB0aGlzLmFzKCdtcycpP1xuZnVuY3Rpb24gdmFsdWVPZiQxICgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX21pbGxpc2Vjb25kcyArXG4gICAgICAgIHRoaXMuX2RheXMgKiA4NjRlNSArXG4gICAgICAgICh0aGlzLl9tb250aHMgJSAxMikgKiAyNTkyZTYgK1xuICAgICAgICB0b0ludCh0aGlzLl9tb250aHMgLyAxMikgKiAzMTUzNmU2XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbWFrZUFzIChhbGlhcykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzKGFsaWFzKTtcbiAgICB9O1xufVxuXG52YXIgYXNNaWxsaXNlY29uZHMgPSBtYWtlQXMoJ21zJyk7XG52YXIgYXNTZWNvbmRzICAgICAgPSBtYWtlQXMoJ3MnKTtcbnZhciBhc01pbnV0ZXMgICAgICA9IG1ha2VBcygnbScpO1xudmFyIGFzSG91cnMgICAgICAgID0gbWFrZUFzKCdoJyk7XG52YXIgYXNEYXlzICAgICAgICAgPSBtYWtlQXMoJ2QnKTtcbnZhciBhc1dlZWtzICAgICAgICA9IG1ha2VBcygndycpO1xudmFyIGFzTW9udGhzICAgICAgID0gbWFrZUFzKCdNJyk7XG52YXIgYXNZZWFycyAgICAgICAgPSBtYWtlQXMoJ3knKTtcblxuZnVuY3Rpb24gZ2V0JDIgKHVuaXRzKSB7XG4gICAgdW5pdHMgPSBub3JtYWxpemVVbml0cyh1bml0cyk7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpc1t1bml0cyArICdzJ10oKSA6IE5hTjtcbn1cblxuZnVuY3Rpb24gbWFrZUdldHRlcihuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCgpID8gdGhpcy5fZGF0YVtuYW1lXSA6IE5hTjtcbiAgICB9O1xufVxuXG52YXIgbWlsbGlzZWNvbmRzID0gbWFrZUdldHRlcignbWlsbGlzZWNvbmRzJyk7XG52YXIgc2Vjb25kcyAgICAgID0gbWFrZUdldHRlcignc2Vjb25kcycpO1xudmFyIG1pbnV0ZXMgICAgICA9IG1ha2VHZXR0ZXIoJ21pbnV0ZXMnKTtcbnZhciBob3VycyAgICAgICAgPSBtYWtlR2V0dGVyKCdob3VycycpO1xudmFyIGRheXMgICAgICAgICA9IG1ha2VHZXR0ZXIoJ2RheXMnKTtcbnZhciBtb250aHMgICAgICAgPSBtYWtlR2V0dGVyKCdtb250aHMnKTtcbnZhciB5ZWFycyAgICAgICAgPSBtYWtlR2V0dGVyKCd5ZWFycycpO1xuXG5mdW5jdGlvbiB3ZWVrcyAoKSB7XG4gICAgcmV0dXJuIGFic0Zsb29yKHRoaXMuZGF5cygpIC8gNyk7XG59XG5cbnZhciByb3VuZCA9IE1hdGgucm91bmQ7XG52YXIgdGhyZXNob2xkcyA9IHtcbiAgICBzczogNDQsICAgICAgICAgLy8gYSBmZXcgc2Vjb25kcyB0byBzZWNvbmRzXG4gICAgcyA6IDQ1LCAgICAgICAgIC8vIHNlY29uZHMgdG8gbWludXRlXG4gICAgbSA6IDQ1LCAgICAgICAgIC8vIG1pbnV0ZXMgdG8gaG91clxuICAgIGggOiAyMiwgICAgICAgICAvLyBob3VycyB0byBkYXlcbiAgICBkIDogMjYsICAgICAgICAgLy8gZGF5cyB0byBtb250aFxuICAgIE0gOiAxMSAgICAgICAgICAvLyBtb250aHMgdG8geWVhclxufTtcblxuLy8gaGVscGVyIGZ1bmN0aW9uIGZvciBtb21lbnQuZm4uZnJvbSwgbW9tZW50LmZuLmZyb21Ob3csIGFuZCBtb21lbnQuZHVyYXRpb24uZm4uaHVtYW5pemVcbmZ1bmN0aW9uIHN1YnN0aXR1dGVUaW1lQWdvKHN0cmluZywgbnVtYmVyLCB3aXRob3V0U3VmZml4LCBpc0Z1dHVyZSwgbG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS5yZWxhdGl2ZVRpbWUobnVtYmVyIHx8IDEsICEhd2l0aG91dFN1ZmZpeCwgc3RyaW5nLCBpc0Z1dHVyZSk7XG59XG5cbmZ1bmN0aW9uIHJlbGF0aXZlVGltZSQxIChwb3NOZWdEdXJhdGlvbiwgd2l0aG91dFN1ZmZpeCwgbG9jYWxlKSB7XG4gICAgdmFyIGR1cmF0aW9uID0gY3JlYXRlRHVyYXRpb24ocG9zTmVnRHVyYXRpb24pLmFicygpO1xuICAgIHZhciBzZWNvbmRzICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdzJykpO1xuICAgIHZhciBtaW51dGVzICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdtJykpO1xuICAgIHZhciBob3VycyAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdoJykpO1xuICAgIHZhciBkYXlzICAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdkJykpO1xuICAgIHZhciBtb250aHMgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCdNJykpO1xuICAgIHZhciB5ZWFycyAgICA9IHJvdW5kKGR1cmF0aW9uLmFzKCd5JykpO1xuXG4gICAgdmFyIGEgPSBzZWNvbmRzIDw9IHRocmVzaG9sZHMuc3MgJiYgWydzJywgc2Vjb25kc10gIHx8XG4gICAgICAgICAgICBzZWNvbmRzIDwgdGhyZXNob2xkcy5zICAgJiYgWydzcycsIHNlY29uZHNdIHx8XG4gICAgICAgICAgICBtaW51dGVzIDw9IDEgICAgICAgICAgICAgJiYgWydtJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICBtaW51dGVzIDwgdGhyZXNob2xkcy5tICAgJiYgWydtbScsIG1pbnV0ZXNdIHx8XG4gICAgICAgICAgICBob3VycyAgIDw9IDEgICAgICAgICAgICAgJiYgWydoJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICBob3VycyAgIDwgdGhyZXNob2xkcy5oICAgJiYgWydoaCcsIGhvdXJzXSAgIHx8XG4gICAgICAgICAgICBkYXlzICAgIDw9IDEgICAgICAgICAgICAgJiYgWydkJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICBkYXlzICAgIDwgdGhyZXNob2xkcy5kICAgJiYgWydkZCcsIGRheXNdICAgIHx8XG4gICAgICAgICAgICBtb250aHMgIDw9IDEgICAgICAgICAgICAgJiYgWydNJ10gICAgICAgICAgIHx8XG4gICAgICAgICAgICBtb250aHMgIDwgdGhyZXNob2xkcy5NICAgJiYgWydNTScsIG1vbnRoc10gIHx8XG4gICAgICAgICAgICB5ZWFycyAgIDw9IDEgICAgICAgICAgICAgJiYgWyd5J10gICAgICAgICAgIHx8IFsneXknLCB5ZWFyc107XG5cbiAgICBhWzJdID0gd2l0aG91dFN1ZmZpeDtcbiAgICBhWzNdID0gK3Bvc05lZ0R1cmF0aW9uID4gMDtcbiAgICBhWzRdID0gbG9jYWxlO1xuICAgIHJldHVybiBzdWJzdGl0dXRlVGltZUFnby5hcHBseShudWxsLCBhKTtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiBhbGxvd3MgeW91IHRvIHNldCB0aGUgcm91bmRpbmcgZnVuY3Rpb24gZm9yIHJlbGF0aXZlIHRpbWUgc3RyaW5nc1xuZnVuY3Rpb24gZ2V0U2V0UmVsYXRpdmVUaW1lUm91bmRpbmcgKHJvdW5kaW5nRnVuY3Rpb24pIHtcbiAgICBpZiAocm91bmRpbmdGdW5jdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiByb3VuZDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZihyb3VuZGluZ0Z1bmN0aW9uKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByb3VuZCA9IHJvdW5kaW5nRnVuY3Rpb247XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHlvdSB0byBzZXQgYSB0aHJlc2hvbGQgZm9yIHJlbGF0aXZlIHRpbWUgc3RyaW5nc1xuZnVuY3Rpb24gZ2V0U2V0UmVsYXRpdmVUaW1lVGhyZXNob2xkICh0aHJlc2hvbGQsIGxpbWl0KSB7XG4gICAgaWYgKHRocmVzaG9sZHNbdGhyZXNob2xkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGxpbWl0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRocmVzaG9sZHNbdGhyZXNob2xkXTtcbiAgICB9XG4gICAgdGhyZXNob2xkc1t0aHJlc2hvbGRdID0gbGltaXQ7XG4gICAgaWYgKHRocmVzaG9sZCA9PT0gJ3MnKSB7XG4gICAgICAgIHRocmVzaG9sZHMuc3MgPSBsaW1pdCAtIDE7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBodW1hbml6ZSAod2l0aFN1ZmZpeCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCk7XG4gICAgfVxuXG4gICAgdmFyIGxvY2FsZSA9IHRoaXMubG9jYWxlRGF0YSgpO1xuICAgIHZhciBvdXRwdXQgPSByZWxhdGl2ZVRpbWUkMSh0aGlzLCAhd2l0aFN1ZmZpeCwgbG9jYWxlKTtcblxuICAgIGlmICh3aXRoU3VmZml4KSB7XG4gICAgICAgIG91dHB1dCA9IGxvY2FsZS5wYXN0RnV0dXJlKCt0aGlzLCBvdXRwdXQpO1xuICAgIH1cblxuICAgIHJldHVybiBsb2NhbGUucG9zdGZvcm1hdChvdXRwdXQpO1xufVxuXG52YXIgYWJzJDEgPSBNYXRoLmFicztcblxuZnVuY3Rpb24gdG9JU09TdHJpbmckMSgpIHtcbiAgICAvLyBmb3IgSVNPIHN0cmluZ3Mgd2UgZG8gbm90IHVzZSB0aGUgbm9ybWFsIGJ1YmJsaW5nIHJ1bGVzOlxuICAgIC8vICAqIG1pbGxpc2Vjb25kcyBidWJibGUgdXAgdW50aWwgdGhleSBiZWNvbWUgaG91cnNcbiAgICAvLyAgKiBkYXlzIGRvIG5vdCBidWJibGUgYXQgYWxsXG4gICAgLy8gICogbW9udGhzIGJ1YmJsZSB1cCB1bnRpbCB0aGV5IGJlY29tZSB5ZWFyc1xuICAgIC8vIFRoaXMgaXMgYmVjYXVzZSB0aGVyZSBpcyBubyBjb250ZXh0LWZyZWUgY29udmVyc2lvbiBiZXR3ZWVuIGhvdXJzIGFuZCBkYXlzXG4gICAgLy8gKHRoaW5rIG9mIGNsb2NrIGNoYW5nZXMpXG4gICAgLy8gYW5kIGFsc28gbm90IGJldHdlZW4gZGF5cyBhbmQgbW9udGhzICgyOC0zMSBkYXlzIHBlciBtb250aClcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpO1xuICAgIH1cblxuICAgIHZhciBzZWNvbmRzID0gYWJzJDEodGhpcy5fbWlsbGlzZWNvbmRzKSAvIDEwMDA7XG4gICAgdmFyIGRheXMgICAgICAgICA9IGFicyQxKHRoaXMuX2RheXMpO1xuICAgIHZhciBtb250aHMgICAgICAgPSBhYnMkMSh0aGlzLl9tb250aHMpO1xuICAgIHZhciBtaW51dGVzLCBob3VycywgeWVhcnM7XG5cbiAgICAvLyAzNjAwIHNlY29uZHMgLT4gNjAgbWludXRlcyAtPiAxIGhvdXJcbiAgICBtaW51dGVzICAgICAgICAgICA9IGFic0Zsb29yKHNlY29uZHMgLyA2MCk7XG4gICAgaG91cnMgICAgICAgICAgICAgPSBhYnNGbG9vcihtaW51dGVzIC8gNjApO1xuICAgIHNlY29uZHMgJT0gNjA7XG4gICAgbWludXRlcyAlPSA2MDtcblxuICAgIC8vIDEyIG1vbnRocyAtPiAxIHllYXJcbiAgICB5ZWFycyAgPSBhYnNGbG9vcihtb250aHMgLyAxMik7XG4gICAgbW9udGhzICU9IDEyO1xuXG5cbiAgICAvLyBpbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vZG9yZGlsbGUvbW9tZW50LWlzb2R1cmF0aW9uL2Jsb2IvbWFzdGVyL21vbWVudC5pc29kdXJhdGlvbi5qc1xuICAgIHZhciBZID0geWVhcnM7XG4gICAgdmFyIE0gPSBtb250aHM7XG4gICAgdmFyIEQgPSBkYXlzO1xuICAgIHZhciBoID0gaG91cnM7XG4gICAgdmFyIG0gPSBtaW51dGVzO1xuICAgIHZhciBzID0gc2Vjb25kcztcbiAgICB2YXIgdG90YWwgPSB0aGlzLmFzU2Vjb25kcygpO1xuXG4gICAgaWYgKCF0b3RhbCkge1xuICAgICAgICAvLyB0aGlzIGlzIHRoZSBzYW1lIGFzIEMjJ3MgKE5vZGEpIGFuZCBweXRob24gKGlzb2RhdGUpLi4uXG4gICAgICAgIC8vIGJ1dCBub3Qgb3RoZXIgSlMgKGdvb2cuZGF0ZSlcbiAgICAgICAgcmV0dXJuICdQMEQnO1xuICAgIH1cblxuICAgIHJldHVybiAodG90YWwgPCAwID8gJy0nIDogJycpICtcbiAgICAgICAgJ1AnICtcbiAgICAgICAgKFkgPyBZICsgJ1knIDogJycpICtcbiAgICAgICAgKE0gPyBNICsgJ00nIDogJycpICtcbiAgICAgICAgKEQgPyBEICsgJ0QnIDogJycpICtcbiAgICAgICAgKChoIHx8IG0gfHwgcykgPyAnVCcgOiAnJykgK1xuICAgICAgICAoaCA/IGggKyAnSCcgOiAnJykgK1xuICAgICAgICAobSA/IG0gKyAnTScgOiAnJykgK1xuICAgICAgICAocyA/IHMgKyAnUycgOiAnJyk7XG59XG5cbnZhciBwcm90byQyID0gRHVyYXRpb24ucHJvdG90eXBlO1xuXG5wcm90byQyLmlzVmFsaWQgICAgICAgID0gaXNWYWxpZCQxO1xucHJvdG8kMi5hYnMgICAgICAgICAgICA9IGFicztcbnByb3RvJDIuYWRkICAgICAgICAgICAgPSBhZGQkMTtcbnByb3RvJDIuc3VidHJhY3QgICAgICAgPSBzdWJ0cmFjdCQxO1xucHJvdG8kMi5hcyAgICAgICAgICAgICA9IGFzO1xucHJvdG8kMi5hc01pbGxpc2Vjb25kcyA9IGFzTWlsbGlzZWNvbmRzO1xucHJvdG8kMi5hc1NlY29uZHMgICAgICA9IGFzU2Vjb25kcztcbnByb3RvJDIuYXNNaW51dGVzICAgICAgPSBhc01pbnV0ZXM7XG5wcm90byQyLmFzSG91cnMgICAgICAgID0gYXNIb3VycztcbnByb3RvJDIuYXNEYXlzICAgICAgICAgPSBhc0RheXM7XG5wcm90byQyLmFzV2Vla3MgICAgICAgID0gYXNXZWVrcztcbnByb3RvJDIuYXNNb250aHMgICAgICAgPSBhc01vbnRocztcbnByb3RvJDIuYXNZZWFycyAgICAgICAgPSBhc1llYXJzO1xucHJvdG8kMi52YWx1ZU9mICAgICAgICA9IHZhbHVlT2YkMTtcbnByb3RvJDIuX2J1YmJsZSAgICAgICAgPSBidWJibGU7XG5wcm90byQyLmdldCAgICAgICAgICAgID0gZ2V0JDI7XG5wcm90byQyLm1pbGxpc2Vjb25kcyAgID0gbWlsbGlzZWNvbmRzO1xucHJvdG8kMi5zZWNvbmRzICAgICAgICA9IHNlY29uZHM7XG5wcm90byQyLm1pbnV0ZXMgICAgICAgID0gbWludXRlcztcbnByb3RvJDIuaG91cnMgICAgICAgICAgPSBob3VycztcbnByb3RvJDIuZGF5cyAgICAgICAgICAgPSBkYXlzO1xucHJvdG8kMi53ZWVrcyAgICAgICAgICA9IHdlZWtzO1xucHJvdG8kMi5tb250aHMgICAgICAgICA9IG1vbnRocztcbnByb3RvJDIueWVhcnMgICAgICAgICAgPSB5ZWFycztcbnByb3RvJDIuaHVtYW5pemUgICAgICAgPSBodW1hbml6ZTtcbnByb3RvJDIudG9JU09TdHJpbmcgICAgPSB0b0lTT1N0cmluZyQxO1xucHJvdG8kMi50b1N0cmluZyAgICAgICA9IHRvSVNPU3RyaW5nJDE7XG5wcm90byQyLnRvSlNPTiAgICAgICAgID0gdG9JU09TdHJpbmckMTtcbnByb3RvJDIubG9jYWxlICAgICAgICAgPSBsb2NhbGU7XG5wcm90byQyLmxvY2FsZURhdGEgICAgID0gbG9jYWxlRGF0YTtcblxuLy8gRGVwcmVjYXRpb25zXG5wcm90byQyLnRvSXNvU3RyaW5nID0gZGVwcmVjYXRlKCd0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKScsIHRvSVNPU3RyaW5nJDEpO1xucHJvdG8kMi5sYW5nID0gbGFuZztcblxuLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuXG4vLyBGT1JNQVRUSU5HXG5cbmFkZEZvcm1hdFRva2VuKCdYJywgMCwgMCwgJ3VuaXgnKTtcbmFkZEZvcm1hdFRva2VuKCd4JywgMCwgMCwgJ3ZhbHVlT2YnKTtcblxuLy8gUEFSU0lOR1xuXG5hZGRSZWdleFRva2VuKCd4JywgbWF0Y2hTaWduZWQpO1xuYWRkUmVnZXhUb2tlbignWCcsIG1hdGNoVGltZXN0YW1wKTtcbmFkZFBhcnNlVG9rZW4oJ1gnLCBmdW5jdGlvbiAoaW5wdXQsIGFycmF5LCBjb25maWcpIHtcbiAgICBjb25maWcuX2QgPSBuZXcgRGF0ZShwYXJzZUZsb2F0KGlucHV0LCAxMCkgKiAxMDAwKTtcbn0pO1xuYWRkUGFyc2VUb2tlbigneCcsIGZ1bmN0aW9uIChpbnB1dCwgYXJyYXksIGNvbmZpZykge1xuICAgIGNvbmZpZy5fZCA9IG5ldyBEYXRlKHRvSW50KGlucHV0KSk7XG59KTtcblxuLy8gU2lkZSBlZmZlY3QgaW1wb3J0c1xuXG5cbmhvb2tzLnZlcnNpb24gPSAnMi4xOC4xJztcblxuc2V0SG9va0NhbGxiYWNrKGNyZWF0ZUxvY2FsKTtcblxuaG9va3MuZm4gICAgICAgICAgICAgICAgICAgID0gcHJvdG87XG5ob29rcy5taW4gICAgICAgICAgICAgICAgICAgPSBtaW47XG5ob29rcy5tYXggICAgICAgICAgICAgICAgICAgPSBtYXg7XG5ob29rcy5ub3cgICAgICAgICAgICAgICAgICAgPSBub3c7XG5ob29rcy51dGMgICAgICAgICAgICAgICAgICAgPSBjcmVhdGVVVEM7XG5ob29rcy51bml4ICAgICAgICAgICAgICAgICAgPSBjcmVhdGVVbml4O1xuaG9va3MubW9udGhzICAgICAgICAgICAgICAgID0gbGlzdE1vbnRocztcbmhvb2tzLmlzRGF0ZSAgICAgICAgICAgICAgICA9IGlzRGF0ZTtcbmhvb2tzLmxvY2FsZSAgICAgICAgICAgICAgICA9IGdldFNldEdsb2JhbExvY2FsZTtcbmhvb2tzLmludmFsaWQgICAgICAgICAgICAgICA9IGNyZWF0ZUludmFsaWQ7XG5ob29rcy5kdXJhdGlvbiAgICAgICAgICAgICAgPSBjcmVhdGVEdXJhdGlvbjtcbmhvb2tzLmlzTW9tZW50ICAgICAgICAgICAgICA9IGlzTW9tZW50O1xuaG9va3Mud2Vla2RheXMgICAgICAgICAgICAgID0gbGlzdFdlZWtkYXlzO1xuaG9va3MucGFyc2Vab25lICAgICAgICAgICAgID0gY3JlYXRlSW5ab25lO1xuaG9va3MubG9jYWxlRGF0YSAgICAgICAgICAgID0gZ2V0TG9jYWxlO1xuaG9va3MuaXNEdXJhdGlvbiAgICAgICAgICAgID0gaXNEdXJhdGlvbjtcbmhvb2tzLm1vbnRoc1Nob3J0ICAgICAgICAgICA9IGxpc3RNb250aHNTaG9ydDtcbmhvb2tzLndlZWtkYXlzTWluICAgICAgICAgICA9IGxpc3RXZWVrZGF5c01pbjtcbmhvb2tzLmRlZmluZUxvY2FsZSAgICAgICAgICA9IGRlZmluZUxvY2FsZTtcbmhvb2tzLnVwZGF0ZUxvY2FsZSAgICAgICAgICA9IHVwZGF0ZUxvY2FsZTtcbmhvb2tzLmxvY2FsZXMgICAgICAgICAgICAgICA9IGxpc3RMb2NhbGVzO1xuaG9va3Mud2Vla2RheXNTaG9ydCAgICAgICAgID0gbGlzdFdlZWtkYXlzU2hvcnQ7XG5ob29rcy5ub3JtYWxpemVVbml0cyAgICAgICAgPSBub3JtYWxpemVVbml0cztcbmhvb2tzLnJlbGF0aXZlVGltZVJvdW5kaW5nID0gZ2V0U2V0UmVsYXRpdmVUaW1lUm91bmRpbmc7XG5ob29rcy5yZWxhdGl2ZVRpbWVUaHJlc2hvbGQgPSBnZXRTZXRSZWxhdGl2ZVRpbWVUaHJlc2hvbGQ7XG5ob29rcy5jYWxlbmRhckZvcm1hdCAgICAgICAgPSBnZXRDYWxlbmRhckZvcm1hdDtcbmhvb2tzLnByb3RvdHlwZSAgICAgICAgICAgICA9IHByb3RvO1xuXG5yZXR1cm4gaG9va3M7XG5cbn0pKSk7XG4iLCIvKlxub2JqZWN0LWFzc2lnblxuKGMpIFNpbmRyZSBTb3JodXNcbkBsaWNlbnNlIE1JVFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbnZhciBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzO1xudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBwcm9wSXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuZnVuY3Rpb24gdG9PYmplY3QodmFsKSB7XG5cdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3QuYXNzaWduIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBudWxsIG9yIHVuZGVmaW5lZCcpO1xuXHR9XG5cblx0cmV0dXJuIE9iamVjdCh2YWwpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VOYXRpdmUoKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFPYmplY3QuYXNzaWduKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZWN0IGJ1Z2d5IHByb3BlcnR5IGVudW1lcmF0aW9uIG9yZGVyIGluIG9sZGVyIFY4IHZlcnNpb25zLlxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9NDExOFxuXHRcdHZhciB0ZXN0MSA9IG5ldyBTdHJpbmcoJ2FiYycpOyAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXctd3JhcHBlcnNcblx0XHR0ZXN0MVs1XSA9ICdkZSc7XG5cdFx0aWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRlc3QxKVswXSA9PT0gJzUnKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzA1NlxuXHRcdHZhciB0ZXN0MiA9IHt9O1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xuXHRcdFx0dGVzdDJbJ18nICsgU3RyaW5nLmZyb21DaGFyQ29kZShpKV0gPSBpO1xuXHRcdH1cblx0XHR2YXIgb3JkZXIyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGVzdDIpLm1hcChmdW5jdGlvbiAobikge1xuXHRcdFx0cmV0dXJuIHRlc3QyW25dO1xuXHRcdH0pO1xuXHRcdGlmIChvcmRlcjIuam9pbignJykgIT09ICcwMTIzNDU2Nzg5Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMwNTZcblx0XHR2YXIgdGVzdDMgPSB7fTtcblx0XHQnYWJjZGVmZ2hpamtsbW5vcHFyc3QnLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uIChsZXR0ZXIpIHtcblx0XHRcdHRlc3QzW2xldHRlcl0gPSBsZXR0ZXI7XG5cdFx0fSk7XG5cdFx0aWYgKE9iamVjdC5rZXlzKE9iamVjdC5hc3NpZ24oe30sIHRlc3QzKSkuam9pbignJykgIT09XG5cdFx0XHRcdCdhYmNkZWZnaGlqa2xtbm9wcXJzdCcpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0Ly8gV2UgZG9uJ3QgZXhwZWN0IGFueSBvZiB0aGUgYWJvdmUgdG8gdGhyb3csIGJ1dCBiZXR0ZXIgdG8gYmUgc2FmZS5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVc2VOYXRpdmUoKSA/IE9iamVjdC5hc3NpZ24gOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcblx0dmFyIGZyb207XG5cdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdHZhciBzeW1ib2xzO1xuXG5cdGZvciAodmFyIHMgPSAxOyBzIDwgYXJndW1lbnRzLmxlbmd0aDsgcysrKSB7XG5cdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0Zm9yICh2YXIga2V5IGluIGZyb20pIHtcblx0XHRcdGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG5cdFx0XHRzeW1ib2xzID0gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChwcm9wSXNFbnVtZXJhYmxlLmNhbGwoZnJvbSwgc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHR0b1tzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdG87XG59O1xuIiwiLyohXG4gKiBQaWthZGF5XG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMTQgRGF2aWQgQnVzaGVsbCB8IEJTRCAmIE1JVCBsaWNlbnNlIHwgaHR0cHM6Ly9naXRodWIuY29tL2RidXNoZWxsL1Bpa2FkYXlcbiAqL1xuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpXG57XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG1vbWVudDtcbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIENvbW1vbkpTIG1vZHVsZVxuICAgICAgICAvLyBMb2FkIG1vbWVudC5qcyBhcyBhbiBvcHRpb25hbCBkZXBlbmRlbmN5XG4gICAgICAgIHRyeSB7IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpOyB9IGNhdGNoIChlKSB7fVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkobW9tZW50KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShmdW5jdGlvbiAocmVxKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBMb2FkIG1vbWVudC5qcyBhcyBhbiBvcHRpb25hbCBkZXBlbmRlbmN5XG4gICAgICAgICAgICB2YXIgaWQgPSAnbW9tZW50JztcbiAgICAgICAgICAgIHRyeSB7IG1vbWVudCA9IHJlcShpZCk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeShtb21lbnQpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290LlBpa2FkYXkgPSBmYWN0b3J5KHJvb3QubW9tZW50KTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uIChtb21lbnQpXG57XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLyoqXG4gICAgICogZmVhdHVyZSBkZXRlY3Rpb24gYW5kIGhlbHBlciBmdW5jdGlvbnNcbiAgICAgKi9cbiAgICB2YXIgaGFzTW9tZW50ID0gdHlwZW9mIG1vbWVudCA9PT0gJ2Z1bmN0aW9uJyxcblxuICAgIGhhc0V2ZW50TGlzdGVuZXJzID0gISF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcixcblxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuXG4gICAgc3RvID0gd2luZG93LnNldFRpbWVvdXQsXG5cbiAgICBhZGRFdmVudCA9IGZ1bmN0aW9uKGVsLCBlLCBjYWxsYmFjaywgY2FwdHVyZSlcbiAgICB7XG4gICAgICAgIGlmIChoYXNFdmVudExpc3RlbmVycykge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihlLCBjYWxsYmFjaywgISFjYXB0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBlLCBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlRXZlbnQgPSBmdW5jdGlvbihlbCwgZSwgY2FsbGJhY2ssIGNhcHR1cmUpXG4gICAge1xuICAgICAgICBpZiAoaGFzRXZlbnRMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgY2FsbGJhY2ssICEhY2FwdHVyZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5kZXRhY2hFdmVudCgnb24nICsgZSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHRyaW0gPSBmdW5jdGlvbihzdHIpXG4gICAge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csJycpO1xuICAgIH0sXG5cbiAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjbilcbiAgICB7XG4gICAgICAgIHJldHVybiAoJyAnICsgZWwuY2xhc3NOYW1lICsgJyAnKS5pbmRleE9mKCcgJyArIGNuICsgJyAnKSAhPT0gLTE7XG4gICAgfSxcblxuICAgIGFkZENsYXNzID0gZnVuY3Rpb24oZWwsIGNuKVxuICAgIHtcbiAgICAgICAgaWYgKCFoYXNDbGFzcyhlbCwgY24pKSB7XG4gICAgICAgICAgICBlbC5jbGFzc05hbWUgPSAoZWwuY2xhc3NOYW1lID09PSAnJykgPyBjbiA6IGVsLmNsYXNzTmFtZSArICcgJyArIGNuO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNuKVxuICAgIHtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gdHJpbSgoJyAnICsgZWwuY2xhc3NOYW1lICsgJyAnKS5yZXBsYWNlKCcgJyArIGNuICsgJyAnLCAnICcpKTtcbiAgICB9LFxuXG4gICAgaXNBcnJheSA9IGZ1bmN0aW9uKG9iailcbiAgICB7XG4gICAgICAgIHJldHVybiAoL0FycmF5LykudGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSk7XG4gICAgfSxcblxuICAgIGlzRGF0ZSA9IGZ1bmN0aW9uKG9iailcbiAgICB7XG4gICAgICAgIHJldHVybiAoL0RhdGUvKS50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSAmJiAhaXNOYU4ob2JqLmdldFRpbWUoKSk7XG4gICAgfSxcblxuICAgIGlzV2Vla2VuZCA9IGZ1bmN0aW9uKGRhdGUpXG4gICAge1xuICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgcmV0dXJuIGRheSA9PT0gMCB8fCBkYXkgPT09IDY7XG4gICAgfSxcblxuICAgIGlzTGVhcFllYXIgPSBmdW5jdGlvbih5ZWFyKVxuICAgIHtcbiAgICAgICAgLy8gc29sdXRpb24gYnkgTWF0dGkgVmlya2t1bmVuOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODgxOTUxXG4gICAgICAgIHJldHVybiB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDA7XG4gICAgfSxcblxuICAgIGdldERheXNJbk1vbnRoID0gZnVuY3Rpb24oeWVhciwgbW9udGgpXG4gICAge1xuICAgICAgICByZXR1cm4gWzMxLCBpc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vbnRoXTtcbiAgICB9LFxuXG4gICAgc2V0VG9TdGFydE9mRGF5ID0gZnVuY3Rpb24oZGF0ZSlcbiAgICB7XG4gICAgICAgIGlmIChpc0RhdGUoZGF0ZSkpIGRhdGUuc2V0SG91cnMoMCwwLDAsMCk7XG4gICAgfSxcblxuICAgIGNvbXBhcmVEYXRlcyA9IGZ1bmN0aW9uKGEsYilcbiAgICB7XG4gICAgICAgIC8vIHdlYWsgZGF0ZSBjb21wYXJpc29uICh1c2Ugc2V0VG9TdGFydE9mRGF5KGRhdGUpIHRvIGVuc3VyZSBjb3JyZWN0IHJlc3VsdClcbiAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICB9LFxuXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24odG8sIGZyb20sIG92ZXJ3cml0ZSlcbiAgICB7XG4gICAgICAgIHZhciBwcm9wLCBoYXNQcm9wO1xuICAgICAgICBmb3IgKHByb3AgaW4gZnJvbSkge1xuICAgICAgICAgICAgaGFzUHJvcCA9IHRvW3Byb3BdICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaGFzUHJvcCAmJiB0eXBlb2YgZnJvbVtwcm9wXSA9PT0gJ29iamVjdCcgJiYgZnJvbVtwcm9wXSAhPT0gbnVsbCAmJiBmcm9tW3Byb3BdLm5vZGVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEYXRlKGZyb21bcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvW3Byb3BdID0gbmV3IERhdGUoZnJvbVtwcm9wXS5nZXRUaW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQXJyYXkoZnJvbVtwcm9wXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9bcHJvcF0gPSBmcm9tW3Byb3BdLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9bcHJvcF0gPSBleHRlbmQoe30sIGZyb21bcHJvcF0sIG92ZXJ3cml0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVyd3JpdGUgfHwgIWhhc1Byb3ApIHtcbiAgICAgICAgICAgICAgICB0b1twcm9wXSA9IGZyb21bcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvO1xuICAgIH0sXG5cbiAgICBmaXJlRXZlbnQgPSBmdW5jdGlvbihlbCwgZXZlbnROYW1lLCBkYXRhKVxuICAgIHtcbiAgICAgICAgdmFyIGV2O1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgICAgICAgICAgZXYgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICAgICAgICAgICAgZXYuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgZXYgPSBleHRlbmQoZXYsIGRhdGEpO1xuICAgICAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChldik7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICAgICAgICAgIGV2ID0gZXh0ZW5kKGV2LCBkYXRhKTtcbiAgICAgICAgICAgIGVsLmZpcmVFdmVudCgnb24nICsgZXZlbnROYW1lLCBldik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWRqdXN0Q2FsZW5kYXIgPSBmdW5jdGlvbihjYWxlbmRhcikge1xuICAgICAgICBpZiAoY2FsZW5kYXIubW9udGggPCAwKSB7XG4gICAgICAgICAgICBjYWxlbmRhci55ZWFyIC09IE1hdGguY2VpbChNYXRoLmFicyhjYWxlbmRhci5tb250aCkvMTIpO1xuICAgICAgICAgICAgY2FsZW5kYXIubW9udGggKz0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGVuZGFyLm1vbnRoID4gMTEpIHtcbiAgICAgICAgICAgIGNhbGVuZGFyLnllYXIgKz0gTWF0aC5mbG9vcihNYXRoLmFicyhjYWxlbmRhci5tb250aCkvMTIpO1xuICAgICAgICAgICAgY2FsZW5kYXIubW9udGggLT0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBkZWZhdWx0cyBhbmQgbG9jYWxpc2F0aW9uXG4gICAgICovXG4gICAgZGVmYXVsdHMgPSB7XG5cbiAgICAgICAgLy8gYmluZCB0aGUgcGlja2VyIHRvIGEgZm9ybSBmaWVsZFxuICAgICAgICBmaWVsZDogbnVsbCxcblxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHNob3cvaGlkZSB0aGUgcGlja2VyIG9uIGBmaWVsZGAgZm9jdXMgKGRlZmF1bHQgYHRydWVgIGlmIGBmaWVsZGAgaXMgc2V0KVxuICAgICAgICBib3VuZDogdW5kZWZpbmVkLFxuXG4gICAgICAgIC8vIHBvc2l0aW9uIG9mIHRoZSBkYXRlcGlja2VyLCByZWxhdGl2ZSB0byB0aGUgZmllbGQgKGRlZmF1bHQgdG8gYm90dG9tICYgbGVmdClcbiAgICAgICAgLy8gKCdib3R0b20nICYgJ2xlZnQnIGtleXdvcmRzIGFyZSBub3QgdXNlZCwgJ3RvcCcgJiAncmlnaHQnIGFyZSBtb2RpZmllciBvbiB0aGUgYm90dG9tL2xlZnQgcG9zaXRpb24pXG4gICAgICAgIHBvc2l0aW9uOiAnYm90dG9tIGxlZnQnLFxuXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgZml0IGluIHRoZSB2aWV3cG9ydCBldmVuIGlmIGl0IG1lYW5zIHJlcG9zaXRpb25pbmcgZnJvbSB0aGUgcG9zaXRpb24gb3B0aW9uXG4gICAgICAgIHJlcG9zaXRpb246IHRydWUsXG5cbiAgICAgICAgLy8gdGhlIGRlZmF1bHQgb3V0cHV0IGZvcm1hdCBmb3IgYC50b1N0cmluZygpYCBhbmQgYGZpZWxkYCB2YWx1ZVxuICAgICAgICBmb3JtYXQ6ICdZWVlZLU1NLUREJyxcblxuICAgICAgICAvLyB0aGUgdG9TdHJpbmcgZnVuY3Rpb24gd2hpY2ggZ2V0cyBwYXNzZWQgYSBjdXJyZW50IGRhdGUgb2JqZWN0IGFuZCBmb3JtYXRcbiAgICAgICAgLy8gYW5kIHJldHVybnMgYSBzdHJpbmdcbiAgICAgICAgdG9TdHJpbmc6IG51bGwsXG5cbiAgICAgICAgLy8gdXNlZCB0byBjcmVhdGUgZGF0ZSBvYmplY3QgZnJvbSBjdXJyZW50IGlucHV0IHN0cmluZ1xuICAgICAgICBwYXJzZTogbnVsbCxcblxuICAgICAgICAvLyB0aGUgaW5pdGlhbCBkYXRlIHRvIHZpZXcgd2hlbiBmaXJzdCBvcGVuZWRcbiAgICAgICAgZGVmYXVsdERhdGU6IG51bGwsXG5cbiAgICAgICAgLy8gbWFrZSB0aGUgYGRlZmF1bHREYXRlYCB0aGUgaW5pdGlhbCBzZWxlY3RlZCB2YWx1ZVxuICAgICAgICBzZXREZWZhdWx0RGF0ZTogZmFsc2UsXG5cbiAgICAgICAgLy8gZmlyc3QgZGF5IG9mIHdlZWsgKDA6IFN1bmRheSwgMTogTW9uZGF5IGV0YylcbiAgICAgICAgZmlyc3REYXk6IDAsXG5cbiAgICAgICAgLy8gdGhlIGRlZmF1bHQgZmxhZyBmb3IgbW9tZW50J3Mgc3RyaWN0IGRhdGUgcGFyc2luZ1xuICAgICAgICBmb3JtYXRTdHJpY3Q6IGZhbHNlLFxuXG4gICAgICAgIC8vIHRoZSBtaW5pbXVtL2VhcmxpZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICAgICAgbWluRGF0ZTogbnVsbCxcbiAgICAgICAgLy8gdGhlIG1heGltdW0vbGF0ZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICAgICAgbWF4RGF0ZTogbnVsbCxcblxuICAgICAgICAvLyBudW1iZXIgb2YgeWVhcnMgZWl0aGVyIHNpZGUsIG9yIGFycmF5IG9mIHVwcGVyL2xvd2VyIHJhbmdlXG4gICAgICAgIHllYXJSYW5nZTogMTAsXG5cbiAgICAgICAgLy8gc2hvdyB3ZWVrIG51bWJlcnMgYXQgaGVhZCBvZiByb3dcbiAgICAgICAgc2hvd1dlZWtOdW1iZXI6IGZhbHNlLFxuXG4gICAgICAgIC8vIFdlZWsgcGlja2VyIG1vZGVcbiAgICAgICAgcGlja1dob2xlV2VlazogZmFsc2UsXG5cbiAgICAgICAgLy8gdXNlZCBpbnRlcm5hbGx5IChkb24ndCBjb25maWcgb3V0c2lkZSlcbiAgICAgICAgbWluWWVhcjogMCxcbiAgICAgICAgbWF4WWVhcjogOTk5OSxcbiAgICAgICAgbWluTW9udGg6IHVuZGVmaW5lZCxcbiAgICAgICAgbWF4TW9udGg6IHVuZGVmaW5lZCxcblxuICAgICAgICBzdGFydFJhbmdlOiBudWxsLFxuICAgICAgICBlbmRSYW5nZTogbnVsbCxcblxuICAgICAgICBpc1JUTDogZmFsc2UsXG5cbiAgICAgICAgLy8gQWRkaXRpb25hbCB0ZXh0IHRvIGFwcGVuZCB0byB0aGUgeWVhciBpbiB0aGUgY2FsZW5kYXIgdGl0bGVcbiAgICAgICAgeWVhclN1ZmZpeDogJycsXG5cbiAgICAgICAgLy8gUmVuZGVyIHRoZSBtb250aCBhZnRlciB5ZWFyIGluIHRoZSBjYWxlbmRhciB0aXRsZVxuICAgICAgICBzaG93TW9udGhBZnRlclllYXI6IGZhbHNlLFxuXG4gICAgICAgIC8vIFJlbmRlciBkYXlzIG9mIHRoZSBjYWxlbmRhciBncmlkIHRoYXQgZmFsbCBpbiB0aGUgbmV4dCBvciBwcmV2aW91cyBtb250aFxuICAgICAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBmYWxzZSxcblxuICAgICAgICAvLyBBbGxvd3MgdXNlciB0byBzZWxlY3QgZGF5cyB0aGF0IGZhbGwgaW4gdGhlIG5leHQgb3IgcHJldmlvdXMgbW9udGhcbiAgICAgICAgZW5hYmxlU2VsZWN0aW9uRGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBmYWxzZSxcblxuICAgICAgICAvLyBob3cgbWFueSBtb250aHMgYXJlIHZpc2libGVcbiAgICAgICAgbnVtYmVyT2ZNb250aHM6IDEsXG5cbiAgICAgICAgLy8gd2hlbiBudW1iZXJPZk1vbnRocyBpcyB1c2VkLCB0aGlzIHdpbGwgaGVscCB5b3UgdG8gY2hvb3NlIHdoZXJlIHRoZSBtYWluIGNhbGVuZGFyIHdpbGwgYmUgKGRlZmF1bHQgYGxlZnRgLCBjYW4gYmUgc2V0IHRvIGByaWdodGApXG4gICAgICAgIC8vIG9ubHkgdXNlZCBmb3IgdGhlIGZpcnN0IGRpc3BsYXkgb3Igd2hlbiBhIHNlbGVjdGVkIGRhdGUgaXMgbm90IHZpc2libGVcbiAgICAgICAgbWFpbkNhbGVuZGFyOiAnbGVmdCcsXG5cbiAgICAgICAgLy8gU3BlY2lmeSBhIERPTSBlbGVtZW50IHRvIHJlbmRlciB0aGUgY2FsZW5kYXIgaW5cbiAgICAgICAgY29udGFpbmVyOiB1bmRlZmluZWQsXG5cbiAgICAgICAgLy8gQmx1ciBmaWVsZCB3aGVuIGRhdGUgaXMgc2VsZWN0ZWRcbiAgICAgICAgYmx1ckZpZWxkT25TZWxlY3QgOiB0cnVlLFxuXG4gICAgICAgIC8vIGludGVybmF0aW9uYWxpemF0aW9uXG4gICAgICAgIGkxOG46IHtcbiAgICAgICAgICAgIHByZXZpb3VzTW9udGggOiAnUHJldmlvdXMgTW9udGgnLFxuICAgICAgICAgICAgbmV4dE1vbnRoICAgICA6ICdOZXh0IE1vbnRoJyxcbiAgICAgICAgICAgIG1vbnRocyAgICAgICAgOiBbJ0phbnVhcnknLCdGZWJydWFyeScsJ01hcmNoJywnQXByaWwnLCdNYXknLCdKdW5lJywnSnVseScsJ0F1Z3VzdCcsJ1NlcHRlbWJlcicsJ09jdG9iZXInLCdOb3ZlbWJlcicsJ0RlY2VtYmVyJ10sXG4gICAgICAgICAgICB3ZWVrZGF5cyAgICAgIDogWydTdW5kYXknLCdNb25kYXknLCdUdWVzZGF5JywnV2VkbmVzZGF5JywnVGh1cnNkYXknLCdGcmlkYXknLCdTYXR1cmRheSddLFxuICAgICAgICAgICAgd2Vla2RheXNTaG9ydCA6IFsnU3VuJywnTW9uJywnVHVlJywnV2VkJywnVGh1JywnRnJpJywnU2F0J11cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBUaGVtZSBDbGFzc25hbWVcbiAgICAgICAgdGhlbWU6IG51bGwsXG5cbiAgICAgICAgLy8gZXZlbnRzIGFycmF5XG4gICAgICAgIGV2ZW50czogW10sXG5cbiAgICAgICAgLy8gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAgb25TZWxlY3Q6IG51bGwsXG4gICAgICAgIG9uT3BlbjogbnVsbCxcbiAgICAgICAgb25DbG9zZTogbnVsbCxcbiAgICAgICAgb25EcmF3OiBudWxsXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogdGVtcGxhdGluZyBmdW5jdGlvbnMgdG8gYWJzdHJhY3QgSFRNTCByZW5kZXJpbmdcbiAgICAgKi9cbiAgICByZW5kZXJEYXlOYW1lID0gZnVuY3Rpb24ob3B0cywgZGF5LCBhYmJyKVxuICAgIHtcbiAgICAgICAgZGF5ICs9IG9wdHMuZmlyc3REYXk7XG4gICAgICAgIHdoaWxlIChkYXkgPj0gNykge1xuICAgICAgICAgICAgZGF5IC09IDc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFiYnIgPyBvcHRzLmkxOG4ud2Vla2RheXNTaG9ydFtkYXldIDogb3B0cy5pMThuLndlZWtkYXlzW2RheV07XG4gICAgfSxcblxuICAgIHJlbmRlckRheSA9IGZ1bmN0aW9uKG9wdHMpXG4gICAge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIHZhciBhcmlhU2VsZWN0ZWQgPSAnZmFsc2UnO1xuICAgICAgICBpZiAob3B0cy5pc0VtcHR5KSB7XG4gICAgICAgICAgICBpZiAob3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzKSB7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goJ2lzLW91dHNpZGUtY3VycmVudC1tb250aCcpO1xuXG4gICAgICAgICAgICAgICAgaWYoIW9wdHMuZW5hYmxlU2VsZWN0aW9uRGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKCdpcy1zZWxlY3Rpb24tZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICc8dGQgY2xhc3M9XCJpcy1lbXB0eVwiPjwvdGQ+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc1RvZGF5KSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtdG9kYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIGFyaWFTZWxlY3RlZCA9ICd0cnVlJztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5oYXNFdmVudCkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2hhcy1ldmVudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzSW5SYW5nZSkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLWlucmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc1N0YXJ0UmFuZ2UpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCdpcy1zdGFydHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNFbmRSYW5nZSkge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLWVuZHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICc8dGQgZGF0YS1kYXk9XCInICsgb3B0cy5kYXkgKyAnXCIgY2xhc3M9XCInICsgYXJyLmpvaW4oJyAnKSArICdcIiBhcmlhLXNlbGVjdGVkPVwiJyArIGFyaWFTZWxlY3RlZCArICdcIj4nICtcbiAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJwaWthLWJ1dHRvbiBwaWthLWRheVwiIHR5cGU9XCJidXR0b25cIiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGlrYS15ZWFyPVwiJyArIG9wdHMueWVhciArICdcIiBkYXRhLXBpa2EtbW9udGg9XCInICsgb3B0cy5tb250aCArICdcIiBkYXRhLXBpa2EtZGF5PVwiJyArIG9wdHMuZGF5ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5kYXkgK1xuICAgICAgICAgICAgICAgICAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAnPC90ZD4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJXZWVrID0gZnVuY3Rpb24gKGQsIG0sIHkpIHtcbiAgICAgICAgLy8gTGlmdGVkIGZyb20gaHR0cDovL2phdmFzY3JpcHQuYWJvdXQuY29tL2xpYnJhcnkvYmx3ZWVreWVhci5odG0sIGxpZ2h0bHkgbW9kaWZpZWQuXG4gICAgICAgIHZhciBvbmVqYW4gPSBuZXcgRGF0ZSh5LCAwLCAxKSxcbiAgICAgICAgICAgIHdlZWtOdW0gPSBNYXRoLmNlaWwoKCgobmV3IERhdGUoeSwgbSwgZCkgLSBvbmVqYW4pIC8gODY0MDAwMDApICsgb25lamFuLmdldERheSgpKzEpLzcpO1xuICAgICAgICByZXR1cm4gJzx0ZCBjbGFzcz1cInBpa2Etd2Vla1wiPicgKyB3ZWVrTnVtICsgJzwvdGQ+JztcbiAgICB9LFxuXG4gICAgcmVuZGVyUm93ID0gZnVuY3Rpb24oZGF5cywgaXNSVEwsIHBpY2tXaG9sZVdlZWssIGlzUm93U2VsZWN0ZWQpXG4gICAge1xuICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cInBpa2Etcm93JyArIChwaWNrV2hvbGVXZWVrID8gJyBwaWNrLXdob2xlLXdlZWsnIDogJycpICsgKGlzUm93U2VsZWN0ZWQgPyAnIGlzLXNlbGVjdGVkJyA6ICcnKSArICdcIj4nICsgKGlzUlRMID8gZGF5cy5yZXZlcnNlKCkgOiBkYXlzKS5qb2luKCcnKSArICc8L3RyPic7XG4gICAgfSxcblxuICAgIHJlbmRlckJvZHkgPSBmdW5jdGlvbihyb3dzKVxuICAgIHtcbiAgICAgICAgcmV0dXJuICc8dGJvZHk+JyArIHJvd3Muam9pbignJykgKyAnPC90Ym9keT4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJIZWFkID0gZnVuY3Rpb24ob3B0cylcbiAgICB7XG4gICAgICAgIHZhciBpLCBhcnIgPSBbXTtcbiAgICAgICAgaWYgKG9wdHMuc2hvd1dlZWtOdW1iZXIpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKCc8dGg+PC90aD4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnPHRoIHNjb3BlPVwiY29sXCI+PGFiYnIgdGl0bGU9XCInICsgcmVuZGVyRGF5TmFtZShvcHRzLCBpKSArICdcIj4nICsgcmVuZGVyRGF5TmFtZShvcHRzLCBpLCB0cnVlKSArICc8L2FiYnI+PC90aD4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJzx0aGVhZD48dHI+JyArIChvcHRzLmlzUlRMID8gYXJyLnJldmVyc2UoKSA6IGFycikuam9pbignJykgKyAnPC90cj48L3RoZWFkPic7XG4gICAgfSxcblxuICAgIHJlbmRlclRpdGxlID0gZnVuY3Rpb24oaW5zdGFuY2UsIGMsIHllYXIsIG1vbnRoLCByZWZZZWFyLCByYW5kSWQpXG4gICAge1xuICAgICAgICB2YXIgaSwgaiwgYXJyLFxuICAgICAgICAgICAgb3B0cyA9IGluc3RhbmNlLl9vLFxuICAgICAgICAgICAgaXNNaW5ZZWFyID0geWVhciA9PT0gb3B0cy5taW5ZZWFyLFxuICAgICAgICAgICAgaXNNYXhZZWFyID0geWVhciA9PT0gb3B0cy5tYXhZZWFyLFxuICAgICAgICAgICAgaHRtbCA9ICc8ZGl2IGlkPVwiJyArIHJhbmRJZCArICdcIiBjbGFzcz1cInBpa2EtdGl0bGVcIiByb2xlPVwiaGVhZGluZ1wiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiPicsXG4gICAgICAgICAgICBtb250aEh0bWwsXG4gICAgICAgICAgICB5ZWFySHRtbCxcbiAgICAgICAgICAgIHByZXYgPSB0cnVlLFxuICAgICAgICAgICAgbmV4dCA9IHRydWU7XG5cbiAgICAgICAgZm9yIChhcnIgPSBbXSwgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnPG9wdGlvbiB2YWx1ZT1cIicgKyAoeWVhciA9PT0gcmVmWWVhciA/IGkgLSBjIDogMTIgKyBpIC0gYykgKyAnXCInICtcbiAgICAgICAgICAgICAgICAoaSA9PT0gbW9udGggPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIic6ICcnKSArXG4gICAgICAgICAgICAgICAgKChpc01pblllYXIgJiYgaSA8IG9wdHMubWluTW9udGgpIHx8IChpc01heFllYXIgJiYgaSA+IG9wdHMubWF4TW9udGgpID8gJ2Rpc2FibGVkPVwiZGlzYWJsZWRcIicgOiAnJykgKyAnPicgK1xuICAgICAgICAgICAgICAgIG9wdHMuaTE4bi5tb250aHNbaV0gKyAnPC9vcHRpb24+Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBtb250aEh0bWwgPSAnPGRpdiBjbGFzcz1cInBpa2EtbGFiZWxcIj4nICsgb3B0cy5pMThuLm1vbnRoc1ttb250aF0gKyAnPHNlbGVjdCBjbGFzcz1cInBpa2Etc2VsZWN0IHBpa2Etc2VsZWN0LW1vbnRoXCIgdGFiaW5kZXg9XCItMVwiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JztcblxuICAgICAgICBpZiAoaXNBcnJheShvcHRzLnllYXJSYW5nZSkpIHtcbiAgICAgICAgICAgIGkgPSBvcHRzLnllYXJSYW5nZVswXTtcbiAgICAgICAgICAgIGogPSBvcHRzLnllYXJSYW5nZVsxXSArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpID0geWVhciAtIG9wdHMueWVhclJhbmdlO1xuICAgICAgICAgICAgaiA9IDEgKyB5ZWFyICsgb3B0cy55ZWFyUmFuZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGFyciA9IFtdOyBpIDwgaiAmJiBpIDw9IG9wdHMubWF4WWVhcjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA+PSBvcHRzLm1pblllYXIpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCgnPG9wdGlvbiB2YWx1ZT1cIicgKyBpICsgJ1wiJyArIChpID09PSB5ZWFyID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInOiAnJykgKyAnPicgKyAoaSkgKyAnPC9vcHRpb24+Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWVhckh0bWwgPSAnPGRpdiBjbGFzcz1cInBpa2EtbGFiZWxcIj4nICsgeWVhciArIG9wdHMueWVhclN1ZmZpeCArICc8c2VsZWN0IGNsYXNzPVwicGlrYS1zZWxlY3QgcGlrYS1zZWxlY3QteWVhclwiIHRhYmluZGV4PVwiLTFcIj4nICsgYXJyLmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2Pic7XG5cbiAgICAgICAgaWYgKG9wdHMuc2hvd01vbnRoQWZ0ZXJZZWFyKSB7XG4gICAgICAgICAgICBodG1sICs9IHllYXJIdG1sICsgbW9udGhIdG1sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaHRtbCArPSBtb250aEh0bWwgKyB5ZWFySHRtbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01pblllYXIgJiYgKG1vbnRoID09PSAwIHx8IG9wdHMubWluTW9udGggPj0gbW9udGgpKSB7XG4gICAgICAgICAgICBwcmV2ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNYXhZZWFyICYmIChtb250aCA9PT0gMTEgfHwgb3B0cy5tYXhNb250aCA8PSBtb250aCkpIHtcbiAgICAgICAgICAgIG5leHQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjID09PSAwKSB7XG4gICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIGNsYXNzPVwicGlrYS1wcmV2JyArIChwcmV2ID8gJycgOiAnIGlzLWRpc2FibGVkJykgKyAnXCIgdHlwZT1cImJ1dHRvblwiPicgKyBvcHRzLmkxOG4ucHJldmlvdXNNb250aCArICc8L2J1dHRvbj4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjID09PSAoaW5zdGFuY2UuX28ubnVtYmVyT2ZNb250aHMgLSAxKSApIHtcbiAgICAgICAgICAgIGh0bWwgKz0gJzxidXR0b24gY2xhc3M9XCJwaWthLW5leHQnICsgKG5leHQgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArICdcIiB0eXBlPVwiYnV0dG9uXCI+JyArIG9wdHMuaTE4bi5uZXh0TW9udGggKyAnPC9idXR0b24+JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBodG1sICs9ICc8L2Rpdj4nO1xuICAgIH0sXG5cbiAgICByZW5kZXJUYWJsZSA9IGZ1bmN0aW9uKG9wdHMsIGRhdGEsIHJhbmRJZClcbiAgICB7XG4gICAgICAgIHJldHVybiAnPHRhYmxlIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGNsYXNzPVwicGlrYS10YWJsZVwiIHJvbGU9XCJncmlkXCIgYXJpYS1sYWJlbGxlZGJ5PVwiJyArIHJhbmRJZCArICdcIj4nICsgcmVuZGVySGVhZChvcHRzKSArIHJlbmRlckJvZHkoZGF0YSkgKyAnPC90YWJsZT4nO1xuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIFBpa2FkYXkgY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBQaWthZGF5ID0gZnVuY3Rpb24ob3B0aW9ucylcbiAgICB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIG9wdHMgPSBzZWxmLmNvbmZpZyhvcHRpb25zKTtcblxuICAgICAgICBzZWxmLl9vbk1vdXNlRG93biA9IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghc2VsZi5fdikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFoYXNDbGFzcyh0YXJnZXQsICdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCwgJ3Bpa2EtYnV0dG9uJykgJiYgIWhhc0NsYXNzKHRhcmdldCwgJ2lzLWVtcHR5JykgJiYgIWhhc0NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAnaXMtZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNldERhdGUobmV3IERhdGUodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1waWthLXllYXInKSwgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1waWthLW1vbnRoJyksIHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGlrYS1kYXknKSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5ib3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmJsdXJGaWVsZE9uU2VsZWN0ICYmIG9wdHMuZmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWVsZC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YXJnZXQsICdwaWthLXByZXYnKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnByZXZNb250aCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YXJnZXQsICdwaWthLW5leHQnKSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLm5leHRNb250aCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1zZWxlY3QnKSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgdG91Y2ggZXZlbnQgcHJldmVudCBtb3VzZSBldmVudHMgZW11bGF0aW9uXG4gICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fYyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25DaGFuZ2UgPSBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAncGlrYS1zZWxlY3QtbW9udGgnKSkge1xuICAgICAgICAgICAgICAgIHNlbGYuZ290b01vbnRoKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YXJnZXQsICdwaWthLXNlbGVjdC15ZWFyJykpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmdvdG9ZZWFyKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25LZXlDaGFuZ2UgPSBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmlzVmlzaWJsZSgpKSB7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2goZS5rZXlDb2RlKXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5maWVsZC5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYWRqdXN0RGF0ZSgnc3VidHJhY3QnLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGp1c3REYXRlKCdzdWJ0cmFjdCcsIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkanVzdERhdGUoJ2FkZCcsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkanVzdERhdGUoJ2FkZCcsIDcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uSW5wdXRDaGFuZ2UgPSBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZGF0ZTtcblxuICAgICAgICAgICAgaWYgKGUuZmlyZWRCeSA9PT0gc2VsZikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLnBhcnNlKSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG9wdHMucGFyc2Uob3B0cy5maWVsZC52YWx1ZSwgb3B0cy5mb3JtYXQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNNb21lbnQpIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gbW9tZW50KG9wdHMuZmllbGQudmFsdWUsIG9wdHMuZm9ybWF0LCBvcHRzLmZvcm1hdFN0cmljdCk7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IChkYXRlICYmIGRhdGUuaXNWYWxpZCgpKSA/IGRhdGUudG9EYXRlKCkgOiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2Uob3B0cy5maWVsZC52YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGF0ZShkYXRlKSkge1xuICAgICAgICAgICAgICBzZWxmLnNldERhdGUoZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNlbGYuX3YpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLl9vbklucHV0Rm9jdXMgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNlbGYuc2hvdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uSW5wdXRDbGljayA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgc2VsZi5zaG93KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5fb25JbnB1dEJsdXIgPSBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIElFIGFsbG93cyBwaWthIGRpdiB0byBnYWluIGZvY3VzOyBjYXRjaCBibHVyIHRoZSBpbnB1dCBmaWVsZFxuICAgICAgICAgICAgdmFyIHBFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHBFbCwgJ3Bpa2Etc2luZ2xlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICgocEVsID0gcEVsLnBhcmVudE5vZGUpKTtcblxuICAgICAgICAgICAgaWYgKCFzZWxmLl9jKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fYiA9IHN0byhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5fYyA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuX29uQ2xpY2sgPSBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50LFxuICAgICAgICAgICAgICAgIHBFbCA9IHRhcmdldDtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXNFdmVudExpc3RlbmVycyAmJiBoYXNDbGFzcyh0YXJnZXQsICdwaWthLXNlbGVjdCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQub25jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgnb25jaGFuZ2UnLCAncmV0dXJuOycpO1xuICAgICAgICAgICAgICAgICAgICBhZGRFdmVudCh0YXJnZXQsICdjaGFuZ2UnLCBzZWxmLl9vbkNoYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChoYXNDbGFzcyhwRWwsICdwaWthLXNpbmdsZScpIHx8IHBFbCA9PT0gb3B0cy50cmlnZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoKHBFbCA9IHBFbC5wYXJlbnROb2RlKSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5fdiAmJiB0YXJnZXQgIT09IG9wdHMudHJpZ2dlciAmJiBwRWwgIT09IG9wdHMudHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHNlbGYuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNlbGYuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc2VsZi5lbC5jbGFzc05hbWUgPSAncGlrYS1zaW5nbGUnICsgKG9wdHMuaXNSVEwgPyAnIGlzLXJ0bCcgOiAnJykgKyAob3B0cy50aGVtZSA/ICcgJyArIG9wdHMudGhlbWUgOiAnJyk7XG5cbiAgICAgICAgYWRkRXZlbnQoc2VsZi5lbCwgJ21vdXNlZG93bicsIHNlbGYuX29uTW91c2VEb3duLCB0cnVlKTtcbiAgICAgICAgYWRkRXZlbnQoc2VsZi5lbCwgJ3RvdWNoZW5kJywgc2VsZi5fb25Nb3VzZURvd24sIHRydWUpO1xuICAgICAgICBhZGRFdmVudChzZWxmLmVsLCAnY2hhbmdlJywgc2VsZi5fb25DaGFuZ2UpO1xuICAgICAgICBhZGRFdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCBzZWxmLl9vbktleUNoYW5nZSk7XG5cbiAgICAgICAgaWYgKG9wdHMuZmllbGQpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIG9wdHMuY29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuZWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZWxmLmVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0cy5maWVsZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmVsLCBvcHRzLmZpZWxkLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEV2ZW50KG9wdHMuZmllbGQsICdjaGFuZ2UnLCBzZWxmLl9vbklucHV0Q2hhbmdlKTtcblxuICAgICAgICAgICAgaWYgKCFvcHRzLmRlZmF1bHREYXRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc01vbWVudCAmJiBvcHRzLmZpZWxkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGVmYXVsdERhdGUgPSBtb21lbnQob3B0cy5maWVsZC52YWx1ZSwgb3B0cy5mb3JtYXQpLnRvRGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdHMuZGVmYXVsdERhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKG9wdHMuZmllbGQudmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0cy5zZXREZWZhdWx0RGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVmRGF0ZSA9IG9wdHMuZGVmYXVsdERhdGU7XG5cbiAgICAgICAgaWYgKGlzRGF0ZShkZWZEYXRlKSkge1xuICAgICAgICAgICAgaWYgKG9wdHMuc2V0RGVmYXVsdERhdGUpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnNldERhdGUoZGVmRGF0ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuZ290b0RhdGUoZGVmRGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmdvdG9EYXRlKG5ldyBEYXRlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdHMuYm91bmQpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgc2VsZi5lbC5jbGFzc05hbWUgKz0gJyBpcy1ib3VuZCc7XG4gICAgICAgICAgICBhZGRFdmVudChvcHRzLnRyaWdnZXIsICdjbGljaycsIHNlbGYuX29uSW5wdXRDbGljayk7XG4gICAgICAgICAgICBhZGRFdmVudChvcHRzLnRyaWdnZXIsICdmb2N1cycsIHNlbGYuX29uSW5wdXRGb2N1cyk7XG4gICAgICAgICAgICBhZGRFdmVudChvcHRzLnRyaWdnZXIsICdibHVyJywgc2VsZi5fb25JbnB1dEJsdXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBwdWJsaWMgUGlrYWRheSBBUElcbiAgICAgKi9cbiAgICBQaWthZGF5LnByb3RvdHlwZSA9IHtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjb25maWd1cmUgZnVuY3Rpb25hbGl0eVxuICAgICAgICAgKi9cbiAgICAgICAgY29uZmlnOiBmdW5jdGlvbihvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX28pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvcHRzID0gZXh0ZW5kKHRoaXMuX28sIG9wdGlvbnMsIHRydWUpO1xuXG4gICAgICAgICAgICBvcHRzLmlzUlRMID0gISFvcHRzLmlzUlRMO1xuXG4gICAgICAgICAgICBvcHRzLmZpZWxkID0gKG9wdHMuZmllbGQgJiYgb3B0cy5maWVsZC5ub2RlTmFtZSkgPyBvcHRzLmZpZWxkIDogbnVsbDtcblxuICAgICAgICAgICAgb3B0cy50aGVtZSA9ICh0eXBlb2Ygb3B0cy50aGVtZSkgPT09ICdzdHJpbmcnICYmIG9wdHMudGhlbWUgPyBvcHRzLnRoZW1lIDogbnVsbDtcblxuICAgICAgICAgICAgb3B0cy5ib3VuZCA9ICEhKG9wdHMuYm91bmQgIT09IHVuZGVmaW5lZCA/IG9wdHMuZmllbGQgJiYgb3B0cy5ib3VuZCA6IG9wdHMuZmllbGQpO1xuXG4gICAgICAgICAgICBvcHRzLnRyaWdnZXIgPSAob3B0cy50cmlnZ2VyICYmIG9wdHMudHJpZ2dlci5ub2RlTmFtZSkgPyBvcHRzLnRyaWdnZXIgOiBvcHRzLmZpZWxkO1xuXG4gICAgICAgICAgICBvcHRzLmRpc2FibGVXZWVrZW5kcyA9ICEhb3B0cy5kaXNhYmxlV2Vla2VuZHM7XG5cbiAgICAgICAgICAgIG9wdHMuZGlzYWJsZURheUZuID0gKHR5cGVvZiBvcHRzLmRpc2FibGVEYXlGbikgPT09ICdmdW5jdGlvbicgPyBvcHRzLmRpc2FibGVEYXlGbiA6IG51bGw7XG5cbiAgICAgICAgICAgIHZhciBub20gPSBwYXJzZUludChvcHRzLm51bWJlck9mTW9udGhzLCAxMCkgfHwgMTtcbiAgICAgICAgICAgIG9wdHMubnVtYmVyT2ZNb250aHMgPSBub20gPiA0ID8gNCA6IG5vbTtcblxuICAgICAgICAgICAgaWYgKCFpc0RhdGUob3B0cy5taW5EYXRlKSkge1xuICAgICAgICAgICAgICAgIG9wdHMubWluRGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc0RhdGUob3B0cy5tYXhEYXRlKSkge1xuICAgICAgICAgICAgICAgIG9wdHMubWF4RGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChvcHRzLm1pbkRhdGUgJiYgb3B0cy5tYXhEYXRlKSAmJiBvcHRzLm1heERhdGUgPCBvcHRzLm1pbkRhdGUpIHtcbiAgICAgICAgICAgICAgICBvcHRzLm1heERhdGUgPSBvcHRzLm1pbkRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLm1pbkRhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1pbkRhdGUob3B0cy5taW5EYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRzLm1heERhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1heERhdGUob3B0cy5tYXhEYXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzQXJyYXkob3B0cy55ZWFyUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZhbGxiYWNrID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpIC0gMTA7XG4gICAgICAgICAgICAgICAgb3B0cy55ZWFyUmFuZ2VbMF0gPSBwYXJzZUludChvcHRzLnllYXJSYW5nZVswXSwgMTApIHx8IGZhbGxiYWNrO1xuICAgICAgICAgICAgICAgIG9wdHMueWVhclJhbmdlWzFdID0gcGFyc2VJbnQob3B0cy55ZWFyUmFuZ2VbMV0sIDEwKSB8fCBmYWxsYmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0cy55ZWFyUmFuZ2UgPSBNYXRoLmFicyhwYXJzZUludChvcHRzLnllYXJSYW5nZSwgMTApKSB8fCBkZWZhdWx0cy55ZWFyUmFuZ2U7XG4gICAgICAgICAgICAgICAgaWYgKG9wdHMueWVhclJhbmdlID4gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdHMueWVhclJhbmdlID0gMTAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG9wdHM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybiBhIGZvcm1hdHRlZCBzdHJpbmcgb2YgdGhlIGN1cnJlbnQgc2VsZWN0aW9uICh1c2luZyBNb21lbnQuanMgaWYgYXZhaWxhYmxlKVxuICAgICAgICAgKi9cbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKGZvcm1hdClcbiAgICAgICAge1xuICAgICAgICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8IHRoaXMuX28uZm9ybWF0O1xuICAgICAgICAgICAgaWYgKCFpc0RhdGUodGhpcy5fZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fby50b1N0cmluZykge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fby50b1N0cmluZyh0aGlzLl9kLCBmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc01vbWVudCkge1xuICAgICAgICAgICAgICByZXR1cm4gbW9tZW50KHRoaXMuX2QpLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2QudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJldHVybiBhIE1vbWVudC5qcyBvYmplY3Qgb2YgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIChpZiBhdmFpbGFibGUpXG4gICAgICAgICAqL1xuICAgICAgICBnZXRNb21lbnQ6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGhhc01vbWVudCA/IG1vbWVudCh0aGlzLl9kKSA6IG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCB0aGUgY3VycmVudCBzZWxlY3Rpb24gZnJvbSBhIE1vbWVudC5qcyBvYmplY3QgKGlmIGF2YWlsYWJsZSlcbiAgICAgICAgICovXG4gICAgICAgIHNldE1vbWVudDogZnVuY3Rpb24oZGF0ZSwgcHJldmVudE9uU2VsZWN0KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoaGFzTW9tZW50ICYmIG1vbWVudC5pc01vbWVudChkYXRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0ZShkYXRlLnRvRGF0ZSgpLCBwcmV2ZW50T25TZWxlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZXR1cm4gYSBEYXRlIG9iamVjdCBvZiB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIGdldERhdGU6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGlzRGF0ZSh0aGlzLl9kKSA/IG5ldyBEYXRlKHRoaXMuX2QuZ2V0VGltZSgpKSA6IG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHNldCB0aGUgY3VycmVudCBzZWxlY3Rpb25cbiAgICAgICAgICovXG4gICAgICAgIHNldERhdGU6IGZ1bmN0aW9uKGRhdGUsIHByZXZlbnRPblNlbGVjdClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fby5maWVsZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vLmZpZWxkLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGZpcmVFdmVudCh0aGlzLl9vLmZpZWxkLCAnY2hhbmdlJywgeyBmaXJlZEJ5OiB0aGlzIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShkYXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzRGF0ZShkYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG1pbiA9IHRoaXMuX28ubWluRGF0ZSxcbiAgICAgICAgICAgICAgICBtYXggPSB0aGlzLl9vLm1heERhdGU7XG5cbiAgICAgICAgICAgIGlmIChpc0RhdGUobWluKSAmJiBkYXRlIDwgbWluKSB7XG4gICAgICAgICAgICAgICAgZGF0ZSA9IG1pbjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNEYXRlKG1heCkgJiYgZGF0ZSA+IG1heCkge1xuICAgICAgICAgICAgICAgIGRhdGUgPSBtYXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2QgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgICAgICAgICBzZXRUb1N0YXJ0T2ZEYXkodGhpcy5fZCk7XG4gICAgICAgICAgICB0aGlzLmdvdG9EYXRlKHRoaXMuX2QpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fby5maWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX28uZmllbGQudmFsdWUgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgZmlyZUV2ZW50KHRoaXMuX28uZmllbGQsICdjaGFuZ2UnLCB7IGZpcmVkQnk6IHRoaXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXByZXZlbnRPblNlbGVjdCAmJiB0eXBlb2YgdGhpcy5fby5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX28ub25TZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmdldERhdGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZGF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZ290b0RhdGU6IGZ1bmN0aW9uKGRhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBuZXdDYWxlbmRhciA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICghaXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxlbmRhcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlyc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLCAxKSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdFZpc2libGVEYXRlID0gbmV3IERhdGUodGhpcy5jYWxlbmRhcnNbdGhpcy5jYWxlbmRhcnMubGVuZ3RoLTFdLnllYXIsIHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aC0xXS5tb250aCwgMSksXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVEYXRlID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBlbmQgb2YgdGhlIG1vbnRoXG4gICAgICAgICAgICAgICAgbGFzdFZpc2libGVEYXRlLnNldE1vbnRoKGxhc3RWaXNpYmxlRGF0ZS5nZXRNb250aCgpKzEpO1xuICAgICAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZS5zZXREYXRlKGxhc3RWaXNpYmxlRGF0ZS5nZXREYXRlKCktMSk7XG4gICAgICAgICAgICAgICAgbmV3Q2FsZW5kYXIgPSAodmlzaWJsZURhdGUgPCBmaXJzdFZpc2libGVEYXRlLmdldFRpbWUoKSB8fCBsYXN0VmlzaWJsZURhdGUuZ2V0VGltZSgpIDwgdmlzaWJsZURhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3Q2FsZW5kYXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFycyA9IFt7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vLm1haW5DYWxlbmRhciA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aCArPSAxIC0gdGhpcy5fby5udW1iZXJPZk1vbnRocztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRqdXN0RGF0ZTogZnVuY3Rpb24oc2lnbiwgZGF5cykge1xuXG4gICAgICAgICAgICB2YXIgZGF5ID0gdGhpcy5nZXREYXRlKCkgfHwgbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHZhciBkaWZmZXJlbmNlID0gcGFyc2VJbnQoZGF5cykqMjQqNjAqNjAqMTAwMDtcblxuICAgICAgICAgICAgdmFyIG5ld0RheTtcblxuICAgICAgICAgICAgaWYgKHNpZ24gPT09ICdhZGQnKSB7XG4gICAgICAgICAgICAgICAgbmV3RGF5ID0gbmV3IERhdGUoZGF5LnZhbHVlT2YoKSArIGRpZmZlcmVuY2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaWduID09PSAnc3VidHJhY3QnKSB7XG4gICAgICAgICAgICAgICAgbmV3RGF5ID0gbmV3IERhdGUoZGF5LnZhbHVlT2YoKSAtIGRpZmZlcmVuY2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldERhdGUobmV3RGF5KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGp1c3RDYWxlbmRhcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0gPSBhZGp1c3RDYWxlbmRhcih0aGlzLmNhbGVuZGFyc1swXSk7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMTsgYyA8IHRoaXMuX28ubnVtYmVyT2ZNb250aHM7IGMrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzW2NdID0gYWRqdXN0Q2FsZW5kYXIoe1xuICAgICAgICAgICAgICAgICAgICBtb250aDogdGhpcy5jYWxlbmRhcnNbMF0ubW9udGggKyBjLFxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiB0aGlzLmNhbGVuZGFyc1swXS55ZWFyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnb3RvVG9kYXk6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5nb3RvRGF0ZShuZXcgRGF0ZSgpKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlIHZpZXcgdG8gYSBzcGVjaWZpYyBtb250aCAoemVyby1pbmRleCwgZS5nLiAwOiBKYW51YXJ5KVxuICAgICAgICAgKi9cbiAgICAgICAgZ290b01vbnRoOiBmdW5jdGlvbihtb250aClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCFpc05hTihtb250aCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aCA9IHBhcnNlSW50KG1vbnRoLCAxMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBuZXh0TW9udGg6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGgrKztcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcHJldk1vbnRoOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLS07XG4gICAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIGZ1bGwgeWVhciAoZS5nLiBcIjIwMTJcIilcbiAgICAgICAgICovXG4gICAgICAgIGdvdG9ZZWFyOiBmdW5jdGlvbih5ZWFyKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHllYXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ueWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFuZ2UgdGhlIG1pbkRhdGVcbiAgICAgICAgICovXG4gICAgICAgIHNldE1pbkRhdGU6IGZ1bmN0aW9uKHZhbHVlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgICAgICBzZXRUb1N0YXJ0T2ZEYXkodmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluRGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluWWVhciAgPSB2YWx1ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluTW9udGggPSB2YWx1ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1pbkRhdGUgPSBkZWZhdWx0cy5taW5EYXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluWWVhciAgPSBkZWZhdWx0cy5taW5ZZWFyO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWluTW9udGggPSBkZWZhdWx0cy5taW5Nb250aDtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLnN0YXJ0UmFuZ2UgPSBkZWZhdWx0cy5zdGFydFJhbmdlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogY2hhbmdlIHRoZSBtYXhEYXRlXG4gICAgICAgICAqL1xuICAgICAgICBzZXRNYXhEYXRlOiBmdW5jdGlvbih2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgc2V0VG9TdGFydE9mRGF5KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heERhdGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heFllYXIgPSB2YWx1ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4TW9udGggPSB2YWx1ZS5nZXRNb250aCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vLm1heERhdGUgPSBkZWZhdWx0cy5tYXhEYXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuX28ubWF4WWVhciA9IGRlZmF1bHRzLm1heFllYXI7XG4gICAgICAgICAgICAgICAgdGhpcy5fby5tYXhNb250aCA9IGRlZmF1bHRzLm1heE1vbnRoO1xuICAgICAgICAgICAgICAgIHRoaXMuX28uZW5kUmFuZ2UgPSBkZWZhdWx0cy5lbmRSYW5nZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0U3RhcnRSYW5nZTogZnVuY3Rpb24odmFsdWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX28uc3RhcnRSYW5nZSA9IHZhbHVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEVuZFJhbmdlOiBmdW5jdGlvbih2YWx1ZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fby5lbmRSYW5nZSA9IHZhbHVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZWZyZXNoIHRoZSBIVE1MXG4gICAgICAgICAqL1xuICAgICAgICBkcmF3OiBmdW5jdGlvbihmb3JjZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl92ICYmICFmb3JjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvcHRzID0gdGhpcy5fbyxcbiAgICAgICAgICAgICAgICBtaW5ZZWFyID0gb3B0cy5taW5ZZWFyLFxuICAgICAgICAgICAgICAgIG1heFllYXIgPSBvcHRzLm1heFllYXIsXG4gICAgICAgICAgICAgICAgbWluTW9udGggPSBvcHRzLm1pbk1vbnRoLFxuICAgICAgICAgICAgICAgIG1heE1vbnRoID0gb3B0cy5tYXhNb250aCxcbiAgICAgICAgICAgICAgICBodG1sID0gJycsXG4gICAgICAgICAgICAgICAgcmFuZElkO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5feSA8PSBtaW5ZZWFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5feSA9IG1pblllYXI7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihtaW5Nb250aCkgJiYgdGhpcy5fbSA8IG1pbk1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX20gPSBtaW5Nb250aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5feSA+PSBtYXhZZWFyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5feSA9IG1heFllYXI7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihtYXhNb250aCkgJiYgdGhpcy5fbSA+IG1heE1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX20gPSBtYXhNb250aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJhbmRJZCA9ICdwaWthLXRpdGxlLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgMik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgb3B0cy5udW1iZXJPZk1vbnRoczsgYysrKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInBpa2EtbGVuZGFyXCI+JyArIHJlbmRlclRpdGxlKHRoaXMsIGMsIHRoaXMuY2FsZW5kYXJzW2NdLnllYXIsIHRoaXMuY2FsZW5kYXJzW2NdLm1vbnRoLCB0aGlzLmNhbGVuZGFyc1swXS55ZWFyLCByYW5kSWQpICsgdGhpcy5yZW5kZXIodGhpcy5jYWxlbmRhcnNbY10ueWVhciwgdGhpcy5jYWxlbmRhcnNbY10ubW9udGgsIHJhbmRJZCkgKyAnPC9kaXY+JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgICAgICBpZiAob3B0cy5ib3VuZCkge1xuICAgICAgICAgICAgICAgIGlmKG9wdHMuZmllbGQudHlwZSAhPT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy50cmlnZ2VyLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vLm9uRHJhdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX28ub25EcmF3KHRoaXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0cy5ib3VuZCkge1xuICAgICAgICAgICAgICAgIC8vIGxldCB0aGUgc2NyZWVuIHJlYWRlciB1c2VyIGtub3cgdG8gdXNlIGFycm93IGtleXNcbiAgICAgICAgICAgICAgICBvcHRzLmZpZWxkLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdVc2UgdGhlIGFycm93IGtleXMgdG8gcGljayBhIGRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhZGp1c3RQb3NpdGlvbjogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgZmllbGQsIHBFbCwgd2lkdGgsIGhlaWdodCwgdmlld3BvcnRXaWR0aCwgdmlld3BvcnRIZWlnaHQsIHNjcm9sbFRvcCwgbGVmdCwgdG9wLCBjbGllbnRSZWN0O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fby5jb250YWluZXIpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cbiAgICAgICAgICAgIGZpZWxkID0gdGhpcy5fby50cmlnZ2VyO1xuICAgICAgICAgICAgcEVsID0gZmllbGQ7XG4gICAgICAgICAgICB3aWR0aCA9IHRoaXMuZWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgICAgICB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50UmVjdCA9IGZpZWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGxlZnQgPSBjbGllbnRSZWN0LmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgdG9wID0gY2xpZW50UmVjdC5ib3R0b20gKyB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxlZnQgPSBwRWwub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgICB0b3AgID0gcEVsLm9mZnNldFRvcCArIHBFbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgd2hpbGUoKHBFbCA9IHBFbC5vZmZzZXRQYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgKz0gcEVsLm9mZnNldExlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHRvcCAgKz0gcEVsLm9mZnNldFRvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGRlZmF1bHQgcG9zaXRpb24gaXMgYm90dG9tICYgbGVmdFxuICAgICAgICAgICAgaWYgKCh0aGlzLl9vLnJlcG9zaXRpb24gJiYgbGVmdCArIHdpZHRoID4gdmlld3BvcnRXaWR0aCkgfHxcbiAgICAgICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX28ucG9zaXRpb24uaW5kZXhPZigncmlnaHQnKSA+IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIGxlZnQgLSB3aWR0aCArIGZpZWxkLm9mZnNldFdpZHRoID4gMFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0IC0gd2lkdGggKyBmaWVsZC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodGhpcy5fby5yZXBvc2l0aW9uICYmIHRvcCArIGhlaWdodCA+IHZpZXdwb3J0SGVpZ2h0ICsgc2Nyb2xsVG9wKSB8fFxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fby5wb3NpdGlvbi5pbmRleE9mKCd0b3AnKSA+IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIHRvcCAtIGhlaWdodCAtIGZpZWxkLm9mZnNldEhlaWdodCA+IDBcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0b3AgPSB0b3AgLSBoZWlnaHQgLSBmaWVsZC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZW5kZXIgSFRNTCBmb3IgYSBwYXJ0aWN1bGFyIG1vbnRoXG4gICAgICAgICAqL1xuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKHllYXIsIG1vbnRoLCByYW5kSWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBvcHRzICAgPSB0aGlzLl9vLFxuICAgICAgICAgICAgICAgIG5vdyAgICA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgZGF5cyAgID0gZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpLFxuICAgICAgICAgICAgICAgIGJlZm9yZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSxcbiAgICAgICAgICAgICAgICBkYXRhICAgPSBbXSxcbiAgICAgICAgICAgICAgICByb3cgICAgPSBbXTtcbiAgICAgICAgICAgIHNldFRvU3RhcnRPZkRheShub3cpO1xuICAgICAgICAgICAgaWYgKG9wdHMuZmlyc3REYXkgPiAwKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlIC09IG9wdHMuZmlyc3REYXk7XG4gICAgICAgICAgICAgICAgaWYgKGJlZm9yZSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmVmb3JlICs9IDc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHByZXZpb3VzTW9udGggPSBtb250aCA9PT0gMCA/IDExIDogbW9udGggLSAxLFxuICAgICAgICAgICAgICAgIG5leHRNb250aCA9IG1vbnRoID09PSAxMSA/IDAgOiBtb250aCArIDEsXG4gICAgICAgICAgICAgICAgeWVhck9mUHJldmlvdXNNb250aCA9IG1vbnRoID09PSAwID8geWVhciAtIDEgOiB5ZWFyLFxuICAgICAgICAgICAgICAgIHllYXJPZk5leHRNb250aCA9IG1vbnRoID09PSAxMSA/IHllYXIgKyAxIDogeWVhcixcbiAgICAgICAgICAgICAgICBkYXlzSW5QcmV2aW91c01vbnRoID0gZ2V0RGF5c0luTW9udGgoeWVhck9mUHJldmlvdXNNb250aCwgcHJldmlvdXNNb250aCk7XG4gICAgICAgICAgICB2YXIgY2VsbHMgPSBkYXlzICsgYmVmb3JlLFxuICAgICAgICAgICAgICAgIGFmdGVyID0gY2VsbHM7XG4gICAgICAgICAgICB3aGlsZShhZnRlciA+IDcpIHtcbiAgICAgICAgICAgICAgICBhZnRlciAtPSA3O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2VsbHMgKz0gNyAtIGFmdGVyO1xuICAgICAgICAgICAgdmFyIGlzV2Vla1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgciA9IDA7IGkgPCBjZWxsczsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSArIChpIC0gYmVmb3JlKSksXG4gICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSBpc0RhdGUodGhpcy5fZCkgPyBjb21wYXJlRGF0ZXMoZGF5LCB0aGlzLl9kKSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1RvZGF5ID0gY29tcGFyZURhdGVzKGRheSwgbm93KSxcbiAgICAgICAgICAgICAgICAgICAgaGFzRXZlbnQgPSBvcHRzLmV2ZW50cy5pbmRleE9mKGRheS50b0RhdGVTdHJpbmcoKSkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc0VtcHR5ID0gaSA8IGJlZm9yZSB8fCBpID49IChkYXlzICsgYmVmb3JlKSxcbiAgICAgICAgICAgICAgICAgICAgZGF5TnVtYmVyID0gMSArIChpIC0gYmVmb3JlKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGhOdW1iZXIgPSBtb250aCxcbiAgICAgICAgICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXIsXG4gICAgICAgICAgICAgICAgICAgIGlzU3RhcnRSYW5nZSA9IG9wdHMuc3RhcnRSYW5nZSAmJiBjb21wYXJlRGF0ZXMob3B0cy5zdGFydFJhbmdlLCBkYXkpLFxuICAgICAgICAgICAgICAgICAgICBpc0VuZFJhbmdlID0gb3B0cy5lbmRSYW5nZSAmJiBjb21wYXJlRGF0ZXMob3B0cy5lbmRSYW5nZSwgZGF5KSxcbiAgICAgICAgICAgICAgICAgICAgaXNJblJhbmdlID0gb3B0cy5zdGFydFJhbmdlICYmIG9wdHMuZW5kUmFuZ2UgJiYgb3B0cy5zdGFydFJhbmdlIDwgZGF5ICYmIGRheSA8IG9wdHMuZW5kUmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQgPSAob3B0cy5taW5EYXRlICYmIGRheSA8IG9wdHMubWluRGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvcHRzLm1heERhdGUgJiYgZGF5ID4gb3B0cy5tYXhEYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdHMuZGlzYWJsZVdlZWtlbmRzICYmIGlzV2Vla2VuZChkYXkpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9wdHMuZGlzYWJsZURheUZuICYmIG9wdHMuZGlzYWJsZURheUZuKGRheSkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBiZWZvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheU51bWJlciA9IGRheXNJblByZXZpb3VzTW9udGggKyBkYXlOdW1iZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aE51bWJlciA9IHByZXZpb3VzTW9udGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mUHJldmlvdXNNb250aDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheU51bWJlciA9IGRheU51bWJlciAtIGRheXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aE51bWJlciA9IG5leHRNb250aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXJOdW1iZXIgPSB5ZWFyT2ZOZXh0TW9udGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF5Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF5OiBkYXlOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb250aDogbW9udGhOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiB5ZWFyTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXZlbnQ6IGhhc0V2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVG9kYXk6IGlzVG9kYXksXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbXB0eTogaXNFbXB0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3RhcnRSYW5nZTogaXNTdGFydFJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmRSYW5nZTogaXNFbmRSYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5SYW5nZTogaXNJblJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogb3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlU2VsZWN0aW9uRGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBvcHRzLmVuYWJsZVNlbGVjdGlvbkRheXNJbk5leHRBbmRQcmV2aW91c01vbnRoc1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdHMucGlja1dob2xlV2VlayAmJiBpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzV2Vla1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByb3cucHVzaChyZW5kZXJEYXkoZGF5Q29uZmlnKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoKytyID09PSA3KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLnNob3dXZWVrTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cudW5zaGlmdChyZW5kZXJXZWVrKGkgLSBiZWZvcmUsIG1vbnRoLCB5ZWFyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHJlbmRlclJvdyhyb3csIG9wdHMuaXNSVEwsIG9wdHMucGlja1dob2xlV2VlaywgaXNXZWVrU2VsZWN0ZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgcm93ID0gW107XG4gICAgICAgICAgICAgICAgICAgIHIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpc1dlZWtTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZW5kZXJUYWJsZShvcHRzLCBkYXRhLCByYW5kSWQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdjtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93OiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Zpc2libGUoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3YgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsICdpcy1oaWRkZW4nKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fby5ib3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgdGhpcy5fb25DbGljayk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRqdXN0UG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vLm9uT3Blbi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciB2ID0gdGhpcy5fdjtcbiAgICAgICAgICAgIGlmICh2ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vLmJvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCB0aGlzLl9vbkNsaWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5wb3NpdGlvbiA9ICdzdGF0aWMnOyAvLyByZXNldFxuICAgICAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUubGVmdCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyh0aGlzLmVsLCAnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRoaXMuX28ub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdBTUUgT1ZFUlxuICAgICAgICAgKi9cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuZWwsICdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93biwgdHJ1ZSk7XG4gICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLmVsLCAndG91Y2hlbmQnLCB0aGlzLl9vbk1vdXNlRG93biwgdHJ1ZSk7XG4gICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLmVsLCAnY2hhbmdlJywgdGhpcy5fb25DaGFuZ2UpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5fb25LZXlDaGFuZ2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX28uZmllbGQpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLl9vLmZpZWxkLCAnY2hhbmdlJywgdGhpcy5fb25JbnB1dENoYW5nZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX28uYm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5fby50cmlnZ2VyLCAnY2xpY2snLCB0aGlzLl9vbklucHV0Q2xpY2spO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLl9vLnRyaWdnZXIsICdmb2N1cycsIHRoaXMuX29uSW5wdXRGb2N1cyk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuX28udHJpZ2dlciwgJ2JsdXInLCB0aGlzLl9vbklucHV0Qmx1cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZWwucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHJldHVybiBQaWthZGF5O1xuXG59KSk7XG4iLCIndXNlIHN0cmljdCc7XG52YXIgc3RyaWN0VXJpRW5jb2RlID0gcmVxdWlyZSgnc3RyaWN0LXVyaS1lbmNvZGUnKTtcbnZhciBvYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG52YXIgZGVjb2RlQ29tcG9uZW50ID0gcmVxdWlyZSgnZGVjb2RlLXVyaS1jb21wb25lbnQnKTtcblxuZnVuY3Rpb24gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdHMpIHtcblx0c3dpdGNoIChvcHRzLmFycmF5Rm9ybWF0KSB7XG5cdFx0Y2FzZSAnaW5kZXgnOlxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbHVlLCBpbmRleCkge1xuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IG51bGwgPyBbXG5cdFx0XHRcdFx0ZW5jb2RlKGtleSwgb3B0cyksXG5cdFx0XHRcdFx0J1snLFxuXHRcdFx0XHRcdGluZGV4LFxuXHRcdFx0XHRcdCddJ1xuXHRcdFx0XHRdLmpvaW4oJycpIDogW1xuXHRcdFx0XHRcdGVuY29kZShrZXksIG9wdHMpLFxuXHRcdFx0XHRcdCdbJyxcblx0XHRcdFx0XHRlbmNvZGUoaW5kZXgsIG9wdHMpLFxuXHRcdFx0XHRcdCddPScsXG5cdFx0XHRcdFx0ZW5jb2RlKHZhbHVlLCBvcHRzKVxuXHRcdFx0XHRdLmpvaW4oJycpO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2JyYWNrZXQnOlxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IGVuY29kZShrZXksIG9wdHMpIDogW1xuXHRcdFx0XHRcdGVuY29kZShrZXksIG9wdHMpLFxuXHRcdFx0XHRcdCdbXT0nLFxuXHRcdFx0XHRcdGVuY29kZSh2YWx1ZSwgb3B0cylcblx0XHRcdFx0XS5qb2luKCcnKTtcblx0XHRcdH07XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gbnVsbCA/IGVuY29kZShrZXksIG9wdHMpIDogW1xuXHRcdFx0XHRcdGVuY29kZShrZXksIG9wdHMpLFxuXHRcdFx0XHRcdCc9Jyxcblx0XHRcdFx0XHRlbmNvZGUodmFsdWUsIG9wdHMpXG5cdFx0XHRcdF0uam9pbignJyk7XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdHMpIHtcblx0dmFyIHJlc3VsdDtcblxuXHRzd2l0Y2ggKG9wdHMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSB7XG5cdFx0XHRcdHJlc3VsdCA9IC9cXFsoXFxkKilcXF0kLy5leGVjKGtleSk7XG5cblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcZCpcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldW3Jlc3VsdFsxXV0gPSB2YWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpIHtcblx0XHRcdFx0cmVzdWx0ID0gLyhcXFtcXF0pJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpIHtcblx0XHRcdFx0aWYgKGFjY3VtdWxhdG9yW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIHZhbHVlKTtcblx0XHRcdH07XG5cdH1cbn1cblxuZnVuY3Rpb24gZW5jb2RlKHZhbHVlLCBvcHRzKSB7XG5cdGlmIChvcHRzLmVuY29kZSkge1xuXHRcdHJldHVybiBvcHRzLnN0cmljdCA/IHN0cmljdFVyaUVuY29kZSh2YWx1ZSkgOiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBrZXlzU29ydGVyKGlucHV0KSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHRcdHJldHVybiBpbnB1dC5zb3J0KCk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuXHRcdHJldHVybiBrZXlzU29ydGVyKE9iamVjdC5rZXlzKGlucHV0KSkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0cmV0dXJuIE51bWJlcihhKSAtIE51bWJlcihiKTtcblx0XHR9KS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cmV0dXJuIGlucHV0W2tleV07XG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4gaW5wdXQ7XG59XG5cbmV4cG9ydHMuZXh0cmFjdCA9IGZ1bmN0aW9uIChzdHIpIHtcblx0cmV0dXJuIHN0ci5zcGxpdCgnPycpWzFdIHx8ICcnO1xufTtcblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIChzdHIsIG9wdHMpIHtcblx0b3B0cyA9IG9iamVjdEFzc2lnbih7YXJyYXlGb3JtYXQ6ICdub25lJ30sIG9wdHMpO1xuXG5cdHZhciBmb3JtYXR0ZXIgPSBwYXJzZXJGb3JBcnJheUZvcm1hdChvcHRzKTtcblxuXHQvLyBDcmVhdGUgYW4gb2JqZWN0IHdpdGggbm8gcHJvdG90eXBlXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvcXVlcnktc3RyaW5nL2lzc3Vlcy80N1xuXHR2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuXHRpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0c3RyID0gc3RyLnRyaW0oKS5yZXBsYWNlKC9eKFxcP3wjfCYpLywgJycpO1xuXG5cdGlmICghc3RyKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHN0ci5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24gKHBhcmFtKSB7XG5cdFx0dmFyIHBhcnRzID0gcGFyYW0ucmVwbGFjZSgvXFwrL2csICcgJykuc3BsaXQoJz0nKTtcblx0XHQvLyBGaXJlZm94IChwcmUgNDApIGRlY29kZXMgYCUzRGAgdG8gYD1gXG5cdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9xdWVyeS1zdHJpbmcvcHVsbC8zN1xuXHRcdHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpO1xuXHRcdHZhciB2YWwgPSBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbignPScpIDogdW5kZWZpbmVkO1xuXG5cdFx0Ly8gbWlzc2luZyBgPWAgc2hvdWxkIGJlIGBudWxsYDpcblx0XHQvLyBodHRwOi8vdzMub3JnL1RSLzIwMTIvV0QtdXJsLTIwMTIwNTI0LyNjb2xsZWN0LXVybC1wYXJhbWV0ZXJzXG5cdFx0dmFsID0gdmFsID09PSB1bmRlZmluZWQgPyBudWxsIDogZGVjb2RlQ29tcG9uZW50KHZhbCk7XG5cblx0XHRmb3JtYXR0ZXIoZGVjb2RlQ29tcG9uZW50KGtleSksIHZhbCwgcmV0KTtcblx0fSk7XG5cblx0cmV0dXJuIE9iamVjdC5rZXlzKHJldCkuc29ydCgpLnJlZHVjZShmdW5jdGlvbiAocmVzdWx0LCBrZXkpIHtcblx0XHR2YXIgdmFsID0gcmV0W2tleV07XG5cdFx0aWYgKEJvb2xlYW4odmFsKSAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWwpKSB7XG5cdFx0XHQvLyBTb3J0IG9iamVjdCBrZXlzLCBub3QgdmFsdWVzXG5cdFx0XHRyZXN1bHRba2V5XSA9IGtleXNTb3J0ZXIodmFsKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0W2tleV0gPSB2YWw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59O1xuXG5leHBvcnRzLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIChvYmosIG9wdHMpIHtcblx0dmFyIGRlZmF1bHRzID0ge1xuXHRcdGVuY29kZTogdHJ1ZSxcblx0XHRzdHJpY3Q6IHRydWUsXG5cdFx0YXJyYXlGb3JtYXQ6ICdub25lJ1xuXHR9O1xuXG5cdG9wdHMgPSBvYmplY3RBc3NpZ24oZGVmYXVsdHMsIG9wdHMpO1xuXG5cdHZhciBmb3JtYXR0ZXIgPSBlbmNvZGVyRm9yQXJyYXlGb3JtYXQob3B0cyk7XG5cblx0cmV0dXJuIG9iaiA/IE9iamVjdC5rZXlzKG9iaikuc29ydCgpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0dmFyIHZhbCA9IG9ialtrZXldO1xuXG5cdFx0aWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gJyc7XG5cdFx0fVxuXG5cdFx0aWYgKHZhbCA9PT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdHMpO1xuXHRcdH1cblxuXHRcdGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcblx0XHRcdHZhciByZXN1bHQgPSBbXTtcblxuXHRcdFx0dmFsLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbiAodmFsMikge1xuXHRcdFx0XHRpZiAodmFsMiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzdWx0LnB1c2goZm9ybWF0dGVyKGtleSwgdmFsMiwgcmVzdWx0Lmxlbmd0aCkpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiByZXN1bHQuam9pbignJicpO1xuXHRcdH1cblxuXHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRzKSArICc9JyArIGVuY29kZSh2YWwsIG9wdHMpO1xuXHR9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcblx0XHRyZXR1cm4geC5sZW5ndGggPiAwO1xuXHR9KS5qb2luKCcmJykgOiAnJztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzdHIpIHtcblx0cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHIpLnJlcGxhY2UoL1shJygpKl0vZywgZnVuY3Rpb24gKGMpIHtcblx0XHRyZXR1cm4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHR9KTtcbn07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS0zXCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gbmFtZSBkYXRlXCI+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS05XCI+XG4gICAgICAgIDxwIGNsYXNzPVwiZGVzY1wiPlBvcGlzPC9wPlxuICAgICAgPC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnZGF0ZWlucHV0JywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgd3JhcCwgaW5pdCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGdldENvZGUoKSB7XG4gIHJldHVybiBgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTNcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJvdXQgZm9ybXVsYSBkYXRlXCI+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS05XCI+XG4gICAgICAgIDxwIGNsYXNzPVwiZGVzY1wiPlBvcGlzPC9wPlxuICAgICAgPC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnZGF0ZW91dHB1dCcsIGdldENvZGUoKSk7XG4gIGluaXQoYmxvY2spO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYFxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8aDQgY2xhc3M9XCJkZXNjIGNhcmQtbmFtZVwiPk5hZHBpcyBrYXJ0eTwvaDQ+XG4gICAgICA8cCBjbGFzcz1cImRlc2NcIj5LcsOhdGNlIHBvcGnFoXRlLCBrIMSNZW11IHNlIHRhdG8ga2FydGEgaG9kw60uPC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8aDQ+QXV0b3Iva2Ega2FydHk8L2g0PlxuICAgICAgPHAgY2xhc3M9XCJkZXNjXCI+Sm3DqW5vIFDFmcOtam1lbsOtLCBqbWVuby5wcmlqbWVuaUBlbWFpbC5jejwvcD5cbiAgICAgIDxoND5MaWNlbmNlIChwcmF2aWRsYSBwcm8gc2TDrWxlbsOtKTwvaDQ+XG4gICAgICA8cCBjbGFzcz1cImRlc2NcIj5aZGUga3LDoXRjZSBwb3BpxaF0ZSwgemRhIGthcnR1IHNkw61sw610ZSB2b2xuxJtcbiAgICAgIG5lYm8gemRhIMW+w6Fkw6F0ZSBvIGRvZHLFvmVuw60gbsSbamFrw71jaCBwcmF2aWRlbCAobmFwxZkuIHBvbmVjaMOhbsOtXG4gICAgICBrb250YWt0dSBuYSBwxa92b2Ruw61obyBhdXRvcmEgYXRwLiBNxa/FvmV0ZVxuICAgICAgdXLEjWl0IGkga29ua3LDqXRuw60gbGljZW5jaSAobmFwxZnDrWtsYWQgQ3JlYXRpdmUgQ29tbW9ucykuPC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJkZXNjIGlucHV0LWdyb3VwLWxhYmVsXCI+TsOhemV2IGFrdGl2aXR5PC9zcGFuPlxuICAgICAgICA8aW5wdXQgbmFtZT1cIl9hY3Rpdml0eS1uYW1lXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImluIHRleHQgaW5wdXQtZ3JvdXAtZmllbGRcIj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8cD48bGFiZWw+XG4gICAgICAgIEPDrWwgYWt0aXZpdHkgdiBqZWRuw6kgdsSbdMSbPGJyPlxuICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJpbiB0ZXh0XCI+PC90ZXh0YXJlYT5cbiAgICAgIDwvbGFiZWw+PC9wPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgICA8cD48bGFiZWw+UG96bsOhbWt5PGJyPlxuICAgICAgPHRleHRhcmVhIGNsYXNzPVwiaW4gdGV4dFwiPjwvdGV4dGFyZWE+XG4gICAgICA8L2xhYmVsPjwvcD5cbiAgICA8L2Rpdj5gO1xufVxuXG5mdW5jdGlvbiBhc3NlbWJsZSgpIHtcbiAgY29uc3QgYmxvY2sgPSB3cmFwKCdoZWFkZXInLCBnZXRDb2RlKCkpO1xuICBpbml0KGJsb2NrKTtcbiAgcmV0dXJuIGJsb2NrO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhc3NlbWJsZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IHsgcmVhZCB9ID0gcmVxdWlyZSgnLi8uLi9maWVsZHMvZmllbGRzJyk7XG5cbmZ1bmN0aW9uIHVwZGF0ZShlbCkge1xuICBpZiAocmVhZChlbC5xdWVyeVNlbGVjdG9yKCcuYm9vbCcpKSkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3RydWUnKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCd0cnVlJyk7XG4gIH1cbn1cblxuY29uc3QgY29kZSA9IGBcbjxkaXYgY2xhc3M9XCJjZWxsIGlzLXRydWVcIj5cbiAgPHAgY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L3A+XG4gIDxwIGNsYXNzPVwiZGVzY1wiPlRleHQsIHBva3VkIGplIHBvZG3DrW5rYSBzcGxuxJtuYTwvcD5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImNlbGwgaXMtZmFsc2VcIj5cbiAgPHAgY2xhc3M9XCJpY29uXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L3A+XG4gIDxwIGNsYXNzPVwiZGVzY1wiPlRleHQsIHBva3VkIHBvZG3DrW5rYSBuZW7DrSBzcGxuxJtuYTwvcD5cbjwvZGl2PlxuPGRpdiBjbGFzcz1cImNlbGwgaGlkZS1pbi1maWxsLW1vZGVcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm91dCBuYW1lIGZvcm11bGEgYm9vbFwiPjwvZGl2PmA7XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICBjb25zdCBibG9jayA9IHdyYXAoJ2luZGljYXRvcicsIGAke2NvZGV9YCk7XG4gIGluaXQoYmxvY2ssIHVwZGF0ZSk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUsIHVwZGF0ZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gZ2V0Q29kZSgpIHtcbiAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tM1wiPlxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gbmFtZSBudW1iZXJcIj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS05XCI+XG4gICAgPHAgY2xhc3M9XCJkZXNjXCI+UG9waXMgxI3DrXNlbG7DqSBob2Rub3R5PC9wPlxuICA8L2Rpdj5cbiAgYDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnbnVtYmVyJywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgd3JhcCwgaW5pdCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5jb25zdCB7IHJlYWQsIHdyaXRlIH0gPSByZXF1aXJlKCcuLy4uL2ZpZWxkcy9maWVsZHMnKTtcblxuZnVuY3Rpb24gdXBkYXRlKGVsKSB7XG4gIGNvbnN0IHJvd3MgPSBbXS5zbGljZS5jYWxsKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb3cnKSk7XG4gIGNvbnN0IHRvdGFsID0gcm93cy5yZWR1Y2UoKGFjYywgcm93KSA9PiB7XG4gICAgY29uc3QgcHJpY2UgPSByZWFkKHJvdy5xdWVyeVNlbGVjdG9yKCcucHJpY2UnKSk7XG4gICAgY29uc3QgdW5pdHMgPSByZWFkKHJvdy5xdWVyeVNlbGVjdG9yKCcudW5pdHMnKSk7XG4gICAgd3JpdGUocm93LnF1ZXJ5U2VsZWN0b3IoJy5zdWJ0b3RhbCcpLCBwcmljZSAqIHVuaXRzKTtcbiAgICByZXR1cm4gYWNjICsgKHByaWNlICogdW5pdHMpO1xuICB9LCAwKTtcbiAgd3JpdGUoZWwucXVlcnlTZWxlY3RvcignLnRvdGFsJyksIHRvdGFsKTtcbiAgaGlkZUVtcHR5KGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmljZWxpc3QtaXRlbScpKTtcbn1cblxuZnVuY3Rpb24gaGlkZUVtcHR5KGl0ZW1zKSB7XG4gIGxldCBsYXN0RW1wdHkgPSBmYWxzZTtcbiAgW10uc2xpY2UuY2FsbChpdGVtcykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlcyA9IGl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcbiAgICBjb25zdCBlbXB0eSA9IHZhbHVlc1swXS52YWx1ZSA9PT0gJycgJiYgdmFsdWVzWzFdLnZhbHVlID09PSAnJyAmJiB2YWx1ZXNbMl0udmFsdWUgPT09ICcnO1xuICAgIGlmIChsYXN0RW1wdHkgJiYgZW1wdHkpIHtcbiAgICAgIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIH1cbiAgICBsYXN0RW1wdHkgPSBlbXB0eTtcbiAgfSk7XG59XG5jb25zdCBoZWFkZXIgPSBgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTZcIj48cCBjbGFzcz1cImRlc2NcIj5Qb2xvxb5rYTwvcD48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxwIGNsYXNzPVwiZGVzY1wiPkNlbmE8L3A+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48cCBjbGFzcz1cImRlc2NcIj5Qb8SNZXQ8L3A+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48cCBjbGFzcz1cImRlc2NcIj5DZWxrZW08L3A+PC9kaXY+YDtcbmNvbnN0IHJvdyA9IGA8ZGl2IGNsYXNzPVwicm93IGdyaWQteCBwcmljZWxpc3QtaXRlbVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tNlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tMlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW4gbnVtYmVyIHByaWNlXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS0yXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJpbiBudW1iZXIgdW5pdHNcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNlbGwgbWVkaXVtLTJcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm91dCBudW1iZXIgc3VidG90YWxcIj48L2Rpdj5cbiAgICAgICAgICAgICA8L2Rpdj5gO1xuY29uc3QgdG90YWxzID0gYDxkaXYgY2xhc3M9XCJ0b3RhbHMgZ3JpZC14XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tNlwiPjxwIGNsYXNzPVwiZGVzY1wiPkNlbGtlbTwvcD48L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJvdXQgbmFtZSBudW1iZXIgdG90YWxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+YDtcblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgncHJpY2VsaXN0JywgYCR7aGVhZGVyfSA8ZGl2IGNsYXNzPVwiY2VsbFwiPiR7cm93LnJlcGVhdCgxMCl9ICR7dG90YWxzfTwvZGl2PmApO1xuICBpbml0KGJsb2NrLCB1cGRhdGUpO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlLCB1cGRhdGUgfTtcbiIsImNvbnN0IHsgd3JhcCB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGFzc2VtYmxlKCkge1xuICByZXR1cm4gd3JhcCgnc2VwYXJhdG9yJywgJzxkaXYgY2xhc3M9XCJjZWxsXCI+PGhyPjwvZGl2PicpO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhc3NlbWJsZSB9O1xuIiwiY29uc3QgeyB3cmFwLCBpbml0IH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gZ2V0Q29kZSgpIHtcbiAgcmV0dXJuIGBcbiAgICA8ZGl2IGNsYXNzPVwiY2VsbFwiPlxuICAgICAgPGg0IGNsYXNzPVwiZGVzYyBjYXJkLW5hbWVcIj5NZXppdGl0dWxlazwvaDQ+XG4gICAgPC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnc3ViaGVhZCcsIGdldENvZGUoKSk7XG4gIGluaXQoYmxvY2spO1xuICByZXR1cm4gYmxvY2s7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGFzc2VtYmxlIH07XG4iLCJjb25zdCB7IHdyYXAsIGluaXQgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBnZXRDb2RlKCkge1xuICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjZWxsIG1lZGl1bS02XCI+XG4gICAgPHAgY2xhc3M9XCJkZXNjXCI+UG9waXM8L3A+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiY2VsbCBtZWRpdW0tNlwiPlxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwib3V0IG5hbWUgZm9ybXVsYSBudW1iZXJcIj5cbiAgPC9kaXY+YDtcbn1cblxuZnVuY3Rpb24gYXNzZW1ibGUoKSB7XG4gIGNvbnN0IGJsb2NrID0gd3JhcCgnc3VtJywgZ2V0Q29kZSgpKTtcbiAgaW5pdChibG9jayk7XG4gIHJldHVybiBibG9jaztcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXNzZW1ibGUgfTtcbiIsImNvbnN0IHsgYWxsQXJyYXkgfSA9IHJlcXVpcmUoJy4vLi4vdXRpbC5qcycpO1xuY29uc3QgZmllbGRzID0gcmVxdWlyZSgnLi8uLi9maWVsZHMvZmllbGRzJyk7XG5jb25zdCBhdXRvc2l6ZSA9IHJlcXVpcmUoJ2F1dG9zaXplJyk7XG5cbmNvbnN0IGRhdGVpbnB1dCA9IHJlcXVpcmUoJy4vX2RhdGVpbnB1dCcpO1xuY29uc3QgZGF0ZW91dHB1dCA9IHJlcXVpcmUoJy4vX2RhdGVvdXRwdXQnKTtcbmNvbnN0IGhlYWRlciA9IHJlcXVpcmUoJy4vX2hlYWRlcicpO1xuY29uc3QgaW5kaWNhdG9yID0gcmVxdWlyZSgnLi9faW5kaWNhdG9yJyk7XG5jb25zdCBwcmljZWxpc3QgPSByZXF1aXJlKCcuL19wcmljZWxpc3QnKTtcbmNvbnN0IG51bWJlciA9IHJlcXVpcmUoJy4vX251bWJlcicpO1xuY29uc3Qgc2VwYXJhdG9yID0gcmVxdWlyZSgnLi9fc2VwYXJhdG9yJyk7XG5jb25zdCBzdWJoZWFkID0gcmVxdWlyZSgnLi9fc3ViaGVhZCcpO1xuY29uc3Qgc3VtID0gcmVxdWlyZSgnLi9fc3VtJyk7XG5cbmNvbnN0IGFsbCA9IHtcbiAgZGF0ZWlucHV0LFxuICBkYXRlb3V0cHV0LFxuICBoZWFkZXIsXG4gIGluZGljYXRvcixcbiAgcHJpY2VsaXN0LFxuICBudW1iZXIsXG4gIHNlcGFyYXRvcixcbiAgc3ViaGVhZCxcbiAgc3VtLFxufTtcblxuZnVuY3Rpb24gY3JlYXRlKHR5cGUsIGRhdGEpIHtcbiAgY29uc3QgYmxvY2sgPSBhbGxbdHlwZV0uYXNzZW1ibGUoKTtcbiAgaWYgKGRhdGEpIGZpbGwoYmxvY2ssIGRhdGEpO1xuICBpZiAoYWxsW3R5cGVdLnVwZGF0ZSkgYWxsW3R5cGVdLnVwZGF0ZShibG9jayk7XG4gIGF1dG9zaXplKGJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJykpO1xuICByZXR1cm4gYmxvY2s7XG59XG5cbmZ1bmN0aW9uIHBvbGwod3JhcHBlcikge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IHdyYXBwZXIuZGF0YXNldC50eXBlLFxuICAgIGRhdGE6IHtcbiAgICAgIGlucHV0czogcG9sbEZpZWxkVHlwZSh3cmFwcGVyLCAnLmluJyksXG4gICAgICBkZXNjcmlwdGlvbnM6IHBvbGxGaWVsZFR5cGUod3JhcHBlciwgJy5kZXNjJyksXG4gICAgICBuYW1lczogcG9sbE5hbWVzKHdyYXBwZXIpLFxuICAgICAgZm9ybXVsYXM6IHBvbGxGb3JtdWxhcyh3cmFwcGVyKSxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBwb2xsRmllbGRUeXBlKHdyYXBwZXIsIGZpZWxkTmFtZSkge1xuICByZXR1cm4gYWxsQXJyYXkod3JhcHBlciwgZmllbGROYW1lKS5tYXAoZWwgPT4gZmllbGRzLnJlYWQoZWwpKTtcbn1cblxuZnVuY3Rpb24gcG9sbE5hbWVzKHdyYXBwZXIpIHtcbiAgcmV0dXJuIGFsbEFycmF5KHdyYXBwZXIsICcubmFtZS1zZXR0ZXInKS5tYXAoZWwgPT4gZWwudmFsdWUpO1xufVxuXG5mdW5jdGlvbiBwb2xsRm9ybXVsYXMod3JhcHBlcikge1xuICByZXR1cm4gYWxsQXJyYXkod3JhcHBlciwgJy5mb3JtdWxhLXNldHRlcicpLm1hcChlbCA9PiBlbC52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGZpbGwod3JhcHBlciwgZGF0YSkge1xuICBmaWxsRmllbGRUeXBlKHdyYXBwZXIsICcuaW4nLCBkYXRhLmlucHV0cyk7XG4gIGZpbGxGaWVsZFR5cGUod3JhcHBlciwgJy5kZXNjJywgZGF0YS5kZXNjcmlwdGlvbnMpO1xuICBmaWxsTmFtZXMod3JhcHBlciwgZGF0YS5uYW1lcyk7XG4gIGZpbGxGb3JtdWxhcyh3cmFwcGVyLCBkYXRhLmZvcm11bGFzKTtcbn1cblxuZnVuY3Rpb24gZmlsbEZpZWxkVHlwZSh3cmFwcGVyLCBmaWVsZE5hbWUsIGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICBhbGxBcnJheSh3cmFwcGVyLCBmaWVsZE5hbWUpLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGRhdGFbaW5kZXhdKSBmaWVsZHMud3JpdGUoZWwsIGRhdGFbaW5kZXhdKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaWxsTmFtZXMod3JhcHBlciwgZGF0YSkge1xuICBpZiAoZGF0YSkge1xuICAgIGFsbEFycmF5KHdyYXBwZXIsICcubmFtZS1zZXR0ZXInKS5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChkYXRhW2luZGV4XSkge1xuICAgICAgICBlbC52YWx1ZSA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbEZvcm11bGFzKHdyYXBwZXIsIGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICBhbGxBcnJheSh3cmFwcGVyLCAnLmZvcm11bGEtc2V0dGVyJykuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZGF0YVtpbmRleF0pIHtcbiAgICAgICAgZWwudmFsdWUgPSBkYXRhW2luZGV4XTtcbiAgICAgICAgZWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgcG9sbCxcbiAgZmlsbCxcbiAgYWxsLFxufTtcbiIsImNvbnN0IHsgYWxsQXJyYXksIHVwZGF0ZUNhcmRHZW50bHkgfSA9IHJlcXVpcmUoJy4vLi4vdXRpbC5qcycpO1xuY29uc3QgZmllbGRzID0gcmVxdWlyZSgnLi8uLi9maWVsZHMvZmllbGRzJyk7XG5cbmZ1bmN0aW9uIHdyYXAodHlwZSwgaHRtbCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XG4gIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3JpZC14Jyk7XG4gIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZ3JpZC1tYXJnaW4teCcpO1xuICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2Jsb2NrJyk7XG4gIHdyYXBwZXIuZGF0YXNldC50eXBlID0gdHlwZTtcbiAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKGBibG9jay0ke3R5cGV9YCk7XG4gIHdyYXBwZXIuaW5uZXJIVE1MID0gaHRtbDtcbiAgY29uc3QgdG9vbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgdG9vbHMuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICB0b29scy5jbGFzc0xpc3QuYWRkKCdibG9jay10b29scycpO1xuICB0b29scy5pbm5lckhUTUwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImV4dGVybmFsLXRvb2xzXCI+XG4gICAgICA8YSBjbGFzcz1cImFkZEJsb2NrIHRvb2xcIj48aSBjbGFzcz1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9hPlxuICAgICAgPGEgY2xhc3M9XCJzd2FwQmxvY2tzIHRvb2xcIj48aSBjbGFzcz1cImZhIGZhLWFycm93LXVwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctZG93blwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+XG4gICAgPC9kaXY+XG4gICAgPHAgY2xhc3M9XCJpbnRlcm5hbC10b29sc1wiPiR7dHlwZX0gPGEgY2xhc3M9XCJyZW1vdmVCbG9jayB0b29sXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+PC9wPmA7XG4gIHdyYXBwZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgdG9vbHMpO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gaW5pdCh3cmFwcGVyLCB1cGRhdGUpIHtcbiAgT2JqZWN0LmtleXMoZmllbGRzLmFsbCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgYWxsQXJyYXkod3JhcHBlciwgYC4ke2tleX1gKS5mb3JFYWNoKGVsID0+IGZpZWxkcy5hbGxba2V5XS5pbml0KGVsKSk7XG4gIH0pO1xuICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2V4dGVybmFsVXBkYXRlJywgKCkgPT4ge1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSh3cmFwcGVyKTtcbiAgfSk7XG4gIGFsbEFycmF5KHdyYXBwZXIsICcuaW4nKS5mb3JFYWNoKGVsID0+IGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIGlmICh1cGRhdGUpIHVwZGF0ZSh3cmFwcGVyKTtcbiAgICB1cGRhdGVDYXJkR2VudGx5KCk7XG4gIH0pKTtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgd3JhcCwgaW5pdCB9O1xuIiwiY29uc3QgeyBhY3RpdmF0ZSB9ID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGluaXQoZWwpIHtcbiAgYWN0aXZhdGUoZWwsICdib29sJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWQoZWwpIHtcbiAgcmV0dXJuIGVsLnZhbHVlID09PSAndHJ1ZSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGVsLCB2YWwpIHtcbiAgZWwudmFsdWUgPSB2YWw7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXQsIHJlYWQsIHdyaXRlIH07XG4iLCJjb25zdCB7IGFjdGl2YXRlIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xuY29uc3QgUGlrYWRheSA9IHJlcXVpcmUoJ3Bpa2FkYXknKTtcblxuZnVuY3Rpb24gaW5pdChlbCkge1xuICBhY3RpdmF0ZShlbCwgJ2RhdGUnKTtcbiAgZGVjb3JhdGUoZWwpO1xufVxuXG5mdW5jdGlvbiBkZWNvcmF0ZShlbCkge1xuICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbicpKSB7XG4gICAgbmV3IFBpa2FkYXkoe1xuICAgICAgZmllbGQ6IGVsLFxuICAgICAgZm9ybWF0OiAnRC4gTS4gWVlZWScsXG4gICAgICBmaXJzdERheTogMSxcbiAgICAgIG9uU2VsZWN0OiAoKSA9PiBlbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnKSksXG4gICAgICBpMThuOiB7XG4gICAgICAgIHByZXZpb3VzTW9udGg6ICdQxZllZGNob3rDrSBtxJtzw61jJyxcbiAgICAgICAgbmV4dE1vbnRoOiAnTsOhc2xlZHVqw61jw60gbcSbc8OtYycsXG4gICAgICAgIG1vbnRoczogWydsZWRlbicsICfDum5vcicsICdixZllemVuJywgJ2R1YmVuJywgJ2t2xJt0ZW4nLCAnxI1lcnZlbicsICfEjWVydmVuZWMnLCAnc3JwZW4nLCAnesOhxZnDrScsICfFmcOtamVuJywgJ2xpc3RvcGFkJywgJ3Byb3NpbmVjJ10sXG4gICAgICAgIHdlZWtkYXlzOiBbJ05lZMSbbGUnLCAnUG9uZMSbbMOtJywgJ8OadGVyw70nLCAnU3TFmWVkYScsICfEjHR2cnRlaycsICdQw6F0ZWsnLCAnU29ib3RhJ10sXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6IFsnTmUnLCAnUG8nLCAnw5p0JywgJ1N0JywgJ8SMdCcsICdQw6EnLCAnU28nXSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gbW9tZW50KGVsLnZhbHVlLCAnRC4gTS4gWVlZWScpO1xufVxuXG5mdW5jdGlvbiB3cml0ZShlbCwgdmFsKSB7XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGVsLnZhbHVlID0gbW9tZW50KHZhbCkuZm9ybWF0KCdELiBNLiBZWVlZJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsLmZvcm1hdCA9PT0gbW9tZW50LnByb3RvdHlwZS5mb3JtYXQpIHtcbiAgICBlbC52YWx1ZSA9IHZhbC5mb3JtYXQoJ0QuIE0uIFlZWVknKTtcbiAgfVxufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBpbml0LCByZWFkLCB3cml0ZSB9O1xuIiwiZnVuY3Rpb24gaW5pdChlbCkge1xuICBlbC5kYXRhc2V0LmZpZWxkTmFtZSA9ICdkZXNjJztcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwuaW5uZXJIVE1MO1xufVxuXG5mdW5jdGlvbiB3cml0ZShlbCwgdmFsKSB7XG4gIGVsLmlubmVySFRNTCA9IHZhbDtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgaW5pdCwgcmVhZCwgd3JpdGUgfTtcbiIsImNvbnN0IHsgYWN0aXZhdGUgfSA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5mdW5jdGlvbiBpbml0KGVsKSB7XG4gIGVsLmRhdGFzZXQuaXNGbG9hdCA9IGVsLmNsYXNzTGlzdC5jb250YWlucygnZmxvYXQnKSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gIGFjdGl2YXRlKGVsLCAnbnVtYmVyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWQoZWwpIHtcbiAgcmV0dXJuIHBhcnNlTnVtYmVyKGVsLCBlbC52YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGVsLCB2YWwpIHtcbiAgZWwudmFsdWUgPSBwYXJzZU51bWJlcihlbCwgdmFsKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VOdW1iZXIoZWwsIHZhbCkge1xuICBjb25zdCBudW1lcmljID0gZWwuZGF0YXNldC5pc0Zsb2F0ID09PSAndHJ1ZSdcbiAgICA/IHBhcnNlRmxvYXQodmFsLCAxMClcbiAgICA6IHBhcnNlSW50KHZhbCwgMTApO1xuICByZXR1cm4gTnVtYmVyLmlzTmFOKG51bWVyaWMpID8gMCA6IG51bWVyaWM7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXQsIHJlYWQsIHdyaXRlIH07XG4iLCJjb25zdCB7IGFjdGl2YXRlIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZnVuY3Rpb24gaW5pdChlbCkge1xuICBhY3RpdmF0ZShlbCwgJ3RleHQnKTtcbn1cblxuZnVuY3Rpb24gcmVhZChlbCkge1xuICByZXR1cm4gZWwudmFsdWU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKGVsLCB2YWwpIHtcbiAgZWwudmFsdWUgPSB2YWw7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGluaXQsIHJlYWQsIHdyaXRlIH07XG4iLCJjb25zdCBib29sID0gcmVxdWlyZSgnLi9fYm9vbCcpO1xuY29uc3QgZGF0ZSA9IHJlcXVpcmUoJy4vX2RhdGUnKTtcbmNvbnN0IGRlc2MgPSByZXF1aXJlKCcuL19kZXNjJyk7XG5jb25zdCBudW1iZXIgPSByZXF1aXJlKCcuL19udW1iZXInKTtcbmNvbnN0IHRleHQgPSByZXF1aXJlKCcuL190ZXh0Jyk7XG5cbmNvbnN0IGFsbCA9IHtcbiAgYm9vbCxcbiAgZGF0ZSxcbiAgZGVzYyxcbiAgbnVtYmVyLFxuICB0ZXh0LFxufTtcblxuZnVuY3Rpb24gcmVhZChhY3RpdmVGaWVsZCkge1xuICByZXR1cm4gYWxsW2FjdGl2ZUZpZWxkLmRhdGFzZXQuZmllbGROYW1lXS5yZWFkKGFjdGl2ZUZpZWxkKTtcbn1cblxuZnVuY3Rpb24gd3JpdGUoYWN0aXZlRmllbGQsIHZhbCkge1xuICBhbGxbYWN0aXZlRmllbGQuZGF0YXNldC5maWVsZE5hbWVdLndyaXRlKGFjdGl2ZUZpZWxkLCB2YWwpO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyByZWFkLCB3cml0ZSwgYWxsIH07XG4iLCJmdW5jdGlvbiBhY3RpdmF0ZShlbCwgZmllbGROYW1lKSB7XG4gIGNvbnN0IHdyYXBwZXIgPSBjZWwoJ0RJVicsIFsna2V5LXdyYXBwZXInLCAnaW5wdXQtZ3JvdXAnXSk7XG5cbiAgLy8gd3JhcHBlci5hcHBlbmRDaGlsZCh0eXBlKTtcbiAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnbmFtZScpKSB7XG4gICAgY29uc3QgbGFiZWwgPSBjZWwoJ1NQQU4nLCBbJ2lucHV0LWdyb3VwLWxhYmVsJ10sICc8aSBjbGFzcz1cImZhIGZhLXRhZ1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBjb25zdCBuYW1lID0gY2VsKCdJTlBVVCcsIFsnbmFtZS1zZXR0ZXInLCAnaW5wdXQtZ3JvdXAtZmllbGQnXSk7XG4gICAgbmFtZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IG5hbWVJbnB1dChlbCwgbmFtZS52YWx1ZSkpO1xuICAgIG5hbWUuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICduw6F6ZXYnKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG5hbWUpO1xuICB9XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ291dCcpKSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICB9XG4gIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm11bGEnKSkge1xuICAgIGNvbnN0IGxhYmVsID0gY2VsKCdTUEFOJywgWydpbnB1dC1ncm91cC1sYWJlbCddLCAnJmZub2Y7Jyk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgY29uc3QgZm9ybXVsYSA9IGNlbCgnSU5QVVQnLCBbJ2Zvcm11bGEtc2V0dGVyJywgJ2lucHV0LWdyb3VwLWZpZWxkJ10pO1xuICAgIGZvcm11bGEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiBhcHBlbmRGb3JtdWxhKGVsLCBmb3JtdWxhLnZhbHVlKSk7XG4gICAgZm9ybXVsYS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ3Z6b3JlYycpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZm9ybXVsYSk7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICB9XG4gIGVsLmRhdGFzZXQuZmllbGROYW1lID0gZmllbGROYW1lO1xuICBlbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgd3JhcHBlcik7XG59XG5cbmZ1bmN0aW9uIGNlbChuYW1lLCBjbGFzc05hbWVzLCBodG1sKSB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbiAgaWYgKGNsYXNzTmFtZXMpIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbGFzc05hbWVzLmpvaW4oJyAnKSk7XG4gIGlmIChodG1sKSBlbC5pbm5lckhUTUwgPSBodG1sO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5hbWVJbnB1dChlbCwgbmFtZSkge1xuICBlbC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBuYW1lKTtcbn1cblxuZnVuY3Rpb24gYXBwZW5kRm9ybXVsYShlbCwgZm9ybXVsYSkge1xuICBlbC5kYXRhc2V0LmZvcm11bGEgPSBmb3JtdWxhO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBhY3RpdmF0ZSB9O1xuIiwiY29uc3QgdWkgPSByZXF1aXJlKCcuL3VpJyk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIHJ1bigpO1xufSk7XG5cbmZ1bmN0aW9uIHJ1bigpIHtcbiAgdWkuaW5pdCgpO1xufVxuIiwiY29uc3QgZmlsZVNhdmVyID0gcmVxdWlyZSgnZmlsZS1zYXZlcicpO1xuXG5mdW5jdGlvbiB3cmFwRXhwb3J0KHRpdGxlLCBkYXRhKSB7XG4gIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgY29uc3QgdXJsID0gJ2h0dHBzOi8vamFuLW1hcnRpbmVrLmdpdGh1Yi5pby9wbGFuY2FyZHMvJztcbiAgcmV0dXJuIGA8IURPQ1RZUEUgaHRtbD5cbiAgPGh0bWw+XG4gIDxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgIDx0aXRsZT5VbG/FvmVuw6Ega2FydGEgXCIke3RpdGxlfVwiPC90aXRsZT5cbiAgPC9oZWFkPlxuICA8Ym9keT5cbiAgICA8aDE+VG90byBqZSB1bG/FvmVuw6Ega2FydGEgXCIke3RpdGxlfVwiLjwvaDE+XG4gICAgPHA+XG4gICAgICBPYnNhaCBrYXJ0eSBtxa/FvmV0ZSBvdGV2xZnDrXQgYSB1cHJhdm92YXRcbiAgICAgIDxhIGhyZWY9XCIke3VybH1cIj5uYSB3ZWJ1IFBsw6Fub3ZhY8OtY2gga2FyZXQ8L2E+LlxuICAgIDwvcD5cbiAgICA8IS0tICEhISR7anNvbn0hISEgLS0+XG4gIDwvYm9keT5cbiAgPC9odG1sPmA7XG59XG5cbmZ1bmN0aW9uIHVud3JhcEV4cG9ydChodG1sKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSAvPCEtLSAhISEoW1xcU1xcc10rKSEhISAtLT4vLmV4ZWMoaHRtbCk7XG4gIGlmIChtYXRjaGVzKSByZXR1cm4gSlNPTi5wYXJzZShtYXRjaGVzWzFdKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBleHBvcnRDYXJkKHRpdGxlLCBkYXRhKSB7XG4gIGNvbnN0IGNvbnRlbnRzID0gd3JhcEV4cG9ydCh0aXRsZSwgZGF0YSk7XG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudHNdLCB7IHR5cGU6ICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnIH0pO1xuICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICBmaWxlU2F2ZXIuc2F2ZUFzKGJsb2IsIGAke3RpdGxlfS0ke3RvZGF5fS5odG1sYCk7XG59XG5cbmZ1bmN0aW9uIGltcG9ydENhcmRGcm9tRmlsZShmaWxlLCBjYWxsYmFjaykge1xuICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgcmVhZGVyLm9ubG9hZCA9IGUgPT4gY2FsbGJhY2sodW53cmFwRXhwb3J0KGUudGFyZ2V0LnJlc3VsdCkpO1xufVxuXG5mdW5jdGlvbiBpbXBvcnRDYXJkRnJvbVVybCh1cmwsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICByZXF1ZXN0LnNlbmQoKTtcbiAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCAmJiByZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBjYWxsYmFjayh1bndyYXBFeHBvcnQocmVxdWVzdC5yZXNwb25zZVRleHQpKTtcbiAgICB9XG4gIH07XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7IGltcG9ydENhcmRGcm9tRmlsZSwgaW1wb3J0Q2FyZEZyb21VcmwsIGV4cG9ydENhcmQgfTtcbiIsImNvbnN0IHF1ZXJ5U3RyaW5nID0gcmVxdWlyZSgncXVlcnktc3RyaW5nJyk7XG5jb25zdCBibG9ja3MgPSByZXF1aXJlKCcuL2Jsb2Nrcy9ibG9ja3MnKTtcbmNvbnN0IHN0b3JlID0gcmVxdWlyZSgnLi9zdG9yZScpO1xuY29uc3QgeyBhbGxBcnJheSwgZmluZEFuY2VzdG9yLCB1cGRhdGVDYXJkIH0gPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuLy8gZGFzaGJvYXJkIC8gY2FyZFxuZnVuY3Rpb24gY2xvc2VDYXJkKCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpLmlubmVySFRNTCA9ICcnO1xuICBzaG93RGFzaGJvYXJkKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dEYXNoYm9hcmQoKSB7XG4gIHNldERpc3BsYXkoJ2NhcmQnLCAnbm9uZScpO1xuICBzZXREaXNwbGF5KCd0b29sYmFyJywgJ25vbmUnKTtcbiAgc2V0RGlzcGxheSgnZGFzaGJvYXJkJywgJ2ZsZXgnKTtcbn1cblxuZnVuY3Rpb24gc2hvd0NhcmQoKSB7XG4gIHNldERpc3BsYXkoJ2NhcmQnLCAnYmxvY2snKTtcbiAgc2V0RGlzcGxheSgndG9vbGJhcicsICdmbGV4Jyk7XG4gIHNldERpc3BsYXkoJ2Rhc2hib2FyZCcsICdub25lJyk7XG59XG5cbmZ1bmN0aW9uIHNldERpc3BsYXkoaWQsIHZhbCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9IHZhbDtcbn1cblxuLy8gZWRpdCAvIGZpbGwgbW9kZVxuZnVuY3Rpb24gaW5pdE1vZGUoKSB7XG4gIHRvZ2dsZU1vZGUoJ2ZpbGwnKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGUtdG9nZ2xlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVNb2RlKTtcbn1cblxuXG5jb25zdCBtb2RlSW5pdGlhbGl6YXRpb25zID0ge1xuICBlZGl0OiAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmaWxsLW1vZGUnKTtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2VkaXQtbW9kZScpO1xuICAgIGFsbEFycmF5KGRvY3VtZW50LmJvZHksICcuZGVzYycpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICd0cnVlJyk7XG4gICAgfSk7XG4gIH0sXG4gIGZpbGw6ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2VkaXQtbW9kZScpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZmlsbC1tb2RlJyk7XG4gICAgYWxsQXJyYXkoZG9jdW1lbnQuYm9keSwgJy5kZXNjJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyk7XG4gICAgfSk7XG4gICAgdXBkYXRlQ2FyZCgpO1xuICB9LFxufTtcblxuZnVuY3Rpb24gdG9nZ2xlTW9kZShtb2RlKSB7XG4gIGNvbnN0IGRldGVjdGVkTW9kZSA9IHR5cGVvZiBtb2RlID09PSAnc3RyaW5nJ1xuICAgID8gbW9kZVxuICAgIDogZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2ZpbGwtbW9kZScpXG4gICAgICA/ICdlZGl0J1xuICAgICAgOiAnZmlsbCc7XG5cbiAgbW9kZUluaXRpYWxpemF0aW9uc1tkZXRlY3RlZE1vZGVdKCk7XG59XG5cblxuLy8gYmxvY2sgdG9vbHNcbmNvbnN0IGJsb2NrQWN0aW9ucyA9IHtcbiAgc3dhcEJsb2NrczogKGJ1dHRvbikgPT4ge1xuICAgIGNvbnN0IGJsb2NrID0gZmluZEFuY2VzdG9yKGJ1dHRvbiwgJ2Jsb2NrJyk7XG4gICAgY29uc3QgcHJldmlvdXMgPSBibG9jay5wcmV2aW91c1NpYmxpbmc7XG4gICAgaWYgKHByZXZpb3VzKSBibG9jay5wYXJlbnROb2RlLmluc2VydEJlZm9yZShibG9jaywgcHJldmlvdXMpO1xuICB9LFxuICByZW1vdmVCbG9jazogKGJ1dHRvbikgPT4ge1xuICAgIGNvbnN0IGJsb2NrID0gZmluZEFuY2VzdG9yKGJ1dHRvbiwgJ2Jsb2NrJyk7XG4gICAgYmxvY2sucmVtb3ZlKCk7XG4gIH0sXG4gIGFkZEJsb2NrOiAoYnV0dG9uKSA9PiB7XG4gICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW5lZCcpKSB7XG4gICAgICBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2stdG9vbHMnKS5xdWVyeVNlbGVjdG9yKCcuYWRkLWJsb2NrLXRvb2wnKS5yZW1vdmUoKTtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdG9vbHMgPSBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2stdG9vbHMnKTtcbiAgICAgIHRvb2xzLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlZW5kJywgY3JlYXRlQWRkQmxvY2tUb29sKCkpO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICAgIH1cbiAgfSxcbiAgYWRkQmxvY2tUeXBlOiAoYnV0dG9uKSA9PiB7XG4gICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoYnV0dG9uLCAnYmxvY2snKTtcbiAgICBjb25zdCBuZXdCbG9jayA9IGJsb2Nrcy5jcmVhdGUoYnV0dG9uLmRhdGFzZXQudHlwZSk7XG4gICAgYmxvY2suaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIG5ld0Jsb2NrKTtcbiAgICB0b2dnbGVNb2RlKCdlZGl0Jyk7IC8vIGluaXRzIGVkaXQgbW9kZSBvbiBibG9ja1xuICAgIGZpbmRBbmNlc3RvcihidXR0b24sICdibG9jay10b29scycpLnF1ZXJ5U2VsZWN0b3IoJy5hZGRCbG9jaycpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIGZpbmRBbmNlc3RvcihidXR0b24sICdhZGQtYmxvY2stdG9vbCcpLnJlbW92ZSgpO1xuICB9LFxufTtcblxuZnVuY3Rpb24gY3JlYXRlQWRkQmxvY2tUb29sKCkge1xuICBjb25zdCBhZGRCbG9ja1Rvb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcbiAgYWRkQmxvY2tUb29sLmNsYXNzTGlzdC5hZGQoJ2FkZC1ibG9jay10b29sJyk7XG4gIGFkZEJsb2NrVG9vbC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cImFycm93LXVwXCI+PC9kaXY+PGRpdiBjbGFzcz1cImNvbnRlbnRcIj48L2Rpdj4nO1xuICBPYmplY3Qua2V5cyhibG9ja3MuYWxsKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBjb25zdCBibG9ja0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdBJyk7XG4gICAgYmxvY2tMaW5rLmNsYXNzTGlzdC5hZGQoJ3Rvb2wnKTtcbiAgICBibG9ja0xpbmsuY2xhc3NMaXN0LmFkZCgnYWRkQmxvY2tUeXBlJyk7XG4gICAgYmxvY2tMaW5rLmRhdGFzZXQudHlwZSA9IGtleTtcbiAgICBibG9ja0xpbmsuaW5uZXJIVE1MID0ga2V5O1xuICAgIGFkZEJsb2NrVG9vbC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLmFwcGVuZENoaWxkKGJsb2NrTGluayk7XG4gIH0pO1xuICByZXR1cm4gYWRkQmxvY2tUb29sO1xufVxuXG5mdW5jdGlvbiBpbml0QmxvY2tUb29scygpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgYnV0dG9uID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b29sJylcbiAgICAgID8gZS50YXJnZXRcbiAgICAgIDogZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3Rvb2wnKVxuICAgICAgICA/IGUudGFyZ2V0LnBhcmVudE5vZGVcbiAgICAgICAgOiBudWxsO1xuICAgIGlmIChidXR0b24pIHtcbiAgICAgIE9iamVjdC5rZXlzKGJsb2NrQWN0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKGtleSkpIGJsb2NrQWN0aW9uc1trZXldKGJ1dHRvbik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBwcmVwIERPTSBhbmQgYWRkIGxpc3RlbmVycyB0byB1aVxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgaW5pdE1vZGUoKTtcbiAgaW5pdEltcG9ydENhcmQoKTtcbiAgaW5pdEV4cG9ydENhcmQoKTtcbiAgaW5pdEJsb2NrVG9vbHMoKTtcbiAgaW5pdENsb3NlQ2FyZCgpO1xuICBwcmV2ZW50U3VibWl0KCk7XG4gIHNob3dEYXNoYm9hcmQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdEV4cG9ydENhcmQoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IG5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiX2FjdGl2aXR5LW5hbWVcIl0nKTtcbiAgICBjb25zdCBuYW1lID0gKG5hbWVFbCAmJiBuYW1lRWwudmFsdWUpID8gbmFtZUVsLnZhbHVlIDogJ2thcnRhJztcbiAgICBzdG9yZS5leHBvcnRDYXJkKG5hbWUsIHBvbGxEYXRhKCkpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlQmxhbmsnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmQtbmFtZScpO1xuICAgIGNvbnN0IG5hbWUgPSAobmFtZUVsICYmIG5hbWVFbC5pbm5lckhUTUwpID8gbmFtZUVsLmlubmVySFRNTCA6ICfFoWFibG9uYSc7XG4gICAgc3RvcmUuZXhwb3J0Q2FyZChuYW1lLCBwb2xsRGF0YSh0cnVlKSk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcG9sbERhdGEoZW1wdHkpIHtcbiAgY29uc3QgY2FyZEV4cG9ydCA9IFtdO1xuICBhbGxBcnJheShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpLCAnLmJsb2NrJykuZm9yRWFjaCgoYmxvY2spID0+IHtcbiAgICBjb25zdCBpbmZvID0gYmxvY2tzLnBvbGwoYmxvY2spO1xuICAgIGlmIChlbXB0eSkgaW5mby5kYXRhLmlucHV0cyA9IFtdO1xuICAgIGNhcmRFeHBvcnQucHVzaChpbmZvKTtcbiAgfSk7XG4gIHJldHVybiBjYXJkRXhwb3J0O1xufVxuXG5mdW5jdGlvbiBpbml0SW1wb3J0Q2FyZCgpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRGcm9tRmlsZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgc3RvcmUuaW1wb3J0Q2FyZEZyb21GaWxlKGUudGFyZ2V0LmZpbGVzWzBdLCBsb2FkQ2FyZCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbiAgY29uc3QgcXVlcnkgPSBxdWVyeVN0cmluZy5wYXJzZSh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgaWYgKHF1ZXJ5LmNhcmR1cmwpIHN0b3JlLmltcG9ydENhcmRGcm9tVXJsKHF1ZXJ5LmNhcmR1cmwsIGxvYWRDYXJkKTtcbn1cblxuZnVuY3Rpb24gbG9hZENhcmQoZGF0YSkge1xuICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgZGF0YS5mb3JFYWNoKChibG9jaykgPT4ge1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJsb2Nrcy5jcmVhdGUoYmxvY2sudHlwZSwgYmxvY2suZGF0YSkpO1xuICB9KTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQnKS5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gIHNob3dDYXJkKCk7XG4gIHVwZGF0ZUNhcmQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdENsb3NlQ2FyZCgpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNsb3NlQ2FyZCgpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHByZXZlbnRTdWJtaXQoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXJkJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0geyBpbml0IH07XG4iLCJjb25zdCBmaWVsZHMgPSByZXF1aXJlKCcuL2ZpZWxkcy9maWVsZHMnKTtcbmNvbnN0IHBhcnNlciA9IHJlcXVpcmUoJ2V4cHItZXZhbCcpLlBhcnNlcjtcbmNvbnN0IGF1dG9zaXplID0gcmVxdWlyZSgnYXV0b3NpemUnKTtcblxubGV0IHRpbWVyO1xuXG5mdW5jdGlvbiBtYWtlQXJyYXkobm9kZWxpc3QpIHtcbiAgcmV0dXJuIFtdLnNsaWNlLmNhbGwobm9kZWxpc3QpO1xufVxuXG5mdW5jdGlvbiBhbGxBcnJheShlbCwgcXVlcnkpIHtcbiAgcmV0dXJuIG1ha2VBcnJheShlbC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSk7XG59XG5cbmZ1bmN0aW9uIGZpbmRBbmNlc3RvcihlbCwgY2xhc3NOYW1lKSB7XG4gIGNvbnN0IHBhcmVudCA9IGVsLnBhcmVudEVsZW1lbnQ7XG5cbiAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIHBhcmVudDtcbiAgcmV0dXJuIGZpbmRBbmNlc3RvcihwYXJlbnQsIGNsYXNzTmFtZSk7XG59XG5cblxuY29uc3QgY3VzdG9tRnVuY3Rpb25zID0ge1xuICBkYXlzQWZ0ZXI6IChkYXRlLCBkYXlzKSA9PiBkYXRlLmNsb25lKCkuYWRkKGRheXMsICdkYXlzJyksXG4gIGRheXNCZWZvcmU6IChkYXRlLCBkYXlzKSA9PiBkYXRlLmNsb25lKCkuc3VidHJhY3QoZGF5cywgJ2RheXMnKSxcbn07XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcmQoKSB7XG4gIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZCcpO1xuICBjb25zdCB2YXJpYWJsZXMgPSBPYmplY3QuYXNzaWduKHt9LCBjb2xsZWN0VmFyaWFibGVzKGNhcmQpLCBjdXN0b21GdW5jdGlvbnMpO1xuICB1cGRhdGVGb3JtdWxhUmVzdWx0cyhjYXJkLCB2YXJpYWJsZXMpO1xuICBhdXRvc2l6ZS51cGRhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcmRHZW50bHkoKSB7XG4gIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIHRpbWVyID0gc2V0VGltZW91dCh1cGRhdGVDYXJkLCAxODApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVGb3JtdWxhUmVzdWx0cyhjYXJkLCB2YXJpYWJsZXMpIHtcbiAgYWxsQXJyYXkoY2FyZCwgJy5mb3JtdWxhJykuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBpZiAoZWwuZGF0YXNldC5mb3JtdWxhKSB7XG4gICAgICBmaWVsZHMud3JpdGUoZWwsIHBhcnNlci5ldmFsdWF0ZShlbC5kYXRhc2V0LmZvcm11bGEsIHZhcmlhYmxlcykpO1xuICAgICAgY29uc3QgYmxvY2sgPSBmaW5kQW5jZXN0b3IoZWwsICdibG9jaycpO1xuICAgICAgYmxvY2suZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2V4dGVybmFsVXBkYXRlJykpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RWYXJpYWJsZXMoY2FyZCkge1xuICByZXR1cm4gYWxsQXJyYXkoY2FyZCwgJ1tuYW1lXScpLnJlZHVjZSgoYWNjLCBlbCkgPT4ge1xuICAgIGFjY1tlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSBmaWVsZHMucmVhZChlbCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhbGxBcnJheSwgZmluZEFuY2VzdG9yLCB1cGRhdGVDYXJkLCB1cGRhdGVDYXJkR2VudGx5LFxufTtcbiJdfQ==\n"]}